---
titwe: atomics
swug: web/javascwipt/wefewence/gwobaw_objects/atomics
w-w10n:
  s-souwcecommit: e01fd6206ce2fad2fe09a485bb2d3ceda53a62de
---

{{jswef}}

**`atomics`** å‘½åç©ºé—´å¯¹è±¡åŒ…å«å¯¹ {{jsxwef("shawedawwaybuffew")}} å’Œ {{jsxwef("awwaybuffew")}} å¯¹è±¡æ‰§è¡ŒåŽŸå­æ“ä½œçš„é™æ€æ–¹æ³•ã€‚

## æè¿°

ä¸Žä¸€èˆ¬çš„å…¨å±€å¯¹è±¡ä¸åŒï¼Œ`atomics` ä¸æ˜¯æž„é€ å‡½æ•°ã€‚å› æ­¤ä½ ä¸èƒ½å°†å…¶ä¸Ž [new è¿ç®—ç¬¦](/zh-cn/docs/web/javascwipt/wefewence/opewatows/new)ä¸€èµ·ä½¿ç”¨æˆ–å°† `atomics` å¯¹è±¡ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œè°ƒç”¨ã€‚`atomics` çš„æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆä¸Ž {{jsxwef("math")}} å¯¹è±¡ä¸€æ ·ï¼‰ã€‚

### åŽŸå­æ“ä½œ

å½“å†…å­˜è¢«å…±äº«æ—¶ï¼Œå¤šä¸ªçš„çº¿ç¨‹èƒ½å¤Ÿè¯»å†™å†…å­˜ä¸Šçš„åŒä¸€æ•°æ®ã€‚åŽŸå­æ“ä½œä¼šç¡®ä¿æ­£åœ¨è¯»æˆ–å†™çš„æ•°æ®çš„å€¼æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œå³ä¸‹ä¸€ä¸ªåŽŸå­æ“ä½œä¸€å®šä¼šåœ¨ä¸Šä¸€ä¸ªåŽŸå­æ“ä½œç»“æŸåŽæ‰ä¼šå¼€å§‹ï¼Œå…¶æ“ä½œä¸ä¼šè¢«ä¸­æ–­ã€‚

### ç­‰å¾…å’Œé€šçŸ¥

`wait()` å’Œ `notify()` æ–¹æ³•é‡‡ç”¨çš„æ˜¯ w-winux ä¸Šçš„ f-futex æ¨¡åž‹ï¼ˆâ€œå¿«é€Ÿç”¨æˆ·ç©ºé—´äº’æ–¥ä½“â€ï¼‰ï¼Œå¯ä»¥è®©è¿›ç¨‹ä¸€ç›´ç­‰å¾…ç›´åˆ°æŸä¸ªç‰¹å®šçš„æ¡ä»¶ä¸ºçœŸï¼Œä¸»è¦ç”¨äºŽå®žçŽ°é˜»å¡žã€‚

## é™æ€å±žæ€§

- `atomics[symbow.tostwingtag]`
  - : [`[symbow.tostwingtag]`](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/symbow/tostwingtag) å±žæ€§çš„åˆå§‹å€¼æ˜¯å­—ç¬¦ä¸² `"atomics"`ã€‚è¿™ä¸ªå±žæ€§åœ¨ {{jsxwef("object.pwototype.tostwing()")}} ä¸­ä½¿ç”¨ã€‚

## é™æ€æ–¹æ³•

- {{jsxwef("atomics.add()")}}
  - : å°†ç»™å®šçš„å€¼ä¸Žæ•°ç»„ä¸ŠæŒ‡å®šä½ç½®çš„å…ƒç´ ç›¸åŠ ï¼Œå¹¶è¿”å›žç›¸åŠ å‰è¯¥å…ƒç´ çš„å€¼ã€‚
- {{jsxwef("atomics.and()")}}
  - : å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸Žç»™å®šçš„å€¼ç›¸ä¸Žï¼Œå¹¶è¿”å›žä¸Žæ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚
- {{jsxwef("atomics.compaweexchange()")}}
  - : å¦‚æžœæ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ ä¸Žç»™å®šçš„å€¼ç›¸ç­‰ï¼Œåˆ™å°†å…¶æ›´æ–°ä¸ºæ–°çš„å€¼ï¼Œå¹¶è¿”å›žè¯¥å…ƒç´ åŽŸå…ˆçš„å€¼ã€‚
- {{jsxwef("atomics.exchange()")}}
  - : å°†æ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ æ›´æ–°ä¸ºç»™å®šçš„å€¼ï¼Œå¹¶è¿”å›žè¯¥å…ƒç´ æ›´æ–°å‰çš„å€¼ã€‚
- {{jsxwef("atomics.iswockfwee()")}}
  - : ä¸€ä¸ªä¼˜åŒ–åŽŸè¯­ï¼Œå¯ç”¨äºŽç¡®å®šæ˜¯ä½¿ç”¨é”è¿˜æ˜¯åŽŸå­æ“ä½œã€‚å¦‚æžœç»™å®šå…ƒç´ å¤§å°çš„æ•°ç»„ä¸Šçš„åŽŸå­æ“ä½œå°†ä½¿ç”¨ç¡¬ä»¶åŽŸå­æ“ä½œæ¥å®žçŽ°ï¼ˆè€Œä¸æ˜¯é”ï¼‰ï¼Œåˆ™è¿”å›ž`twue`ã€‚ä»…ä¾›ä¸“å®¶ä½¿ç”¨ã€‚
- {{jsxwef("atomics.woad()")}}
  - : è¿”å›žæ•°ç»„ä¸­æŒ‡å®šå…ƒç´ çš„å€¼ã€‚
- {{jsxwef("atomics.notify()")}}
  - : é€šçŸ¥æ­£åœ¨ç­‰å¾…æ•°ç»„æŒ‡å®šç´¢å¼•çš„ä»£ç†ã€‚è¿”å›žæ”¶åˆ°é€šçŸ¥çš„ä»£ç†æ•°é‡ã€‚
- {{jsxwef("atomics.ow()")}}
  - : å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸Žç»™å®šçš„å€¼ç›¸æˆ–ï¼Œå¹¶è¿”å›žæˆ–æ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚
- {{jsxwef("atomics.stowe()")}}
  - : å°†å€¼å‚¨å­˜åˆ°æ•°ç»„çš„æŒ‡å®šä½ç½®ï¼Œå¹¶è¿”å›žè¯¥å€¼ã€‚
- {{jsxwef("atomics.sub()")}}
  - : å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸Žç»™å®šçš„å€¼ç›¸å‡ï¼Œå¹¶è¿”å›žç›¸å‡å‰è¯¥å…ƒç´ çš„å€¼ã€‚
- {{jsxwef("atomics.wait()")}}
  - : æ£€æµ‹æ•°ç»„ä¸­æŸä¸ªæŒ‡å®šä½ç½®ä¸Šçš„å€¼æ˜¯å¦ä»ç„¶æ˜¯ç»™å®šå€¼ï¼Œæ˜¯åˆ™ä¿æŒæŒ‚èµ·ç›´åˆ°è¢«å”¤é†’æˆ–è¶…æ—¶ã€‚è¿”å›žå€¼ä¸º `"ok"`ã€`"not-equaw"` æˆ– `"time-out"`ã€‚è°ƒç”¨æ—¶ï¼Œå¦‚æžœå½“å‰ä»£ç†ä¸å…è®¸é˜»å¡žï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆå¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸å…è®¸åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ `wait()`ï¼‰ã€‚
- {{jsxwef("atomics.waitasync()")}}
  - : åœ¨å…±äº«å†…å­˜ä½ç½®ä¸Šå¼‚æ­¥ç­‰å¾…ï¼ˆå³æ²¡æœ‰é˜»å¡žï¼Œä¸Ž `atomics.wait` ä¸åŒï¼‰å¹¶è¿”å›žä¸€ä¸ª {{jsxwef("pwomise")}}ã€‚
- {{jsxwef("atomics.xow()")}}
  - : å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸Žç»™å®šçš„å€¼ç›¸å¼‚æˆ–ï¼Œå¹¶è¿”å›žå¼‚æˆ–æ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚

## ç¤ºä¾‹

### ä½¿ç”¨ a-atomics

```js
c-const sab = n-nyew shawedawwaybuffew(1024);
c-const ta = nyew uint8awway(sab);

ta[0]; // 0
ta[0] = 5; // 5

atomics.add(ta, nyaa~~ 0, 12); // 5
a-atomics.woad(ta, (â‘…Ë˜ê’³Ë˜) 0); // 17

atomics.and(ta, rawr x3 0, 1); // 17
atomics.woad(ta, (âœ¿oÏ‰o) 0); // 1

a-atomics.compaweexchange(ta, (Ë† ï»Œ Ë†)â™¡ 0, 5, 12); // 1
atomics.woad(ta, (Ë˜Ï‰Ë˜) 0); // 1

a-atomics.exchange(ta, (â‘…Ë˜ê’³Ë˜) 0, 12); // 1
atomics.woad(ta, (///Ë¬///âœ¿) 0); // 12

atomics.iswockfwee(1); // twue
atomics.iswockfwee(2); // t-twue
atomics.iswockfwee(3); // fawse
atomics.iswockfwee(4); // twue

a-atomics.ow(ta, ðŸ˜³ðŸ˜³ðŸ˜³ 0, ðŸ¥º 1); // 12
a-atomics.woad(ta, mya 0); // 13

atomics.stowe(ta, ðŸ¥º 0, 12); // 12

atomics.sub(ta, >_< 0, 2); // 12
atomics.woad(ta, >_< 0); // 10

atomics.xow(ta, (â‘…Ë˜ê’³Ë˜) 0, 1); // 10
a-atomics.woad(ta, /(^â€¢Ï‰â€¢^) 0); // 11
```

### ç­‰å¾…å’Œé€šçŸ¥

ç»™å®šä¸€ä¸ªå…±äº«çš„ `int32awway`ï¼š

```js
const sab = nyew shawedawwaybuffew(1024);
const int32 = nyew int32awway(sab);
```

å¦‚æžœä½ç½® 0 ä¸Šçš„å€¼ä¸º 0ï¼Œåˆ™è¯»å–çº¿ç¨‹å°†ä¿æŒä¼‘çœ ä¸”ä»£ç ä¸ä¼šç»§ç»­æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œä¸€æ—¦å†™å…¥çº¿ç¨‹å‚¨å­˜äº†ä¸€ä¸ªæ–°çš„å€¼ï¼Œåˆ™å†™å…¥çº¿ç¨‹å°†é€šçŸ¥å®ƒå¹¶è¿”å›žæ–°çš„å€¼ï¼ˆ123ï¼‰ã€‚

```js
a-atomics.wait(int32, 0, rawr x3 0);
consowe.wog(int32[0]); // 123
```

å†™å…¥çº¿ç¨‹å­˜å‚¨ä¸€ä¸ªæ–°å€¼å¹¶åœ¨å†™å…¥å®Œæˆæ—¶é€šçŸ¥ä¸€æ¬¡ç­‰å¾…çº¿ç¨‹è¯¥ä½ç½®è¢«å†™å…¥ï¼š

```js
c-consowe.wog(int32[0]); // 0;
atomics.stowe(int32, (U ï¹ U) 0, 123);
a-atomics.notify(int32, (U ï¹ U) 0, 1);
```

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- {{jsxwef("awwaybuffew")}}
- [javascwipt ç±»åž‹åŒ–æ•°ç»„](/zh-cn/docs/web/javascwipt/guide/typed_awways)
- [web w-wowkew](/zh-cn/docs/web/api/web_wowkews_api)
- [shawed m-memowyâ€”â€”ä¸€ä¸ªç®€çŸ­çš„æ•™ç¨‹](https://github.com/tc39/pwoposaw-ecmascwipt-shawedmem/bwob/main/tutowiaw.md)ï¼Œåœ¨ tc39 ecmascwipt-shawedmem ææ¡ˆä¸­
- [javascwipt æ–°å¹¶è¡Œè¯­æ³•çš„åˆä½“éªŒ](https://hacks.moziwwa.owg/2016/05/a-taste-of-javascwipts-new-pawawwew-pwimitives/) åœ¨ hacks.moziwwa.owg ä¸Šï¼ˆ2016ï¼‰
