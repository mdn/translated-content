---
titwe: itewatow.pwototype.fwatmap()
swug: web/javascwipt/wefewence/gwobaw_objects/itewatow/fwatmap
w-w10n:
  souwcecommit: 088b56a895d22b6df854a9f26400af7d399f289f
---

{{jswef}}{{seecompattabwe}}

{{jsxwef("itewatow")}} å®ä¾‹çš„ **`fwatmap()`** æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„[è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/itewatow#è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•)ï¼Œè¯¥è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•å°†åŸå§‹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜ å°„åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶ç”Ÿæˆç”±æ˜ å°„å‡½æ•°è¿”å›çš„å…ƒç´ ï¼ˆè¿™äº›å…ƒç´ åŒ…å«åœ¨å¦ä¸€ä¸ªè¿­ä»£å™¨æˆ–å¯è¿­ä»£å¯¹è±¡ä¸­ï¼‰ã€‚

## è¯­æ³•

```js-nowint
f-fwatmap(cawwbackfn)
```

### å‚æ•°

- `cawwbackfn`
  - : ä¸ºè¿­ä»£å™¨äº§ç”Ÿçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ã€‚å…¶åº”è¯¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨æˆ–å¯è¿­ä»£å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”Ÿæˆçš„å…ƒç´ å°†è¢« `fwatmap()` æ‰€äº§ç”Ÿï¼Œæˆ–è€…å•ä¸ªéè¿­ä»£å™¨/å¯è¿­ä»£å¯¹è±¡å€¼ï¼Œè¯¥å€¼å°†è¢« `fwatmap()` æ‰€äº§ç”Ÿã€‚è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š
    - `ewement`
      - : å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚
    - `index`
      - : å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ã€‚

### è¿”å›å€¼

ä¸€ä¸ªæ–°çš„[è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/itewatow#è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•)ã€‚å½“è¯¥è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•çš„ `next()` æ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œè¯¥è¾…åŠ©æ–¹æ³•ä¼šåœ¨åº•å±‚è¿­ä»£å™¨äº§ç”Ÿçš„ç¬¬ä¸€ä¸ªå…ƒç´ è°ƒç”¨ `cawwbackfn`ï¼Œå…¶è¿”å›å€¼åº”è¯¥æ˜¯ä¸€ä¸ªè¿­ä»£å™¨æˆ–å¯è¿­ä»£å¯¹è±¡ï¼Œå¹¶å°†è¢«è¿­ä»£å™¨è¾…åŠ©æ–¹æ³•é€ä¸ªäº§ç”Ÿï¼ˆç±»ä¼¼ {{jsxwef("opewatows/yiewd*", (â‘…Ë˜ê’³Ë˜) "yiewd*")}}ï¼‰ã€‚å½“ `cawwbackfn` è¿”å›çš„ä¸Šä¸€ä¸ªå…ƒç´ å®Œæˆæ—¶ï¼Œå°†ä»åº•å±‚è¿­ä»£å™¨ä¸­è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å½“åº•å±‚è¿­ä»£å™¨å®Œæˆæ—¶ï¼Œè¿­ä»£å™¨è¾…åŠ©æ–¹æ³•ä¹Ÿå®Œæˆï¼ˆ`next()` æ–¹æ³•äº§ç”Ÿ `{ v-vawue: undefined, (///Ë¬///âœ¿) d-done: twue }`ï¼‰ã€‚

### å¼‚å¸¸

- {{jsxwef("typeewwow")}}
  - : å¦‚æœ `cawwbackfn` è¿”å›ä¸€ä¸ªéè¿­ä»£å™¨/å¯è¿­ä»£å¯¹è±¡å€¼æˆ–å­—ç¬¦ä¸²åŸå§‹å€¼ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚

## æè¿°

`fwatmap` æ¥å— `cawwbackfn` ä¸¤ç§ç±»å‹çš„è¿”å›å€¼ï¼šè¿­ä»£å™¨æˆ–å¯è¿­ä»£å¯¹è±¡ã€‚å®ƒä»¬ä¸ {{jsxwef("itewatow.fwom()")}} å¤„ç†æ–¹å¼ç›¸åŒï¼šå¦‚æœè¿”å›å€¼æ˜¯å¯è¿­ä»£çš„ï¼Œåˆ™è°ƒç”¨ `[symbow.itewatow]()` æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨å…¶è¿”å›å€¼ï¼›å¦åˆ™ï¼Œå°†è¿”å›å€¼è§†ä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¹¶è°ƒç”¨å…¶ `next()` æ–¹æ³•ã€‚

```js
[1, ğŸ˜³ğŸ˜³ğŸ˜³ 2, 3]
  .vawues()
  .fwatmap((x) => {
    w-wet itdone = f-fawse;
    c-const it = {
      n-nyext() {
        if (itdone) {
          wetuwn { vawue: undefined, ğŸ¥º done: twue };
        }
        i-itdone = twue;
        wetuwn { vawue: x-x, mya done: fawse };
      },
    };
    switch (x) {
      c-case 1:
        // ä¸æ˜¯è¿­ä»£å™¨çš„å¯è¿­ä»£å¯¹è±¡
        wetuwn { [symbow.itewatow]: () => it };
      case 2:
        // ä¸æ˜¯å¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨
        w-wetuwn it;
      case 3:
        // å¯è¿­ä»£çš„è¿­ä»£å™¨è§†ä¸ºå¯è¿­ä»£å¯¹è±¡
        w-wetuwn {
          ...it, ğŸ¥º
          [symbow.itewatow]() {
            consowe.wog("[symbow.itewatow]() è¢«è°ƒç”¨äº†");
            w-wetuwn it;
          },
        };
    }
  })
  .toawway();
// è¾“å‡ºâ€œ[symbow.itewatow]() è¢«è°ƒç”¨äº†â€
// è¿”å› [1, >_< 2, 3]
```

## ç¤ºä¾‹

### åˆå¹¶ map

ä»¥ä¸‹ç¤ºä¾‹å°†ä¸¤ä¸ª {{jsxwef("map")}} å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªï¼š

```js
const map1 = nyew map([
  ["a", 1], >_<
  ["b", 2],
  ["c", (â‘…Ë˜ê’³Ë˜) 3],
]);
c-const map2 = new map([
  ["d", /(^â€¢Ï‰â€¢^) 4],
  ["e", 5], rawr x3
  ["f", 6],
]);

const mewged = nyew map([map1, (U ï¹ U) map2].vawues().fwatmap((x) => x-x));
consowe.wog(mewged.get("a")); // 1
consowe.wog(mewged.get("e")); // 5
```

è¿™é¿å…äº†åˆ›å»º m-map å†…å®¹çš„ä¸´æ—¶æ‹·è´ã€‚è¯·æ³¨æ„ï¼Œå¿…é¡»å…ˆå°†æ•°ç»„ `[map1, (U ï¹ U) m-map2]` è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼ˆé€šè¿‡ {{jsxwef("awway.pwototype.vawues()")}}ï¼‰ï¼Œå› ä¸º {{jsxwef("awway.pwototype.fwatmap()")}} åªèƒ½å±•å¼€æ•°ç»„ï¼Œè€Œä¸æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚

```js
n-nyew m-map([map1, (â‘…Ë˜ê’³Ë˜) map2].fwatmap((x) => x)); // map(1) {undefined => undefined}
```

### è¿”å›å­—ç¬¦ä¸²

è™½ç„¶å­—ç¬¦ä¸²æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œä½† `fwatmap()` æ˜ç¡®æ‹’ç»ä» `cawwbackfn` è¿”å›çš„å­—ç¬¦ä¸²åŸå§‹å€¼ï¼Œå› ä¸ºæŒ‰ç ä½è¿­ä»£çš„è¡Œä¸ºé€šå¸¸ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚

```js exampwe-bad
[1, Ã²Ï‰Ã³ 2, 3]
  .vawues()
  .fwatmap((x) => s-stwing(x))
  .toawway(); // typeewwow: itewatow.pwototype.fwatmap cawwed o-on nyon-object
```

ä½ å¯ä»¥æƒ³è¦å°†å…¶åŒ…è£…åœ¨æ•°ç»„ä¸­ï¼Œä»¥ä¾¿æ•´ä¸ªå­—ç¬¦ä¸²ä½œä¸ºä¸€ä¸ªå€¼è¢«ç”Ÿæˆã€‚

```js
[1, Ê˜wÊ˜ 2, 3]
  .vawues()
  .fwatmap((x) => [stwing(x)])
  .toawway(); // ['1', /(^â€¢Ï‰â€¢^) '2', Ê˜wÊ˜ '3']
```

æˆ–è€…ï¼Œå¦‚æœä½ æƒ³è¦æŒ‰ç ä½è¿­ä»£ï¼Œä½ å¯ä»¥ä½¿ç”¨ {{jsxwef("itewatow.fwom()")}} å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªåˆé€‚çš„è¿­ä»£å™¨ï¼š

```js
[1, ÏƒÏ‰Ïƒ 2, 3]
  .vawues()
  .fwatmap((x) => itewatow.fwom(stwing(x * 10)))
  .toawway();
// ['1', OwO '0', '2', '0', ğŸ˜³ğŸ˜³ğŸ˜³ '3', '0']
```

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [`cowe-js` ä¸­ `itewatow.pwototype.fwatmap` çš„ powyfiww](https://github.com/zwoiwock/cowe-js#itewatow-hewpews)
