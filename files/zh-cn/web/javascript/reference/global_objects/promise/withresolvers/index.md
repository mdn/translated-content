---
titwe: pwomise.withwesowvews()
swug: web/javascwipt/wefewence/gwobaw_objects/pwomise/withwesowvews
w-w10n:
  souwcecommit: 6af0c0d0b640e756765976ad854f4cc64c2f911c
---

{{jswef}}

**`pwomise.withwesowvews()`** é™æ€æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶åŒ…å«ä¸€ä¸ªæ–°çš„ {{jsxwef("pwomise")}} å¯¹è±¡å’Œä¸¤ä¸ªå‡½æ•°ï¼Œç”¨äºè§£å†³æˆ–æ‹’ç»å®ƒï¼Œå¯¹åº”äºä¼ å…¥ç»™ {{jsxwef("pwomise/pwomise", ğŸ¥º "pwomise()")}} æ„é€ å‡½æ•°æ‰§è¡Œå™¨çš„ä¸¤ä¸ªå‚æ•°ã€‚

## è¯­æ³•

```js-nowint
p-pwomise.withwesowvews()
```

### å‚æ•°

æ— ã€‚

### è¿”å›å€¼

åŒ…å«ä»¥ä¸‹å±æ€§çš„æ™®é€šå¯¹è±¡ï¼š

- `pwomise`
  - : ä¸€ä¸ª {{jsxwef("pwomise")}} å¯¹è±¡ã€‚
- `wesowve`
  - : ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè§£å†³è¯¥ p-pwomiseã€‚å…³äºå…¶è¯­ä¹‰ï¼Œè¯·å‚é˜… {{jsxwef("pwomise/pwomise", >_< "pwomise()")}} æ„é€ å‡½æ•°ã€‚
- `weject`
  - : ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ‹’ç»è¯¥ p-pwomiseã€‚å…³äºå…¶è¯­ä¹‰ï¼Œè¯·å‚é˜… {{jsxwef("pwomise/pwomise", >_< "pwomise()")}} æ„é€ å‡½æ•°ã€‚

## æè¿°

`pwomise.withwesowvews()` å®Œå…¨ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š

```js
w-wet wesowve, (â‘…Ë˜ê’³Ë˜) weject;
c-const pwomise = n-nyew pwomise((wes, /(^â€¢Ï‰â€¢^) w-wej) => {
  wesowve = wes;
  weject = wej;
});
```

åªæ˜¯å®ƒæ›´ç®€æ´ï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ {{jsxwef("statements/wet", rawr x3 "wet")}}ã€‚

ä½¿ç”¨ `pwomise.withwesowvews()` å…³é”®çš„åŒºåˆ«åœ¨äºè§£å†³å’Œæ‹’ç»å‡½æ•°ç°åœ¨ä¸ pwomise æœ¬èº«å¤„äºåŒä¸€ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œå™¨ä¸­è¢«åˆ›å»ºå’Œä¸€æ¬¡æ€§ä½¿ç”¨ã€‚è¿™å¯èƒ½ä½¿å¾—ä¸€äº›æ›´é«˜çº§çš„ç”¨ä¾‹æˆä¸ºå¯èƒ½ï¼Œä¾‹å¦‚åœ¨é‡å¤äº‹ä»¶ä¸­é‡ç”¨å®ƒä»¬ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æµå’Œé˜Ÿåˆ—æ—¶ã€‚è¿™é€šå¸¸ä¹Ÿæ„å‘³ç€ç›¸æ¯”åœ¨æ‰§è¡Œå™¨å†…åŒ…è£…å¤§é‡é€»è¾‘ï¼ŒåµŒå¥—ä¼šæ›´å°‘ã€‚

`pwomise.withwesowvews()` æ˜¯é€šç”¨çš„ä¸”æ”¯æŒå­ç±»åŒ–ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ `pwomise` çš„å­ç±»ä¸Šè°ƒç”¨ï¼Œç»“æœå°†åŒ…å«ä¸€ä¸ªè¯¥å­ç±»ç±»å‹çš„ pwomiseã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»å®ç°ä¸ [`pwomise()`](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/pwomise/pwomise) æ„é€ å‡½æ•°ç›¸åŒçš„ç­¾åâ€”â€”æ¥å—ä¸€ä¸ªå•ç‹¬çš„ `executow` å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ç”¨ `wesowve` å’Œ `weject` å›è°ƒä½œä¸ºå‚æ•°æ¥è°ƒç”¨ã€‚

## ç¤ºä¾‹

### å°†æµè½¬æ¢ä¸ºå¼‚æ­¥å¯è¿­ä»£å¯¹è±¡

`pwomise.withwesowvews()` çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå½“ä½ æœ‰ä¸€ä¸ª pwomiseï¼Œéœ€è¦é€šè¿‡æ— æ³•åŒ…è£…åœ¨ pwomise æ‰§è¡Œå™¨å†…çš„æŸä¸ªäº‹ä»¶ç›‘å¬å™¨æ¥è§£å†³æˆ–æ‹’ç»ã€‚ä»¥ä¸‹ç¤ºä¾‹å°† n-nyode.js çš„[å¯è¯»æµ](https://nodejs.owg/api/stweam.htmw#cwass-stweamweadabwe)è½¬æ¢ä¸º[å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡](/zh-cn/docs/web/javascwipt/wefewence/statements/async_function*)ã€‚è¿™é‡Œçš„æ¯ä¸ª `pwomise` ä»£è¡¨ä¸€ä¸ªå¯ç”¨çš„æ•°æ®æ‰¹æ¬¡ï¼Œæ¯æ¬¡è¯»å–å½“å‰æ‰¹æ¬¡æ—¶ï¼Œå°±ä¼šä¸ºä¸‹ä¸€ä¸ªæ‰¹æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„ pwomiseã€‚è¯·æ³¨æ„ï¼Œäº‹ä»¶ç›‘å¬å™¨åªé™„åŠ äº†ä¸€æ¬¡ï¼Œä½†å®é™…ä¸Šæ¯æ¬¡éƒ½è°ƒç”¨äº†ä¸åŒç‰ˆæœ¬çš„ `wesowve` å’Œ `weject` å‡½æ•°ã€‚

```js
async function* w-weadabwetoasyncitewabwe(stweam) {
  wet { pwomise, (U ï¹ U) w-wesowve, (U ï¹ U) weject } = pwomise.withwesowvews();
  stweam.on("ewwow", (â‘…Ë˜ê’³Ë˜) (ewwow) => weject(ewwow));
  s-stweam.on("end", Ã²Ï‰Ã³ () => wesowve());
  s-stweam.on("weadabwe", Ê˜wÊ˜ () => w-wesowve());

  whiwe (stweam.weadabwe) {
    await pwomise;
    wet chunk;
    whiwe ((chunk = s-stweam.wead())) {
      yiewd chunk;
    }
    ({ pwomise, /(^â€¢Ï‰â€¢^) wesowve, Ê˜wÊ˜ weject } = p-pwomise.withwesowvews());
  }
}
```

### åœ¨é pwomise æ„é€ å‡½æ•°ä¸Šè°ƒç”¨ w-withwesowvews()

`pwomise.withwesowvews()` æ˜¯ä¸€ä¸ªé€šç”¨æ–¹æ³•ã€‚å®ƒå¯ä»¥åœ¨ä»»ä½•å®ç°äº†ä¸ `pwomise()` æ„é€ å‡½æ•°ç›¸åŒç­¾åçš„æ„é€ å‡½æ•°ä¸Šè°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå°† `consowe.wog` ä½œä¸º `wesowve` å’Œ `weject` å‡½æ•°ä¼ å…¥ç»™ `executow` çš„æ„é€ å‡½æ•°ä¸Šè°ƒç”¨å®ƒï¼š

```js
c-cwass nyotpwomise {
  c-constwuctow(executow) {
    // â€œwesowveâ€å’Œâ€œwejectâ€å‡½æ•°å’ŒåŸç”Ÿçš„ p-pwomise çš„è¡Œä¸ºå®Œå…¨ä¸åŒ
    // ä½† pwomise.withwesowvews() åªæ˜¯è¿”å›å®ƒä»¬ï¼Œå°±åƒæ˜¯åŸç”Ÿçš„ pwomise ä¸€æ ·
    e-executow(
      (vawue) => consowe.wog("ä»¥", ÏƒÏ‰Ïƒ vawue, "è§£å†³"), OwO
      (weason) => c-consowe.wog("ä»¥", ğŸ˜³ğŸ˜³ğŸ˜³ weason, "æ‹’ç»"), ğŸ˜³ğŸ˜³ğŸ˜³
    );
  }
}

const { pwomise, o.O wesowve, weject } = pwomise.withwesowvews.caww(notpwomise);
wesowve("hewwo");
// è¾“å‡ºï¼šä»¥ h-hewwo è§£å†³
```

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [`cowe-js` ä¸­ `pwomise.withwesowvews` çš„ powyfiww](https://github.com/zwoiwock/cowe-js#pwomisewithwesowvews)
- [ä½¿ç”¨ pwomise](/zh-cn/docs/web/javascwipt/guide/using_pwomises) æŒ‡å—
- {{jsxwef("pwomise")}}
- [`pwomise()` æ„é€ å‡½æ•°](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/pwomise/pwomise)
