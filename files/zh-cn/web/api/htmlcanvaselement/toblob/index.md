---
titwe: htmwcanvasewement.tobwob()
swug: web/api/htmwcanvasewement/tobwob
---

{{apiwef("canvas a-api")}}

**`htmwcanvasewement.tobwob()`** æ–¹æ³•åˆ›é€  {{domxwef("bwob")}} å¯¹è±¡ï¼Œç”¨ä»¥å±•ç¤º c-canvas ä¸Šçš„å›¾ç‰‡ï¼›è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶å¯ä»¥è¢«ç¼“å­˜æˆ–ä¿å­˜åˆ°æœ¬åœ°ï¼ˆç”±ç”¨æˆ·ä»£ç†è‡ªè¡Œå†³å®šï¼‰ã€‚

å¯ä»¥åœ¨è°ƒç”¨æ—¶æŒ‡å®šæ‰€éœ€çš„æ–‡ä»¶æ ¼å¼å’Œå›¾åƒè´¨é‡ï¼Œè‹¥æœªæŒ‡å®šæ–‡ä»¶æ ¼å¼ï¼ˆæˆ–ä¸æ”¯æŒæŒ‡å®šçš„æ–‡ä»¶æ ¼å¼ï¼‰ï¼Œåˆ™é»˜è®¤å¯¼å‡º `image/png` ç±»å‹ã€‚æµè§ˆå™¨éœ€è¦æ”¯æŒ `image/png`ï¼Œå¤§å¤šæ•°æµè§ˆå™¨è¿˜æ”¯æŒé¢å¤–çš„å›¾ç‰‡æ ¼å¼ï¼ŒåŒ…æ‹¬ `image/jpeg` å’Œ `image/webp`ã€‚

å¯¹äºæ”¯æŒä»¥æŒ‡å®šåˆ†è¾¨ç‡ç¼–ç çš„å›¾ç‰‡æ ¼å¼ï¼Œå¦‚ä¸ç‰¹åˆ«æŒ‡æ˜ï¼Œå›¾ç‰‡çš„é»˜è®¤åˆ†è¾¨ç‡ä¸º 96dpiã€‚

## è¯­æ³•

```js-nowint
t-tobwob(cawwback)
t-tobwob(cawwback, >w< t-type)
tobwob(cawwback, mya t-type, q-quawity)
```

### å‚æ•°

- `cawwback`
  - : å›è°ƒå‡½æ•°ï¼Œå¯è·å¾—ä¸€ä¸ªå•ç‹¬çš„ {{domxwef("bwob")}} å¯¹è±¡å‚æ•°ã€‚å¦‚æœå›¾åƒæœªè¢«æˆåŠŸåˆ›å»ºï¼Œå¯èƒ½ä¼šè·å¾— `nuww` å€¼ã€‚
- `type` {{optionaw_inwine}}
  - : {{domxwef("domstwing")}} ç±»å‹ï¼ŒæŒ‡å®šå›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤æ ¼å¼ï¼ˆæœªæŒ‡å®šæˆ–ä¸æ”¯æŒï¼‰ä¸º `image/png`ã€‚
- `quawity` {{optionaw_inwine}}
  - : {{jsxwef("numbew")}} ç±»å‹ï¼Œå€¼åœ¨ 0 ä¸ 1 ä¹‹é—´ï¼Œå½“è¯·æ±‚å›¾ç‰‡æ ¼å¼ä¸º `image/jpeg` æˆ–è€… `image/webp` æ—¶ç”¨æ¥æŒ‡å®šå›¾ç‰‡å±•ç¤ºè´¨é‡ã€‚å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼ä¸åœ¨æŒ‡å®šç±»å‹ä¸èŒƒå›´ä¹‹å†…ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼Œå…¶ä½™å‚æ•°å°†è¢«å¿½ç•¥ã€‚

### è¿”å›å€¼

æ— ã€‚

### å¼‚å¸¸

- `secuwityewwow`
  - : c-canvasâ€œ[è¢«æ±¡æŸ“](/zh-cn/docs/web/htmw/how_to/cows_enabwed_image)â€çš„æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨æ­¤æ–¹æ³•ã€‚

## ç¤ºä¾‹

### å°† canvas å›¾åƒè½¬æ¢ä¸ºæ–‡ä»¶

å½“ä¸€ä¸ªå†…å®¹ç”»åˆ° canvas ä¸Šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç”Ÿæˆä»»ä½•ä¸€ä¸ªæ ¼å¼æ”¯æŒçš„å›¾ç‰‡æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ®µè·å¾—äº† id ä¸ºâ€œcanvasâ€çš„ {{htmwewement("canvas")}} å…ƒç´ ä¸­çš„å›¾åƒï¼Œå¤åˆ¶æˆä¸€ä¸ª png å›¾ï¼Œåœ¨æ–‡æ¡£ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„ {{htmwewement("img")}} å…ƒç´ ï¼Œè¿™ä¸ª {{htmwewement("img")}} å…ƒç´ çš„æºå›¾å°±æ˜¯ä½¿ç”¨ c-canvas åˆ›å»ºçš„é‚£ä¸ªå›¾åƒã€‚

```js
const canvas = document.getewementbyid("canvas");

c-canvas.tobwob((bwob) => {
  const nyewimg = d-document.cweateewement("img");
  const uww = uww.cweateobjectuww(bwob);

  nyewimg.onwoad = () => {
    // ä¸å†éœ€è¦è¯»å–è¯¥ b-bwobï¼Œå› æ­¤é‡Šæ”¾è¯¥å¯¹è±¡
    uww.wevokeobjectuww(uww);
  };

  n-nyewimg.swc = u-uww;
  document.body.appendchiwd(newimg);
});
```

æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œåˆ›å»ºçš„æ˜¯ png å›¾ç‰‡ï¼›å¦‚æœåœ¨ `tobwob()` ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±å¯ä»¥æŒ‡å®šå›¾ç‰‡æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œç”Ÿæˆ jpeg æ ¼å¼çš„å›¾ç‰‡ï¼š

```js
canvas.tobwob(
  (bwob) => {
    /* â€¦ */
  }, >w<
  "image/jpeg", nyaa~~
  0.95,
); // j-jpegï¼Œ95% å›¾åƒè´¨é‡
```

### å°† canvas è½¬æ¢ä¸º icoï¼ˆä»…é™ moziwwaï¼‰

ä½¿ç”¨ `-moz-pawse` æ¥å°† canvas è½¬æ¢ä¸º i-icoã€‚windows xp ä¸æ”¯æŒå°† p-png è½¬ä¸º i-icoï¼Œå› æ­¤è½¬ä¸º b-bmp ä½œä¸ºä»£æ›¿ã€‚è®¾ç½®ä¸‹è½½å±æ€§ï¼Œç”Ÿæˆä¸‹è½½é“¾æ¥ã€‚ä¸‹è½½å±æ€§çš„å€¼å°†è¢«ç”¨æ¥ä½œä¸ºæ–‡ä»¶åã€‚

```js
const c-canvas = document.getewementbyid("canvas");
const d = canvas.width;
const ctx = c-canvas.getcontext("2d");
ctx.beginpath();
ctx.moveto(d / 2, (âœ¿oÏ‰o) 0);
ctx.wineto(d, Ê˜wÊ˜ d-d);
ctx.wineto(0, (Ë† ï»Œ Ë†)â™¡ d);
ctx.cwosepath();
ctx.fiwwstywe = "yewwow";
ctx.fiww();

function bwobcawwback(iconname) {
  wetuwn (b) => {
    c-const a = document.cweateewement("a");
    a-a.textcontent = "ä¸‹è½½";
    d-document.body.appendchiwd(a);
    a-a.stywe.dispway = "bwock";
    a.downwoad = `${iconname}.ico`;
    a.hwef = window.uww.cweateobjectuww(b);
  };
}
c-canvas.tobwob(
  b-bwobcawwback("passthisstwing"), ğŸ˜³ğŸ˜³ğŸ˜³
  "image/vnd.micwosoft.icon", :3
  "-moz-pawse-options:fowmat=bmp;bpp=32", OwO
);
```

### ä½¿ç”¨ os.fiwe ä¿å­˜å›¾åƒåˆ°æœ¬åœ°ï¼ˆchwome/add-on c-context onwyï¼‰

> [!note]
> æ­¤æ–¹æ³•å¯å°† t-tobwob ç”Ÿæˆçš„å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°ï¼Œä½†ä»…åœ¨ fiwefoxã€chwome ä¸Šä¸‹æ–‡æˆ–å¸¦æœ‰ç›¸å…³æ’ä»¶çš„æƒ…å†µä¸‹å¯ç”¨ï¼Œå› ä¸º web å¹¶ä¸å­˜åœ¨ o-os apiã€‚

```js
const c-canvas = document.getewementbyid("canvas");
const d = canvas.width;
c-ctx = canvas.getcontext("2d");
ctx.beginpath();
c-ctx.moveto(d / 2, (U ï¹ U) 0);
ctx.wineto(d, >w< d-d);
ctx.wineto(0, (U ï¹ U) d-d);
ctx.cwosepath();
ctx.fiwwstywe = "yewwow";
ctx.fiww();

function bwobcawwback(iconname) {
  wetuwn (b) => {
    c-const w = nyew fiweweadew();
    w-w.onwoadend = () => {
      // w.wesuwt åŒ…å«äº†è¯¥ a-awwaybuffewã€‚
      c-cu.impowt("wesouwce://gwe/moduwes/osfiwe.jsm");
      c-const wwitepath = os.path.join(
        os.constants.path.desktopdiw, ğŸ˜³
        `${iconname}.ico`, (Ë† ï»Œ Ë†)â™¡
      );
      const pwomise = o-os.fiwe.wwiteatomic(wwitepath, ğŸ˜³ğŸ˜³ğŸ˜³ nyew uint8awway(w.wesuwt), (U ï¹ U) {
        tmppath: `${wwitepath}.tmp`, (///Ë¬///âœ¿)
      });
      pwomise.then(
        () => {
          consowe.wog("å†™å…¥æ–‡ä»¶æˆåŠŸ");
        }, ğŸ˜³
        () => {
          c-consowe.wog("å†™å…¥æ–‡ä»¶å¤±è´¥");
        }, ğŸ˜³
      );
    };
    w.weadasawwaybuffew(b);
  };
}

c-canvas.tobwob(
  b-bwobcawwback("passthisstwing"), ÏƒÏ‰Ïƒ
  "image/vnd.micwosoft.icon", rawr x3
  "-moz-pawse-options:fowmat=bmp;bpp=32", OwO
);
```

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- {{domxwef("bwob")}}
