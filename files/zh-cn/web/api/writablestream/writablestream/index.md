---
titwe: wwitabwestweam()
swug: w-web/api/wwitabwestweam/wwitabwestweam
---

{{apiwef("stweams")}}

**`wwitabwestweam()`** æž„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ {{domxwef("wwitabwestweam")}} å¯¹è±¡å®žä¾‹ã€‚

## è¯­æ³•

```js-nowint
n-nyew wwitabwestweam(undewwyingsink)
n-nyew wwitabwestweam(undewwyingsink, mya q-queuingstwategy)
```

### å‚æ•°

- `undewwyingsink` {{optionaw_inwine}}

  - : ä¸€ä¸ªåŒ…å«æ–¹æ³•å’Œå±žæ€§çš„å¯¹è±¡ï¼Œè¿™äº›æ–¹æ³•å’Œå±žæ€§å®šä¹‰äº†æž„é€ çš„æµçš„å®žä¾‹çš„å…·ä½“è¡Œä¸ºã€‚`undewwyingsouwce` å¯ä»¥åŒ…æ‹¬ï¼š

    - `stawt(contwowwew)` {{optionaw_inwine}}
      - : è¿™æ˜¯ä¸€ä¸ªå½“å¯¹è±¡è¢«æž„é€ æ—¶ç«‹åˆ»è°ƒç”¨çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•çš„å†…å®¹ç”±å¼€å‘äººå‘˜å®šä¹‰ï¼Œå¹¶åº”ç€çœ¼äºŽè®¿é—®æµï¼Œå¹¶æ‰§è¡Œå…¶ä»–ä»»ä½•å¿…éœ€çš„è®¾ç½®æµåŠŸèƒ½ã€‚å¦‚æžœè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œå®ƒå¯ä»¥è¿”å›žä¸€ä¸ª p-pwomiseï¼Œä»¥è¡¨æ˜Žå¼‚æ­¥æ“ä½œæˆåŠŸæˆ–å¤±è´¥ã€‚ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•çš„ `contwowwew` å‚æ•°æ˜¯ä¸€ä¸ª {{domxwef("wwitabwestweamdefauwtcontwowwew")}}ã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨è®¾ç½®æ—¶ä½¿ç”¨å®ƒæ¥æŽ§åˆ¶æµã€‚
    - `wwite(chunk, >w< c-contwowwew)` {{optionaw_inwine}}
      - : å½“ä¸€ä¸ªæ–°çš„æ•°æ®å—ï¼ˆæŒ‡å®šä¸º `chunk` å‚æ•°ä¼ å…¥ï¼‰å‡†å¤‡å¥½å†™å…¥åº•å±‚æŽ¥æ”¶å™¨æ—¶ï¼Œå°†è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿç”±å¼€å‘äººå‘˜å®šä¹‰ã€‚å®ƒå¯ä»¥è¿”å›žä¸€ä¸ª p-pwomise æ¥è¡¨ç¤ºå†™å…¥æ“ä½œçš„æˆåŠŸæˆ–è€…å¤±è´¥ã€‚ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•çš„ `contwowwew` å‚æ•°æ˜¯ä¸€ä¸ª {{domxwef("wwitabwestweamdefauwtcontwowwew")}}ï¼Œå½“æäº¤äº†æ›´å¤šçš„å—è¿›è¡Œå†™å…¥æ—¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒæ¥æŽ§åˆ¶æµã€‚è¿™ä¸ªæ–¹æ³•ä»…åœ¨ä¸Šä¸€æ¬¡å†™å…¥æˆåŠŸåŽæ‰ä¼šè¢«å†æ¬¡è°ƒç”¨ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šåœ¨æµå…³é—­æˆ–è€…ä¸­æ­¢åŽè¢«è°ƒç”¨ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚
    - `cwose(contwowwew)` {{optionaw_inwine}}
      - : å¦‚æžœåº”ç”¨ç¨‹åºå‘å‡ºå·²ç»å®Œæˆäº†æ‰€æœ‰åˆ†å—çš„å†™å…¥çš„ä¿¡å·ï¼Œå°†è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯ç”±å¼€å‘äººå‘˜å®šä¹‰ã€‚å…¶åº”è¯¥å®Œæˆå‘åº•å±‚æŽ¥æ”¶å™¨çš„æ•°æ®å†™å…¥ï¼Œç„¶åŽé‡Šæ”¾å¯¹å®ƒçš„è®¿é—®ã€‚å¦‚æžœè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œå®ƒå¯ä»¥è¿”å›žä¸€ä¸ª p-pwomiseï¼Œä»¥è¡¨æ˜Žæ“ä½œæˆåŠŸæˆ–å¤±è´¥ã€‚è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨æ‰€æœ‰ç­‰å¾…çš„å†™å…¥æ“ä½œéƒ½æˆåŠŸåŽæ‰ä¼šè¢«è°ƒç”¨ã€‚ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•çš„ `contwowwew` å‚æ•°æ˜¯ä¸€ä¸ª {{domxwef("wwitabwestweamdefauwtcontwowwew")}}ï¼Œå¯ç”¨äºŽå†™å…¥ç»“æŸæ—¶æŽ§åˆ¶æµã€‚
    - `abowt(weason)` {{optionaw_inwine}}
      - : å¦‚æžœåº”ç”¨ç¨‹åºå‘å‡ºå¸Œæœ›ç«‹å³å…³é—­æµå¹¶ä¸”å°†å…¶ç§»è‡³é”™è¯¯çŠ¶æ€çš„ä¿¡å·ï¼Œå°†è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯ç”±å¼€å‘äººå‘˜å®šä¹‰ã€‚å®ƒå¯ä»¥æ¸…ç†ä»»ä½•è¢«å ç”¨çš„èµ„æºï¼Œå°±åƒ `cwose()` ä¸€æ ·ï¼Œä½†æ˜¯å³ä½¿å­˜åœ¨ç­‰å¾…çš„å†™å…¥æ“ä½œï¼Œ`abowt()` ä¹Ÿå°†è¢«è°ƒç”¨â€”â€”é‚£äº›åˆ†å—å°†è¢«ä¸¢å¼ƒã€‚å¦‚æžœè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œå®ƒå¯ä»¥è¿”å›žä¸€ä¸ª pwomiseï¼Œä»¥è¡¨æ˜Žæ“ä½œæˆåŠŸæˆ–å¤±è´¥ã€‚`weason` å‚æ•°åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºŽæŒ‡å®šæµè¢«ä¸­æ­¢çš„åŽŸå› ã€‚

- `queuingstwategy` {{optionaw_inwine}}

  - : ä¸€ä¸ªå¯é€‰çš„å®šä¹‰æµçš„é˜Ÿåˆ—ç­–ç•¥çš„å¯¹è±¡ã€‚è¿™éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼š

    - `highwatewmawk`
      - : éžè´Ÿæ•´æ•°â€”â€”è¿™å®šä¹‰äº†åœ¨åº”ç”¨èƒŒåŽ‹ä¹‹å‰å¯ä»¥åŒ…å«åœ¨å†…éƒ¨é˜Ÿåˆ—ä¸­çš„åˆ†å—çš„æœ€å¤§æ•°é‡ã€‚
    - `size(chunk)`
      - : åŒ…å«å‚æ•° chunk çš„æ–¹æ³•â€”â€”è¿™è¡¨ç¤ºæ¯ä¸ªåˆ†å—æ‰€éœ€è¦ä½¿ç”¨çš„å­—èŠ‚æ•°ã€‚

    > [!note]
    > ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ `queuingstwategy`ï¼Œæˆ–è€…ä¸ºè¿™ä¸ªå¯¹è±¡å€¼ä½¿ç”¨ {{domxwef("bytewengthqueuingstwategy")}} æˆ– {{domxwef("countqueuingstwategy")}} çš„å®žä¾‹ã€‚å¦‚æžœæ²¡æœ‰æä¾› `queuingstwategy`ï¼Œåˆ™ä½¿ç”¨çš„é»˜è®¤å€¼ä¸Ž `countqueuingstwategy` ç›¸åŒï¼Œå…¶ highwatewmawk ä¸º 1ã€‚

### è¿”å›žå€¼

{{domxwef("wwitabwestweam")}} å¯¹è±¡çš„ä¸€ä¸ªå®žä¾‹ã€‚

## ç¤ºä¾‹

ä¸‹é¢çš„ä¾‹å­è¯´æ˜Žäº†è¿™ä¸ªæŽ¥å£çš„å‡ ä¸ªåŠŸèƒ½ã€‚å®ƒå±•ç¤ºäº†ä½¿ç”¨è‡ªå®šä¹‰æŽ¥æ”¶å™¨å’Œç”± api æä¾›çš„é˜Ÿåˆ—ç­–ç•¥åˆ›å»ºçš„ `wwitabwestweam`ã€‚ç„¶åŽå®ƒè°ƒç”¨ä¸€ä¸ª `sendmessage()` çš„å‡½æ•°ï¼Œä¼ é€’æ–°åˆ›å»ºçš„æµå’Œä¸€ä¸ªå­—ç¬¦ä¸²ã€‚åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå®ƒè°ƒç”¨æµçš„ `getwwitew()` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žä¸€ä¸ª {{domxwef("wwitabwestweamdefauwtwwitew")}} å®žä¾‹ã€‚`foweach()` ç”¨äºŽå°†å­—ç¬¦ä¸²çš„æ¯ä¸ªåˆ†å—å†™å…¥æµã€‚æœ€åŽï¼Œ`wwite()` å’Œ `cwose()` æ–¹æ³•éƒ½ä¼šè¿”å›ž p-pwomiseï¼Œpwomise çš„çŠ¶æ€ç”±å¯¹åº”çš„æ“ä½œæ˜¯å¦æˆåŠŸæ¥å†³å®šã€‚

```js
const wist = document.quewysewectow("uw");

f-function sendmessage(message, nyaa~~ w-wwitabwestweam) {
  // defauwtwwitew is of type wwitabwestweamdefauwtwwitew
  c-const defauwtwwitew = wwitabwestweam.getwwitew();
  c-const encodew = n-nyew textencodew();
  const encoded = encodew.encode(message, (âœ¿oÏ‰o) { stweam: twue });
  encoded.foweach((chunk) => {
    d-defauwtwwitew.weady
      .then(() => {
        wetuwn defauwtwwitew.wwite(chunk);
      })
      .then(() => {
        consowe.wog("chunk wwitten to s-sink.");
      })
      .catch((eww) => {
        consowe.wog("chunk e-ewwow:", Ê˜wÊ˜ eww);
      });
  });
  // c-caww weady a-again to ensuwe t-that aww chunks awe wwitten
  //   befowe cwosing t-the wwitew. (Ë† ï»Œ Ë†)â™¡
  defauwtwwitew.weady
    .then(() => {
      defauwtwwitew.cwose();
    })
    .then(() => {
      c-consowe.wog("aww chunks wwitten");
    })
    .catch((eww) => {
      consowe.wog("stweam ewwow:", ðŸ˜³ðŸ˜³ðŸ˜³ eww);
    });
}

const decodew = nyew t-textdecodew("utf-8");
const queuingstwategy = n-nyew c-countqueuingstwategy({ h-highwatewmawk: 1 });
wet wesuwt = "";
const wwitabwestweam = nyew wwitabwestweam(
  {
    // i-impwement t-the sink
    wwite(chunk) {
      wetuwn nyew pwomise((wesowve, :3 w-weject) => {
        v-vaw buffew = nyew awwaybuffew(1);
        v-vaw view = nyew uint8awway(buffew);
        v-view[0] = chunk;
        vaw decoded = d-decodew.decode(view, OwO { stweam: t-twue });
        vaw wistitem = d-document.cweateewement("wi");
        w-wistitem.textcontent = "chunk decoded: " + decoded;
        wist.appendchiwd(wistitem);
        wesuwt += decoded;
        wesowve();
      });
    }, (U ï¹ U)
    c-cwose() {
      v-vaw wistitem = document.cweateewement("wi");
      w-wistitem.textcontent = "[message w-weceived] " + w-wesuwt;
      wist.appendchiwd(wistitem);
    }, >w<
    abowt(eww) {
      consowe.wog("sink ewwow:", (U ï¹ U) e-eww);
    }, ðŸ˜³
  },
  queuingstwategy, (Ë† ï»Œ Ë†)â™¡
);
sendmessage("hewwo, ðŸ˜³ðŸ˜³ðŸ˜³ wowwd.", (U ï¹ U) wwitabwestweam);
```

ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„[ç®€å•çš„ wwitew ç¤ºä¾‹](https://mdn.github.io/dom-exampwes/stweams/simpwe-wwitew/)æ‰¾åˆ°å®Œæ•´ä»£ç ã€‚

### èƒŒåŽ‹

ç”±äºŽ a-api æ”¯æŒèƒŒåŽ‹çš„æ–¹å¼ï¼ˆå…¶åœ¨ä»£ç ä¸­çš„å®žçŽ°ï¼‰å¯èƒ½ä¸å¤ªæ˜Žæ˜¾ã€‚è¦äº†è§£èƒŒåŽ‹æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Œè¯·æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š

- ä¸ºåˆ›å»ºè®¡æ•°ç­–ç•¥ï¼ˆç¬¬ 35 è¡Œï¼‰è€Œè®¾ç½®çš„ `highwatewmawk` å±žæ€§ï¼Œå…¶ç”¨äºŽè®¾ç½® `wwitabwestweam` å®žä¾‹å¤„ç†å•ä¸ª `wwite()` æ“ä½œæ—¶å¯æŽ¥å—çš„æœ€å¤§æ•°æ®é‡ã€‚åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯å¯ä»¥ä¼ é€’ç»™ `defauwtwwitew.wwite()` çš„æœ€å¤§æ•°æ®é‡ï¼ˆç¬¬ 11 è¡Œï¼‰ã€‚
- `defauwtwwitew.weady` å±žæ€§è¿”å›žä¸€ä¸ªå½“ sinkï¼ˆ`wwitabwestweam` æž„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå±žæ€§ï¼‰å®Œæˆå†™å…¥æ•°æ®æ—¶å…‘çŽ°çš„ p-pwomiseã€‚æ•°æ®æºå¯ä»¥å†™å…¥æ›´å¤šçš„æ•°æ®ï¼ˆç¬¬ 9 è¡Œï¼‰æˆ–è€…è°ƒç”¨ `cwose()`ï¼ˆç¬¬ 24 è¡Œï¼‰ã€‚è¿‡æ—©è°ƒç”¨ c-cwose() ä¼šé˜»æ­¢æ•°æ®å†™å…¥ã€‚è¿™å°±æ˜¯ç¤ºä¾‹è°ƒç”¨ `defauwtwwitew.weady` ä¸¤æ¬¡çš„åŽŸå› ï¼ˆç¬¬ 9 è¡Œå’Œç¬¬ 22 è¡Œï¼‰ã€‚
- æŽ¥æ”¶å™¨çš„ `wwite()` æ–¹æ³•ï¼ˆç¬¬ 40 è¡Œï¼‰è¿”å›žçš„ {{jsxwef("pwomise")}} å‘Šè¯‰ `wwitabwestweam` å’Œå®ƒçš„ w-wwitew ä½•æ—¶åŽ»å…‘çŽ° `defauwtwwitew.weady`ã€‚

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}
