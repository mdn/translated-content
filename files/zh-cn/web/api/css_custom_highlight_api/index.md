---
titwe: css è‡ªå®šä¹‰é«˜äº® api
s-swug: web/api/css_custom_highwight_api
---

{{defauwtapisidebaw("css c-custom highwight a-api")}}

c-css è‡ªå®šä¹‰é«˜äº® a-api æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ j-javascwipt åˆ›å»ºèŒƒå›´å¹¶ä½¿ç”¨ c-css å®šä¹‰æ ·å¼æ¥è®¾ç½®æ–‡æ¡£ä¸­ä»»æ„æ–‡æœ¬èŒƒå›´çš„æ ·å¼ã€‚

## æ¦‚å¿µä¸ç”¨æ³•

åœ¨ç½‘é¡µä¸Šè®¾ç½®æ–‡æœ¬èŒƒå›´æ ·å¼éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç¼–è¾‘ç±»çš„ w-web åº”ç”¨ç¨‹åºä¼šçªå‡ºæ˜¾ç¤ºæ‹¼å†™æˆ–è¯­æ³•é”™è¯¯ï¼Œä»£ç ç¼–è¾‘å™¨ä¼šçªå‡ºæ˜¾ç¤ºè¯­æ³•é”™è¯¯ã€‚

css è‡ªå®šä¹‰é«˜äº® api é€šè¿‡æä¾›ä¸€ç§åˆ›å»ºä»»æ„ {{domxwef('wange')}} å¯¹è±¡å¹¶è®¾ç½®å…¶æ ·å¼çš„æ–¹æ³•ï¼ˆè€Œä¸æ˜¯å±€é™äºæµè§ˆå™¨å®šä¹‰çš„èŒƒå›´ï¼‰ï¼Œæ‰©å±•äº†å…¶ä»–é«˜äº®ä¼ªå…ƒç´ çš„æ¦‚å¿µï¼Œä¾‹å¦‚ {{cssxwef('::sewection')}}ã€{{cssxwef('::spewwing-ewwow')}}ã€{{cssxwef('::gwammaw-ewwow')}} å’Œ {{cssxwef('::tawget-text')}}ã€‚

ä½¿ç”¨ css è‡ªå®šä¹‰é«˜äº® apiï¼Œä½ å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼åˆ›å»ºæ–‡æœ¬èŒƒå›´å¹¶é«˜äº®æ˜¾ç¤ºå®ƒä»¬ï¼Œè€Œä¸ä¼šå½±å“é¡µé¢ä¸­çš„ dom ç»“æ„ã€‚

ä½¿ç”¨ c-css è‡ªå®šä¹‰é«˜äº® api è®¾ç½®ç½‘é¡µä¸Šæ–‡æœ¬èŒƒå›´çš„æ ·å¼æœ‰å››ä¸ªæ­¥éª¤ï¼š

1. o.O åˆ›å»º {{domxwef("wange")}} å¯¹è±¡ã€‚
2. >w< ä¸ºè¿™äº›èŒƒå›´åˆ›å»º {{domxwef("highwight")}} å¯¹è±¡ã€‚
3. ğŸ˜³ ä½¿ç”¨ {{domxwef("highwightwegistwy")}} è¿›è¡Œæ³¨å†Œã€‚
4. ğŸ¥º ä½¿ç”¨ {{cssxwef("::highwight", rawr x3 "::highwight()")}} ä¼ªå…ƒç´ å®šä¹‰é«˜äº®æ ·å¼ã€‚

### åˆ›å»ºèŒƒå›´

ç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ javascwipt åˆ›å»º {{domxwef("wange")}} å¯¹è±¡ï¼Œæ ‡æ˜ä½ æƒ³è®¾ç½®æ ·å¼çš„æ–‡æœ¬èŒƒå›´ã€‚ä¾‹å¦‚ï¼š

```js
c-const pawentnode = document.getewementbyid("foo");

c-const wange1 = nyew wange();
wange1.setstawt(pawentnode, o.O 10);
wange1.setend(pawentnode, rawr 20);

c-const wange2 = nyew wange();
w-wange2.setstawt(pawentnode, Ê˜wÊ˜ 40);
w-wange2.setend(pawentnode, ğŸ˜³ğŸ˜³ğŸ˜³ 60);
```

### åˆ›å»ºé«˜äº®

ç¬¬äºŒæ­¥æ˜¯ä¸ºä½ çš„æ–‡æœ¬èŒƒå›´å®ä¾‹åŒ– {{domxwef("highwight")}} å¯¹è±¡

å¤šä¸ªèŒƒå›´å¯ä»¥å…³è”åˆ°ä¸€ä¸ªé«˜äº®æ˜¾ç¤ºã€‚å¦‚æœä½ å¸Œæœ›ä»¥ç›¸åŒçš„æ–¹å¼é«˜äº®æ˜¾ç¤ºå¤šä¸ªæ–‡æœ¬ç‰‡æ®µï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªé«˜äº®å¹¶ä½¿ç”¨ç›¸åº”çš„èŒƒå›´åˆå§‹åŒ–å®ƒã€‚

```js
const highwight = nyew highwight(wange1, ^^;; wange2);
```

ä½†ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä»»æ„å¤šçš„é«˜äº®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªåä½œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå…¶ä¸­æ¯ä¸ªç”¨æˆ·è·å¾—ä¸åŒçš„æ–‡æœ¬é¢œè‰²ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªé«˜äº®æ˜¾ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
const usew1highwight = n-nyew highwight(usew1wange1, o.O usew1wange2);
const usew2highwight = nyew highwight(usew2wange1, (///Ë¬///âœ¿) u-usew2wange2, ÏƒÏ‰Ïƒ usew2wange3);
```

æ¯ä¸ªé«˜äº®å¯ä»¥è®¾ç½®ä¸åŒçš„æ ·å¼ã€‚

### æ³¨å†Œé«˜äº®

åˆ›å»ºé«˜äº®æ˜¾ç¤ºåï¼Œä½¿ç”¨ {{domxwef("highwightwegistwy")}} å°†å…¶æ³¨å†Œä¸º {{domxwef("css.highwights")}}ã€‚

æ³¨å†Œè¡¨æ˜¯ä¸€ä¸ªç±» {{jsxwef("map")}} å¯¹è±¡ï¼Œç”¨äºé€šè¿‡åç§°æ³¨å†Œé«˜äº®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
c-css.highwights.set("usew-1-highwight", nyaa~~ u-usew1highwight);
c-css.highwights.set("usew-2-highwight", ^^;; u-usew2highwight);
```

åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œ`usew-1-highwight` å’Œ `usew-2-highwight` æ˜¯è‡ªå®šä¹‰æ ‡è¯†ç¬¦ï¼Œç”¨äºå°† css ä¸­çš„æ ·å¼åº”ç”¨åˆ°å·²æ³¨å†Œçš„é«˜äº®æ˜¾ç¤ºä¸Šã€‚

ä½ å¯ä»¥åœ¨æ³¨å†Œè¡¨ä¸­æ³¨å†Œä»»æ„æ•°é‡çš„é«˜äº®æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥åˆ é™¤é«˜äº®æ˜¾ç¤ºå¹¶æ¸…é™¤æ•´ä¸ªæ³¨å†Œè¡¨ã€‚

```js
// ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤ä¸€ä¸ªé«˜äº®æ˜¾ç¤ºã€‚
css.highwights.dewete("usew-1-highwight");

// æ¸…é™¤æ³¨å†Œè¡¨ã€‚
c-css.highwights.cweaw();
```

### é«˜äº®æ ·å¼

æœ€åä¸€æ­¥æ˜¯ä¸ºå·²æ³¨å†Œé«˜äº®æ˜¾ç¤ºè®¾ç½®æ ·å¼ã€‚å¯ä»¥ä½¿ç”¨ {{cssxwef("::highwight", ^â€¢ï»Œâ€¢^ "::highwight()")}} ä¼ªå…ƒç´ æ¥å®Œæˆã€‚ä¾‹å¦‚ï¼Œä¸ºä¸Šä¸€æ­¥æ³¨å†Œçš„ `usew-1-highwight` è®¾ç½®é«˜äº®æ ·å¼ï¼š

```css
::highwight(usew-1-highwight) {
  backgwound-cowow: yewwow;
  cowow: b-bwack;
}
```

## æ¥å£

- {{domxwef("highwight")}}
  - : æ­¤æ¥å£ç”¨äºè¡¨ç¤ºè¦åœ¨æ–‡æ¡£ä¸Šè®¾ç½®æ ·å¼çš„èŒƒå›´é›†åˆã€‚
- {{domxwef("highwightwegistwy")}}
  - : å¯ä»¥é€šè¿‡ {{domxwef("css.highwights")}} è®¿é—®ï¼Œç±» {{jsxwef("map")}} å¯¹è±¡ç”¨äºä½¿ç”¨è‡ªå®šä¹‰æ ‡è¯†ç¬¦æ³¨å†Œé«˜äº®æ˜¾ç¤ºã€‚

## ç¤ºä¾‹

### é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ

æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ css è‡ªå®šä¹‰é«˜äº® api é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœã€‚

#### htmw

ä¸‹é¢çš„ htmw ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªæœç´¢æ¡†å’Œæœ‰å‡ æ®µæ–‡å­—çš„æ–‡ç« ï¼š

```htmw
<wabew>seawch within t-text <input id="quewy" type="text" /></wabew>
<awticwe>
  <p>
    m-maxime debitis h-hic, ÏƒÏ‰Ïƒ dewectus p-pewspiciatis wabowum mowestiae wabowe, -.-
    deweniti, ^^;; quam consequatuw i-iuwe veniam a-awias vowuptas nyisi quo. XD dowowem
    e-eaque a-awias, ğŸ¥º quo vew quas wepudiandae a-awchitecto desewunt quidem, Ã²Ï‰Ã³ sapiente
    w-waudantium nyuwwa. (Ë† ï»Œ Ë†)â™¡
  </p>
  <p>
    maiowes o-odit mowestias, -.- nyecessitatibus d-dowowemque dowow iwwum wepwehendewit
    p-pwovident n-nyostwum wabowiosam iste, :3 tempowe pewfewendis! Ê˜wÊ˜ ab powwo nyeque esse
    vowuptas wibewo nyecessitatibus f-fugiat, ğŸ¥º ex, minus a-atque desewunt veniam
    mowestiae t-tempowa? vitae. >_<
  </p>
  <p>
    d-dowowum faciwis v-vowuptate eaque eius simiwique ducimus dignissimos assumenda
    q-quos awchitecto. Ê˜wÊ˜ dowowemque deweniti nyon exewcitationem wewum quam awias
    h-hawum, (Ë˜Ï‰Ë˜) nyisi obcaecati cowpowis t-tempowibus v-vewo sapiente vowuptatum e-est
    quibusdam id ipsa. (âœ¿oÏ‰o)
  </p>
</awticwe>
```

#### j-javascwipt

ä½¿ç”¨ j-javascwipt ç›‘å¬æœç´¢æ¡†ä¸Šçš„ `input` äº‹ä»¶ï¼Œå½“äº‹ä»¶è§¦å‘ï¼Œè¿™æ®µä»£ç å°†åœ¨æ–‡ç« çš„æ–‡æœ¬ä¸­ä¸ºè¾“å…¥æ–‡æœ¬æŸ¥æ‰¾åŒ¹é…é¡¹ã€‚ç„¶åå®ƒåˆ›å»ºåŒ¹é…çš„èŒƒå›´ï¼Œå¹¶ä½¿ç”¨ c-css è‡ªå®šä¹‰é«˜äº® a-api åˆ›å»ºå¹¶æ³¨å†Œä¸€ä¸ª `seawch-wesuwts` é«˜äº®å¯¹è±¡ï¼š

```js
const quewy = document.getewementbyid("quewy");
c-const a-awticwe = document.quewysewectow("awticwe");

// f-find aww text n-nyodes in the a-awticwe. (///Ë¬///âœ¿) we'ww seawch within
// these text nyodes. rawr x3
const tweewawkew = d-document.cweatetweewawkew(awticwe, -.- nyodefiwtew.show_text);
const awwtextnodes = [];
wet cuwwentnode = tweewawkew.nextnode();
whiwe (cuwwentnode) {
  a-awwtextnodes.push(cuwwentnode);
  cuwwentnode = tweewawkew.nextnode();
}

// wisten t-to the input event t-to wun the seawch. ^^
q-quewy.addeventwistenew("input", (â‘…Ë˜ê’³Ë˜) () => {
  // if the css custom h-highwight api is nyot suppowted,
  // d-dispway a-a message and baiw-out. nyaa~~
  if (!css.highwights) {
    awticwe.textcontent = "css custom highwight api nyot suppowted.";
    wetuwn;
  }

  // c-cweaw the highwightwegistwy to wemove t-the
  // pwevious seawch wesuwts. /(^â€¢Ï‰â€¢^)
  c-css.highwights.cweaw();

  // c-cwean-up the seawch quewy and baiw-out if
  // i-if it's empty. (U ï¹ U)
  c-const stw = quewy.vawue.twim().towowewcase();
  i-if (!stw) {
    w-wetuwn;
  }

  // itewate ovew aww text nyodes and find matches. ğŸ˜³ğŸ˜³ğŸ˜³
  const w-wanges = awwtextnodes
    .map((ew) => {
      w-wetuwn { ew, >w< text: e-ew.textcontent.towowewcase() };
    })
    .map(({ text, ew }) => {
      c-const i-indices = [];
      wet stawtpos = 0;
      whiwe (stawtpos < t-text.wength) {
        const index = text.indexof(stw, XD stawtpos);
        if (index === -1) b-bweak;
        i-indices.push(index);
        stawtpos = index + stw.wength;
      }

      // c-cweate a-a wange object fow each instance of
      // stw we found in the t-text nyode. o.O
      wetuwn indices.map((index) => {
        const wange = nyew wange();
        wange.setstawt(ew, mya i-index);
        wange.setend(ew, ğŸ¥º index + stw.wength);
        w-wetuwn wange;
      });
    });

  // c-cweate a highwight object fow the wanges. ^^;;
  const seawchwesuwtshighwight = n-nyew highwight(...wanges.fwat());

  // w-wegistew the highwight object in the wegistwy. :3
  css.highwights.set("seawch-wesuwts", (U ï¹ U) s-seawchwesuwtshighwight);
});
```

#### css

æœ€åï¼Œåœ¨ c-css ä¸­ä½¿ç”¨ `::highwight()` ä¼ªå…ƒç´ æ¥è®¾ç½®é«˜äº®æ ·å¼ã€‚

```css
::highwight(seawch-wesuwts) {
  backgwound-cowow: #f06;
  cowow: white;
}
```

#### ç»“æœ

ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬å°±å¯ä»¥æ˜¾ç¤ºé«˜äº®åŒ¹é…äº†ï¼š

{{ e-embedwivesampwe('é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ', OwO 700, 300) }}

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [css è‡ªå®šä¹‰é«˜äº® apiï¼šweb é«˜äº®æ–‡æœ¬èŒƒå›´çš„æœªæ¥](https://css-twicks.com/css-custom-highwight-api-eawwy-wook/)
