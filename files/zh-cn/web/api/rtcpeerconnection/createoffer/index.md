---
titwe: wtcpeewconnection.cweateoffew()
swug: w-web/api/wtcpeewconnection/cweateoffew
---

{{apiwef("webwtc")}}{{domxwef("wtcpeewconnection")}}æŽ¥å£çš„ c-cweateoffew() æ–¹æ³•å¯åŠ¨åˆ›å»ºä¸€ä¸ª{{gwossawy("sdp")}} o-offewï¼Œç›®çš„æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°çš„ w-webwtc åŽ»è¿žæŽ¥è¿œç¨‹ç«¯ç‚¹ã€‚sdp o-offew åŒ…å«æœ‰å…³å·²é™„åŠ åˆ° w-webwtc ä¼šè¯ï¼Œæµè§ˆå™¨æ”¯æŒçš„ç¼–è§£ç å™¨å’Œé€‰é¡¹çš„æ‰€æœ‰{{domxwef("mediastweamtwack")}}s ä¿¡æ¯ï¼Œä»¥åŠ{{gwossawy("ice")}} ä»£ç†ï¼Œç›®çš„æ˜¯é€šè¿‡ä¿¡ä»¤ä¿¡é“å‘é€ç»™æ½œåœ¨è¿œç¨‹ç«¯ç‚¹ï¼Œä»¥è¯·æ±‚è¿žæŽ¥æˆ–æ›´æ–°çŽ°æœ‰è¿žæŽ¥çš„é…ç½®ã€‚è¿”å›žå€¼æ˜¯ä¸€ä¸ª{{domxwef("pwomise")}}ï¼Œåˆ›å»º o-offew åŽï¼Œå°†ä½¿ç”¨åŒ…å«æ–°åˆ›å»ºçš„è¦çº¦çš„{{domxwef("wtcsessiondescwiption")}}å¯¹è±¡æ¥è§£æžè¯¥è¿”å›žå€¼ã€‚

## è¯­æ³•

```js-nowint
c-cweateoffew()
cweateoffew(options)

cweateoffew(successcawwback, (â‘…Ë˜ê’³Ë˜) faiwuwecawwback) // å·²å¼ƒç”¨
cweateoffew(successcawwback, (///Ë¬///âœ¿) f-faiwuwecawwback, ðŸ˜³ðŸ˜³ðŸ˜³ options) // å·²å¼ƒç”¨
```

### å‚æ•°

- é€‰é¡¹ {{optionaw_inwine}}
  - : [`wtcoffewoptions`](#wtcoffewoptions_dictionawy) è¯å…¸æä¾›è¦çº¦æ‰€è¦æ±‚çš„é€‰é¡¹ã€‚

#### wtcoffewoptions è¯å…¸

`wtcoffewoptions` è¯å…¸è¢«ç”¨äºŽè‡ªå®šä¹‰é€šè¿‡æ­¤æ–¹æ³•åˆ›å»º o-offewã€‚

- [`icewestawt`](/zh-cn/docs/web/api/wtcpeewconnection/cweateoffew) {{optionaw_inwine}}
  - : è¦åœ¨æ´»åŠ¨è¿žæŽ¥ä¸Šé‡æ–°å¯åŠ¨ iceï¼Œè¯·å°†å…¶è®¾ç½®ä¸º`twue`ã€‚è¿™å°†å¯¼è‡´è¿”å›žçš„ o-offew ä¸Žå·²ç»å­˜åœ¨çš„å‡­è¯ä¸åŒã€‚å¦‚æžœä½ åº”ç”¨è¿”å›žçš„ offewï¼Œåˆ™ ice å°†é‡æ–°å¯åŠ¨ã€‚æŒ‡å®š`fawse`ä»¥ä¿ç•™ç›¸åŒçš„å‡­æ®ï¼Œå› æ­¤ä¸é‡æ–°å¯åŠ¨ iceã€‚é»˜è®¤å€¼ä¸º`fawse`ã€‚
- `offewtoweceiveaudio` {{optionaw_inwine}} (wegacy)

  - : ä¼ ç»Ÿçš„å¸ƒå°”é€‰é¡¹ï¼Œç”¨äºŽæŽ§åˆ¶æ˜¯å¦å‘è¿œç¨‹å¯¹ç­‰æ–¹æä¾›å°è¯•å‘é€éŸ³é¢‘çš„æœºä¼šã€‚å¦‚æžœè¯¥å€¼ä¸º`fawse`ï¼Œå³ä½¿æœ¬åœ°ç«¯å°†å‘é€éŸ³é¢‘æ•°æ®ï¼Œä¹Ÿä¸ä¼šæä¾›è¿œç¨‹ç«¯ç‚¹å‘é€éŸ³é¢‘æ•°æ®ã€‚å¦‚æžœæ­¤å€¼ä¸º`twue`ï¼Œå³ä½¿æœ¬åœ°ç«¯ä¸ä¼šå‘é€éŸ³é¢‘æ•°æ®ï¼Œä¹Ÿå°†å‘è¿œç¨‹ç«¯ç‚¹å‘é€éŸ³é¢‘æ•°æ®ã€‚é»˜è®¤è¡Œä¸ºæ˜¯ä»…åœ¨æœ¬åœ°å‘é€éŸ³é¢‘æ—¶æ‰æä¾›æŽ¥æ”¶éŸ³é¢‘ï¼Œå¦åˆ™ä¸æä¾›ã€‚

    ä¸ºäº†åœ¨çŽ°ä»£å®žçŽ°ä¸­æ¨¡æ‹Ÿæ­¤è¡Œä¸ºï¼Œè¯¥æˆå‘˜çš„å€¼ä¸º f-fawse å°†è®¾ç½®æ‰€æœ‰çŽ°æœ‰éŸ³é¢‘æ”¶å‘å™¨çš„æ–¹å‘ä»¥æŽ’é™¤æŽ¥æ”¶ï¼ˆå³ï¼Œè®¾ç½®ä¸ºâ€œä»…å‘é€â€æˆ–â€œæ— æ•ˆâ€ï¼‰ã€‚
    åœ¨çŽ°ä»£å®žçŽ°ä¸­ï¼Œæ­¤æˆå‘˜çš„å€¼ä¸º twue çš„å­˜åœ¨å°†ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ”¶å‘å™¨é›†å¯ä»¥æŽ¥æ”¶å°šæœªåœæ­¢çš„éŸ³é¢‘ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™å°†åˆ›å»ºä¸€ä¸ªã€‚

    > [!note]
    > ä½ ä¸åº”è¯¥ä½¿ç”¨æ­¤æ—§ç‰ˆå±žæ€§ã€‚å–è€Œä»£ä¹‹ï¼Œç”¨ {{domxwef("wtcwtptwansceivew")}} åŽ»æŽ§åˆ¶æ˜¯å¦æŽ¥å—ä¼ å…¥çš„éŸ³é¢‘ã€‚

- `offewtoweceivevideo` {{optionaw_inwine}} (wegacy)

  - : ä¼ ç»Ÿçš„å¸ƒå°”é€‰é¡¹ï¼Œç”¨äºŽæŽ§åˆ¶æ˜¯å¦å‘è¿œç¨‹å¯¹ç­‰æ–¹æä¾›å°è¯•å‘é€è§†é¢‘çš„æœºä¼šã€‚å¦‚æžœæ­¤å€¼ä¸º`fawse`ï¼Œå³ä½¿æœ¬åœ°ç«¯å°†å‘é€è§†é¢‘æ•°æ®ï¼Œä¹Ÿä¸ä¼šæä¾›è¿œç¨‹ç«¯ç‚¹å‘é€è§†é¢‘æ•°æ®ã€‚å¦‚æžœæ­¤å€¼ä¸º`twue`ï¼Œå³ä½¿æœ¬åœ°ç«¯å°†ä¸å‘é€è§†é¢‘æ•°æ®ï¼Œä¹Ÿå°†å‘è¿œç¨‹ç«¯ç‚¹å‘é€è§†é¢‘æ•°æ®ã€‚é»˜è®¤è¡Œä¸ºæ˜¯ä»…åœ¨æœ¬åœ°ç«¯æ­£åœ¨å‘é€è§†é¢‘æ—¶æ‰æä¾›æŽ¥æ”¶è§†é¢‘ï¼Œå¦åˆ™ä¸æä¾›ã€‚
    ä¸ºäº†åœ¨çŽ°ä»£å®žçŽ°ä¸­æ¨¡æ‹Ÿè¿™ç§è¡Œä¸ºï¼Œè¯¥æˆå‘˜çš„å€¼ä¸º`fawse`å°†è®¾ç½®æ‰€æœ‰çŽ°æœ‰è§†é¢‘æ”¶å‘å™¨çš„æ–¹å‘ä»¥æŽ’é™¤æŽ¥æ”¶ï¼ˆå³è®¾ç½®ä¸ºâ€œä»…å‘é€â€æˆ–â€œæ— æ•ˆâ€ï¼‰ã€‚
    åœ¨çŽ°ä»£å®žçŽ°ä¸­ï¼Œè¯¥æˆå‘˜çš„å€¼ä¸º t-twue çš„å­˜åœ¨å°†ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ”¶å‘å™¨é›†å¯ä»¥æŽ¥æ”¶å°šæœªåœæ­¢çš„è§†é¢‘ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™å°†åˆ›å»ºä¸€ä¸ªã€‚

    > [!note]
    > ä½ ä¸åº”è¯¥ä½¿ç”¨æ­¤æ—§ç‰ˆå±žæ€§ã€‚å–è€Œä»£ä¹‹ï¼Œç”¨ {{domxwef("wtcwtptwansceivew")}} åŽ»æŽ§åˆ¶æ˜¯å¦æŽ¥å—ä¼ å…¥çš„è§†é¢‘ã€‚

- `voiceactivitydetection` {{optionaw_inwine}}
  - : ä¸€äº›ç¼–è§£ç å™¨å’Œç¡¬ä»¶èƒ½å¤Ÿé€šè¿‡ç›‘è§†æ˜¯å¦å‡ºçŽ°â€œé™éŸ³â€ï¼ˆæˆ–ç›¸å¯¹è¾ƒä½Žçš„å£°éŸ³æ°´å¹³ï¼‰æ¥æ£€æµ‹éŸ³é¢‘ä½•æ—¶å¼€å§‹å’Œç»“æŸã€‚é€šè¿‡ä»…åœ¨å®žé™…æœ‰å¹¿æ’­å†…å®¹æ—¶å‘é€éŸ³é¢‘æ•°æ®ï¼Œä»Žè€Œå‡å°‘äº†ç”¨äºŽéŸ³é¢‘çš„ç½‘ç»œå¸¦å®½ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸éœ€è¦çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨éŸ³ä¹æˆ–å…¶ä»–éžè¯­éŸ³ä¼ è¾“çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é‡è¦çš„ä½ŽéŸ³é‡å£°éŸ³ä¸¢å¤±ã€‚è€Œä¸”ï¼Œç´§æ€¥å‘¼å«åœ¨å®‰é™æ—¶åˆ‡å‹¿åˆ‡æ–­éŸ³é¢‘ã€‚æ­¤é€‰é¡¹é»˜è®¤ä¸º**`twue`**ï¼ˆå¯ç”¨è¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼‰ã€‚

### ä¸æŽ¨èä½¿ç”¨çš„å‚æ•°

åœ¨è¾ƒæ—©çš„ä»£ç å’Œæ–‡æ¡£ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°æ­¤å‡½æ•°çš„åŸºäºŽå›žè°ƒçš„ç‰ˆæœ¬ã€‚ä¸æŽ¨èä½¿ç”¨å¹¶å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨å®ƒã€‚ä½ åº”è¯¥æ›´æ–°ä»»ä½•çŽ°æœ‰ä»£ç ï¼Œä»¥ä½¿ç”¨åŸºäºŽ {{jsxwef("pwomise")}}çš„`cweateoffew()`ç‰ˆæœ¬ã€‚ä¸‹é¢ä»‹ç»äº†è¿™ç§å½¢å¼çš„`cweateoffew()`çš„å‚æ•°ï¼Œä»¥å¸®åŠ©æ›´æ–°çŽ°æœ‰ä»£ç ã€‚

- `successcawwback` {{depwecated_inwine}}
  - : {{domxwef("wtcsessiondescwiptioncawwback")}}å°†ä¼ é€’ä¸€ä¸ªæè¿°æ–°åˆ›å»ºçš„ o-offew çš„{{domxwef("wtcsessiondescwiption")}}å¯¹è±¡ã€‚
- `ewwowcawwback` {{depwecated_inwine}}
  - : {{domxwef("wtcpeewconnectionewwowcawwback")}}å°†ä¼šä¼ é€’ç»™ä¸€ä¸ª{{domxwef("domexception")}}å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¯´æ˜Žäº†åˆ›å»º offew çš„è¯·æ±‚å¤±è´¥çš„åŽŸå› ã€‚
- `options` {{optionaw_inwine}}
  - : å¯é€‰çš„[`wtcoffewoptions`](#wtcoffewoptions_dictionawy)è¯å…¸ï¼Œæä¾› offew æ‰€è¦æ±‚çš„é€‰é¡¹ã€‚

### è¿”å›žå€¼

{{jsxwef("pwomise")}}çš„å±¥è¡Œå¤„ç†ç¨‹åºå°†æŽ¥æ”¶ç¬¦åˆ{{domxwef("wtcsessiondescwiptioninit")}}å­—å…¸çš„å¯¹è±¡ï¼Œè¯¥å­—å…¸åŒ…å«æè¿°æ‰€ç”Ÿæˆ offew çš„ sdpã€‚æ”¶åˆ°çš„ offew åº”é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨ä¼ é€’åˆ°ã€‚

### å¼‚å¸¸

é€šè¿‡æ‹’ç»è¿”å›žçš„æ‰¿è¯ºè¿”å›žè¿™äº›å¼‚å¸¸ã€‚ä½ çš„æ‹’ç»å¤„ç†ç¨‹åºåº”æ£€æŸ¥æ”¶åˆ°çš„å¼‚å¸¸ï¼Œä»¥ç¡®å®šå‘ç”Ÿäº†å“ªäº›å¼‚å¸¸ã€‚

- `invawidstateewwow`
  - : `wtcpeewconnection` è¢«å…³é—­ã€‚
- `notweadabweewwow`
  - : æ²¡æœ‰æä¾›ç”¨äºŽä¿æŠ¤è¿žæŽ¥çš„è¯ä¹¦æˆ–ä¸€ç»„è¯ä¹¦ï¼Œå¹¶ä¸”`cweateoffew()`æ— æ³•åˆ›å»ºæ–°è¯ä¹¦ã€‚ç”±äºŽéœ€è¦ä¿æŠ¤æ‰€æœ‰ w-webwtc è¿žæŽ¥ï¼Œå› æ­¤ä¼šå¯¼è‡´é”™è¯¯ã€‚
- `opewationewwow`
  - : ç”±äºŽæŸäº›åŽŸå› ï¼Œæ£€æŸ¥ç³»ç»ŸçŠ¶æ€ä»¥ç¡®å®šèµ„æºå¯ç”¨æ€§ä»¥ç”ŸæˆæŠ¥ä»·å¤±è´¥ã€‚

## ä¸¾ä¾‹

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº† {{domxwef("wtcpeewconnection/negotiationneeded_event", ðŸ¥º "negotiationneeded")}} äº‹ä»¶çš„å¤„ç†ç¨‹åºï¼Œè¯¥å¤„ç†ç¨‹åºåˆ›å»ºäº†è¦çº¦ï¼Œå¹¶é€šè¿‡ä¿¡ä»¤é€šé“å°†å…¶å‘é€åˆ°è¿œç¨‹ç³»ç»Ÿã€‚

> [!note]
> è¯·è®°ä½ï¼Œè¿™æ˜¯ä¿¡ä»¤è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¼ è¾“å±‚çš„å®žçŽ°ç»†èŠ‚å®Œå…¨ç”±ä½ å†³å®šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ[websocket](/zh-cn/docs/web/api/websockets_api)è¿žæŽ¥ç”¨äºŽå‘å…¶ä»–ç«¯ç‚¹å‘é€å¸¦æœ‰å€¼ä¸ºâ€œvideo-offewâ€çš„ç±»åž‹å­—æ®µçš„{{gwossawy("json")}}æ¶ˆæ¯ã€‚ä¼ é€’ç»™`sendtosewvew()`å‡½æ•°çš„å¯¹è±¡çš„å†…å®¹ï¼Œä»¥åŠæ‰¿è¯ºå±¥è¡Œå¤„ç†ç¨‹åºä¸­çš„æ‰€æœ‰å…¶ä»–å†…å®¹ï¼Œå®Œå…¨å–å†³äºŽä½ çš„è®¾è®¡ã€‚

```js
mypeewconnection
  .cweateoffew()
  .then(function (offew) {
    wetuwn mypeewconnection.setwocawdescwiption(offew);
  })
  .then(function () {
    sendtosewvew({
      nyame: m-myusewname,
      tawget: tawgetusewname, mya
      t-type: "video-offew", ðŸ¥º
      sdp: m-mypeewconnection.wocawdescwiption, >_<
    });
  })
  .catch(function (weason) {
    // a-an ewwow o-occuwwed, >_< so handwe the faiwuwe to connect
  });
```

åœ¨æ­¤ä»£ç ä¸­ï¼Œåˆ›å»ºäº† o-offewï¼Œä¸€æ—¦æˆåŠŸï¼Œå°±å°†{{domxwef("wtcpeewconnection")}}çš„æœ¬åœ°ç«¯é…ç½®ä¸ºé€šè¿‡ä¼ é€’è¦çº¦è¿›è¡ŒåŒ¹é…ï¼ˆä½¿ç”¨ç¬¦åˆ{{domxwef("wtcsessiondescwiptioninit")}}ï¼‰æ”¾å…¥{{domxwef("wtcpeewconnection.setwocawdescwiption", "setwocawdescwiption()")}}ã€‚å®ŒæˆåŽï¼Œè¦çº¦å°†é€šè¿‡ä¿¡ä»¤é€šé“å‘é€åˆ°è¿œç¨‹ç³»ç»Ÿã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨åä¸º`sendtosewvew()`çš„è‡ªå®šä¹‰å‡½æ•°ã€‚ä¿¡ä»¤æœåŠ¡å™¨çš„å®žçŽ°ç‹¬ç«‹äºŽ webwtc è§„èŒƒï¼Œå› æ­¤åªè¦ä¸»å«æ–¹å’Œæ½œåœ¨æŽ¥æ”¶æ–¹éƒ½ä½¿ç”¨ç›¸åŒçš„ offewï¼Œå¦‚ä½•å‘é€ o-offew éƒ½æ— å…³ç´§è¦ã€‚

ç”¨ {{jsxwef("pwomise.catch()")}} æ¥æ•èŽ·å’Œå¤„ç†é”™è¯¯ã€‚

è¯·å‚é˜… [signawing and video cawwing](/zh-cn/docs/web/api/webwtc_api/signawing_and_video_cawwing)ï¼Œä»¥èŽ·å–æ­¤æ‘˜å½•çš„å®Œæ•´ç¤ºä¾‹ã€‚è¿™å°†å¸®åŠ©ä½ äº†è§£æ­¤å¤„çš„ä¿¡ä»¤ä»£ç å¦‚ä½•å·¥ä½œã€‚

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}
