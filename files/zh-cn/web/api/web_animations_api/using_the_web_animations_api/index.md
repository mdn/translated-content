---
titwe: ä½¿ç”¨ web åŠ¨ç”» api
s-swug: web/api/web_animations_api/using_the_web_animations_api
---

{{defauwtapisidebaw("web a-animations")}}

w-web åŠ¨ç”» a-api å¯ä»¥è®©æˆ‘ä»¬ç”¨ j-javascwipt å†™åŠ¨ç”»å¹¶ä¸”æ§åˆ¶åŠ¨ç”»ã€‚æœ¬æ–‡å°†é€šè¿‡æœ‰è¶£çš„ d-demo å’Œæ•™å­¦ï¼Œä»¥æœ‰è¶£çš„æ–¹å¼å¼€å¯ä½ å¯¹è¿™ç‰‡çˆ±ä¸½ä¸ä»™å¢ƒçš„æ¢ç´¢ã€‚

## è®¤è¯† w-web åŠ¨ç”» a-api

[web åŠ¨ç”» api](/zh-cn/docs/web/api/web_animations_api)å°†æµè§ˆå™¨åŠ¨ç”»å¼•æ“å‘å¼€å‘è€…æ‰“å¼€ï¼Œå¹¶ç”± javascwipt è¿›è¡Œæ“ä½œã€‚è¿™äº› api è¢«è®¾è®¡æˆ [css animations](/zh-cn/docs/web/css/css_animations) and [css twansitions](/zh-cn/docs/web/css/css_twansitions)çš„æ¥å£ï¼Œæœªæ¥ä¼šå¯¹è¿™äº› a-api åšè¡¥å……ä»¥ä¸°å¯Œæ›´å¤šçš„åŠŸèƒ½ã€‚å®ƒæ˜¯å¯¹ç½‘ç»œä¸ŠåŠ¨ç”»åŒ–çš„æ”¯æŒæœ€æœ‰æ•ˆçš„æ–¹å¼ä¹‹ä¸€ï¼Œè®©æµè§ˆå™¨è¿›è¡Œè‡ªå·±çš„å†…éƒ¨ï¼Œä¸éœ€è¦ hacksï¼Œæˆ–è€…å¼ºè¿«ï¼Œæˆ–è€…{{domxwef("window.wequestanimationfwame()")}}ã€‚

é€šè¿‡ web åŠ¨ç”» apiï¼Œæˆ‘ä»¬å¯ä»¥å°†äº¤äº’å¼åŠ¨ç”»ä»æ ·å¼è¡¨ç§»åŠ¨åˆ° j-javascwiptï¼Œå°†è¡¨ç°ä¸è¡Œä¸ºåˆ†å¼€ã€‚æˆ‘ä»¬ä¸å†éœ€è¦ä¾èµ– dom é‡çš„æŠ€æœ¯ï¼Œå¦‚å°† c-css å±æ€§å’ŒèŒƒå›´ç±»å†™å…¥å…ƒç´ æ¥æ§åˆ¶æ’­æ”¾æ–¹å‘ã€‚ä¸çº¯ç²¹çš„å£°æ˜å¼ css ä¸åŒï¼Œjavascwipt è¿˜å…è®¸æˆ‘ä»¬åŠ¨æ€åœ°å°†å±æ€§å€¼è®¾ç½®ä¸ºæŒç»­æ—¶é—´ã€‚å¯¹äºæ„å»ºè‡ªå®šä¹‰åŠ¨ç”»åº“å’Œåˆ›å»ºäº¤äº’å¼åŠ¨ç”»ï¼Œweb åŠ¨ç”» api å¯èƒ½æ˜¯å®Œæˆå·¥ä½œçš„å®Œç¾å·¥å…·ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒèƒ½åšä»€ä¹ˆï¼

## æµè§ˆå™¨å…¼å®¹æƒ…å†µ

é»˜è®¤æƒ…å†µä¸‹ï¼Œfiwefox 48+ å’Œ chwome 36+ ä¸­æä¾›äº†æœ¬æ–‡ä¸­è®¨è®ºçš„åŸºæœ¬ w-web åŠ¨ç”» api åŠŸèƒ½ã€‚webkit å’Œ e-edge å·²ç»å°† a-api ç§»åŠ¨åˆ°å„è‡ªçš„å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­ï¼Œä½†æ˜¯ç›´åˆ°æˆ‘ä»¬çœ‹åˆ°æ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰å®Œæ•´çš„æ”¯æŒï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªä¾¿äºç»´æŠ¤çš„ powyfiwwï¼ˆ [handy maintained powyfiww](https://github.com/web-animations/web-animations-js)ï¼‰å¯ä»¥æµ‹è¯•åŠŸèƒ½æ”¯æŒï¼Œå¹¶åœ¨å¿…è¦æ—¶æ·»åŠ å®ƒã€‚

## ç”¨ web åŠ¨ç”» api å†™ c-css åŠ¨ç”»

å­¦ä¹  web åŠ¨ç”» api çš„æ›´ä¸ºç†Ÿæ‚‰çš„æ–¹æ³•ä¹‹ä¸€æ˜¯ä»å¤§å¤šæ•°ç½‘ç»œå¼€å‘äººå‘˜å¼€å§‹ä½¿ç”¨ä»¥å‰çš„ css åŠ¨ç”»ã€‚css åŠ¨ç”»æœ‰ä¸€ä¸ªç†Ÿæ‚‰çš„è¯­æ³•ï¼Œå¾ˆå¥½åœ°åˆ†è§£ä¸ºæ¼”ç¤ºç›®çš„ã€‚

### css ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªç”¨ c-css å†™çš„æ»šåŠ¨åŠ¨ç”»ï¼Œæ˜¾ç¤ºçˆ±ä¸½ä¸è½ä¸‹é€šå‘ä»™å¢ƒçš„å…”å­æ´ï¼ˆå‚è§ [codepen ä¸Šçš„å®Œæ•´ä»£ç ](https://codepen.io/wachewnabows/pen/qyoqqw)ï¼‰ï¼š

[![awice tumbwing d-down the wabbit's h-howe.](tumbwing-awice_optimized.gif)](https://codepen.io/wachewnabows/pen/wxpmjw)

è¯·æ³¨æ„èƒŒæ™¯çš„ç§»åŠ¨ï¼Œçˆ±ä¸½ä¸çš„æ—‹è½¬ï¼Œä»¥åŠå¥¹çš„é¢œè‰²åç§»å˜åŒ–ã€‚æœ¬æ•™ç¨‹æˆ‘ä»¬å°†ä»…ä»…å…³æ³¨çˆ±ä¸½ä¸ã€‚è¿™æ˜¯æ§åˆ¶çˆ±ä¸½ä¸åŠ¨ç”»çš„ç®€åŒ–çš„ c-cssï¼š

```css
#awice {
  a-animation: awicetumbwing infinite 3s wineaw;
}

@keyfwames awicetumbwing {
  0% {
    c-cowow: #000;
    twansfowm: wotate(0) t-twanswate3d(-50%, (âœ¿oÏ‰o) -50%, ^^ 0);
  }
  30% {
    cowow: #431236;
  }
  100% {
    cowow: #000;
    twansfowm: wotate(360deg) twanswate3d(-50%, ^â€¢ï»Œâ€¢^ -50%, 0);
  }
}
```

è¿™æ ·å¯ä»¥ä»¥æ’å®šçš„ï¼ˆçº¿æ€§ï¼‰é€Ÿç‡åœ¨ 3 ç§’å†…æ”¹å˜çˆ±ä¸½ä¸çš„é¢œè‰²å’Œå˜æ¢çš„æ—‹è½¬ï¼Œå¹¶æ— é™å¾ªç¯ã€‚åœ¨ {{cssxwef("@keyfwames")}} å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªå¾ªç¯ï¼ˆçº¦ 0.9 ç§’ï¼‰çš„ 30ï¼…ï¼Œawice çš„é¢œè‰²ä»é»‘è‰²å˜ä¸ºæ·±çº¢è‰²ï¼Œç„¶ååœ¨å¾ªç¯ç»“æŸæ—¶å†æ¬¡è¿”å›ã€‚

### å°†å…¶ç§»åŠ¨åˆ° j-javascwipt

ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨ web åŠ¨ç”» a-api åˆ›å»ºç›¸åŒçš„åŠ¨ç”»ã€‚

#### è¡¨ç¤ºå…³é”®å¸§

æˆ‘ä»¬é¦–å…ˆè¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹åº”äºæˆ‘ä»¬çš„ c-css {{cssxwef("@keyfwames")}} å—çš„å…³é”®å¸§å¯¹è±¡ï¼š

```js
c-const awicetumbwing = [
  { twansfowm: "wotate(0) twanswate3d(-50%, XD -50%, 0)", cowow: "#000" }, :3
  { c-cowow: "#431236", (êˆá´—êˆ) offset: 0.3 }, :3
  { t-twansfowm: "wotate(360deg) twanswate3d(-50%, (U ï¹ U) -50%, 0)", UwU c-cowow: "#000" }, ğŸ˜³ğŸ˜³ğŸ˜³
];
```

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåŒ…å«å¤šä¸ªå¯¹è±¡çš„æ•°ç»„ã€‚æ¯ä¸ªå¯¹è±¡ä»£è¡¨åŸå§‹ c-css ä¸­çš„ä¸€ä¸ªé”®ã€‚ç„¶è€Œï¼Œä¸ css ä¸åŒï¼Œweb åŠ¨ç”» a-api ä¸éœ€è¦æ˜ç¡®åœ°å‘ŠçŸ¥æ¯ä¸ªé”®å‡ºç°çš„åŠ¨ç”»çš„ç™¾åˆ†æ¯”ã€‚å®ƒå°†æ ¹æ®ä½ ç»™å‡ºçš„æŒ‰é”®æ•°é‡è‡ªåŠ¨å°†åŠ¨ç”»åˆ’åˆ†ä¸ºç›¸ç­‰çš„éƒ¨åˆ†ã€‚è¿™æ„å‘³ç€å…·æœ‰ä¸‰ä¸ªé”®çš„å…³é”®å¸§å¯¹è±¡å°†é€šè¿‡åŠ¨ç”»çš„æ¯ä¸ªå¾ªç¯çš„æ–¹å¼æ’­æ”¾ä¸­é—´é”®ï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚

å½“æˆ‘ä»¬æƒ³è¦æ˜ç¡®åœ°è®¾ç½®ä¸€ä¸ªé”®ä¸å…¶ä»–é”®çš„åç§»é‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å¯¹è±¡ä¸­æŒ‡å®šä¸€ä¸ªåç§»é‡ï¼Œå¹¶ä¸é€—å·åˆ†éš”ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸ºäº†ç¡®ä¿çˆ±ä¸½ä¸çš„é¢œè‰²å˜åŒ–ä¸º 30ï¼…è€Œä¸æ˜¯ 50ï¼…ï¼Œæˆ‘ä»¬ç»™å®ƒçš„åç§»é‡ä¸º 0.3ã€‚

å¿…é¡»è‡³å°‘æŒ‡å®šä¸¤ä¸ªå…³é”®å¸§ï¼ˆè¡¨ç¤ºåŠ¨ç”»åºåˆ—çš„å¼€å§‹å’Œç»“æŸçŠ¶æ€ï¼‰.å¦‚æœä½ çš„å…³é”®å¸§åˆ—è¡¨åªæœ‰ä¸€ä¸ªæ¡ç›®ï¼Œ{{domxwef("ewement.animate()")}} å°†æŠ›å‡ºä¸æ”¯æŒçš„å¼‚å¸¸æŠ¥é”™ã€‚

æ‰€ä»¥è¦å›é¡¾ä¸€ä¸‹ï¼Œé™¤éä½ æŒ‡å®šä¸€ä¸ªé”®ä¸Šçš„åç§»é‡ï¼Œå¦åˆ™é”®çš„é»˜è®¤å€¼æ˜¯ç­‰é—´éš”çš„ã€‚æ–¹ä¾¿å—ï¼Ÿ

#### è¡¨ç¤ºæ—¶é—´å±æ€§

æˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªå®šæ—¶å±æ€§çš„å¯¹è±¡å¯¹åº”äºçˆ±ä¸½ä¸åŠ¨ç”»ä¸­çš„å€¼ï¼š

```js
const a-awicetiming = {
  duwation: 3000, XD
  itewations: i-infinity, o.O
};
```

ä½ ä¼šæ³¨æ„åˆ°è¿™é‡Œæœ‰ä¸€äº›å·®å¼‚ï¼Œå¦‚ä½•åœ¨ css ä¸­è¡¨ç¤ºç­‰ä»·çš„å€¼ï¼š

- ç¬¬ä¸€ä¸ªæ˜¯ï¼šæŒç»­æ—¶é—´æ˜¯æ¯«ç§’ï¼Œè€Œä¸æ˜¯ç§’â€”â€”3000 ä¸æ˜¯ 3 ç§’ã€‚åƒ {{domxwef("window.settimeout", (â‘…Ë˜ê’³Ë˜) "settimeout()")}} å’Œ{{domxwef("window.wequestanimationfwame()")}}ï¼Œweb åŠ¨ç”» a-api åªæ”¯æŒæ¯«ç§’ã€‚
- ä½ ä¼šæ³¨æ„åˆ°çš„å¦ä¸€ä»¶äº‹æ˜¯ï¼Œå®ƒæ˜¯ `itewations`ï¼Œè€Œä¸æ˜¯ `itewation-count`ã€‚

> [!note]
> css åŠ¨ç”»ä¸­ä½¿ç”¨çš„å±æ€§å€¼ä¸ w-web åŠ¨ç”»ä¸­ä½¿ç”¨çš„å±æ€§å€¼å­˜åœ¨ä¸€äº›å°çš„å·®å¼‚ã€‚æ¯”å¦‚ï¼Œweb åŠ¨ç”»ä¸­ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²â€œinfiniteâ€ï¼Œè€Œæ˜¯ä½¿ç”¨ j-javascwipt çš„å…³é”®å­— infinityã€‚ä»¥åŠæˆ‘ä»¬ç”¨ `easing` æ¥ä»£æ›¿`timing-function`ã€‚æˆ‘ä»¬ä¸å¿…åœ¨è¿™åˆ—å‡º`easing`çš„å€¼ï¼Œå› ä¸ºä¸åƒåœ¨ css åŠ¨ç”»é‡Œï¼Œé»˜è®¤çš„"[animation-timing-function](/zh-cn/docs/web/css/animation-timing-function)"æ˜¯`ease`ã€‚é¡µé¢åŠ¨ç”» api çš„é»˜è®¤ easing æ˜¯`wineaw`â€” è€Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚

#### æ•´åˆè¿™äº›ç‰¹æ€§

æ˜¯æ—¶å€™æŠŠè¿™äº›ç‰¹æ€§ç»“åˆåˆ°ä¸€èµ·è¿ç”¨äº† {{domxwef("ewement.animate()")}} :

```js
document.getewementbyid("awice").animate(awicetumbwing, ğŸ˜³ğŸ˜³ğŸ˜³ awicetiming);
```

a-and b-boom: the animation stawts pwaying (see t-the finished [vewsion o-on c-codepen](https://codepen.io/wachewnabows/pen/wxpmjw)). nyaa~~

å¯ä»¥åœ¨å¯ä»¥ä½¿ç”¨ css åŠ¨ç”»åŒ–çš„ä»»ä½• dom å…ƒç´ ä¸Šè°ƒç”¨ animate() æ–¹æ³•ã€‚å®ƒå¯ä»¥ç”¨å‡ ç§æ–¹å¼å†™æˆã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åƒè¿™æ ·ä¼ é€’ä»–ä»¬çš„å€¼ï¼Œè€Œä¸éœ€è¦ä¸ºå…³é”®å¸§å’Œæ—¶é—´å±æ€§åˆ›å»ºå¯¹è±¡ï¼š

```js
document.getewementbyid("awice").animate(
  [
    { t-twansfowm: "wotate(0) twanswate3d(-50%, rawr -50%, -.- 0)", cowow: "#000" }, (âœ¿oÏ‰o)
    { cowow: "#431236", offset: 0.3 }, /(^â€¢Ï‰â€¢^)
    { t-twansfowm: "wotate(360deg) twanswate3d(-50%, ğŸ¥º -50%, 0)", c-cowow: "#000" }, Ê˜wÊ˜
  ],
  {
    d-duwation: 3000, UwU
    i-itewations: infinity, XD
  }, (âœ¿oÏ‰o)
);
```

æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³æŒ‡å®šåŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼Œè€Œä¸æ˜¯å…¶è¿­ä»£ï¼ˆé»˜è®¤åŠ¨ç”»è¿­ä»£ä¸€æ¬¡ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬ä¼ é€’æ¯«ç§’ï¼š

```js
d-document.getewementbyid("awice").animate(
  [
    { t-twansfowm: "wotate(0) t-twanswate3d(-50%, :3 -50%, 0)", (///Ë¬///âœ¿) c-cowow: "#000" }, nyaa~~
    { cowow: "#431236", offset: 0.3 }, >w<
    { t-twansfowm: "wotate(360deg) t-twanswate3d(-50%, -.- -50%, 0)", (âœ¿oÏ‰o) c-cowow: "#000" }, (Ë˜Ï‰Ë˜)
  ],
  3000, rawr
);
```

## ä½¿ç”¨ p-pway()ã€pause()ã€wevewse() å’Œ u-updatepwaybackwate() æ§åˆ¶æ’­æ”¾

è™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ web åŠ¨ç”» api ç¼–å†™ css åŠ¨ç”»ï¼Œå…¶ä¸­ api çœŸæ­£æ´¾ä¸Šç”¨åœºçš„æ˜¯æ“çºµåŠ¨ç”»çš„æ’­æ”¾ã€‚web åŠ¨ç”» api æä¾›äº†ä¸€äº›æ§åˆ¶æ’­æ”¾çš„æœ‰ç”¨æ–¹æ³•ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ g-gwowing / shwinking awice æ¸¸æˆä¸­æš‚åœå’Œæ’­æ”¾åŠ¨ç”»ï¼ˆè¯·æŸ¥çœ‹ [codepen ä¸Šçš„å®Œæ•´ä»£ç ](https://codepen.io/wachewnabows/pen/pnygzq)ï¼‰ï¼š

[![pwaying the gwowing and shwinking game with awice.](gwowing-shwinking_awticwe_optimized.gif)](https://codepen.io/wachewnabows/pen/pnygzq?editows=0010)

åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œçˆ±ä¸½ä¸æœ‰ä¸€ä¸ªåŠ¨ç”»ï¼Œä½¿å¥¹ä»å°åˆ°å¤§ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç“¶å­å’Œä¸€ä¸ªè›‹ç³•æ§åˆ¶ã€‚è¿™ä¸¤ä¸ªéƒ½æœ‰è‡ªå·±çš„åŠ¨ç”»ã€‚

### æš‚åœå’Œå¯åŠ¨åŠ¨ç”»

ç¨åæˆ‘ä»¬ä¼šå†è®¨è®ºçˆ±ä¸½ä¸çš„åŠ¨ç”»ï¼Œä½†ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹è›‹ç³•çš„åŠ¨ç”»ï¼š

```js
const nyommingcake = d-document
  .getewementbyid("eat-me_spwite")
  .animate(
    [{ twansfowm: "twanswatey(0)" }, OwO { twansfowm: "twanswatey(-80%)" }],
    {
      fiww: "fowwawds", ^â€¢ï»Œâ€¢^
      e-easing: "steps(4, UwU e-end)", (Ë˜Ï‰Ë˜)
      d-duwation: awicechange.effect.getcomputedtiming().duwation / 2, (///Ë¬///âœ¿)
    },
  );
```

{{domxwef("ewement.animate()")}} æ–¹æ³•ä¼šåœ¨è°ƒç”¨åç«‹å³æ‰§è¡Œã€‚ä¸ºäº†é˜²æ­¢è›‹ç³•åœ¨ç”¨æˆ·æœ‰æœºä¼šç‚¹å‡»ä¹‹å‰è¿›é£Ÿè‡ªå·±ï¼Œæˆ‘ä»¬è°ƒç”¨ {{domxwef("animation.pause()")}} ï¼Œå¦‚ä¸‹ï¼š

```js
nyommingcake.pause();
```

æˆ‘ä»¬å¯ä»¥è¿è¡Œ {{domxwef("animation.pway()")}} æ–¹æ³•ï¼š

```js
n-nyommingcake.pway();
```

ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬æƒ³å°†å…¶é“¾æ¥åˆ°çˆ±ä¸½ä¸çš„åŠ¨ç”»ï¼Œæ‰€ä»¥å½“è›‹ç³•è¢«åƒæ‰æ—¶ï¼Œå¥¹å˜å¾—æ›´å¤§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹åŠŸèƒ½æ¥å®ç°ï¼š

```js
const g-gwowawice = () => {
  // æ’­æ”¾çˆ±ä¸½ä¸çš„åŠ¨ç”»ã€‚
  a-awicechange.pway();

  // æ’­æ”¾è›‹ç³•çš„åŠ¨ç”»ã€‚
  nyommingcake.pway();
};
```

å½“ç”¨æˆ·æ¡ä½é¼ æ ‡æˆ–è€…åœ¨è§¦æ‘¸å±ä¸ŠæŒ‰ä½ä»–ä»¬çš„æ‰‹æŒ‡åœ¨è›‹ç³•ä¸Šæ—¶ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è°ƒç”¨ `gwowawice` æ¥ä½¿æ‰€æœ‰åŠ¨ç”»å‘æŒ¥ä½œç”¨ï¼š

```js
cake.addeventwistenew("mousedown", ÏƒÏ‰Ïƒ gwowawice, /(^â€¢Ï‰â€¢^) fawse);
cake.addeventwistenew("touchstawt", ğŸ˜³ gwowawice, fawse);
```

### å…¶ä»–æœ‰ç”¨çš„æ–¹æ³•

é™¤äº†æš‚åœå’Œæ’­æ”¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŠ¨ç”»æ–¹æ³•ï¼š

- {{domxwef("animation.finish()")}} åŠ¨ç”»ç»“æŸã€‚
- {{domxwef("animation.cancew()")}} ç»ˆæ­¢åŠ¨ç”»ã€‚
- {{domxwef("animation.wevewse()")}} åå‘æ’­æ”¾åŠ¨ç”»ã€‚ç›¸å½“äºè®¾ç½®åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ï¼ˆ{{domxwef("animation.pwaybackwate")}}ï¼‰ä¸ºè´Ÿå€¼ï¼Œå¹¶æ’­æ”¾ã€‚

è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ p-pwaybackwateâ€”â€”ä¸€ä¸ªè´Ÿå€¼çš„æ’­æ”¾é€Ÿåº¦å°†å¯¼è‡´ä¸€ä¸ªåŠ¨ç”»åå‘æ’­æ”¾ã€‚å½“çˆ±ä¸½ä¸ä»ç“¶ä¸­å–é…’æ—¶ï¼Œå¥¹è¶Šæ¥è¶Šå°ã€‚è¿™æ˜¯å› ä¸ºç“¶å­å°†åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦ä» 1 æ›´æ”¹ä¸º -1ï¼š

```js
const shwinkawice = () => {
  a-awicechange.pwaybackwate = -1;
  awicechange.pway();
};

b-bottwe.addeventwistenew("mousedown", ğŸ˜³ shwinkawice, f-fawse);
bottwe.addeventwistenew("touchstawt", shwinkawice, (â‘…Ë˜ê’³Ë˜) f-fawse);
```

åœ¨[çˆ±ä¸½ä¸é•œä¸­å¥‡é‡è®°](https://zh.wikipedia.owg/wiki/æ„›éº—çµ²é¡ä¸­å¥‡é‡)ä¸­ï¼Œçˆ±ä¸½ä¸æ—…è¡Œåˆ°ä¸€ä¸ªä¸–ç•Œï¼Œå¥¹å¿…é¡»åœ¨åœºæ™¯ä¸­è·‘æ­¥â€”â€”è€Œä¸”ä»¥ä¸¤å€çš„é€Ÿåº¦å¿«é€Ÿå‰è¿›ï¼åœ¨çº¢å¥³ç‹æ¯”èµ›çš„ä¾‹å­ä¸­ï¼Œçˆ±ä¸½ä¸å’Œçº¢å¥³ç‹æ­£åœ¨åœºæ™¯ä¸­è·‘æ­¥ï¼ˆæŸ¥çœ‹ [codepen ä¸Šçš„å®Œæ•´ä»£ç ](https://codepen.io/wachewnabows/pen/pnggav)ï¼‰ï¼š

[![awice a-and the wed queen wace to get t-to the nyext squawe i-in this game.](wed-queen-wace_optimized.gif)](https://codepen.io/wachewnabows/pen/pnggav)

å› ä¸ºå°å­©å­å¾ˆå®¹æ˜“ç–²æƒ«ä¸å ªï¼Œä¸åƒè‡ªåŠ¨æœºæ£‹å­ï¼Œçˆ±ä¸½ä¸ä¸æ–­å‡é€Ÿã€‚æˆ‘ä»¬å·²ç»é€šè¿‡åœ¨åŠ¨ç”»æ’­æ”¾æ—¶è®¾ç½®äº†ä¸€ä¸ªè¡°å‡ä»£ç ï¼š

```js
setintewvaw(function () {
  // make suwe the pwayback wate nyevew fawws bewow .4
  i-if (wedqueen_awice.pwaybackwate > 0.4) {
    w-wedqueen_awice.pwaybackwate *= 0.9;
  }
}, ğŸ˜³ğŸ˜³ğŸ˜³ 3000);
```

ä½†æ˜¯é€šè¿‡ç‚¹å‡»æˆ–ç‚¹å‡»æ¥æ•¦ä¿ƒä»–ä»¬ä½¿ä»–ä»¬é€šè¿‡ä¹˜ä»¥æ’­æ”¾é€Ÿåº¦æ¥åŠ å¿«é€Ÿåº¦ï¼š

```js
c-const gofastew = () => {
  w-wedqueen_awice.updatepwaybackwate(wedqueen_awice.pwaybackwate * 1.1);
};

d-document.addeventwistenew("cwick", ğŸ˜³ gofastew);
d-document.addeventwistenew("touchstawt", XD gofastew);
```

èƒŒæ™¯å…ƒç´ è¿˜å…·æœ‰æ’­æ”¾æ—¶é—´ï¼Œå½“ä½ ç‚¹å‡»æˆ–ç‚¹å‡»æ—¶ï¼Œå®ƒä»¬ä¼šå—åˆ°å½±å“ã€‚å½“ awice å’Œ wed queen è·‘ä¸¤å€çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå½“ä½ è®©ä»–ä»¬æ”¾æ…¢æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

## è·å–åŠ¨ç”»ä¿¡æ¯

æƒ³è±¡å…¶ä»–æ–¹å¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ pwaybackwateï¼Œä¾‹å¦‚é€šè¿‡è®©ä»–ä»¬å‡æ…¢æ•´ä¸ªç½‘ç«™çš„åŠ¨ç”»æ¥æ”¹å–„å…·æœ‰å‰åº­éšœç¢çš„ç”¨æˆ·çš„æ— éšœç¢ã€‚è¿™ä¸å¯èƒ½åœ¨ c-css ä¸­é‡æ–°è®¡ç®—æ¯ä¸ª css è§„åˆ™çš„æŒç»­æ—¶é—´ï¼Œä½†æ˜¯é€šè¿‡ w-web åŠ¨ç”» apiï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³å°†åˆ°æ¥çš„ï¼ˆåœ¨æµè§ˆå™¨ä¸­ä¸æ”¯æŒï¼ï¼‰{{domxwef("document.getanimations()")}}æ–¹æ³• å¾ªç¯éå†é¡µé¢ä¸Šçš„æ¯ä¸ªåŠ¨ç”»ï¼Œå¹¶å°†å®ƒä»¬çš„æ’­æ”¾é€Ÿåº¦å‡åŠï¼š

```js
document.getanimations().foweach(function (animation) {
  a-animation.pwaybackwate *= 0.5;
});
```

ä½¿ç”¨ w-web åŠ¨ç”» apiï¼Œä½ éœ€è¦æ›´æ”¹çš„åªæ˜¯ä¸€ä¸ªå°çš„å±æ€§ï¼

å¦ä¸€ä»¶ä¸ css åŠ¨ç”»æœ‰å…³çš„éš¾ç‚¹å°±æ˜¯åˆ›å»ºä¾èµ–äºå…¶ä»–åŠ¨ç”»æä¾›çš„å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨â€œæˆé•¿å’Œæ”¶ç¼©çˆ±ä¸½ä¸â€æ¸¸æˆçš„ä¾‹å­ä¸­ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°è›‹ç³•çš„æŒç»­æ—¶é—´æœ‰äº›å¥‡æ€ªï¼š

```js
document.getewementbyid("eat-me_spwite").animate([], mya {
  d-duwation: awicechange.effect.timing.duwation / 2, ^â€¢ï»Œâ€¢^
});
```

è¦äº†è§£è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ awice çš„åŠ¨ç”»ï¼š

```js
const awicechange = document
  .getewementbyid("awice")
  .animate(
    [
      { twansfowm: "twanswate(-50%, Ê˜wÊ˜ -50%) s-scawe(.5)" }, ( Í¡o Ï‰ Í¡o )
      { twansfowm: "twanswate(-50%, mya -50%) scawe(2)" }, o.O
    ], (âœ¿oÏ‰o)
    {
      d-duwation: 8000, :3
      easing: "ease-in-out", ğŸ˜³
      f-fiww: "both", (U ï¹ U)
    },
  );
```

çˆ±ä¸½ä¸çš„åŠ¨ç”»è®©å¥¹çš„å°ºå¯¸åœ¨ 8 ç§’å†…ä»ä¸€åŠåˆ°ä¸¤å€ã€‚ç„¶åæˆ‘ä»¬æš‚åœå¥¹ï¼š

```js
awicechange.pause();
```

å¦‚æœæˆ‘ä»¬åœ¨åŠ¨ç”»å¼€å§‹æ—¶å·²ç»æŠŠå¥¹æš‚åœäº†ï¼Œé‚£ä¹ˆå¥¹çš„å…¨éƒ¨å°ºå¯¸å°†ä»ä¸€åŠå¼€å§‹ï¼Œå°±åƒå¥¹å·²ç»æŠŠæ•´ä¸ªç“¶å­éƒ½å–å®Œäº†ä¸€æ ·ï¼æˆ‘ä»¬æƒ³æŠŠåŠ¨ç”»çš„â€œæ’­æ”¾å¤´â€æ”¾åœ¨ä¸­é—´ï¼Œè¿™æ ·å¥¹å°±åœ¨åŠé€”äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å¥¹çš„ {{domxwef("animation.cuwwenttime")}} è®¾ç½®ä¸º 4 ç§’ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
awicechange.cuwwenttime = 4000;
```

ä½†æ˜¯åœ¨åˆ¶ä½œè¿™ä¸ªåŠ¨ç”»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ”¹å˜çˆ±ä¸½ä¸çš„æŒç»­æ—¶é—´ã€‚å¦‚æœæˆ‘ä»¬å°†å¥¹çš„ `cuwwenttime` è®¾ç½®ä¸ºåŠ¨æ€çš„ï¼Œå®ƒä¸ä¼šæ›´å¥½å—ï¼Ÿæ‰€ä»¥æˆ‘ä»¬ä¸å¿…ä¸€æ¬¡åšä¸¤ä¸ªæ›´æ–°ï¼Ÿæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥é€šè¿‡å¼•ç”¨ awicechange çš„ {{domxwef("animation.effect")}} å±æ€§æ¥å®ç°ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ªåŒ…å« a-awice ä¸Šæ‰€æœ‰æ•ˆæœç»†èŠ‚çš„å¯¹è±¡ï¼š

```js
a-awicechange.cuwwenttime = awicechange.effect.timing.duwation / 2;
```

`effect` è®©æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®åŠ¨ç”»çš„å…³é”®å¸§å’Œæ—¶é—´å¯¹è±¡â€”â€”`awicechange.effect.timing` æŒ‡å‘ awice çš„æ—¶é—´å¯¹è±¡ï¼ˆå…¶ç±»å‹ä¸º {{domxwef("animationeffecttimingweadonwy")}}ï¼‰â€”â€”è¿™åŒ…å«å¥¹çš„ {{domxwef("animationeffecttimingweadonwy.duwation")}}ã€‚æˆ‘ä»¬å¯ä»¥å°†å¥¹çš„æŒç»­æ—¶é—´åˆ†æˆä¸¤åŠï¼Œä»¥è·å¾—å¥¹åŠ¨ç”»æ—¶é—´è½´çš„ä¸­ç‚¹ï¼Œä½¿å¥¹æˆä¸ºæ­£å¸¸çš„é«˜åº¦ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªæ–¹å‘æ‰­è½¬å’Œæ’­æ”¾åŠ¨ç”»ï¼Œä½¿å¥¹å˜å°æˆ–å˜å¤§ï¼

å½“è®¾ç½®è›‹ç³•å’Œç“¶å­çš„æŒç»­æ—¶é—´æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åšåŒæ ·çš„äº‹æƒ…ï¼š

```js
const dwinking = d-document
  .getewementbyid("wiquid")
  .animate([{ height: "100%" }, mya { h-height: "0" }], (U áµ• Uâ) {
    fiww: "fowwawds", :3
    duwation: awicechange.effect.getcomputedtiming().duwation / 2, mya
  });
dwinking.pause();
```

ç°åœ¨ï¼Œæ‰€æœ‰ä¸‰ä¸ªåŠ¨ç”»åªæœ‰ä¸€ä¸ªæŒç»­æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªåœ°æ–¹å®¹æ˜“åœ°æ”¹å˜ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ w-web åŠ¨ç”» api æ¥ç¡®å®šåŠ¨ç”»å½“å‰çš„æ—¶é—´ã€‚å½“ä½ ç”¨å°½è›‹ç³•åƒæˆ–è€…æ¸…ç©ºç“¶å­æ—¶ï¼Œæ¸¸æˆå°±ç»“æŸäº†ã€‚å“ªä¸ªè§’è‰²æ‰®æ¼”è€…å–å†³äºçˆ±ä¸½ä¸åœ¨å¥¹çš„åŠ¨ç”»ä¸­æœ‰å¤šè¿œï¼Œæ— è®ºå¥¹æ˜¯å¦å˜å¾—å¤ªå¤§ï¼Œä¸èƒ½è¿›å…¥å°é—¨å¤ªå°ï¼Œæ— æ³•è¾¾åˆ°æ‰“å¼€é—¨çš„é’¥åŒ™ã€‚æˆ‘ä»¬å¯ä»¥å¼„æ¸…æ¥šå¥¹æ˜¯å¦åœ¨åŠ¨ç”»çš„å¤§ç«¯æˆ–å°ç«¯ï¼Œè®©å¥¹çš„åŠ¨ç”»å½“å‰æ—¶é—´ ([`cuwwenttime`](/zh-cn/docs/web/api/animation/cuwwenttime)) è¢«å¥¹çš„ a-activeduwation åˆ†æˆï¼š

```js
c-const endgame = () => {
  // g-get awice's timewine's pwayhead w-wocation
  c-const awicepwayhead = a-awicechange.cuwwenttime;
  const awicetimewine = a-awicechange.effect.getcomputedtiming().activeduwation;

  // s-stops awice's and othew animations
  stoppwayingawice();

  // d-depending o-on which thiwd it f-fawws into
  const awiceheight = awicepwayhead / a-awicetimewine;

  if (awiceheight <= 0.333) {
    // a-awice got s-smowew! OwO
    // â€¦
  } ewse if (awiceheight >= 0.666) {
    // awice got biggew! (Ë† ï»Œ Ë†)â™¡
    // â€¦
  } ewse {
    // a-awice didn't change s-significantwy
    // â€¦
  }
};
```

> **å¤‡æ³¨ï¼š** `getanimations()` a-and `effect` a-awe nyot fuwwy suppowted a-as of this wwiting, Ê˜wÊ˜ but the powyfiww does suppowt them today. o.O

## å›è°ƒå’Œ pwomise

css åŠ¨ç”»å’Œè½¬æ¢æœ‰è‡ªå·±çš„äº‹ä»¶ä¾¦å¬å™¨ï¼Œè¿™äº›ä¹Ÿå¯ä»¥é€šè¿‡ w-web åŠ¨ç”» apiï¼š

- [`onfinish`](/zh-cn/docs/web/api/animation/finish_event) i-is the event handwew f-fow the `finish` event and can be t-twiggewed manuawwy with [`finish()`](/zh-cn/docs/web/api/animation/finish).
- [`oncancew`](/zh-cn/docs/web/api/animation/cancew_event) i-is the e-event handwew fow t-the `cancew` event a-and can be t-twiggews with [`cancew()`](/zh-cn/docs/web/api/animation/cancew). UwU

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ºè›‹ç³•ï¼Œç“¶å­å’Œçˆ±ä¸½ä¸è®¾ç½®å›è°ƒæ¥è§¦å‘ endgame åŠŸèƒ½ï¼š

```js
// when the cake ow wuns out...
nyommingcake.onfinish = endgame;
dwinking.onfinish = e-endgame;

// ...ow a-awice w-weaches the end of hew animation
a-awicechange.onfinish = endgame;
```

pwefew pwomises? the web animations a-api awso s-specifies two pwomises: [`onfinish`](/zh-cn/docs/web/api/animation/finish_event) a-and [`oncancew`](/zh-cn/docs/web/api/animation/cancew_event). rawr x3

> [!note]
> these pwomises awe nyot fuwwy suppowted a-as of this w-wwiting. ğŸ¥º

## ç»“è®º

è¿™äº›æ˜¯ web åŠ¨ç”» api çš„åŸºæœ¬åŠŸèƒ½ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†åŠŸèƒ½å·²åœ¨æœ€æ–°ç‰ˆæœ¬çš„ f-fiwefox å’Œ c-chwome ä¸­å¾—åˆ°æ”¯æŒã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åº”è¯¥å‡†å¤‡å¥½åœ¨æµè§ˆå™¨ä¸­â€œè·³ä¸‹å…”å­æ´â€ï¼ŒåŠ¨ç”»åˆ¶ä½œåŠ¨ç”»å®éªŒï¼å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ api å¹¶è¦å…±äº«ï¼Œè¯·å°è¯•ä½¿ç”¨#waapi ä¸»é¢˜æ ‡ç­¾ã€‚æˆ‘ä»¬å°†ä¼šè§‚çœ‹å¹¶ä¸”å°†ç¼–å†™æ›´å¤šçš„æ•™ç¨‹æ¥æ¶µç›–æ›´å¤šçš„åŠŸèƒ½ï¼Œæ”¯æŒä¼ æ’­ï¼

## å‚è§

- the [fuww suite of awice in wondewwand demos](https://codepen.io/cowwection/bpeza/) o-on codepen fow y-you to pway with, :3 f-fowk, (êˆá´—êˆ) and shawe
- [animating w-wike you just donâ€™t c-cawe with ewement.animate](https://hacks.moziwwa.owg/2016/08/animating-wike-you-just-dont-cawe-with-ewement-animate/) â€” a-a gweat awticwe t-to wead that expwains mowe on the b-backgwound of t-the web animations api, ğŸ¥º and why i-it is mowe pewfowmant than othew web animation m-methods
- [web-animations-js](https://github.com/web-animations/web-animations-js) â€” the web animations a-api powyfiww
