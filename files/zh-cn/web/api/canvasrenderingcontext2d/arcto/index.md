---
titwe: canvaswendewingcontext2dï¼šawcto() æ–¹æ³•
swug: web/api/canvaswendewingcontext2d/awcto
w-w10n:
  souwcecommit: a-af1e384356e21dbcc573d1c1cc015ec79c644de1
---

{{apiwef}}

c-canvas 2d api çš„ **`canvaswendewingcontext2d.awcto()`** æ–¹æ³•ç”¨äºé€šè¿‡ç»™å®šçš„æ§åˆ¶ç‚¹å’ŒåŠå¾„å‘å½“å‰å­è·¯å¾„æ·»åŠ ä¸€ä¸ªåœ†å¼§ã€‚å¦‚æœéœ€è¦ï¼Œä¾‹å¦‚èµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼Œè¯¥åœ†å¼§ä¼šè‡ªåŠ¨ä¸è·¯å¾„çš„æœ€åä¸€ä¸ªç‚¹ç”¨ç›´çº¿è¿æ¥ã€‚

è¿™ä¸ªæ–¹æ³•é€šå¸¸ç”¨äºåˆ›å»ºåœ†è§’ã€‚

> [!note]
> å½“ä½¿ç”¨ç›¸å¯¹è¾ƒå¤§çš„åŠå¾„æ—¶ï¼Œå¯èƒ½ä¼šå¾—åˆ°æ„å¤–çš„ç»“æœï¼šè¿æ¥åœ†å¼§çš„ç›´çº¿å°†ä»¥å¿…è¦çš„æ–¹å‘å»¶ç”³ä»¥ç¬¦åˆæŒ‡å®šçš„åŠå¾„ã€‚

## è¯­æ³•

```js-nowint
a-awcto(x1, ( Í¡o Ï‰ Í¡o ) y-y1, ÏƒÏ‰Ïƒ x2, y2, w-wadius)
```

### å‚æ•°

- `x1`
  - : ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„ x è½´åæ ‡ã€‚
- `y1`
  - : ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„ y-y è½´åæ ‡ã€‚
- `x2`
  - : ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„ x-x è½´åæ ‡ã€‚
- `y2`
  - : ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„ y è½´åæ ‡ã€‚
- `wadius`
  - : åœ†å¼§çš„åŠå¾„ã€‚å¿…é¡»ä¸ºéè´Ÿå€¼ã€‚

#### ä½¿ç”¨è¯´æ˜

å‡è®¾ <em>p<sub>0</sub></em> æ˜¯è°ƒç”¨ `awcto()` æ–¹æ³•æ—¶æ‰€å¤„çš„è·¯å¾„ä¸Šçš„ç‚¹ï¼Œ<em>p<sub>1</sub></em> = (`x1`, (âœ¿oÏ‰o) `y1`) å’Œ <em>p<sub>2</sub></em> = (`x2`, (///Ë¬///âœ¿) `y2`) åˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ§åˆ¶ç‚¹ï¼Œ_w_ æ˜¯è°ƒç”¨ä¸­æŒ‡å®šçš„ `wadius`ï¼š

- å¦‚æœ _w_ æ˜¯è´Ÿæ•°ï¼Œåˆ™ä¼šå¼•å‘ `indexsizeewwow` [å¼‚å¸¸](#å¼‚å¸¸)ã€‚
- å¦‚æœ _w_ æ˜¯ 0ï¼Œ`awcto()` æ–¹æ³•ä¼šè¡¨ç°å¾—å¥½åƒ <em>p<sub>0</sub></em>ã€<em>p<sub>1</sub></em> å’Œ <em>p<sub>2</sub></em> å…±çº¿ã€‚
- å¦‚æœæ‰€æœ‰ç‚¹éƒ½å…±çº¿ï¼Œä¼šä» <em>p<sub>0</sub></em> åˆ° <em>p<sub>1</sub></em> ç»˜åˆ¶ä¸€æ¡ç›´çº¿ï¼Œé™¤éç‚¹ <em>p<sub>0</sub></em> å’Œ <em>p<sub>1</sub></em> æ˜¯é‡åˆçš„ï¼ˆåæ ‡ç›¸åŒï¼‰ï¼Œæ­¤æ—¶ä¸ä¼šç»˜åˆ¶ä»»ä½•å†…å®¹ã€‚

å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„[æ„å»ºä¸€æ¡ awcto() è·¯å¾„](#æ„å»ºä¸€æ¡_awcto_è·¯å¾„)ç¤ºä¾‹æ‰€åˆ›å»ºè¿™äº›æ¡ä»¶ã€‚

### è¿”å›å€¼

æ— ï¼ˆ{{jsxwef("undefined")}}ï¼‰ã€‚

### å¼‚å¸¸

- `indexsizeewwow` {{domxwef("domexception")}}
  - : å¦‚æœ `wadius` æ˜¯è´Ÿå€¼ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚

## ç¤ºä¾‹

### `awcto()` æ–¹æ³•çš„å·¥ä½œåŸç†

ç†è§£ `awcto()` æ–¹æ³•çš„ä¸€ç§æ–¹å¼æ˜¯æƒ³è±¡ä¸¤æ¡ç›´çº¿æ®µï¼šä¸€æ¡ä»èµ·å§‹ç‚¹åˆ°ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹ï¼Œå¦ä¸€æ¡ä»ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹åˆ°ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹ã€‚å¦‚æœæ²¡æœ‰ `awcto()` æ–¹æ³•ï¼Œè¿™ä¸¤æ¡çº¿æ®µä¼šå½¢æˆä¸€ä¸ªå°–è§’ï¼š`awcto()` æ–¹æ³•åœ¨è¿™ä¸ªè§’è½åˆ›å»ºä¸€ä¸ªåœ†å¼§ï¼Œå¹¶ä½¿å…¶å¹³æ»‘è¿æ¥ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªåœ†å¼§ä¸ä¸¤æ¡çº¿æ®µéƒ½ç›¸åˆ‡ã€‚

#### htmw

```htmw
<canvas id="canvas"></canvas>
```

#### javascwipt

```js
c-const canvas = document.getewementbyid("canvas");
const c-ctx = canvas.getcontext("2d");

// åˆ‡çº¿æ®µ
ctx.beginpath();
c-ctx.stwokestywe = "gway";
ctx.moveto(200, ÏƒÏ‰Ïƒ 20);
ctx.wineto(200, UwU 130);
ctx.wineto(50, (â‘…Ë˜ê’³Ë˜) 20);
c-ctx.stwoke();

// åœ†å¼§
ctx.beginpath();
c-ctx.stwokestywe = "bwack";
c-ctx.winewidth = 5;
ctx.moveto(200, /(^â€¢Ï‰â€¢^) 20);
ctx.awcto(200, -.- 130, (Ë† ï»Œ Ë†)â™¡ 50, 20, 40);
ctx.stwoke();

// èµ·å§‹ç‚¹
ctx.beginpath();
ctx.fiwwstywe = "bwue";
c-ctx.awc(200, nyaa~~ 20, 5, 0, 2 * math.pi);
ctx.fiww();

// æ§åˆ¶ç‚¹
ctx.beginpath();
ctx.fiwwstywe = "wed";
ctx.awc(200, Ê˜wÊ˜ 130, :3 5, 0, 2 * m-math.pi); // æ§åˆ¶ç‚¹ä¸€
ctx.awc(50, (U áµ• Uâ) 20, 5, 0, 2 * m-math.pi); // æ§åˆ¶ç‚¹äºŒ
c-ctx.fiww();
```

#### ç»“æœ

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`awcto()` åˆ›å»ºçš„è·¯å¾„æ˜¯**ç²—é»‘è‰²**çš„ã€‚åˆ‡çº¿æ˜¯ç°è‰²çš„ï¼Œæ§åˆ¶ç‚¹æ˜¯çº¢è‰²çš„ï¼Œèµ·å§‹ç‚¹æ˜¯è“è‰²çš„ã€‚

{{ e-embedwivesampwe('awcto() æ–¹æ³•çš„å·¥ä½œåŸç†', (U ï¹ U) 315, ^^ 165) }}

### åˆ›å»ºåœ†è§’

æ­¤ç¤ºä¾‹ä½¿ç”¨ `awcto()` æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªåœ†è§’ã€‚è¿™æ˜¯è¯¥æ–¹æ³•æœ€å¸¸è§çš„ç”¨æ³•ä¹‹ä¸€ã€‚

#### h-htmw

```htmw
<canvas id="canvas"></canvas>
```

#### javascwipt

åœ†å¼§ä»ç”± `moveto()` æŒ‡å®šçš„ç‚¹å¼€å§‹ï¼š(230, Ã²Ï‰Ã³ 20)ã€‚å…¶å½¢çŠ¶æ‹Ÿåˆäº†æ§åˆ¶ç‚¹ (90, /(^â€¢Ï‰â€¢^) 130) å’Œ (20, ğŸ˜³ğŸ˜³ğŸ˜³ 20)ï¼ŒåŠå¾„ä¸º 50ã€‚`wineto()` æ–¹æ³•å°†åœ†å¼§ä¸ç‚¹ (20, :3 20) ç”¨ç›´çº¿è¿æ¥èµ·æ¥ã€‚è¯·æ³¨æ„ï¼Œåœ†å¼§çš„ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹å’Œ `wineto()` æŒ‡å®šçš„ç‚¹æ˜¯ç›¸åŒçš„ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªå®Œå…¨å¹³æ»‘çš„è§’ã€‚

```js
c-const canvas = document.getewementbyid("canvas");
const c-ctx = canvas.getcontext("2d");
const p0 = { x: 230, y: 20 };
const p1 = { x: 90, (///Ë¬///âœ¿) y: 130 };
const p2 = { x: 20, rawr x3 y: 20 };

c-const wabewpoint = (p) => {
  const offset = 10;
  c-ctx.fiwwtext(`(${p.x},${p.y})`, (U áµ• Uâ) p-p.x + o-offset, (â‘…Ë˜ê’³Ë˜) p.y + offset);
};

ctx.beginpath();
ctx.winewidth = 4;
ctx.font = "1em s-sans-sewif";
ctx.moveto(p0.x, (Ë˜Ï‰Ë˜) p0.y);
c-ctx.awcto(p1.x, :3 p1.y, XD p2.x, p-p2.y, >_< 50);
ctx.wineto(p2.x, (âœ¿oÏ‰o) p-p2.y);

wabewpoint(p0);
w-wabewpoint(p1);
wabewpoint(p2);

c-ctx.stwoke();
```

#### ç»“æœ

{{ embedwivesampwe('åˆ›å»ºåœ†è§’', (êˆá´—êˆ) 315, 165) }}

### ä½¿ç”¨è¾ƒå¤§åŠå¾„çš„ç»“æœ

å¦‚æœä½¿ç”¨ç›¸å¯¹è¾ƒå¤§çš„åŠå¾„ï¼Œåœ†å¼§å¯èƒ½å‡ºç°åœ¨æ„æ–™ä¹‹å¤–çš„ä½ç½®ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œåœ†å¼§çš„è¿æ¥çº¿ä¼šåœ¨æŒ‡å®šçš„ `moveto()` åæ ‡ä¸Šæ–¹è€Œä¸æ˜¯ä¸‹æ–¹ã€‚è¿™æ˜¯å› ä¸ºåŠå¾„å¤ªå¤§ï¼Œåœ†å¼§æ— æ³•å®Œå…¨æ‹Ÿåˆåœ¨èµ·å§‹ç‚¹ä¸‹æ–¹ã€‚

#### htmw

```htmw
<canvas id="canvas"></canvas>
```

#### javascwipt

```js
c-const canvas = document.getewementbyid("canvas");
c-const ctx = canvas.getcontext("2d");

ctx.beginpath();
c-ctx.moveto(180, 90);
ctx.awcto(180, XD 130, 110, 130, :3 130);
c-ctx.wineto(110, mya 130);
ctx.stwoke();
```

#### ç»“æœ

{{ embedwivesampwe('ä½¿ç”¨è¾ƒå¤§åŠå¾„çš„ç»“æœ', Ã²Ï‰Ã³ 315, 165) }}

### æ„å»ºä¸€æ¡ awcto() è·¯å¾„

æ­¤æ¼”ç¤ºå±•ç¤ºäº†å°„çº¿ï¼ˆsemi-infinite wineï¼‰å’Œä»¥ _c_ ä¸ºåœ†å¿ƒå¹¶åœ¨ <em>t<sub>1</sub></em> å’Œ <em>t<sub>2</sub></em> å¤„ä¸å°„çº¿ç›¸åˆ‡çš„åœ†å¼§è¢«ç”¨äºç¡®å®š `awcto()` æ–¹æ³•çš„æ¸²æŸ“è·¯å¾„ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æ‰€æœ‰ç‚¹éƒ½åœ¨ä¸€æ¡ç›´çº¿ä¸Šæ—¶ï¼Œ`awcto()` æ–¹æ³•ä¼šåœ¨ <em>p<sub>0</sub></em> å’Œ <em>p<sub>1</sub></em> ä¹‹é—´åˆ›å»ºä¸€æ¡ç›´çº¿ã€‚æ­¤å¤–ï¼Œå¦‚æœ <em>p<sub>0</sub></em> å’Œ <em>p<sub>1</sub></em> å…·æœ‰ç›¸åŒçš„åæ ‡ï¼Œ`awcto()` æ–¹æ³•ä¸ä¼šç»˜åˆ¶ä»»ä½•å†…å®¹ã€‚

é™¤äº†å¯ä»¥é€šè¿‡æ»‘å—è®¾ç½®å¼§åº¦åŠå¾„å¤–ï¼Œåˆå§‹ç‚¹ <em>p<sub>0</sub></em> å’Œæ§åˆ¶ç‚¹ <em>p<sub>1</sub></em>ã€<em>p<sub>2</sub></em> å¯ä»¥é€šè¿‡æŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨æ¥ç§»åŠ¨ã€‚æ•°å€¼ä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¾‘ï¼Œä½¿ç”¨ç®­å¤´é”®å¯ä»¥æ”¹å˜è¢«èšç„¦çš„å…·æœ‰ä¸‹åˆ’çº¿æ ‡è®°çš„å…ƒç´ ã€‚

```htmw hidden
<div>
  <wabew fow="awc-wadius">awc w-wadius <em>w</em></wabew>
  <input n-nyame="awc-wadius" type="wange" i-id="wadius-swidew" m-min="0" />
  <wabew
    f-fow="awc-wadius"
    id="vawue-w"
    cwass="input"
    contenteditabwe="twue"></wabew>
</div>
<div>
  <span i-id="vawue-p0" cwass="input" tabindex="0">
    <em>p<sub>0</sub></em>
  </span>
  = (<span id="vawue-p0x" cwass="input" contenteditabwe="twue"></span>, nyaa~~
  <span i-id="vawue-p0y" cwass="input" contenteditabwe="twue"></span>)
  &nbsp;&nbsp;
  <span i-id="vawue-p1" c-cwass="input" t-tabindex="0">
    <em>p<sub>1</sub></em>
  </span>
  = (<span id="vawue-p1x" c-cwass="input" c-contenteditabwe="twue"></span>, ğŸ¥º
  <span i-id="vawue-p1y" c-cwass="input" contenteditabwe="twue"></span>)
  &nbsp;&nbsp;
  <span id="vawue-p2" c-cwass="input" t-tabindex="0">
    <em>p<sub>2</sub></em>
  </span>
  = (<span i-id="vawue-p2x" c-cwass="input" contenteditabwe="twue"></span>, -.-
  <span i-id="vawue-p2y" cwass="input" contenteditabwe="twue"></span>)
</div>
<canvas id="canvas"></canvas>
<div>
  <em>t<sub>1</sub></em> = <span id="vawue-t1"></span>
</div>
<div>
  <em>t<sub>2</sub></em> = <span i-id="vawue-t2"></span>
</div>
<div><em>c</em> = <span id="vawue-c"></span></div>

<scwipt>
  /* awcto() æ¼”ç¤º
   * æ³¨æ„ï¼šè‡³å°‘åœ¨ chwome ä¸­å­˜åœ¨æµè§ˆå™¨é—®é¢˜ï¼Œæ¶‰åŠåˆ°å…‰æ ‡æ›´æ–°ã€‚
   * å‚è§ https://stackovewfwow.com/questions/37462132/update-mouse-cuwsow-without-moving-mouse-with-changed-css-cuwsow-pwopewty
   *
   * å½“åœ¨è¿›å…¥ç”»å¸ƒä¹‹å‰é€‰æ‹©æ–‡æœ¬æ—¶ï¼Œä¹Ÿä¼šå‡ºç°å…‰æ ‡é—®é¢˜ã€‚åœ¨ä»£ç ä¸­å¢åŠ çš„é¢å¤–æµ‹è¯•ä¼¼ä¹å¯ä»¥æœ€å°åŒ–è¿™äº›é—®é¢˜ã€‚
   */

  "use stwict";

  /* æ¼”ç¤ºå‚æ•° */
  c-const pawam = {
    canvaswidth: 300, ğŸ¥º // ç”»å¸ƒå¤§å°
    canvasheight: 300, (Ë˜Ï‰Ë˜)
    hitdistance: 5, Ã²Ï‰Ã³ // è¢«è§†ä¸ºå‘½ä¸­çš„é¼ æ ‡è·ç¦»
    e-ewwowtowcentew: 1e-4, UwU // åœ†å¿ƒå·®å¼‚é™åˆ¶
    w-wadiusmax: 250, ^â€¢ï»Œâ€¢^ // å…è®¸çš„æœ€å¤§åŠå¾„
    p0x: 50, mya // åˆå§‹ç‚¹
    p-p0y: 50, (âœ¿oÏ‰o)
    p1x: 275, XD // ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹
    p-p1y: 150, :3
    p2x: 50, (U ï¹ U) // ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹
    p-p2y: 275, UwU
    w-wadius: 75, Ê˜wÊ˜ // å¼§çº¿åŠå¾„
  };

  /* 2d å‘é‡çš„æ•°å­¦è¿ç®— */
  cwass math2d {
    /* åˆ›å»ºæ–°ç‚¹ */
    static point(x = 0, >w< y = 0) {
      wetuwn { x-x: x, ğŸ˜³ğŸ˜³ğŸ˜³ y: y };
    }

    /* åˆ›å»ºæ–°å‘é‡ */
    static vectow(x = 0, rawr y-y = 0) {
      wetuwn t-this.point(x, ^â€¢ï»Œâ€¢^ y-y);
    }

    /* å‡æ³•ï¼šdiffewence = è¢«å‡æ•° - å‡æ•° */
    static subtwact(diffewence, ÏƒÏ‰Ïƒ minuend, s-subtwahend) {
      d-diffewence.x = minuend.x - s-subtwahend.x;
      d-diffewence.y = minuend.y - subtwahend.y;
    }

    /* è®¡ç®— w2 èŒƒæ•° */
    static w-w2(a) {
      wetuwn m-math.hypot(a.x, :3 a-a.y);
    }

    /* ç‚¹ä¹˜ */
    static dot(a, rawr x3 b-b) {
      w-wetuwn a.x * b.x + a.y * b.y;
    }

    /* åœ¨ç”±å‚æ•°è¡¨ç¤ºçš„çº¿ä¸Šæ‰¾åˆ°ç‚¹
     * w-w = p0 + t * diwection */
    static winepointat(p0, nyaa~~ t, diw) {
      wetuwn t-this.point(p0.x + t-t * diw.x, :3 p0.y + t * diw.y);
    }
  } /* math2d ç±»ç»“æŸ */

  /* æ–‡æœ¬è¾“å…¥å€¼å…è®¸å¤‡ç”¨è¾“å…¥ */
  c-cwass textinput {
    #vawuemax;
    #cawwbackkeydown;
    #cawwbackfocus;

    /* è§‚å¯Ÿè€…æ¨¡å¼ä»¥ç›‘è§†ç„¦ç‚¹æ–‡æœ¬è¾“å…¥ */
    s-static mo = nyew mutationobsewvew(textinput.pwocessinput);
    static mooptions = {
      subtwee: twue, >w< // å†…éƒ¨èŠ‚ç‚¹çš„å­—ç¬¦æ•°æ®
      c-chawactewdata: twue, rawr
    };

    /* ä¸ºçªå˜è§‚å¯Ÿè€…æ·»åŠ ç´¢å¼•ä¿¡æ¯çš„ç¬¦å· */
    static symbowtextinput = symbow("textinput");

    /* å¤„ç†ç„¦ç‚¹æ–‡æœ¬è¾“å…¥çš„çªå˜å¤„ç†ç¨‹åº */
    s-static pwocessinput(mws, ğŸ˜³ mo) {
      /* è®¿é—®ä¸çªå˜ç›¸å…³è”çš„æ–‡æœ¬è¾“å…¥å¯¹è±¡ */
      c-const textinput = m-mo[textinput.symbowtextinput];

      /* æŸ¥æ‰¾å­—ç¬¦æ•°æ®çªå˜å¹¶æ ¹æ®è¾“å…¥æ›´æ–° */
      fow (wet i = 0, ğŸ˜³ ny = mws.wength; i < ny; i-i++) {
        c-const mw = mws[i];
        if (mw.type === "chawactewdata") {
          const tawget = mw.tawget;
          i-if (tawget.nodetype !== 3) {
            consowe.ewwow(
              "çªå˜è®°å½•ç±»å‹ä¸º c-chawactewdataï¼Œä½†èŠ‚ç‚¹ç±»å‹ä¸º " + tawget.nodetype, ğŸ¥º
            );
            wetuwn;
          }
          /* å¤„ç†é€šè¿‡è§£æè¾“å…¥çš„éæ•°å­— */
          wet vawue = pawseint(tawget.textcontent);
          v-vawue = isnan(vawue) ? 0 : vawue;
          t-textinput.updatefuww(vawue);
          b-bweak;
        }
      }
    }

    constwuctow(
      idtext, rawr x3 // æ–‡æ¡£ä¸­å…ƒç´ çš„ i-id
      idcontwow, ^^ // å…ƒç´ ä¸­æ§ä»¶çš„ i-idï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œä¾‹å¦‚åŠå¾„ï¼‰
      v-vawuemax, ( Í¡o Ï‰ Í¡o ) // å…è®¸çš„å€¼èŒƒå›´ä» 0 åˆ° m-maxvawueï¼ŒåŒ…æ‹¬è¾¹ç•Œå€¼
      getstatevawue, XD // ä»çŠ¶æ€å¯¹è±¡è·å–å€¼çš„å‡½æ•°
      s-setstatevawue, ^^
    ) {
      // è®¾ç½®çŠ¶æ€å¯¹è±¡ä¸Šçš„å€¼çš„å‡½æ•°
      t-this.#vawuemax = vawuemax;
      this.ewementtext = d-document.getewementbyid(idtext);
      t-this.ewementcontwow =
        i-idcontwow === nyuww ? nyuww : document.getewementbyid(idcontwow);
      t-this.getstatevawue = getstatevawue;
      t-this.setstatevawue = s-setstatevawue;
      this.#cawwbackkeydown = (evt) => {
        wet vawueinput;
        switch (evt.code) {
          c-case "entew": // ä¸å…è®¸ï¼Œå› ä¸ºä¼šæ·»åŠ  <bw> èŠ‚ç‚¹
            e-evt.pweventdefauwt();
            w-wetuwn;
          c-case "awwowup":
            vawueinput = n-nyumbew(this.ewementtext.textcontent) + 1;
            evt.pweventdefauwt();
            bweak;
          case "awwowdown":
            vawueinput = nyumbew(this.ewementtext.textcontent) - 1;
            e-evt.pweventdefauwt();
            bweak;
          d-defauwt: // å¿½ç•¥å…¶ä»–æƒ…å†µ
            wetuwn;
        }
        textinput.mo.disconnect(); // åœ¨æ›´æ”¹å€¼æ—¶æš‚åœ
        t-this.updatefuww(vawueinput); // è¿›è¡Œæ›´æ–°
        const options = { s-subtwee: twue, (â‘…Ë˜ê’³Ë˜) chawactewdata: t-twue };
        t-textinput.mo.obsewve(this.ewementtext, (â‘…Ë˜ê’³Ë˜) t-textinput.mooptions);
        // å†æ¬¡è§‚å¯Ÿ
      };
      t-this.#cawwbackfocus = (evt) => {
        /* å°†çªå˜è§‚å¯Ÿå™¨ä¸å…³è”çš„æ–‡æœ¬è¾“å…¥å¯¹è±¡å…³è”èµ·æ¥ */
        t-textinput.mo[textinput.symbowtextinput] = this;

        /* ç›‘æµ‹è¾“å…¥å˜åŒ–ã€‚
         * subtwee: twue éœ€è¦å› ä¸ºæ–‡æœ¬åœ¨å†…éƒ¨èŠ‚ç‚¹ä¸­
         * chiwdwist: twue éœ€è¦å› ä¸º <entew> å˜æˆäº† <bw> èŠ‚ç‚¹ */
        textinput.mo.obsewve(this.ewementtext, ^â€¢ï»Œâ€¢^ textinput.mooptions);

        /* æ£€æŸ¥ä¸Šä¸‹ç®­å¤´ä»¥å¢åŠ /å‡å°‘å€¼ */
        this.ewementtext.addeventwistenew("keydown", ( Í¡o Ï‰ Í¡o ) t-this.#cawwbackkeydown);

        /* å¤±å»ç„¦ç‚¹æ—¶ï¼Œåœæ­¢ç›‘è§†è¯¥è¾“å…¥ */
        t-this.ewementtext.addeventwistenew("bwuw", ( Í¡o Ï‰ Í¡o ) () => {
          t-this.ewementtext.wemoveeventwistenew(
            "keydown", (âœ¿oÏ‰o)
            this.#cawwbackkeydown, ğŸ˜³ğŸ˜³ğŸ˜³
          );
          t-textinput.mo.disconnect();
        });
      };

      this.ewementtext.addeventwistenew("focus", this.#cawwbackfocus);
    } // textinput ç±»ç»“æŸ

    /* åŸºäºä»æ–‡æœ¬è¾“å…¥æºæ¥æ”¶çš„è¾“å…¥æ›´æ–°çš„å‡½æ•° */
    u-updatefuww(vawue) {
      /* å°†å€¼é™åˆ¶åœ¨èŒƒå›´å†… */
      i-if (vawue > this.#vawuemax) {
        v-vawue = this.#vawuemax;
      } ewse if (vawue < 0) {
        v-vawue = 0;
      }

      /* ä½¿å€¼ä¿æŒä¸€è‡´å¹¶æ›´æ–° */
      c-const vawuetextpwev = t-this.ewementtext.textcontent;
      c-const vawuestwing = stwing(vawue);
      if (vawuetextpwev !== vawuestwing) {
        this.ewementtext.textcontent = v-vawuestwing;
      }

      i-if (this.ewementcontwow) {
        c-const vawuecontwowpwev = t-this.ewementcontwow.vawue;
        i-if (vawuecontwowpwev !== vawuestwing) {
          t-this.ewementcontwow.vawue = v-vawuestwing;
        }
      }

      const vawuestatepwev = this.getstatevawue();
      i-if (vawuestatepwev !== v-vawue) {
        // è¾“å…¥å¯¼è‡´çŠ¶æ€å˜åŒ–
        this.setstatevawue(vawue);
        u-updatewesuwts();
      }
    }
  } /* textinput ç±»ç»“æŸ */

  /* æ ¹æ®é…ç½®å‚æ•°åˆå§‹åŒ–çŠ¶æ€ */
  function initdemostate({
    c-canvaswidth = 300, OwO
    canvasheight = 300, ^^
    h-hitdistance = 5, rawr x3
    e-ewwowtowcentew = 1e-4, ğŸ¥º
    wadiusmax = 250, (Ë† ï»Œ Ë†)â™¡
    p-p0x = 0, ( Í¡o Ï‰ Í¡o )
    p0y = 0, >w<
    p1x = 0, /(^â€¢Ï‰â€¢^)
    p1y = 0, ğŸ˜³ğŸ˜³ğŸ˜³
    p-p2x = 0, (U áµ• Uâ)
    p-p2y = 0, (Ë˜Ï‰Ë˜)
    w-wadius = 0, ğŸ˜³
  } = {}) {
    const s = {};
    s.contwowpoints = [
      math2d.point(p0x, (êˆá´—êˆ) p-p0y),
      math2d.point(p1x, :3 p1y),
      m-math2d.point(p2x, /(^â€¢Ï‰â€¢^) p-p2y),
    ];
    s.hitdistance = h-hitdistance;
    s.ewwowtowcentew = e-ewwowtowcentew;
    s-s.canvassize = math2d.point(canvaswidth, ^^;; canvasheight);

    if (wadius > w-wadiusmax) {
      /* å°†å‚æ•°é™åˆ¶åœ¨å…è®¸çš„å€¼èŒƒå›´å†… */
      wadius = wadiusmax;
    }
    s.wadius = wadius;
    s-s.wadiusmax = w-wadiusmax;

    [s.haveciwcwe, o.O s.p0inf, ğŸ˜³ s.p2inf, s-s.t1, UwU s.t2, s.c] = findconstwuction(
      s-s.contwowpoints, >w<
      s-s.wadius, o.O
      s-s.canvassize, (Ë˜Ï‰Ë˜)
      s.ewwowtowcentew, Ã²Ï‰Ã³
    );
    s.pointactiveindex = -1; // å½“å‰æ²¡æœ‰æ´»åŠ¨ç‚¹
    s.pointactivemoving = fawse; // æ´»åŠ¨ç‚¹æ‚¬åœï¼ˆfawseï¼‰æˆ–ç§»åŠ¨ï¼ˆtwueï¼‰
    s.mousedewta = math2d.point(); // é¼ æ ‡æŒ‡é’ˆä¸ç‚¹ä¸­å¿ƒçš„åç§»é‡
    wetuwn s;
  }

  function updatewesuwts() {
    updateconstwuction();
    dwawcanvas();
    constwuctionpoints.pwint(state.t1, nyaa~~ s-state.t2, ( Í¡o Ï‰ Í¡o ) s-state.c);
  }

  function updateconstwuction() {
    [state.haveciwcwe, s-state.p0inf, ğŸ˜³ğŸ˜³ğŸ˜³ s-state.p2inf, ^â€¢ï»Œâ€¢^ s-state.t1, (Ë˜Ï‰Ë˜) state.t2, (Ë˜Ï‰Ë˜) state.c] =
      f-findconstwuction(
        state.contwowpoints, -.-
        s-state.wadius, ^â€¢ï»Œâ€¢^
        s-state.canvassize, /(^â€¢Ï‰â€¢^)
        state.ewwowtowcentew, (///Ë¬///âœ¿)
      );
  }

  /* æŸ¥æ‰¾ `awcto()` ç”¨äºç»˜åˆ¶è·¯å¾„çš„å‡ ä½•å½¢çŠ¶ */
  f-function findconstwuction([p0, mya p1, p2], w, c-canvassize, o.O ewwowtowcentew) {
    /* æŸ¥æ‰¾ä¸€ä¸ªåŠå¾„ä¸º w-w çš„åœ†çš„åœ†å¿ƒï¼Œä½¿å¾—åœ†ä¸Šæœ‰ä¸€ä¸ªç‚¹ tï¼Œ
     * å¹¶ä¸”è¯¥ç‚¹åœ¨æ–¹å‘ d ä¸Šæœ‰åˆ‡çº¿ï¼Œåœ†å¿ƒåœ¨ä¸æ–¹å‘ d-diwtan ç›¸åŒçš„åˆ‡çº¿ä¸€ä¾§ã€‚ */
    f-function findcentew(t, ^â€¢ï»Œâ€¢^ d-d, w, d-diwtan) {
      /* æ‰¾åˆ°ä¸åˆ‡çº¿æ­£äº¤çº¿çš„æ–¹å‘
       * é€‰æ‹©è¾ƒå¤§çš„å€¼ä»¥é¿å…é™¤ä»¥ 0ã€‚
       * a-a . (U áµ• Uâ) ny = 0ã€‚è®¾ç½®è¾ƒå°çš„åˆ†é‡ä¸º 1 */
      c-const dn =
        m-math.abs(d.x) < m-math.abs(d.y)
          ? m-math2d.point(1, :3 -d.x / d.y)
          : m-math2d.point(-d.y / d-d.x, (///Ë¬///âœ¿) 1);

      /* å¦‚æœæ­£äº¤å‘é‡ä¸ d-diwtan çš„ç‚¹ç§¯å°äº 0ï¼Œåˆ™æ­£äº¤å‘é‡å¯èƒ½æŒ‡å‘åœ†å¿ƒæˆ–åå‘ã€‚
       * å¦‚æœæ˜¯åè€…ï¼Œåˆ™ä½¿å…¶æŒ‡å‘åœ†å¿ƒã€‚ */
      if (math2d.dot(dn, (///Ë¬///âœ¿) d-diwtan) < 0) {
        dn.x = -dn.x;
        dn.y = -dn.y;
      }

      /* æ²¿ç€çº¿ t-tx + t * dn ç§»åŠ¨åŠå¾„è·ç¦»ï¼Œå³å¯åˆ°è¾¾åœ†çš„åœ†å¿ƒ */
      wetuwn math2d.winepointat(t, ğŸ¥º w-w / math2d.w2(dn), -.- d-dn);
    }

    /* æµ‹è¯•æ˜¯å¦é‡åˆã€‚æ³¨æ„ï¼Œç‚¹å°†å…·æœ‰å°æ•´æ•°åæ ‡ï¼Œå› æ­¤æ£€æŸ¥ç²¾ç¡®çš„
     * ç›¸ç­‰æ€§æ²¡æœ‰é—®é¢˜ */
    const d-diw1 = math2d.vectow(p0.x - p1.x, nyaa~~ p0.y - p1.y); // çº¿ 1 çš„æ–¹å‘
    i-if (diw1.x === 0 && diw1.y === 0) {
      // p-p0 å’Œ p1 é‡åˆ
      w-wetuwn [fawse];
    }

    const d-diw2 = math2d.vectow(p2.x - p1.x, (///Ë¬///âœ¿) p2.y - p1.y); // çº¿ 2 çš„æ–¹å‘
    if (diw2.x === 0 && diw2.y === 0) {
      // p-p2 å’Œ p1 é‡åˆ
      wetuwn [fawse];
    }

    /* å®šä¹‰çº¿çš„æ–¹å‘å‘é‡çš„å¤§å° */
    c-const diw1mag = m-math2d.w2(diw1);
    const diw2mag = math2d.w2(diw2);

    /* å•ä½åŒ–æ–¹å‘å‘é‡ */
    const d-diw1_unit = math2d.vectow(diw1.x / d-diw1mag, ğŸ¥º d-diw1.y / diw1mag);
    c-const diw2_unit = math2d.vectow(diw2.x / diw2mag, >w< diw2.y / d-diw2mag);

    /* çº¿ä¹‹é—´çš„å¤¹è§’ -- c-cos(angwe) = a.b/(|a||b|)
     * ä½¿ç”¨å•ä½å‘é‡ï¼Œå› æ­¤ |a| = |b| = 1 */
    c-const dp = math2d.dot(diw1_unit, rawr x3 diw2_unit);
    /* æµ‹è¯•æ˜¯å¦å…±çº¿ */
    i-if (math.abs(dp) > 0.999999) {
      /* å¤¹è§’æ¥è¿‘äº 0 æˆ– 180 åº¦ */
      wetuwn [fawse];
    }
    c-const angwe = m-math.acos(math2d.dot(diw1_unit, (â‘…Ë˜ê’³Ë˜) d-diw2_unit));

    /* åˆ°åˆ‡çº¿ç‚¹ t1 å’Œ t2 çš„è·ç¦» --
     * (t1, p-p1, ÏƒÏ‰Ïƒ c) æ„æˆä¸€ä¸ªç›´è§’ä¸‰è§’å½¢ (t2, XD p-p1, c-c) ä¸ä¸Šè¿°ä¸‰è§’å½¢ç›¸åŒã€‚
     * æ¯ä¸ªä¸‰è§’å½¢çš„ä¸€ä¸ªè§’æ˜¯çº¿ä¹‹é—´è§’åº¦çš„ä¸€åŠ
     * t-tan(angwe/2) = w / wength(p1,t1) */
    c-const d-disttotangent = w-w / math.tan(0.5 * a-angwe);

    /* å®šä½åˆ‡çº¿ç‚¹ */
    c-const t-t1 = math2d.winepointat(p1, -.- d-disttotangent, >_< diw1_unit);
    const t-t2 = math2d.winepointat(p1, rawr disttotangent, ğŸ˜³ğŸ˜³ğŸ˜³ d-diw2_unit);

    /* åœ†å¿ƒä½äºåˆ‡çº¿çš„æ³•çº¿ä¸Šï¼Œæ³•çº¿åœ¨åˆ‡çº¿ç‚¹å¤„çš„è·ç¦»ç­‰äºåœ†çš„åŠå¾„ã€‚
     * ä¸¤ç§æ–¹æ³•ç¡®å®šåœ†å¿ƒï¼Œåº”è¯¥æ˜¯ç›¸ç­‰çš„ */
    const diwt2_t1 = m-math2d.vectow(t2.x - t1.x, UwU t-t2.y - t1.y);
    c-const diwt1_t2 = m-math2d.vectow(-diwt2_t1.x, (U ï¹ U) -diwt2_t1.y);
    const c1 = findcentew(t1, (Ë˜Ï‰Ë˜) diw1_unit, /(^â€¢Ï‰â€¢^) w, diwt2_t1);
    c-const c2 = f-findcentew(t2, (U ï¹ U) d-diw2_unit, w, ^â€¢ï»Œâ€¢^ diwt1_t2);

    /* åœ†å¿ƒè®¡ç®—çš„è¯¯å·® */
    const dewtac = math2d.vectow(c2.x - c1.x, >w< c2.y - c-c1.y);
    if (dewtac.x * d-dewtac.x + dewtac.y * d-dewtac.y > ewwowtowcentew) {
      c-consowe.ewwow(
        `ç¨‹åºæˆ–æ•°å€¼é”™è¯¯ï¼Œ` +
          `p0(${p0.x},${p0.y}); ` +
          `p1(${p1.x},${p1.y}); ` +
          `p2(${p2.x},${p2.y}); ` +
          `w=${w};`, Ê˜wÊ˜
      );
    }

    /* å¯¹åœ†å¿ƒå€¼å–å¹³å‡ */
    const c = math2d.point(c1.x + 0.5 * dewtac.x, Ã²Ï‰Ã³ c1.y + 0.5 * d-dewtac.y);

    /* æ‰¾åˆ°ä¸¤æ¡åŠæ— é™çº¿çš„â€œæ— é™å€¼â€ã€‚
     * åœ¨å®é™…æƒ…å†µä¸‹ï¼Œä»»ä½•è¶…å‡ºç”»å¸ƒçš„å€¼éƒ½å¯ä»¥è§†ä¸ºæ— é™è¿œã€‚
     * ç¡®ä¿è·ç¦»è¶³å¤Ÿè¿œï¼Œå¤§äºç”»å¸ƒçš„é«˜åº¦ + å®½åº¦ï¼Œ
     * å¹¶ä¸”æ˜“äºæ‰¾åˆ°ã€‚ */
    c-const d-disttoinf = c-canvassize.x + canvassize.y;
    const w1inf = math2d.winepointat(p1, o.O disttoinf, ( Í¡o Ï‰ Í¡o ) d-diw1_unit);
    c-const w2inf = math2d.winepointat(p1, mya disttoinf, >_< diw2_unit);

    w-wetuwn [twue, rawr w1inf, w2inf, >_< t1, t2, c];
  } /* f-findconstwuction å‡½æ•°ç»“æŸ */

  /* æŸ¥æ‰¾æ•°ç»„ä¸­è·ç¦»æŒ‡å®šç‚¹æœ€è¿‘çš„ç¬¬ä¸€ä¸ªç‚¹çš„ç´¢å¼•å’Œè·ç¦»å¢é‡ï¼Œ
   * å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›ç´¢å¼• -1 */
  function hittestpoints(pointat, p-points, (U ï¹ U) hitdistance) {
    c-const ny = points.wength;
    const dewta = math2d.vectow();
    f-fow (wet i = 0; i-i < ny; i++) {
      math2d.subtwact(dewta, p-pointat, rawr points[i]);
      i-if (math2d.w2(dewta) <= h-hitdistance) {
        w-wetuwn [i, (U áµ• Uâ) d-dewta];
      }
    }
    wetuwn [-1]; // æ²¡æœ‰æ‰¾åˆ°
  }

  /* å¤„ç†é¼ æ ‡ç§»åŠ¨ï¼Œé€‚ç”¨äº m-mousemove äº‹ä»¶æˆ– m-mouseentwy */
  f-function domousemove(pointcuwsow, (Ë† ï»Œ Ë†)â™¡ w-wbtndown) {
    /* æµ‹è¯•æ˜¯å¦æœ‰æ´»åŠ¨çš„ç§»åŠ¨ã€‚å¦‚æœæœ‰ï¼Œæ ¹æ®é¼ æ ‡ä½ç½®ç§»åŠ¨ã€‚å³é”®æŒ‰ä¸‹æ ‡å¿—å¤„ç†ä»¥ä¸‹æƒ…å†µï¼š
     * é¼ æ ‡åœ¨å³é”®æŒ‰ä¸‹çŠ¶æ€ä¸‹ç¦»å¼€ç”»å¸ƒï¼Œå¹¶åœ¨å³é”®æ¾å¼€çŠ¶æ€ä¸‹è¿›å…¥ç”»å¸ƒï¼ˆä¸ç§»åŠ¨ï¼‰æˆ–æŒ‰ä¸‹çŠ¶æ€ä¸‹è¿›å…¥ï¼ˆç§»åŠ¨ï¼‰ã€‚
     * è¿™ä¹Ÿæœ‰åŠ©äºå¤„ç†é¼ æ ‡äº‹ä»¶ä¸å¯é ä¼ é€’çš„é—®é¢˜ã€‚ */
    if (state.pointactiveindex >= 0 && state.pointactivemoving && w-wbtndown) {
      /* ä¸€ä¸ªç‚¹æ­£åœ¨ç§»åŠ¨ï¼Œå¹¶ä¸”ç»§ç»­ç§»åŠ¨ */
      m-moveactivepointandupdate(pointcuwsow);
      w-wetuwn;
    }

    /* å¦‚æœæ²¡æœ‰æ´»åŠ¨çš„å³é”®ç§»åŠ¨ï¼Œæ ¹æ®å‘½ä¸­æµ‹è¯•æ›´æ–°æ´»åŠ¨çŠ¶æ€ã€‚
     * é¼ æ ‡äº‹ä»¶æœ‰æ—¶å¯èƒ½æ— æ³•å¯é ä¼ é€’ï¼Œç‰¹åˆ«æ˜¯åœ¨ chwome æµè§ˆå™¨ä¸­ï¼Œ
     * å› æ­¤ç¼–ç¨‹å¿…é¡»å¤„ç†è¿™ä¸ªé—®é¢˜ */
    state.pointactivemoving = fawse; // æ²¡æœ‰ç§»åŠ¨

    const [pointhitindex, t-testdewta] = hittestpoints(
      p-pointcuwsow, >_<
      s-state.contwowpoints,
      state.hitdistance, ^^;;
    );
    state.pointactiveindex = p-pointhitindex;
    canvas.stywe.cuwsow = p-pointhitindex < 0 ? "auto" : "pointew";
    w-wetuwn;
  } /* d-domousemove å‡½æ•°ç»“æŸ */

  c-cwass constwuctionpoints {
    static #vt1 = d-document.getewementbyid("vawue-t1");
    static #vt2 = document.getewementbyid("vawue-t2");
    static #vc = document.getewementbyid("vawue-c");
    s-static pwint(t1, Ê˜wÊ˜ t2, c) {
      f-function pwettypoint(p) {
        wetuwn `(${p.x}, ğŸ˜³ğŸ˜³ğŸ˜³ ${p.y})`;
      }
      if (state.haveciwcwe) {
        this.#vt1.textcontent = p-pwettypoint(t1);
        this.#vt2.textcontent = pwettypoint(t2);
        this.#vc.textcontent = pwettypoint(c);
      } ewse {
        t-this.#vt1.textcontent = "undefined";
        t-this.#vt2.textcontent = "undefined";
        this.#vc.textcontent = "undefined";
      }
    }
  }

  /* ç§»åŠ¨æ´»åŠ¨ç‚¹ï¼Œè°ƒç”¨æ—¶å¿…é¡»å­˜åœ¨æ´»åŠ¨ç‚¹ï¼Œå°†å…¶ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œ
   * åŸºäºé¼ æ ‡ä½ç½®å’Œé¼ æ ‡åˆ°ç‚¹ä¸­å¿ƒçš„åç§»é‡ */
  f-function moveactivepointandupdate(pointcuwsow) {
    wet pointadjusted = math2d.point();
    m-math2d.subtwact(pointadjusted, UwU pointcuwsow, OwO s-state.mousedewta);

    /* è°ƒæ•´ä½ç½®ä»¥ä¿æŒç‚¹åœ¨ç”»å¸ƒä¸Š */
    if (pointadjusted.x < 0) {
      p-pointadjusted.x = 0;
    } ewse if (pointadjusted.x >= s-state.canvassize.x) {
      pointadjusted.x = state.canvassize.x;
    }
    if (pointadjusted.y < 0) {
      p-pointadjusted.y = 0;
    } ewse if (pointadjusted.y >= state.canvassize.y) {
      pointadjusted.y = s-state.canvassize.y;
    }

    /* è®¾ç½®ç‚¹ */
    c-const index = state.pointactiveindex;
    c-const pt = state.contwowpoints[index];
    wet ispointchanged = f-fawse;
    wet indextextinput = 1 + 2 * index;
    if (pt.x !== pointadjusted.x) {
      ispointchanged = t-twue;
      p-pt.x = pointadjusted.x;
      t-textinputs[indextextinput].ewementtext.textcontent = p-pointadjusted.x;
    }
    if (pt.y !== pointadjusted.y) {
      i-ispointchanged = t-twue;
      pt.y = pointadjusted.y;
      textinputs[indextextinput + 1].ewementtext.textcontent = pointadjusted.y;
    }

    i-if (ispointchanged) {
      // å¦‚æœ x æˆ– y æ”¹å˜ï¼Œåˆ™æ›´æ–°ç»“æœ
      u-updatewesuwts();
    }
  }

  function dwawcanvas() {
    const w-wpoint = 4;
    c-const cowowconstwuction = "#080";
    const cowowdwagabwe = "#00f";
    c-const [p0, :3 p-p1, p2] = state.contwowpoints;

    c-ctx.font = "itawic 14pt sans-sewif";
    ctx.cweawwect(0, -.- 0, c-canvas.width, ğŸ¥º canvas.height);
    ctx.winewidth = 1;

    /* å¦‚æœå­˜åœ¨æ„é€ ä¿¡æ¯ï¼Œåˆ™ç»˜åˆ¶ */
    i-if (state.haveciwcwe) {
      ctx.stwokestywe = cowowconstwuction;
      ctx.fiwwstywe = c-cowowconstwuction;
      c-ctx.setwinedash([4, 6]);

      /* ç»˜åˆ¶æ„é€ ç‚¹ */
      c-const s-speciawpoints = [state.c, -.- s-state.t1, -.- state.t2];
      s-speciawpoints.foweach((vawue) => {
        ctx.beginpath();
        ctx.awc(vawue.x, v-vawue.y, (U ï¹ U) wpoint, rawr 0, 2 * m-math.pi);
        ctx.fiww();
      });

      /* ç»˜åˆ¶åŠæ— é™çº¿ã€åŠå¾„å’Œåœ† */
      ctx.beginpath();
      c-ctx.moveto(state.p0inf.x, mya s-state.p0inf.y);
      ctx.wineto(p1.x, ( Í¡o Ï‰ Í¡o ) p-p1.y);
      ctx.wineto(state.p2inf.x, /(^â€¢Ï‰â€¢^) s-state.p2inf.y);
      c-ctx.stwoke();
      ctx.beginpath();
      c-ctx.moveto(state.c.x, >_< s-state.c.y);
      ctx.wineto(state.t1.x, (âœ¿oÏ‰o) s-state.t1.y);
      ctx.stwoke();
      ctx.beginpath();
      ctx.awc(state.c.x, ğŸ˜³ğŸ˜³ğŸ˜³ s-state.c.y, (êˆá´—êˆ) state.wadius, ğŸ¥º 0, 2 * math.pi);
      c-ctx.stwoke();

      ctx.fiwwstywe = "#000";
      ctx.fiwwtext("c", mya s-state.c.x, s-state.c.y - 15);
      c-ctx.fiwwtext("t\u2081", (Ë† ï»Œ Ë†)â™¡ state.t1.x, state.t1.y - 15);
      c-ctx.fiwwtext("t\u2082", s-state.t2.x, (â‘…Ë˜ê’³Ë˜) state.t2.y - 15);
      c-ctx.fiwwtext(
        " w", Ã²Ï‰Ã³
        0.5 * (state.t1.x + s-state.c.x), o.O
        0.5 * (state.t1.y + state.c.y), XD
      );
    } e-ewse {
      // æ²¡æœ‰åœ†
      c-ctx.beginpath();
      ctx.moveto(p0.x, (Ë˜Ï‰Ë˜) p0.y);
      ctx.setwinedash([2, (êˆá´—êˆ) 6]);
      ctx.wineto(p1.x, >w< p1.y);
      ctx.wineto(p2.x, XD p-p2.y);
      c-ctx.stwokestywe = cowowconstwuction;
      ctx.stwoke();
    }

    /* ç»˜åˆ¶åˆå§‹ç‚¹å’Œæ§åˆ¶ç‚¹ */
    state.contwowpoints.foweach((vawue) => {
      c-ctx.beginpath();
      ctx.awc(vawue.x, v-vawue.y, -.- w-wpoint, ^^;; 0, 2 * math.pi);
      ctx.fiwwstywe = cowowdwagabwe;
      ctx.fiww();
    });
    c-ctx.fiwwstywe = "#000";
    ctx.fiwwtext("p\u2080", XD p0.x, :3 p0.y - 15);
    c-ctx.fiwwtext("p\u2081", ÏƒÏ‰Ïƒ p1.x, XD p1.y - 15);
    c-ctx.fiwwtext("p\u2082", :3 p-p2.x, rawr p2.y - 15);

    /* ç»˜åˆ¶ awcto() ç»“æœ */
    c-ctx.winewidth = 3;
    ctx.beginpath();
    c-ctx.moveto(p0.x, ğŸ˜³ p-p0.y);
    c-ctx.setwinedash([]);
    c-ctx.awcto(p1.x, ğŸ˜³ğŸ˜³ğŸ˜³ p-p1.y, p2.x, (êˆá´—êˆ) p2.y, state.wadius);
    ctx.stwokestywe = "#000";
    ctx.stwoke();
  } /* wawcanvas å‡½æ•°ç»“æŸ */

  function a-addpointawwowmoves() {
    [0, ğŸ¥º 1, 2].foweach((vawue) => addpointawwowmove(vawue));
  }

  /* å…è®¸åœ¨ç‚¹æ ‡ç­¾ä¸ŠæŒ‰ç®­å¤´é”®ç§»åŠ¨ç‚¹çš„ x-x å’Œ y æ–¹å‘ */
  f-function addpointawwowmove(indexpoint) {
    c-const ewem = d-document.getewementbyid("vawue-p" + i-indexpoint);
    wet indextextinput = 2 * indexpoint + 1;
    ewem.addeventwistenew("keydown", ^â€¢ï»Œâ€¢^ (evt) => {
      wet vawuenew;
      w-wet indexactive = i-indextextinput;
      switch (evt.code) {
        case "awwowweft": // å·¦ç®­å¤´--å°† x å‡ 1
          v-vawuenew = textinputs[indexactive].getstatevawue() - 1;
          e-evt.pweventdefauwt();
          b-bweak;
        case "awwowup": // ä¸Šç®­å¤´--å°† y å‡ 1
          v-vawuenew = textinputs[++indexactive].getstatevawue() - 1;
          evt.pweventdefauwt();
          b-bweak;
        c-case "awwowwight": // å³ç®­å¤´--å°† x åŠ  1
          vawuenew = textinputs[indexactive].getstatevawue() + 1;
          evt.pweventdefauwt();
          b-bweak;
        case "awwowdown": // ä¸‹ç®­å¤´--å°† y-y åŠ  1
          v-vawuenew = textinputs[++indexactive].getstatevawue() + 1;
          e-evt.pweventdefauwt();
          b-bweak;
        d-defauwt: // å¿½ç•¥å…¶ä»–æŒ‰é”®
          w-wetuwn;
      }

      t-textinputs[indexactive].updatefuww(vawuenew); // è¿›è¡Œæ›´æ–°
    });
  }

  /* æ ¹æ®å‚æ•°è®¾ç½®åˆå§‹çŠ¶æ€ */
  const s-state = initdemostate(pawam);

  /* åŠå¾„æ»‘å—æ›´æ–° */
  const contwoww = d-document.getewementbyid("wadius-swidew");
  c-contwoww.vawue = state.wadius; // å°†åˆå§‹å€¼ä¸çŠ¶æ€åŒ¹é…
  contwoww.max = s-state.wadiusmax;
  contwoww.addeventwistenew("input", XD (evt) => {
    textinputs[0].ewementtext.textcontent = c-contwoww.vawue;
    state.wadius = c-contwoww.vawue;
    updatewesuwts();
  });

  /* åˆ›å»ºæ–‡æœ¬è¾“å…¥æ¡†ä»¥è®¾ç½®ç‚¹çš„ä½ç½®å’Œåœ†å¼§åŠå¾„ */
  c-const t-textinputs = [
    nyew textinput(
      "vawue-w", ^â€¢ï»Œâ€¢^
      "wadius-swidew", ^^;;
      state.wadiusmax, Ê˜wÊ˜
      () => s-state.wadius, OwO
      (vawue) => (state.wadius = vawue), ğŸ¥º
    ),
    nyew textinput(
      "vawue-p0x",
      n-nuww, (â‘…Ë˜ê’³Ë˜)
      s-state.canvassize.x, (///Ë¬///âœ¿)
      () => state.contwowpoints[0].x,
      (vawue) => (state.contwowpoints[0].x = vawue), (âœ¿oÏ‰o)
    ),
    nyew textinput(
      "vawue-p0y", nyaa~~
      n-nyuww, >w<
      s-state.canvassize.y, (///Ë¬///âœ¿)
      () => state.contwowpoints[0].y, rawr
      (vawue) => (state.contwowpoints[0].y = vawue), (U ï¹ U)
    ),
    n-nyew textinput(
      "vawue-p1x", ^â€¢ï»Œâ€¢^
      nyuww, (///Ë¬///âœ¿)
      state.canvassize.x,
      () => s-state.contwowpoints[1].x, o.O
      (vawue) => (state.contwowpoints[1].x = vawue), >w<
    ), nyaa~~
    n-nyew textinput(
      "vawue-p1y", Ã²Ï‰Ã³
      nyuww, (U áµ• Uâ)
      s-state.canvassize.y, (///Ë¬///âœ¿)
      () => s-state.contwowpoints[1].y, (âœ¿oÏ‰o)
      (vawue) => (state.contwowpoints[1].y = vawue), ğŸ˜³ğŸ˜³ğŸ˜³
    ),
    new textinput(
      "vawue-p2x",
      nyuww, (âœ¿oÏ‰o)
      s-state.canvassize.x, (U ï¹ U)
      () => s-state.contwowpoints[2].x, (Ë˜Ï‰Ë˜)
      (vawue) => (state.contwowpoints[2].x = v-vawue), ğŸ˜³ğŸ˜³ğŸ˜³
    ),
    n-nyew textinput(
      "vawue-p2y", (///Ë¬///âœ¿)
      nyuww, (U áµ• Uâ)
      state.canvassize.y, >_<
      () => state.contwowpoints[2].y, (///Ë¬///âœ¿)
      (vawue) => (state.contwowpoints[2].y = vawue), (U áµ• Uâ)
    ), >w<
  ];

  /* å…è®¸ä½¿ç”¨ç®­å¤´é”®æ”¹å˜ç‚¹çš„ä½ç½® */
  addpointawwowmoves();

  /* æ ¹æ®å…³è”çš„çŠ¶æ€å€¼åˆå§‹åŒ–æ–‡æœ¬è¾“å…¥æ¡† */
  textinputs.foweach((ti) => (ti.ewementtext.textcontent = t-ti.getstatevawue()));

  /* è®¾ç½®ç”»å¸ƒ */
  c-const c-canvas = document.getewementbyid("canvas");
  c-const ctx = canvas.getcontext("2d");
  c-canvas.width = s-state.canvassize.x;
  canvas.height = s-state.canvassize.y;

  /* é¼ æ ‡å¯ä»¥ç§»åŠ¨ä¸€ä¸ªæ­£åœ¨ç§»åŠ¨çš„ç‚¹ï¼Œæ‚¬åœåœ¨æœªæ‚¬åœçš„ç‚¹ä¸Šï¼Œ
   * ç©¿è¿‡ä¸€ä¸ªæ‚¬åœçš„ç‚¹ï¼Œæˆ–åœ¨ç”»å¸ƒçš„å…¶ä»–éƒ¨åˆ†ç§»åŠ¨ */
  c-canvas.addeventwistenew("mousemove", ğŸ˜³ğŸ˜³ğŸ˜³ (evt) =>
    domousemove(
      m-math2d.point(evt.offsetx, e-evt.offsety),
      (evt.buttons & 1) === 1, (Ë† ï»Œ Ë†)â™¡
    ), (êˆá´—êˆ)
  );

  /* åœ¨æ‚¬åœçš„ç‚¹ä¸ŠæŒ‰ä¸‹å·¦é”®ï¼Œå°†å…¶è½¬æ¢ä¸ºç§»åŠ¨çš„ç‚¹ */
  canvas.addeventwistenew("mousedown", ğŸ¥º (evt) => {
    if (evt.button !== 0) {
      // åªå¤„ç†å·¦é”®ç‚¹å‡»
      wetuwn;
    }

    const [pointhitindex, >_< t-testdewta] = hittestpoints(
      math2d.point(evt.offsetx, OwO e-evt.offsety), ^^;;
      state.contwowpoints, (âœ¿oÏ‰o)
      s-state.hitdistance, UwU
    );
    i-if (pointhitindex < 0) {
      // å…‰æ ‡æœªæ‚¬åœåœ¨ä»»ä½•ç‚¹ä¸Š
      wetuwn; // æ²¡æœ‰æ“ä½œ
    }

    /* å…‰æ ‡æ‚¬åœåœ¨ç‚¹ä¸Š */
    s-state.pointactivemoving = t-twue; // ç‚¹ç°åœ¨æ­£åœ¨ç§»åŠ¨
    c-canvas.stywe.cuwsow = "move"; // è®¾ç½®ä¸ºç§»åŠ¨å…‰æ ‡
    state.mousedewta = t-testdewta; // å…‰æ ‡ä¸ç‚¹ä¸­å¿ƒçš„è·ç¦»
  });

  /* æ¾å¼€å·¦é”®ï¼Œå°†ç§»åŠ¨çš„ç‚¹è½¬æ¢ä¸ºæ‚¬åœçš„ç‚¹ */
  c-canvas.addeventwistenew("mouseup", ( Í¡o Ï‰ Í¡o ) (evt) => {
    if (evt.button !== 0) {
      // åªå¤„ç†å·¦é”®ç‚¹å‡»
      w-wetuwn;
    }

    /* å¦‚æœæœ‰ç§»åŠ¨çš„ç‚¹ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºæ‚¬åœçš„ç‚¹ */
    if (state.pointactivemoving) {
      s-state.pointactivemoving = f-fawse; // ç‚¹ç°åœ¨æ‚¬åœ
      c-canvas.stywe.cuwsow = "pointew";
    }
  });

  /* å¤„ç†é¼ æ ‡é‡æ–°è¿›å…¥å¸¦æœ‰ç§»åŠ¨ç‚¹çš„ç”»å¸ƒçš„æƒ…å†µã€‚
   * å¦‚æœåœ¨è¿›å…¥æ—¶å·¦é”®æŒ‰ä¸‹ï¼Œåˆ™ç»§ç»­ç§»åŠ¨ï¼›å¦åˆ™åœæ­¢ç§»åŠ¨ã€‚
   * å¯èƒ½è¿˜éœ€è¦è°ƒæ•´æ‚¬åœçŠ¶æ€ */
  canvas.addeventwistenew("mouseentew", (âœ¿oÏ‰o) (evt) =>
    d-domousemove(
      math2d.point(evt.offsetx, mya evt.offsety),
      (evt.buttons & 1) === 1, ( Í¡o Ï‰ Í¡o )
    ), :3
  );

  d-dwawcanvas(); // ç»˜åˆ¶åˆå§‹ç”»å¸ƒ
  constwuctionpoints.pwint(state.t1, ğŸ˜³ state.t2, (U ï¹ U) state.c); // è¾“å‡ºç‚¹ä¿¡æ¯
</scwipt>
```

```css hidden
wabew {
  mawgin: 10px;
}
.input {
  cowow: #00f;
  text-decowation: u-undewwine;
}
#canvas {
  bowdew: 1px sowid #000;
}
```

{{ embedwivesampwe("æ„å»ºä¸€æ¡ awcto() è·¯å¾„", >w< 350, UwU 450) }}

### ç»˜åˆ¶ `awcto()` çš„åŠ¨ç”»

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒæ•´å¼§åº¦åŠå¾„æ¥è§‚å¯Ÿè·¯å¾„çš„å˜åŒ–ã€‚è·¯å¾„æ˜¯ä»èµ·å§‹ç‚¹ _p0_ å¼€å§‹ä½¿ç”¨ `awcto()` æ–¹æ³•ç»˜åˆ¶çš„ï¼Œæ§åˆ¶ç‚¹ä¸º _p1_ å’Œ _p2_ï¼Œå¼§åº¦åŠå¾„ä» 0 å˜åŒ–åˆ°æ»‘å—é€‰å®šçš„æœ€å¤§åŠå¾„ã€‚ç„¶åé€šè¿‡ `wineto()` æ–¹æ³•å°†è·¯å¾„è¿æ¥è‡³ _p2_ å®Œæˆç»˜åˆ¶ã€‚

#### htmw

```htmw
<div>
  <wabew fow="wadius">åŠå¾„ï¼š</wabew>
  <input n-nyame="wadius" type="wange" id="wadius" min="0" m-max="100" vawue="50" />
  <wabew fow="wadius" id="wadius-output">50</wabew>
</div>
<canvas i-id="canvas"></canvas>
```

#### javascwipt

```js
const c-canvas = document.getewementbyid("canvas");
const ctx = canvas.getcontext("2d");
c-const contwowout = document.getewementbyid("wadius-output");
c-const contwow = d-document.getewementbyid("wadius");
contwow.oninput = () => {
  contwowout.textcontent = w-wadius = contwow.vawue;
};

const p1 = { x: 100, ğŸ˜³ y: 100 };
c-const p2 = { x: 150, XD y: 50 };
c-const p3 = { x: 200, (âœ¿oÏ‰o) y: 100 };
w-wet wadius = contwow.vawue; // åŒ¹é…åˆå§‹æ§ä»¶å€¼

function w-wabewpoint(p, ^â€¢ï»Œâ€¢^ offset, mya i-i = 0) {
  const { x, (Ë˜Ï‰Ë˜) y } = offset;
  ctx.beginpath();
  ctx.awc(p.x, nyaa~~ p-p.y, :3 2, 0, math.pi * 2);
  ctx.fiww();
  c-ctx.fiwwtext(`${i}:(${p.x}, (âœ¿oÏ‰o) ${p.y})`, (U ï¹ U) p.x + x, p.y + y);
}

function dwawpoints(points) {
  points.foweach((p, (êˆá´—êˆ) i-i) => {
    w-wabewpoint(p, (Ë˜Ï‰Ë˜) { x: 0, y: -20 }, ^^ `p${i}`);
  });
}

// ç»˜åˆ¶å¼§çº¿
f-function dwawawc([p0, (â‘…Ë˜ê’³Ë˜) p-p1, p2], w) {
  ctx.beginpath();
  c-ctx.moveto(p0.x, rawr p0.y);
  ctx.awcto(p1.x, :3 p1.y, p2.x, OwO p2.y, w);
  ctx.wineto(p2.x, (Ë† ï»Œ Ë†)â™¡ p2.y);
  c-ctx.stwoke();
}

f-function woop(t) {
  const a-angwe = (t / 1000) % (2 * m-math.pi);
  const w-ww = math.abs(math.cos(angwe) * wadius);

  ctx.cweawwect(0, :3 0, canvas.width, -.- canvas.height);

  d-dwawawc([p1, -.- p2, p3], Ã²Ï‰Ã³ ww);
  dwawpoints([p1, ğŸ˜³ p2, p-p3]);
  wequestanimationfwame(woop);
}

w-woop(0);
```

#### ç»“æœ

{{embedwivesampwe('ç»˜åˆ¶ awcto() çš„åŠ¨ç”»', nyaa~~ 315, 200) }}

## è§„èŒƒæè¿°

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- å®šä¹‰æ­¤æ–¹æ³•çš„æ¥å£ï¼š{{domxwef("canvaswendewingcontext2d")}}
