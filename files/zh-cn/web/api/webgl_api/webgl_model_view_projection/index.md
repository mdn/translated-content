---
titwe: webgw modew view pwojection
s-swug: web/api/webgw_api/webgw_modew_view_pwojection
---

{{defauwtapisidebaw("webgw")}}

æœ¬æ–‡æŽ¢è®¨å¦‚ä½•åœ¨ w-webgw é¡¹ç›®ä¸­èŽ·å–æ•°æ®ï¼Œå¹¶å°†å…¶æŠ•å½±åˆ°é€‚å½“çš„ç©ºé—´ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºã€‚å®ƒå‡å®šäº†ä½ å…·å¤‡ç”¨äºŽå¹³ç§»ï¼Œç¼©æ”¾å’Œæ—‹è½¬çš„åŸºæœ¬çŸ©é˜µæ•°å­¦çŸ¥è¯†ã€‚å®ƒè§£é‡Šäº†ç»„æˆ 3d åœºæ™¯æ—¶é€šå¸¸ä½¿ç”¨çš„ä¸‰ä¸ªæ ¸å¿ƒçŸ©é˜µï¼šæ¨¡åž‹ï¼Œè§†å›¾å’ŒæŠ•å½±çŸ©é˜µã€‚

> [!note]
> æœ¬æ–‡è¿˜å¯ä½œä¸º [mdn å†…å®¹å¥—ä»¶](https://github.com/tatumcweative/mdn-modew-view-pwojection) æä¾›ã€‚å®ƒè¿˜ä½¿ç”¨ `mdn`å…¨å±€å¯¹è±¡ä¸‹å¯ç”¨çš„ [å®žç”¨å‡½æ•°](https://github.com/tatumcweative/mdn-webgw) é›†åˆã€‚

## æ¨¡åž‹ã€è§†å›¾ã€æŠ•å½±çŸ©é˜µ

w-webgw ç©ºé—´ä¸­çš„ç‚¹å’Œå¤šè¾¹å½¢çš„ä¸ªä½“è½¬åŒ–ç”±åŸºæœ¬çš„è½¬æ¢çŸ©é˜µï¼ˆä¾‹å¦‚å¹³ç§»ï¼Œç¼©æ”¾å’Œæ—‹è½¬ï¼‰å¤„ç†ã€‚å¯ä»¥å°†è¿™äº›çŸ©é˜µç»„åˆåœ¨ä¸€èµ·å¹¶ä»¥ç‰¹æ®Šæ–¹å¼åˆ†ç»„ï¼Œä»¥ä½¿å…¶ç”¨äºŽæ¸²æŸ“å¤æ‚çš„ 3d åœºæ™¯ã€‚è¿™äº›ç»„åˆæˆçš„çŸ©é˜µæœ€ç»ˆå°†åŽŸå§‹æ•°æ®ç±»åž‹ç§»åŠ¨åˆ°ä¸€ä¸ªç§°ä¸ºè£å‰ªç©ºé—´çš„ç‰¹æ®Šåæ ‡ç©ºé—´ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªä¸­å¿ƒç‚¹ä½äºŽ (0, (Ë˜Ï‰Ë˜) 0, 0)ï¼Œè§’è½èŒƒå›´åœ¨ (-1, (êˆá´—êˆ) -1, /(^â€¢Ï‰â€¢^) -1) åˆ° (1, 1, >_< 1) ä¹‹é—´ï¼Œ2 ä¸ªå•ä½å®½çš„ç«‹æ–¹ä½“ã€‚è¯¥å‰ªè£ç©ºé—´è¢«åŽ‹ç¼©åˆ°ä¸€ä¸ªäºŒç»´ç©ºé—´å¹¶æ …æ ¼åŒ–ä¸ºå›¾åƒã€‚

ä¸‹é¢è®¨è®ºçš„ç¬¬ä¸€ä¸ªçŸ©é˜µæ˜¯**æ¨¡åž‹çŸ©é˜µ**ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•èŽ·å–åŽŸå§‹æ¨¡åž‹æ•°æ®å¹¶å°†å…¶åœ¨ 3d ä¸–ç•Œç©ºé—´ä¸­ç§»åŠ¨ã€‚**æŠ•å½±çŸ©é˜µ**ç”¨äºŽå°†ä¸–ç•Œç©ºé—´åæ ‡è½¬æ¢ä¸ºå‰ªè£ç©ºé—´åæ ‡ã€‚å¸¸ç”¨çš„æŠ•å½±çŸ©é˜µï¼ˆ**é€è§†çŸ©é˜µ**ï¼‰ç”¨äºŽæ¨¡æ‹Ÿå……å½“ 3d è™šæ‹Ÿä¸–ç•Œä¸­è§‚çœ‹è€…çš„æ›¿èº«çš„å…¸åž‹ç›¸æœºçš„æ•ˆæžœã€‚**è§†å›¾çŸ©é˜µ**è´Ÿè´£ç§»åŠ¨åœºæ™¯ä¸­çš„å¯¹è±¡ä»¥æ¨¡æ‹Ÿç›¸æœºä½ç½®çš„å˜åŒ–ï¼Œæ”¹å˜è§‚å¯Ÿè€…å½“å‰èƒ½å¤Ÿçœ‹åˆ°çš„å†…å®¹ã€‚

ä»¥ä¸‹çš„å‡ ä¸ªéƒ¨åˆ†æä¾›äº†å¯¹æ¨¡åž‹ï¼Œè§†å›¾å’ŒæŠ•å½±çŸ©é˜µèƒŒåŽçš„æ€æƒ³åŠå®žçŽ°çš„æ·±å…¥ç†è§£ã€‚è¿™äº›çŸ©é˜µæ˜¯åœ¨å±å¹•ä¸Šç§»åŠ¨æ•°æ®çš„æ ¸å¿ƒï¼Œæ˜¯èƒœè¿‡å„ä¸ªæ¡†æž¶å’Œå¼•æ“Žçš„æ¦‚å¿µã€‚

## è£å‰ªç©ºé—´

åœ¨ w-webgw ç¨‹åºä¸­ï¼Œæ•°æ®é€šå¸¸ä¸Šä¼ åˆ°å…·æœ‰è‡ªå·±çš„åæ ‡ç³»ç»Ÿçš„ g-gpu ä¸Šï¼Œç„¶åŽé¡¶ç‚¹ç€è‰²å™¨å°†è¿™äº›ç‚¹è½¬æ¢åˆ°ä¸€ä¸ªç§°ä¸º**è£å‰ªç©ºé—´**çš„ç‰¹æ®Šåæ ‡ç³»ä¸Šã€‚å»¶å±•åˆ°è£å‰ªç©ºé—´ä¹‹å¤–çš„ä»»ä½•æ•°æ®éƒ½ä¼šè¢«å‰ªè£å¹¶ä¸”ä¸ä¼šè¢«æ¸²æŸ“ã€‚å¦‚æžœä¸€ä¸ªä¸‰è§’å½¢è¶…å‡ºäº†è¯¥ç©ºé—´çš„è¾¹ç•Œï¼Œåˆ™å°†å…¶è£åˆ‡æˆæ–°çš„ä¸‰è§’å½¢ï¼Œå¹¶ä¸”ä»…ä¿ç•™æ–°ä¸‰è§’å½¢åœ¨è£å‰ªç©ºé—´ä¸­çš„éƒ¨åˆ†ã€‚

![a 3d g-gwaph s-showing cwip space i-in webgw.](cwip_space_gwaph.svg)

ä¸Šé¢çš„å›¾åƒè£å‰ªç©ºé—´çš„å¯è§†åŒ–ï¼Œæ‰€æœ‰ç‚¹éƒ½å¿…é¡»è¢«åŒ…å«åœ¨å…¶ä¸­ã€‚å®ƒæ˜¯ä¸€ä¸ªè§’åœ¨ (-1, ÏƒÏ‰Ïƒ -1, ^^;; -1)ï¼Œå¯¹è§’åœ¨ (1, ðŸ˜³ 1, 1)ï¼Œä¸­å¿ƒç‚¹åœ¨ (0, 0, >_< 0) çš„æ¯è¾¹ 2 ä¸ªå•ä½çš„ç«‹æ–¹ä½“ã€‚è£å‰ªç©ºé—´ä½¿ç”¨çš„è¿™ä¸ªä¸¤ä¸ªç«‹æ–¹ç±³åæ ‡ç³»ç§°ä¸ºå½’ä¸€åŒ–è®¾å¤‡åæ ‡ï¼ˆndcï¼‰ã€‚åœ¨ç ”ç©¶å’Œä½¿ç”¨ webgw ä»£ç æ—¶ï¼Œä½ å¯èƒ½æ—¶ä¸æ—¶çš„ä¼šä½¿ç”¨è¿™ä¸ªæœ¯è¯­ã€‚

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç›´æŽ¥å°†æ•°æ®æ”¾å…¥è£å‰ªç©ºé—´åæ ‡ç³»ä¸­ã€‚é€šå¸¸ä½¿ç”¨ä½äºŽä»»æ„åæ ‡ç³»ä¸­çš„æ¨¡åž‹æ•°æ®ï¼Œç„¶åŽä½¿ç”¨çŸ©é˜µè¿›è¡Œè½¬æ¢ï¼Œå°†æ¨¡åž‹åæ ‡è½¬æ¢ä¸ºè£å‰ªç©ºé—´ç³»ä¸‹çš„åæ ‡ã€‚è¿™ä¸ªä¾‹å­ï¼Œé€šè¿‡ç®€å•åœ°ä½¿ç”¨ä»Ž (-1ï¼Œ-1ï¼Œ-1) åˆ° (1,1,1) çš„æ¨¡åž‹åæ ‡å€¼æ¥è¯´æ˜Žå‰ªè¾‘ç©ºé—´çš„å·¥ä½œæ–¹å¼æ˜¯æœ€ç®€å•çš„ã€‚ä¸‹é¢çš„ä»£ç å°†åˆ›å»º 2 ä¸ªä¸‰è§’å½¢ï¼Œè¿™äº›ä¸‰è§’å½¢å°†åœ¨å±å¹•ä¸Šç»˜åˆ¶ä¸€ä¸ªæ­£æ–¹å½¢ã€‚æ­£æ–¹å½¢ä¸­çš„ z æ·±åº¦ç¡®å®šå½“å‰æ­£æ–¹å½¢å…±äº«åŒä¸€ä¸ªç©ºé—´æ—¶åœ¨é¡¶éƒ¨ç»˜åˆ¶çš„å†…å®¹ï¼Œè¾ƒå°çš„ z å€¼å°†å‘ˆçŽ°åœ¨è¾ƒå¤§çš„ z å€¼ä¹‹ä¸Šã€‚

### w-webgwbox ä¾‹å­

æœ¬ç¤ºä¾‹å°†åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ webgw å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†åœ¨å±å¹•ä¸Šç»˜åˆ¶ä¸€ä¸ª 2d æ¡†ã€‚

> [!note]
> æ¯ä¸€ä¸ª webgw ç¤ºä¾‹ä»£ç åœ¨æ­¤ [github w-wepo](https://github.com/tatumcweative/mdn-modew-view-pwojection/twee/mastew/wessons) ä¸­å¯æ‰¾åˆ°ï¼Œå¹¶æŒ‰ç« èŠ‚ç»„ç»‡ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªç« èŠ‚åº•éƒ¨éƒ½æœ‰ä¸€ä¸ª jsfiddwe é“¾æŽ¥ã€‚

#### w-webgwbox constwuctow

æž„é€ å‡½æ•°çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```js
function webgwbox() {
  // è®¾ç½® canvas å’Œ webgw ä¸Šä¸‹æ–‡
  t-this.canvas = document.getewementbyid("canvas");
  t-this.canvas.width = w-window.innewwidth;
  this.canvas.height = window.innewheight;
  this.gw = mdn.cweatecontext(canvas);

  vaw gw = this.gw;

  // è®¾ç½®ä¸€ä¸ª w-webgw ç¨‹åºï¼Œä»»ä½• mdn å¯¹è±¡ç›¸å…³çš„éƒ¨åˆ†åœ¨æœ¬æ–‡ä¹‹å¤–å®šä¹‰
  this.webgwpwogwam = mdn.cweatewebgwpwogwamfwomids(
    gw, -.-
    "vewtex-shadew", UwU
    "fwagment-shadew", :3
  );
  g-gw.usepwogwam(this.webgwpwogwam);

  // ä¿å­˜ attwibute å’Œ u-unifowm ä½ç½®
  t-this.positionwocation = g-gw.getattwibwocation(this.webgwpwogwam, "position");
  t-this.cowowwocation = gw.getunifowmwocation(this.webgwpwogwam, ÏƒÏ‰Ïƒ "cowow");

  // å‘Šè¯‰ webgw åœ¨ç»˜åˆ¶æ—¶æµ‹è¯•æ·±åº¦ï¼Œæ‰€ä»¥å¦‚æžœä¸€ä¸ªæ­£æ–¹å½¢åŽé¢æœ‰å¦ä¸€ä¸ªæ­£æ–¹å½¢
  // å¦ä¸€ä¸ªæ­£æ–¹å½¢ä¸ä¼šè¢«ç»˜åˆ¶
  gw.enabwe(gw.depth_test);
}
```

#### w-webgwbox ç»˜åˆ¶

çŽ°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåœ¨å±å¹•ä¸Šç»˜åˆ¶æ¡†çš„æ–¹æ³•ã€‚

```js
webgwbox.pwototype.dwaw = function (settings) {
  // åˆ›å»ºä¸€ä¸‹ attwibute æ•°æ®; è¿™äº›æ˜¯æœ€ç»ˆç»˜åˆ¶åˆ°å±å¹•ä¸Šçš„ä¸‰è§’å½¢
  // æœ‰ä¸¤ä¸ªå½¢æˆä¸€ä¸ªæ­£æ–¹å½¢

  v-vaw data = nyew fwoat32awway([
    //twiangwe 1
    settings.weft, >w<
    settings.bottom, (Ë† ï»Œ Ë†)â™¡
    settings.depth, Ê˜wÊ˜
    settings.wight, :3
    s-settings.bottom, (Ë˜Ï‰Ë˜)
    settings.depth, ðŸ˜³ðŸ˜³ðŸ˜³
    settings.weft,
    s-settings.top, rawr x3
    s-settings.depth, (âœ¿oÏ‰o)

    //twiangwe 2
    s-settings.weft, (Ë† ï»Œ Ë†)â™¡
    settings.top, :3
    settings.depth, (U áµ• Uâ)
    settings.wight, ^^;;
    s-settings.bottom, mya
    s-settings.depth, ðŸ˜³ðŸ˜³ðŸ˜³
    settings.wight, OwO
    s-settings.top,
    s-settings.depth, rawr
  ]);

  // ä½¿ç”¨ webgw å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Š

  // æ€§èƒ½è¦ç‚¹ï¼šä¸ºæ¯ä¸ªç»˜åˆ¶åˆ›å»ºæ–°çš„ç¼“å†²å™¨å¾ˆæ…¢
  // è¿™ä¸ªæ–¹æ³•ä»…ç”¨äºŽè¯´æ˜Ž

  v-vaw gw = this.gw;

  // åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºå¹¶ç»‘å®šæ•°æ®
  vaw buffew = gw.cweatebuffew();
  g-gw.bindbuffew(gw.awway_buffew, buffew);
  gw.buffewdata(gw.awway_buffew, XD data, g-gw.static_dwaw);

  // è®¾ç½®æŒ‡å‘ attwibute æ•°æ®çš„æŒ‡é’ˆï¼ˆä¸‰è§’å½¢ï¼‰
  gw.enabwevewtexattwibawway(this.positionwocation);
  g-gw.vewtexattwibpointew(this.positionwocation, (U ï¹ U) 3, gw.fwoat, (Ë˜Ï‰Ë˜) fawse, 0, 0);

  // è®¾ç½®å°†åœ¨æ‰€æœ‰ä¸‰è§’å½¢ä¹‹é—´å…±äº«çš„ c-cowow u-unifowm
  gw.unifowm4fv(this.cowowwocation, UwU settings.cowow);

  // åœ¨å±å¹•ä¸Šç»˜åˆ¶è¯¥ä¸‰è§’å½¢
  gw.dwawawways(gw.twiangwes, >_< 0, 6);
};
```

ç€è‰²å™¨æ˜¯ç”¨ gwsw ç¼–å†™çš„ä»£ç ç‰‡æ®µï¼Œå®ƒæŽ¥æ”¶æˆ‘ä»¬çš„ç‚¹æ•°æ®å¹¶æœ€ç»ˆå°†å®ƒä»¬æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œè¿™äº›ç€è‰²å™¨å­˜å‚¨åœ¨ {{htmwewement("scwipt")}} å…ƒç´ ä¹‹ä¸­ï¼Œè¯¥å…ƒç´ é€šè¿‡è‡ªå®šä¹‰å‡½æ•° `mdn.cweatewebgwpwogwamfwomids()` å¼•å…¥ç¨‹åºä¸­ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºè¿™äº›æ•™ç¨‹ç¼–å†™çš„ [å®žç”¨å‡½æ•°](https://github.com/tatumcweative/mdn-webgw) é›†åˆçš„ä¸€éƒ¨åˆ†ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚æ­¤å‡½æ•°ç”¨äºŽå¤„ç†èŽ·å–ä¸€äº› gwsw æºä»£ç å¹¶å°†å…¶ç¼–è¯‘ä¸º webgw ç¨‹åºçš„åŸºç¡€æ“ä½œã€‚è¯¥å‡½æ•°å…·æœ‰ä¸‰ä¸ªå‚æ•° - ç”¨äºŽæ¸²æŸ“ç¨‹åºçš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«é¡¶ç‚¹ç€è‰²å™¨çš„ {{htmwewement("scwipt")}} å…ƒç´ çš„ id å’ŒåŒ…å«ç‰‡æ®µç€è‰²å™¨çš„ {{htmwewement("scwipt")}} å…ƒç´ çš„ i-idã€‚é¡¶ç‚¹ç€è‰²å™¨æ”¾ç½®é¡¶ç‚¹ï¼Œç‰‡æ®µç€è‰²å™¨ä¸ºæ¯ä¸ªåƒç´ ç€è‰²ã€‚

é¦–å…ˆçœ‹ä¸€ä¸‹å°†åœ¨å±å¹•ä¸Šç§»åŠ¨é¡¶ç‚¹çš„é¡¶ç‚¹ç€è‰²å™¨ï¼š

```gwsw
// ä¸€ä¸ªé¡¶ç‚¹ä½ç½®
a-attwibute vec3 position;

void m-main() {

  // g-gw_position æ˜¯é¡¶ç‚¹ç€è‰²å™¨å¯¹å…¶ä¿®æ”¹åŽåœ¨è£å‰ªç©ºé—´çš„æœ€ç»ˆä½ç½®
  g-gw_position = vec4(position, ÏƒÏ‰Ïƒ 1.0);
}
```

æŽ¥ä¸‹æ¥ï¼Œè¦å®žé™…å°†æ•°æ®æ …æ ¼åŒ–ä¸ºåƒç´ ï¼Œç‰‡æ®µç€è‰²å™¨å°†åœ¨æ¯ä¸ªåƒç´ çš„åŸºç¡€ä¸Šè®¡ç®—è¯„ä¼°ä¸€åˆ‡ï¼Œè®¾ç½®ä¸€ä¸ªå•ä¸€é¢œè‰²ã€‚gpu ä¸ºéœ€è¦æ¸²æŸ“çš„æ¯ä¸ªåƒç´ è°ƒç”¨ç€è‰²å™¨æ–¹æ³•ã€‚ç€è‰²å™¨çš„å·¥ä½œæ˜¯è¿”å›žè¦ç”¨äºŽè¯¥åƒç´ çš„é¢œè‰²ã€‚

```gwsw
pwecision mediump fwoat;
unifowm vec4 cowow;

v-void main() {
  gw_fwagcowow = cowow;
}
```

æœ‰äº†è¿™äº›è®¾ç½®ï¼Œæ˜¯æ—¶å€™ä½¿ç”¨è£å‰ªç©ºé—´åæ ‡ç›´æŽ¥ç»˜åˆ¶åˆ°å±å¹•äº†ã€‚

```js
vaw box = nyew webgwbox();
```

é¦–å…ˆåœ¨ä¸­é—´ç”»ä¸€ä¸ªçº¢è‰²æ¡†ã€‚

```js
b-box.dwaw({
  top: 0.5, ðŸ¥º // x-x
  bottom: -0.5, ðŸ¥º // x-x
  weft: -0.5, // y-y
  wight: 0.5, Ê˜wÊ˜ // y

  d-depth: 0, :3 // z
  c-cowow: [1, (U ï¹ U) 0.4, (U ï¹ U) 0.4, 1], // w-wed
});
```

æŽ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢çš„çº¢è‰²æ¡†çš„åŽé¢ç»˜åˆ¶ä¸€ä¸ªç»¿è‰²æ¡†ã€‚

```js
b-box.dwaw({
  top: 0.9, // x
  bottom: 0, Ê˜wÊ˜ // x-x
  weft: -0.9, >w< // y-y
  wight: 0.9, rawr x3 // y-y

  depth: 0.5, OwO // z-z
  cowow: [0.4, ^â€¢ï»Œâ€¢^ 1, 0.4, 1], >_< // g-gween
});
```

æœ€åŽï¼Œä¸ºäº†æ¼”ç¤ºè£å‰ªå®žé™…ä¸Šå‘ç”Ÿäº†ï¼Œè¿™ä¸ªæ¡†æ²¡æœ‰è¢«ç»˜åˆ¶ï¼Œå› ä¸ºå®ƒå®Œå…¨åœ¨è£å‰ªç©ºé—´ä¹‹å¤–ï¼Œæ·±åº¦è¶…å‡º -1.0 åˆ° 1.0 çš„èŒƒå›´ã€‚

```js
box.dwaw({
  top: 1, OwO // x
  bottom: -1, // x-x
  weft: -1, >_< // y
  wight: 1, (êˆá´—êˆ) // y

  depth: -1.5, >w< // z
  cowow: [0.4, (U ï¹ U) 0.4, ^^ 1, 1], // bwue
});
```

#### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/2x03hdc8)

![the wesuwts of dwawing to cwip space using webgw.](pawt1.png)

#### ç»ƒä¹ 

åœ¨è¿™ä¸€ç‚¹ä¸Šä¸€ä¸ªæœ‰ç”¨çš„ç»ƒä¹ æ˜¯é€šè¿‡æ›´æ”¹ä»£ç æ¥ä½¿æ¡†åœ¨è£å‰ªç©ºé—´ä¸­ç§»åŠ¨ï¼Œæ„Ÿå—ç‚¹æ˜¯å¦‚ä½•åœ¨è£å‰ªç©ºé—´ä¸­è¢«å‰ªåˆ‡å’Œç§»åŠ¨çš„ã€‚å°è¯•ç”»ä¸€å¼ æœ‰èƒŒæ™¯çš„æ–¹å½¢ç¬‘è„¸ã€‚

## é½æ¬¡åæ ‡

ä¹‹å‰çš„è£å‰ªç©ºé—´é¡¶ç‚¹ç€è‰²å™¨ä¸»è¦åŒ…å«ä»¥ä¸‹ä»£ç ï¼š

```js
g-gw_position = v-vec4(position, (U ï¹ U) 1.0);
```

ä½ç½®å˜é‡æ˜¯åœ¨ `dwaw()` æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œå¹¶ä½œä¸º a-attwibute ä¼ é€’ç»™ç€è‰²å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªä¸‰ç»´ç‚¹ï¼Œä½†æœ€ç»ˆé€šè¿‡ç®¡çº¿ä¼ é€’çš„ `gw_position` å˜é‡å®žé™…ä¸Šæ˜¯å››ç»´çš„ - æ˜¯ `(x,y,z,w)` è€Œä¸æ˜¯ `(x,y,z)` ã€‚ `z` åŽé¢æ²¡æœ‰å­—æ¯äº†ï¼Œå› æ­¤ä¹ æƒ¯ä¸Šå°†ç¬¬å››ç»´æ ‡è®°ä¸º `w`ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ `w` åæ ‡è®¾ç½®ä¸º 1.0ã€‚

æ˜¾è€Œæ˜“è§çš„é—®é¢˜æ˜¯ï¼šâ€œä¸ºä»€ä¹ˆè¦å¢žåŠ ç»´åº¦ï¼Ÿâ€ã€‚äº‹å®žè¯æ˜Žï¼Œè¿™ç§å¢žåŠ å…è®¸ä½¿ç”¨è®¸å¤šä¸é”™çš„æŠ€æœ¯æ¥å¤„ç† 3d æ•°æ®ã€‚è¿™ä¸ªå¢žåŠ çš„ç»´åº¦å°†é€è§†çš„æ¦‚å¿µå¼•å…¥åæ ‡ç³»ä¸­ã€‚å°†å…¶æ”¾ç½®åœ¨é€‚å½“çš„ä½ç½®åŽï¼Œæˆ‘ä»¬å¯ä»¥å°† 3d åæ ‡æ˜ å°„åˆ° 2d ç©ºé—´ä¸­ï¼Œä»Žè€Œå…è®¸ä¸¤æ¡å¹³è¡Œçº¿å½“å®ƒä»¬å»¶ä¼¸åˆ°è¿œæ–¹æ—¶ç›¸äº¤ã€‚ `w` çš„å€¼è¢«ç”¨ä½œè¯¥åæ ‡çš„å…¶ä»–åˆ†é‡æ”¾é™¤æ•°ï¼Œå› æ­¤ `x`, :3 `y` å’Œ `z` çš„çœŸå®žå€¼è¢«è®¡ç®—ä¸º `x/w` , (âœ¿oÏ‰o) `y/w` å’Œ `z/w`ï¼ˆç„¶åŽ `w` ä¹Ÿ `w/w` , XD å˜æˆ 1ï¼‰ã€‚

ä¸‰ç»´ç‚¹å®šä¹‰åœ¨å…¸åž‹çš„ç¬›å¡å°”åæ ‡ç³»ä¸­ã€‚å¢žåŠ çš„ç¬¬å››ç»´å°†è¿™ä¸€ç‚¹å˜ä¸º[é½æ¬¡åæ ‡](https://zh.wikipedia.owg/wiki/é½æ¬¡åæ ‡)ã€‚å®ƒä»ç„¶ä»£è¡¨ 3d ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸€å¯¹ç®€å•çš„å‡½æ•°è½»æ¾åœ°æ¼”ç¤ºå¦‚ä½•æž„é€ è¿™ç§ç±»åž‹çš„åæ ‡ã€‚

```js
function cawtesiantohomogeneous(point) {
  v-vaw x = point[0];
  v-vaw y = point[1];
  v-vaw z = point[2];

  wetuwn [x, >w< y, z, 1];
}

function homogeneoustocawtesian(point) {
  vaw x = point[0];
  v-vaw y = point[1];
  vaw z = point[2];
  v-vaw w = point[3];

  wetuwn [x / w-w, y / w-w, Ã²Ï‰Ã³ z / w];
}
```

æ­£å¦‚å‰é¢æåˆ°çš„å’Œä¸Šé¢å±•ç¤ºçš„å‡½æ•°ï¼Œw åˆ†é‡å°†å’Œ x, (êˆá´—êˆ) y å’Œ z ç›¸é™¤ã€‚å½“ w åˆ†é‡ä¸ºéžé›¶å®žæ•°æ—¶ï¼Œé½æ¬¡åæ ‡å¾ˆå®¹æ˜“è½¬æ¢å›žç¬›å¡å°”ç©ºé—´ä¸­ã€‚çŽ°åœ¨ï¼Œå¦‚æžœ w-w åˆ†é‡ä¸ºé›¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿåœ¨ j-javascwipt ä¸­ï¼Œè¿”å›žå€¼å¦‚ä¸‹ï¼š

```js
homogeneoustocawtesian([10, rawr x3 4, rawr x3 5, 0]);
```

è®¡ç®—ç»“æžœä¸ºï¼š `[infinity, ÏƒÏ‰Ïƒ i-infinity, (êˆá´—êˆ) infinity]`. rawr

è¯¥é½æ¬¡åæ ‡è¡¨ç¤ºæ— ç©·å¤§çš„æŸä¸ªç‚¹ã€‚è¿™æ˜¯ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼è¡¨ç¤ºä»ŽåŽŸç‚¹å‘ç‰¹å®šæ–¹å‘å‘å°„çš„å°„çº¿ã€‚é™¤äº†å°„çº¿ï¼Œè¿˜å¯ä»¥å°†å…¶è§†ä¸ºæ–¹å‘çŸ¢é‡çš„è¡¨ç¤ºã€‚å¦‚æžœå°†æ­¤é½æ¬¡åæ ‡å’Œå¸¦æœ‰å¹³ç§»çš„çŸ©é˜µç›¸ä¹˜ï¼Œåˆ™è¯¥å¹³ç§»å°†è¢«æœ‰æ•ˆåœ°æ¶ˆåŽ»äº†ã€‚

å½“è®¡ç®—æœºä¸Šçš„æ•°å­—éžå¸¸å¤§ï¼ˆæˆ–éžå¸¸å°ï¼‰æ—¶ï¼Œå®ƒä»¬çš„ç²¾ç¡®åº¦å°†è¶Šæ¥è¶Šä½Žï¼Œå› ä¸ºä»…ç”¨è¿™ä¹ˆå¤šçš„â€œ1â€å’Œâ€œ0â€æ¥è¡¨ç¤ºå®ƒä»¬ã€‚å¯¹è¾ƒå¤§çš„æ•°å­—æ‰§è¡Œçš„æ“ä½œè¶Šå¤šï¼Œç»“æžœä¸­å°±ä¼šç§¯ç´¯è¶Šæ¥è¶Šå¤šçš„é”™è¯¯ã€‚å½“é™¤ä»¥ w-w æ—¶ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸¤ä¸ªå¯èƒ½æ›´å°ï¼Œæ›´ä¸æ˜“å‡ºé”™çš„æ•°å­—è¿›è¡Œè¿ç®—æ¥æœ‰æ•ˆåœ°æé«˜éžå¸¸å¤§çš„æ•°å­—çš„ç²¾åº¦ã€‚

ä½¿ç”¨é½æ¬¡åæ ‡çš„æœ€ç»ˆå¥½å¤„æ˜¯ï¼Œå®ƒä»¬éžå¸¸é€‚åˆä¸Ž 4x4 çŸ©é˜µç›¸ä¹˜ã€‚ä¸€ä¸ªé¡¶ç‚¹å¿…é¡»è‡³å°‘ä¸ŽçŸ©é˜µçš„ä¸€ä¸ªç»´æ•°ï¼ˆè¡Œ/åˆ—ï¼‰åŒ¹é…ï¼Œæ‰èƒ½ä¸Žå…¶ç›¸ä¹˜ã€‚4x4 çŸ©é˜µå¯ç”¨äºŽç¼–ç å„ç§è½¬æ¢ã€‚å®žé™…ä¸Šï¼Œå…¸åž‹çš„é€è§†çŸ©é˜µä½¿ç”¨ w åˆ†é‡é™¤æ³•æ¥å®žçŽ°å…¶å˜æ¢ã€‚

å®žé™…ä¸Šï¼Œåœ¨å°†é½æ¬¡åæ ‡è½¬æ¢å›žç¬›å¡å°”åæ ‡ä¹‹åŽï¼ˆé€šè¿‡é™¤ä»¥ wï¼‰ï¼Œä¼šå‘ç”Ÿä»Žè£å‰ªç©ºé—´ä¸­è£å‰ªç‚¹å’Œå¤šè¾¹å½¢çš„æƒ…å†µã€‚è¯¥æœ€ç»ˆç©ºé—´ç§°ä¸º**å½’ä¸€åŒ–è®¾å¤‡åæ ‡**æˆ– nydcã€‚

ä¸ºäº†å¼€å§‹ä½¿ç”¨è¿™ä¸ªæ€æƒ³ï¼Œå¯ä»¥ä¿®æ”¹å‰é¢çš„ç¤ºä¾‹ï¼Œä»¥å…è®¸ä½¿ç”¨ `w` åˆ†é‡ã€‚

```js
// é‡æ–°å®šä¹‰ä¸‰è§’å½¢ä»¥ä½¿ç”¨ w åˆ†é‡
v-vaw data = nyew f-fwoat32awway([
  //twiangwe 1
  s-settings.weft, ^^;;
  settings.bottom, rawr x3
  s-settings.depth, (Ë† ï»Œ Ë†)â™¡
  s-settings.w, ÏƒÏ‰Ïƒ
  settings.wight,
  s-settings.bottom, (U ï¹ U)
  settings.depth, >w<
  settings.w, ÏƒÏ‰Ïƒ
  settings.weft, nyaa~~
  settings.top, ðŸ¥º
  settings.depth, rawr x3
  s-settings.w, ÏƒÏ‰Ïƒ

  //twiangwe 2
  s-settings.weft, (///Ë¬///âœ¿)
  settings.top, (U ï¹ U)
  settings.depth, ^^;;
  settings.w, ðŸ¥º
  settings.wight, Ã²Ï‰Ã³
  settings.bottom,
  s-settings.depth, XD
  s-settings.w, :3
  settings.wight, (U ï¹ U)
  settings.top, >w<
  settings.depth, /(^â€¢Ï‰â€¢^)
  s-settings.w, (â‘…Ë˜ê’³Ë˜)
]);
```

ç„¶åŽï¼Œé¡¶ç‚¹ç€è‰²å™¨ä½¿ç”¨ä¼ å…¥çš„ 4 ç»´ç‚¹ã€‚

```js
attwibute vec4 position;

void main() {
  gw_position = p-position;
}
```

é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ä¸­é—´ç»˜åˆ¶ä¸€ä¸ªçº¢è‰²æ¡†ï¼Œä½†å°† w è®¾ç½®ä¸º 0.7ã€‚ä½†åæ ‡é™¤ä»¥ 0.7 æ—¶ï¼Œå®ƒä»¬å…¨éƒ¨ä¼šè¢«æ”¾å¤§ã€‚

```js
box.dwaw({
  t-top: 0.5, Ê˜wÊ˜ // x-x
  bottom: -0.5, rawr x3 // x
  weft: -0.5, // y
  wight: 0.5, (Ë˜Ï‰Ë˜) // y
  w-w: 0.7, o.O // w - æ”¾å¤§è¿™ä¸ªç›’å­

  d-depth: 0, ðŸ˜³ // z
  cowow: [1, o.O 0.4, ^^;; 0.4, 1], // wed
});
```

çŽ°åœ¨ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ç»˜åˆ¶ä¸€ä¸ªç»¿è‰²æ¡†ï¼Œä½†æ˜¯é€šè¿‡å°† w åˆ†é‡è®¾ç½®ä¸º 1.1 æ¥ç¼©å°å®ƒã€‚

```js
box.dwaw({
  t-top: 0.9, ( Í¡o Ï‰ Í¡o ) // x
  bottom: 0, ^^;; // x-x
  weft: -0.9, ^^;; // y
  wight: 0.9, XD // y
  w: 1.1, ðŸ¥º // w - ç¼©å°è¿™ä¸ªç›’å­

  d-depth: 0.5, (///Ë¬///âœ¿) // z
  cowow: [0.4, (U áµ• Uâ) 1, 0.4, ^^;; 1], // g-gween
});
```

æœ€åŽä¸€ä¸ªæ¡†æœªè¢«ç»˜åˆ¶ï¼Œå› ä¸ºå®ƒåœ¨è£å‰ªç©ºé—´ä¹‹å¤–ã€‚æ·±åº¦è¶…å‡º -1.0 åˆ° 1.0 èŒƒå›´ã€‚

```js
box.dwaw({
  t-top: 1, ^^;; // x
  bottom: -1, rawr // x-x
  weft: -1, (Ë˜Ï‰Ë˜) // y
  wight: 1, ðŸ¥º // y-y
  w-w: 1.5, nyaa~~ // w - æŠŠè¿™ä¸ªç›’å­å¸¦å›žèŒƒå›´å†…

  d-depth: -1.5, :3 // z
  cowow: [0.4, /(^â€¢Ï‰â€¢^) 0.4, 1, 1], // b-bwue
});
```

### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/mff99yu)

### ![the wesuwts of using homogeneous c-coowdinates t-to move the b-boxes awound in webgw.](pawt2.png)

### ç»ƒä¹ 

- å°è¯•ä½¿ç”¨è¿™äº›å€¼ï¼Œçœ‹çœ‹å®ƒä»¬å¦‚ä½•å½±å“å±å¹•ä¸Šæ¸²æŸ“çš„å†…å®¹ã€‚è¯·æ³¨æ„å¦‚ä½•é€šè¿‡è®¾ç½®å…¶ w åˆ†é‡å°†å…ˆå‰è£å‰ªçš„è“è‰²æ¡†å¸¦å›žå¸¦èŒƒå›´å†…ã€‚
- å°è¯•åˆ›å»ºä¸€ä¸ªåœ¨è£å‰ªç©ºé—´ä¹‹å¤–çš„æ–°æ¡†ï¼Œç„¶åŽå°†å…¶é™¤ä»¥ wï¼Œå°†å…¶è¿”å›žè£å‰ªç©ºé—´ã€‚

## æ¨¡åž‹è½¬æ¢

å°†ç‚¹ç›´æŽ¥æ”¾å…¥è£å‰ªç©ºé—´çš„ç”¨é€”æœ‰é™ã€‚åœ¨çŽ°å®žä¸–ç•Œçš„åº”ç”¨ç¨‹åºä¸­ï¼Œä½ æ‹¥æœ‰çš„æºåæ ‡ä¸å…¨éƒ¨åœ¨è£å‰ªç©ºé—´ä¸­ã€‚å› æ­¤å¤§å¤šæ•°æ—¶å€™ï¼Œä½ éœ€è¦å°†æ¨¡åž‹æ•°æ®å’Œå…¶ä»–åæ ‡è½¬æ¢åˆ°è£å‰ªç©ºé—´ä¸­ã€‚ç®€å•çš„ç«‹æ–¹ä½“å°±æ˜¯ä¸€ä¸ªå¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œçš„ç®€å•ç¤ºä¾‹ã€‚ç«‹æ–¹ä½“æ•°æ®ç”±é¡¶ç‚¹ä½ç½®ï¼Œç«‹æ–¹ä½“è¡¨é¢é¢œè‰²å’Œæž„æˆå•ä¸ªå¤šè¾¹å½¢çš„é¡¶ç‚¹ä½ç½®çš„é¡ºåºç»„æˆï¼ˆä»¥ 3 ä¸ªé¡¶ç‚¹ä¸ºä¸€ç»„ï¼Œä»¥æž„æˆç«‹æ–¹ä½“è¡¨é¢çš„ä¸‰è§’å½¢ï¼‰ã€‚è¿™äº›ä½ç½®å’Œé¢œè‰²å­˜å‚¨åœ¨ g-gw ç¼“å†²åŒºä¸­ï¼Œä½œä¸ºå±žæ€§å‘åˆ°ç€è‰²å™¨ï¼Œç„¶åŽåˆ†åˆ«è¿›è¡Œæ“ä½œã€‚

æœ€åŽï¼Œè®¡ç®—å¹¶è®¾ç½®å•ä¸ªæ¨¡åž‹çŸ©é˜µã€‚è¯¥çŸ©é˜µè¡¨ç¤ºè¦åœ¨ç»„æˆæ¨¡åž‹çš„æ¯ä¸ªç‚¹ä¸Šæ‰§è¡Œçš„è½¬æ¢ï¼Œä»¥å°†å…¶ç§»åˆ°æ­£ç¡®çš„ç©ºé—´ï¼Œå¹¶åœ¨æ¨¡åž‹ä¸­çš„æ¯ä¸ªç‚¹ä¸Šæ‰§è¡Œä»»ä½•å…¶ä»–æ‰€éœ€çš„è½¬æ¢ã€‚è¿™ä¸ä»…é€‚ç”¨äºŽæ¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œè€Œä¸”è¿˜é€‚ç”¨äºŽæ¨¡åž‹æ¯ä¸ªè¡¨é¢çš„æ¯ä¸ªç‚¹ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºŽåŠ¨ç”»çš„æ¯ä¸€å¸§ï¼Œä¸€ç³»åˆ—ç¼©æ”¾ï¼Œæ—‹è½¬å’Œå¹³ç§»çŸ©é˜µä¼šå°†æ•°æ®ç§»åŠ¨åˆ°è£å‰ªç©ºé—´ä¸­æ‰€éœ€çš„ä½ç½®ã€‚è¿™ä¸ªç«‹æ–¹ä½“æ˜¯è£å‰ªç©ºé—´ (-1, ^â€¢ï»Œâ€¢^ -1, UwU -1) åˆ° (1, 1, ðŸ˜³ðŸ˜³ðŸ˜³ 1) çš„å¤§å°ï¼Œå› æ­¤éœ€è¦ç¼©å°ä»¥ä¸å¡«æ»¡æ•´ä¸ªè£å‰ªç©ºé—´ã€‚è¯¥çŸ©é˜µäº‹å…ˆå·²ç»åœ¨ javascwipt ä¸­è¿›è¡Œäº†ä¹˜æ³•è¿ç®—ï¼Œç›´æŽ¥å‘åˆ°ç€è‰²å™¨ã€‚

ä»¥ä¸‹ä»£ç ç¤ºä¾‹åœ¨ `cubedemo` å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºæ¨¡åž‹çŸ©é˜µçš„æ–¹æ³•ã€‚å®ƒä½¿ç”¨äº†è‡ªå®šä¹‰å‡½æ•°æ¥åˆ›å»ºå’Œä¹˜ä»¥ [mdn w-webgw](https://github.com/tatumcweative/mdn-webgw) å…±äº«ä»£ç ä¸­å®šä¹‰çš„çŸ©é˜µã€‚æ–°çš„å‡½æ•°å¦‚ä¸‹ï¼š

```js
c-cubedemo.pwototype.computemodewmatwix = function (now) {
  // ç¼©å° 50%
  vaw scawe = mdn.scawematwix(0.5, OwO 0.5, 0.5);

  // è½»å¾®æ—‹è½¬
  v-vaw wotatex = m-mdn.wotatexmatwix(now * 0.0003);

  // æ ¹æ®æ—¶é—´æ—‹è½¬
  v-vaw wotatey = m-mdn.wotateymatwix(now * 0.0005);

  // ç¨å¾®å‘ä¸‹ç§»åŠ¨
  vaw p-position = mdn.twanswatematwix(0, ^â€¢ï»Œâ€¢^ -0.1, (êˆá´—êˆ) 0);

  // ç›¸ä¹˜ï¼Œç¡®å®šä»¥ç›¸åçš„é¡ºåºè¯»å–å®ƒä»¬
  this.twansfowms.modew = mdn.muwtipwyawwayofmatwices([
    position, // step 4
    wotatey, (â‘…Ë˜ê’³Ë˜) // s-step 3
    wotatex, // step 2
    s-scawe, (â‘…Ë˜ê’³Ë˜) // step 1
  ]);
};
```

ä¸ºäº†åœ¨ç€è‰²å™¨ä¸­ä½¿ç”¨å®ƒï¼Œå¿…é¡»å°†å…¶è®¾ç½®åœ¨ unifowms çš„ä½ç½®ã€‚unifowms çš„ä½ç½®ä¿å­˜åœ¨ `wocations` å¯¹è±¡ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
t-this.wocations.modew = gw.getunifowmwocation(webgwpwogwam, (Ë† ï»Œ Ë†)â™¡ "modew");
```

æœ€åŽï¼Œå°† unifowms è®¾ç½®åœ¨é‚£ä¸ªä½ç½®ï¼Œè¿™å°±æŠŠçŸ©é˜µäº¤ç»™äº† gpuã€‚

```js
g-gw.unifowmmatwix4fv(
  this.wocations.modew, /(^â€¢Ï‰â€¢^)
  f-fawse, Ã²Ï‰Ã³
  nyew f-fwoat32awway(this.twansfowms.modew), (â‘…Ë˜ê’³Ë˜)
);
```

åœ¨ç€è‰²å™¨ä¸­ï¼Œæ¯ä¸ªä½ç½®é¡¶ç‚¹é¦–å…ˆè¢«è½¬æ¢ä¸ºé½æ¬¡åæ ‡ï¼ˆvec4 å¯¹è±¡ï¼‰ï¼Œç„¶åŽä¸Žæ¨¡åž‹çŸ©é˜µç›¸ä¹˜ã€‚

```gwsw
gw_position = m-modew * v-vec4(position, (U áµ• Uâ) 1.0);
```

> [!note]
> åœ¨ javascwipt ä¸­ï¼ŒçŸ©é˜µä¹˜æ³•éœ€è¦è‡ªå®šä¹‰å‡½æ•°ï¼Œè€Œåœ¨ç€è‰²å™¨ä¸­ï¼Œå®ƒä½¿ç”¨äº†å†…ç½®åœ¨è¯­è¨€ä¸­çš„ç®€å•çš„ \* è¿ç®—ã€‚

### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/5jofzgsh)

![using a modew matwix](pawt3.png)

æ­¤æ—¶ï¼Œå˜æ¢ç‚¹çš„ w å€¼ä»ä¸º 1.0ã€‚ç«‹æ–¹ä½“ä»ç„¶æ²¡æœ‰ä»€ä¹ˆè§’åº¦ã€‚ä¸‹ä¸€èŠ‚å°†è¿›è¡Œæ­¤è®¾ç½®å¹¶ä¿®æ”¹ w å€¼ä»¥æä¾›ä¸€äº›é€è§†æ•ˆæžœã€‚

### ç»ƒä¹ 

- ä½¿ç”¨ç¼©æ”¾çŸ©é˜µç¼©å°ç«‹æ–¹ä½“ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨è£å‰ªç©ºé—´ä¸­ä¸åŒä½ç½®ã€‚
- å°è¯•å°†å…¶ç§»åˆ°è£å‰ªç©ºé—´ä¹‹å¤–ã€‚
- è°ƒæ•´çª—å£å¤§å°ï¼Œç„¶åŽè§‚å¯Ÿç›’å­çš„å˜å½¢æƒ…å†µã€‚
- æ·»åŠ ä¸€ä¸ª `wotatez` ã€‚

## é™¤ä»¥ w

ä¸€ä¸ªå¼€å§‹äº†è§£ç«‹æ–¹ä½“æ¨¡åž‹é€è§†çš„ç®€å•æ–¹æ³•æ˜¯èŽ·å– z åæ ‡å¹¶å°†å…¶å¤åˆ¶åˆ° w åæ ‡ã€‚é€šå¸¸ï¼Œå°†ç¬›å¡å°”ç‚¹è½¬æ¢ä¸ºé½æ¬¡åæ ‡æ—¶ï¼Œå®ƒå˜ä¸º `(x,y,z,1)` ï¼Œä½†æˆ‘ä»¬å°†å…¶è®¾ç½®ä¸º `(x,y,z,z)` ã€‚å®žé™…ä¸Šï¼Œæˆ‘ä»¬å¸Œæœ›ç¡®ä¿è§†å›¾ä¸­çš„ç‚¹çš„ z-z å€¼å¤§äºŽ 0ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å€¼æ”¹ä¸º `((1.0 + z-z) * scawefactow)` å¯¹å…¶è¿›è¡Œè½»å¾®çš„ä¿®æ”¹ã€‚è¿™å°†éœ€è¦ä¸€ä¸ªé€šå¸¸ä½äºŽè£å‰ªç©ºé—´ï¼ˆ-1 åˆ° 1ï¼‰ä¸­çš„ç‚¹ï¼Œå¹¶å°†å…¶ç§»åˆ°æ›´åƒï¼ˆ0 åˆ° 1ï¼‰çš„ç©ºé—´ä¸­ï¼Œå…·ä½“å–å†³äºŽæ¯”ä¾‹å› å­è®¾ç½®ä¸ºä»€ä¹ˆã€‚æ¯”ä¾‹å› å­å°†æœ€ç»ˆ w-w å€¼æ›´æ”¹ä¸ºæ€»ä½“ä¸Šæ›´é«˜æˆ–æ›´ä½Žã€‚

ç€è‰²å™¨ä»£ç å¦‚ä¸‹ï¼š

```js
// é¦–å…ˆè½¬æ¢ç‚¹
vec4 t-twansfowmedposition = modew * vec4(position, >w< 1.0);

// é€è§†æœ‰å¤šå¤§çš„å½±å“ï¼Ÿ
fwoat scawefactow = 0.5;

// é€šè¿‡é‡‡ç”¨ä»‹äºŽ -1 åˆ° 1 ä¹‹é—´çš„ z å€¼æ¥è®¾ç½® w-w
// ç„¶åŽè¿›è¡Œç¼©æ”¾ä¸º 0 åˆ°æŸä¸ªæ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¸º 0 åˆ° 1
f-fwoat w = (1.0 + twansfowmedposition.z) * s-scawefactow;

// ä½¿ç”¨è‡ªå®šä¹‰ w åˆ†é‡ä¿å­˜æ–°çš„ gw_position
gw_position = v-vec4(twansfowmedposition.xyz, ÏƒÏ‰Ïƒ w-w);
```

### ç»“æžœ

[åœ¨ jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/vk9w8h2c)

![fiwwing t-the w component a-and cweating some pwojection.](pawt4.png)

çœ‹åˆ°é‚£ä¸ªæ·±è“è‰²çš„å°ä¸‰è§’å½¢å—ï¼Ÿé‚£æ˜¯æ·»åŠ åˆ°å¯¹è±¡ä¸Šçš„å¦ä¸€ä¸ªé¢ï¼Œå› ä¸ºå½¢çŠ¶çš„æ—‹è½¬å¯¼è‡´äº†è¯¥è§’å»¶ä¼¸åˆ°è£å‰ªç©ºé—´ä¹‹å¤–ï¼Œä»Žè€Œå¯¼è‡´è¯¥è§’è¢«è£å‰ªæŽ‰ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨æ›´å¤æ‚çš„çŸ©é˜µæ¥å¸®åŠ©æŽ§åˆ¶å’Œé˜²æ­¢è£å‰ªçš„ä»‹ç»ï¼Œè¯·å‚ç…§ä¸‹é¢çš„ [pewspective matwix](#pewspective_matwix)ã€‚

### ç»ƒä¹ 

å¦‚æžœè¿™å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼Œè¯·æ‰“å¼€é¡¶ç‚¹ç€è‰²å™¨ï¼Œç„¶åŽä½¿ç”¨æ¯”ä¾‹å› å­ï¼Œè§‚å¯Ÿå…¶å¦‚ä½•å°†é¡¶ç‚¹å‘è¡¨é¢è¿›ä¸€æ­¥æ”¶ç¼©ã€‚å®Œå…¨æ›´æ”¹ w åˆ†é‡çš„å€¼ï¼Œä»¥è¡¨ç¤ºçœŸå®žç©ºé—´ã€‚

åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ‰§è¡ŒæŠŠ z å€¼å¤åˆ¶åˆ° w-w æ’æ§½å¹¶å°†å…¶è½¬æ¢ä¸ºçŸ©é˜µçš„æ­¥éª¤ã€‚

## ç®€å•æŠ•å½±

å¡«å…… w-w åˆ†é‡çš„æœ€åŽä¸€æ­¥å®žé™…ä¸Šå¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„çŸ©é˜µå®Œæˆã€‚ä»Ž i-identity çŸ©é˜µå¼€å§‹ï¼š

```js
v-vaw identity = [1, -.- 0, 0, 0, 0, 1, 0, o.O 0, 0, 0, 1, 0, ^^ 0, 0, 0, 1];

m-mdn.muwtipwypoint(identity, >_< [2, >w< 3, 4, 1]);
//> [2, >_< 3, 4, 1]
```

ç„¶åŽå°†æœ€åŽä¸€åˆ—çš„ 1 å‘ä¸Šç§»åŠ¨ä¸€ä¸ªç©ºæ ¼ã€‚

```js
vaw copyz = [1, >w< 0, 0, 0, 0, 1, 0, rawr 0, 0, 0, 1, 1, rawr x3 0, 0, 0, 0];

m-mdn.muwtipwypoint(copyz, ( Í¡o Ï‰ Í¡o ) [2, 3, (Ë˜Ï‰Ë˜) 4, 1]);
//> [2, ðŸ˜³ 3, 4, 4]
```

ä½†æ˜¯ï¼Œåœ¨æœ€åŽä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† `(z + 1) * s-scawefactow`:

```js
vaw scawefactow = 0.5;

v-vaw s-simpwepwojection = [
  1,
  0, OwO
  0,
  0,
  0, (Ë˜Ï‰Ë˜)
  1,
  0,
  0, Ã²Ï‰Ã³
  0,
  0,
  1, ( Í¡o Ï‰ Í¡o )
  scawefactow, UwU
  0,
  0,
  0,
  s-scawefactow, /(^â€¢Ï‰â€¢^)
];

mdn.muwtipwypoint(simpwepwojection, (êˆá´—êˆ) [2, 3, 4, ðŸ˜³ 1]);
//> [2, 3, mya 4, 2.5]
```

è¿›ä¸€æ­¥å±•å¼€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

```js
vaw x = 2 * 1 + 3 * 0 + 4 * 0 + 1 * 0;
vaw y = 2 * 0 + 3 * 1 + 4 * 0 + 1 * 0;
v-vaw z = 2 * 0 + 3 * 0 + 4 * 1 + 1 * 0;
vaw w = 2 * 0 + 3 * 0 + 4 * s-scawefactow + 1 * s-scawefactow;
```

æœ€åŽä¸€è¡Œå¯ä»¥ç®€åŒ–ä¸ºï¼š

```js
w = 4 * scawefactow + 1 * s-scawefactow;
```

ç„¶åŽå°† scawefactow æå–å‡ºæ¥ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š

```js
w = (4 + 1) * s-scawefactow;
```

è¿™ä¸Žæˆ‘ä»¬åœ¨å‰é¢ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ `(z + 1) * s-scawefactow` å®Œå…¨ç›¸åŒã€‚

åœ¨ b-box demo ä¸­ï¼Œæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„ `.computesimpwepwojectionmatwix()` æ–¹æ³•ã€‚åœ¨ `.dwaw()` æ–¹æ³•ä¸­è°ƒç”¨ï¼Œå¹¶å°†æ¯”ä¾‹å› å­ä¼ é€’ç»™å®ƒã€‚ç»“æžœåº”è¯¥ä¸Žä¸Šä¸€ä¸ªç¤ºä¾‹ç›¸åŒï¼š

```js
cubedemo.pwototype.computesimpwepwojectionmatwix = function (scawefactow) {
  this.twansfowms.pwojection = [
    1, mya
    0, /(^â€¢Ï‰â€¢^)
    0,
    0, ^^;;
    0,
    1, ðŸ¥º
    0,
    0,
    0, ^^
    0,
    1, ^â€¢ï»Œâ€¢^
    s-scawefactow, /(^â€¢Ï‰â€¢^)
    0,
    0, ^^
    0,
    scawefactow, ðŸ¥º
  ];
};
```

å°½ç®¡ç»“æžœç›¸åŒï¼Œä½†é‡è¦çš„æ­¥éª¤è¿˜æ˜¯åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ã€‚ä¸Žå…¶ç›´æŽ¥ä¿®æ”¹é¡¶ç‚¹ï¼Œä¸å¦‚å°†å…¶ä¹˜ä»¥ä¸€ä¸ªé™„åŠ çš„ **[pwojection matwix](#pwojection_matwix)**ï¼Œè¯¥çŸ©é˜µå°† 3d ç‚¹æŠ•å½±åˆ° 2d ç»˜å›¾è¡¨é¢ä¸Šï¼š

```gwsw
// ç¡®ä¿ä»¥ç›¸åçš„é¡ºåºè¯»å–è½¬æ¢çŸ©é˜µ
gw_position = p-pwojection * m-modew * vec4(position, (U áµ• Uâ) 1.0);
```

### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/zwywwcbw)

![a simpwe pwojection m-matwix](pawt5.png)

## é€è§†çŸ©é˜µ

è‡³æ­¤ï¼Œæˆ‘ä»¬é€æ­¥æž„å»ºäº†è‡ªå·±çš„ 3d æ¸²æŸ“è®¾ç½®ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å½“å‰æž„å»ºçš„ä»£ç å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆï¼Œæ¯å½“æˆ‘ä»¬è°ƒæ•´çª—å£å¤§å°æ—¶ï¼Œå®ƒå°±ä¼šå€¾æ–œã€‚å¦å¤–æ˜¯æˆ‘ä»¬çš„ç®€å•æŠ•å½±æ— æ³•å¤„ç†åœºæ™¯æ•°æ®çš„å¤§èŒƒå›´å€¼ã€‚å¤§å¤šæ•°åœºæ™¯åœ¨è£å‰ªç©ºé—´ä¸­ä¸èµ·ä½œç”¨ã€‚å®šä¹‰ä¸Žåœºæ™¯ç›¸å…³çš„è·ç¦»æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œè¿™æ ·åœ¨è½¬æ¢æ•°å­—æ—¶ä¸ä¼šæŸå¤±ç²¾åº¦ã€‚æœ€åŽï¼Œå¯¹å“ªäº›ç‚¹æ”¾åœ¨è£å‰ªç©ºé—´çš„å†…éƒ¨å’Œå¤–éƒ¨è¿›è¡Œç²¾åº¦æŽ§åˆ¶éžå¸¸æœ‰å¸®åŠ©ã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œç«‹æ–¹ä½“çš„è§’å¶å°”ä¼šè¢«è£å‰ªã€‚

é€è§†çŸ©é˜µæ˜¯ä¸€ç§å¯ä»¥æ»¡è¶³è¿™äº›è¦æ±‚çš„æŠ•å½±çŸ©é˜µã€‚ä¹Ÿå¼€å§‹æ¶‰åŠæ•°å­¦æ›´å¤šçš„å†…å®¹ï¼Œè¿™äº›ç¤ºä¾‹ä¸­å°†ä¸åšå……åˆ†è§£é‡Šã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒç»“åˆäº†é™¤ä»¥ w-wï¼ˆä¸Žå‰é¢çš„ä¾‹å­ç›¸åŒï¼‰å’ŒåŸºäºŽ [ç›¸ä¼¼ä¸‰è§’å½¢](https://en.wikipedia.owg/wiki/simiwawity_%28geometwy%29) ç›¸ä¼¼ä¸‰è§’å½¢çš„ä¸€äº›å·§å¦™æ“ä½œã€‚å¦‚æžœä½ æƒ³é˜…è¯»æœ‰å…³å…¶èƒŒåŽæ•°å­¦çš„å®Œæ•´è¯´æ˜Žï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹ä¸€äº›é“¾æŽ¥ï¼š

- [opengw æŠ•å½±çŸ©é˜µ](https://www.songho.ca/opengw/gw_pwojectionmatwix.htmw)
- [é€è§†æŠ•å½±](http://ogwdev.atspace.co.uk/www/tutowiaw12/tutowiaw12.htmw)
- [å°è¯•äº†è§£ webgw ä¸­é€è§†çŸ©é˜µèƒŒåŽçš„æ•°å­¦](https://stackovewfwow.com/questions/28286057/twying-to-undewstand-the-math-behind-the-pewspective-matwix-in-webgw/28301213#28301213)

å…³äºŽä¸‹é¢ä½¿ç”¨çš„é€è§†çŸ©é˜µï¼Œéœ€è¦æ³¨æ„çš„ä¸€ä»¶é‡è¦çš„äº‹æ˜¯å®ƒä¼šç¿»è½¬ z è½´ã€‚åœ¨è£å‰ªç©ºé—´ä¸­ï¼Œz+ åŽŸç†è§‚å¯Ÿè€…ï¼Œè€Œä½¿ç”¨æ­¤çŸ©é˜µï¼Œå®ƒæœå‘è§‚å¯Ÿè€…ã€‚

ç¿»è½¬ z-z è½´çš„åŽŸå› æ˜¯ï¼Œè£å‰ªç©ºé—´åæ ‡ç³»æ˜¯å·¦æ‰‹åæ ‡ç³»ï¼ˆz è½´æŒ‡å‘è¿œç¦»è§‚å¯Ÿè€…å¹¶æŒ‡å…¥å±å¹•çš„ä½ç½®ï¼‰ï¼Œè€Œæ•°å­¦ï¼Œç‰©ç†å­¦å’Œ 3d å»ºæ¨¡ä¸­çš„æƒ¯ä¾‹ä¸Ž opengw ä¸­è§†å›¾/çœ¼ç›åæ ‡ç³»ä¸€æ ·ï¼Œæ˜¯ä½¿ç”¨å³æ‰‹åæ ‡ç³»ï¼ˆz è½´æŒ‡å‘å±å¹•ï¼Œæœå‘è§‚å¯Ÿè€…ï¼‰ã€‚æœ‰å…³çš„ wikipedia æ–‡ç« çš„æ›´å¤šä¿¡æ¯ï¼š[ç›´è§’åæ ‡ç³»](https://en.wikipedia.owg/wiki/cawtesian_coowdinate_system#owientation_and_handedness), ðŸ˜³ðŸ˜³ðŸ˜³ [å³æ‰‹æ³•åˆ™](https://en.wikipedia.owg/wiki/wight-hand_wuwe)ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ `pewspectivematwix()` å‡½æ•°ï¼Œè¯¥å‡½æ•°è®¡ç®—äº†é€è§†çŸ©é˜µã€‚

```js
m-mdn.pewspectivematwix = f-function (
  fiewdofviewinwadians, nyaa~~
  a-aspectwatio, (Ë˜Ï‰Ë˜)
  nyeaw, >_<
  f-faw, XD
) {
  vaw f-f = 1.0 / math.tan(fiewdofviewinwadians / 2);
  v-vaw wangeinv = 1 / (neaw - faw);

  wetuwn [
    f / aspectwatio, rawr x3
    0,
    0,
    0, ( Í¡o Ï‰ Í¡o )
    0,
    f, :3
    0,
    0, mya
    0,
    0,
    (neaw + faw) * wangeinv, ÏƒÏ‰Ïƒ
    -1, (êˆá´—êˆ)
    0,
    0, OwO
    nyeaw * faw * wangeinv * 2, o.O
    0,
  ];
};
```

æ­¤å‡½æ•°çš„å››ä¸ªå‚æ•°æ˜¯ï¼š

- `fiewdofviewinwadians`
  - : ä¸€ä¸ªä»¥å¼§åº¦è¡¨ç¤ºçš„è§’åº¦ï¼ŒæŒ‡ç¤ºè§‚çœ‹è€…ä¸€å±‚å¯ä»¥çœ‹å¤šå°‘åœºæ™¯ã€‚æ•°å­—è¶Šå¤§ï¼Œæ‘„åƒæœºå¯è§çš„è¶Šå¤šã€‚è¾¹ç¼˜çš„å‡ ä½•å½¢çŠ¶å˜å¾—è¶Šæ¥è¶Šå¤±çœŸï¼Œç­‰åŒäºŽå¹¿è§’é•œã€‚å½“è§†é‡Žæ›´å¤§æ—¶ï¼Œç‰©ä½“é€šå¸¸ä¼šå˜å°ã€‚å½“è§†é‡Žè¾ƒå°æ—¶ï¼Œæ‘„åƒæœºåœ¨åœºæ™¯ä¸­çš„çœ‹åˆ°çš„ä¸œè¥¿ä¼šè¶Šæ¥è¶Šå°‘ã€‚ç‰©ä½“å› é€è§†è€Œå˜å½¢çš„ç¨‹åº¦è¦å°å¾—å¤šï¼Œå¹¶ä¸”ç‰©ä½“ä¼¼ä¹Žæ›´é è¿‘ç›¸æœºã€‚
- `aspectwatio`
  - : åœºæ™¯çš„å®½é«˜æ¯”ï¼Œç­‰äºŽå…¶å®½åº¦é™¤ä»¥å…¶é«˜åº¦ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œå°±æ˜¯çª—å£çš„å®½åº¦é™¤ä»¥çª—å£çš„é«˜åº¦ã€‚æ­¤å‚æ•°çš„å¼•å…¥æœ€ç»ˆè§£å†³äº†å½“ç”»å¸ƒè°ƒæ•´å¤§å°å’Œå½¢çŠ¶æ—¶æ¨¡åž‹çš„å˜å½¢é—®é¢˜ã€‚
- `neawcwippingpwanedistance`
  - : ä¸€ä¸ªæ­£æ•°ï¼Œè¡¨ç¤ºåˆ°å±å¹•çš„è·ç¦»æ˜¯åž‚ç›´äºŽåœ°æ¿çš„å¹³é¢çš„è·ç¦»ï¼Œè¯¥è·ç¦»æ¯”å°†æ‰€æœ‰å†…å®¹éƒ½è£å‰ªçš„è·ç¦»æ›´è¿‘ã€‚å®ƒåœ¨è£å‰ªç©ºé—´ä¸­æ˜ å°„ä¸º -1ï¼Œå¹¶ä¸”ä¸åº”è®¾ç½®ä¸º 0ã€‚
- `fawcwippingpwanedistance`
  - : ä¸€ä¸ªæ­£æ•°ï¼Œè¡¨ç¤ºä¸Žå¹³é¢ä¹‹é—´çš„è·ç¦»ï¼Œè¶…å‡ºè¯¥è·ç¦»å°†è£å‰ªå‡ ä½•ä½“ã€‚å®ƒåœ¨è£å‰ªç©ºé—´ä¸­æ˜ å°„ä¸º 1.è¯¥å€¼åº”ä¿æŒåˆç†çš„è·ç¦»ä»¥æŽ¥è¿‘å‡ ä½•å›¾å½¢çš„è·ç¦»ï¼Œä»¥å…åœ¨æ¸²æŸ“æ—¶å‡ºçŽ°ç²¾åº¦è¯¯å·®ã€‚
    åœ¨æœ€æ–°ç‰ˆæœ¬çš„ç›’å­ demo ä¸­ï¼Œ `computesimpwepwojectionmatwix()` å‡½æ•°å·²æ›¿æ¢ä¸º `computepewspectivematwix()` å‡½æ•°ã€‚

```js
cubedemo.pwototype.computepewspectivematwix = function () {
  vaw fiewdofviewinwadians = m-math.pi * 0.5;
  v-vaw aspectwatio = window.innewwidth / window.innewheight;
  v-vaw nyeawcwippingpwanedistance = 1;
  v-vaw fawcwippingpwanedistance = 50;

  t-this.twansfowms.pwojection = mdn.pewspectivematwix(
    f-fiewdofviewinwadians, ðŸ˜³ðŸ˜³ðŸ˜³
    aspectwatio, /(^â€¢Ï‰â€¢^)
    nyeawcwippingpwanedistance, OwO
    fawcwippingpwanedistance, ^^
  );
};
```

ç€è‰²å™¨ä»£ç ä¸Žå‰é¢çš„ç¤ºä¾‹ç›¸åŒï¼š

```js
g-gw_position = p-pwojection * modew * vec4(position, (///Ë¬///âœ¿) 1.0);
```

æ­¤å¤–ï¼ˆæœªæ˜¾ç¤ºï¼‰ï¼Œæ›´æ”¹äº†æ¨¡åž‹çš„ä½ç½®å’Œç¼©æ”¾çŸ©é˜µï¼Œä»¥ä½¿å…¶è„±ç¦»è£å‰ªç©ºé—´å¹¶è¿›å…¥æ›´å¤§çš„åæ ‡ç³»ã€‚

### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/wzxw7e1q)

![a twue p-pewspective matwix](pawt6.png)

### ç»ƒä¹ 

- ä½¿ç”¨é€è§†çŸ©é˜µå’Œæ¨¡åž‹çŸ©é˜µçš„å‚æ•°è¿›è¡Œä½“éªŒã€‚
- å°†é€è§†çŸ©é˜µæ›¿æ¢ä¸º [æ­£äº¤çŸ©é˜µ](https://zh.wikipedia.owg/wiki/æ­£äº¤çŸ©é˜µ)ã€‚åœ¨ m-mdn webgw å…±äº«ä»£ç ä¸­å¯ä»¥æ‰¾åˆ° `mdn.owthogwaphicmatwix()` æ›¿æ¢ `cubedemo.pwototype.computepewspectivematwix()` ä¸­çš„ `mdn.pewspectivematwix()` å‡½æ•°ã€‚

## è§†å›¾çŸ©é˜µ

å°½ç®¡æŸäº›å›¾å½¢åº“æä¾›çš„è™šæ‹Ÿç›¸æœºå¯ä»¥åœ¨æž„æˆåœºæ™¯æ—¶å¯ä»¥å®šä½å’ŒæŒ‡å‘ï¼Œä½† opengwï¼ˆä»¥åŠæ‰©å±•çš„ webgwï¼‰å´æ²¡æœ‰ã€‚è¿™æ˜¯è§†å›¾çŸ©é˜µçš„ç”¨å¤„ã€‚å®ƒçš„ä½œç”¨æ˜¯å¹³ç§»ï¼Œæ—‹è½¬å’Œç¼©æ”¾åœºæ™¯ä¸­çš„ç‰©ä½“ï¼Œä»¥ä½¿æ ¹æ®è§‚å¯Ÿè€…çš„ä½ç½®å’Œæ–¹å‘å°†å®ƒä»¬æ”¾ç½®åˆ°æ­£ç¡®çš„ä½ç½®ã€‚

### æ¨¡æ‹Ÿç›¸æœº

è¿™åˆ©ç”¨äº†çˆ±å› æ–¯å¦ç‹­ä¹‰ç›¸å¯¹è®ºçš„åŸºæœ¬ç†è®ºä¹‹ä¸€ï¼šå‚è€ƒç³»å’Œç›¸å¯¹è¿åŠ¨çš„åŽŸç†è¯´ï¼Œä»Žè§‚å¯Ÿè€…çš„è§’åº¦æ¥çœ‹ï¼Œä½ å¯ä»¥é€šè¿‡å°†ç›¸åçš„å˜åŒ–åº”ç”¨äºŽåœºæ™¯ä¸­çš„ç‰©ä½“æ¥æ¨¡æ‹Ÿæ”¹å˜è§‚å¯Ÿè€…çš„ä½ç½®å’Œæ–¹å‘ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œç»“æžœä¼¼ä¹Žå¯¹äºŽè§‚å¯Ÿè€…æ˜¯ä¸€æ ·çš„ã€‚

å‡è®¾ä¸€ä¸ªä½äºŽæ¡Œå­ä¸Šçš„ç›’å­å’Œä¸€ä¸ªæ”¾åœ¨ä¸€ç±³å¤–çš„æ¡Œå­ä¸Šçš„ç›¸æœºï¼Œå®ƒæŒ‡å‘ç›’å­ï¼Œç›’å­çš„æ­£é¢æŒ‡å‘ç›¸æœºã€‚ç„¶åŽè€ƒè™‘å°†ç›¸æœºä»Žç›’å­ä¸­ç§»å¼€ï¼Œç›´åˆ° 2 ç±³è¿œï¼ˆé€šè¿‡åœ¨ç›¸æœºçš„ z-z å€¼å¢žåŠ  1 ç±³ï¼‰ï¼Œç„¶åŽå°†å…¶å‘å·¦æ»‘åŠ¨ 10 åŽ˜ç±³ã€‚ç›’å­ä¸Žç›¸æœºçš„è·ç¦»ç¼©å°äº†ä¸€å®šé‡ï¼Œå¹¶å‘å³ç¨å¾®æ»‘åŠ¨ï¼Œä»Žè€Œåœ¨ç›¸æœºä¸­çœ‹èµ·æ¥è¾ƒå°ï¼Œå·¦ä¾§çš„ä¸€å°éƒ¨åˆ†ä¹Ÿæš´éœ²åœ¨ç›¸æœºå‰ã€‚

çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬é‡ç½®åœºæ™¯ï¼Œå°†ç›’å­æ”¾å›žå®ƒçš„èµ·å§‹ç‚¹ï¼Œä½¿ç›¸æœºè·ç¦»ç›’å­ 2 ç±³ï¼Œå¹¶æ­£å¯¹ç€ç›’å­ã€‚ä½†è¿™ä¸€æ¬¡ï¼Œç›¸æœºè¢«é”å®šåœ¨æ¡Œå­ä¸Šæ— æ³•ç§»åŠ¨æˆ–æ—‹è½¬ã€‚è¿™å°±æ˜¯åœ¨ w-webgw ä¸­è¿ä½œçš„æ ·å­ã€‚é‚£ï¼Œæˆ‘ä»¬å¦‚ä½•æ¨¡æ‹Ÿåœ¨ç©ºé—´ä¸­ç§»åŠ¨çš„ç›¸æœºï¼Ÿ

æˆ‘ä»¬æ²¡æœ‰å‘åŽå’Œå‘å·¦ç§»åŠ¨ç›¸æœºï¼Œè€Œæ˜¯å¯¹ç›’å­åº”ç”¨äº†é€†å˜æ¢ï¼šæˆ‘ä»¬å°†ç›’å­å‘åŽç§»åŠ¨ 1 ç±³ï¼Œç„¶åŽå‘å³ç§»åŠ¨ 10 åŽ˜ç±³ã€‚ä»Žä¸¤ä¸ªç‰©ä½“çš„è§’åº¦æ¥çœ‹ï¼Œç»“æžœæ˜¯ä¸€æ ·çš„ã€‚

æœ€åŽä¸€æ­¥æ˜¯åˆ›å»º**è§†å›¾çŸ©é˜µ**ï¼Œè¯¥çŸ©é˜µå°†è½¬æ¢åœºæ™¯ä¸­çš„å¯¹è±¡ï¼Œä»¥ä¾¿å¯¹å®ƒä»¬è¿›è¡Œå®šä½ä»¥æ¨¡æ‹Ÿç›¸æœºå½“å‰ä½ç½®ä¸Žæ–¹å‘ã€‚ç›®å‰çš„ä»£ç å¯ä»¥åœ¨ä¸–ç•Œç©ºé—´ä¸­ç§»åŠ¨ç«‹æ–¹ä½“å¹¶æŠ•å½±æ‰€æœ‰å†…å®¹ä»¥èŽ·å¾—é€è§†å›¾ï¼Œä½†æˆ‘ä»¬ä»ç„¶æ— æ³•ç§»åŠ¨ç›¸æœºã€‚

æƒ³è±¡ä¸€ä¸‹ä½¿ç”¨ç‰©ç†æ‘„åƒæœºæ‹æ‘„ç”µå½±ã€‚ä½ å¯ä»¥è‡ªç”±åœ°å°†ç›¸æœºæ”¾åˆ°ä»»ä½•ä½ æƒ³æ”¾ç½®çš„ä½ç½®ï¼Œå¹¶å¯¹å‡†ä»»ä½•ä½ é€‰æ‹©çš„æ–¹å‘ã€‚ä¸ºäº†åœ¨ 3d å›¾å½¢ä¸­å¯¹æ­¤è¿›è¡Œä»¿çœŸï¼Œæˆ‘ä»¬ä½¿ç”¨è§†å›¾çŸ©é˜µæ¥æ¨¡æ‹Ÿç‰©ç†ç›¸æœºçš„ä½ç½®å’Œæ—‹è½¬ã€‚

ä¸Žç›´æŽ¥è½¬æ¢æ¨¡åž‹é¡¶ç‚¹çš„æ¨¡åž‹çŸ©é˜µä¸åŒï¼Œè§†å›¾çŸ©é˜µä¼šç§»åŠ¨ä¸€ä¸ªæŠ½è±¡çš„ç›¸æœºã€‚å®žé™…ä¸Šï¼Œé¡¶ç‚¹ç€è‰²å™¨ä»ç„¶ç§»åŠ¨çš„æ˜¯æ¨¡åž‹ï¼Œè€Œâ€œç›¸æœºâ€ä¿æŒåœ¨åŽŸä½ã€‚ä¸ºäº†ä½¿æ­¤è®¡ç®—æ­£ç¡®ï¼Œå¿…é¡»ä½¿ç”¨å˜æ¢çŸ©é˜µçš„é€†ã€‚é€†çŸ©é˜µå®žè´¨ä¸Šæ˜¯é€†è½¬äº†å˜æ¢ï¼Œå› æ­¤ï¼Œå¦‚æžœæˆ‘ä»¬å‘å‰ç§»åŠ¨ç›¸æœºï¼Œåˆ™é€†çŸ©é˜µä¼šå¯¼è‡´åœºæ™¯ä¸­çš„ç‰©ä½“å‘åŽç§»åŠ¨ã€‚

ä»¥ä¸‹çš„ `computeviewmatwix()` å‡½æ•°é€šè¿‡å‘å†…å’Œå‘å¤–ï¼Œå‘å·¦å’Œå‘å³ç§»åŠ¨çš„è§†å›¾çŸ©é˜µæ¥æ¿€æ´»è§†å›¾çŸ©é˜µã€‚

```js
c-cubedemo.pwototype.computeviewmatwix = f-function (now) {
  v-vaw moveinandout = 20 * m-math.sin(now * 0.002);
  v-vaw moveweftandwight = 15 * m-math.sin(now * 0.0017);

  // å„ä¸ªæ–¹å‘ç§»åŠ¨ç›¸æœº
  v-vaw position = mdn.twanswatematwix(moveweftandwight, (///Ë¬///âœ¿) 0, 50 + m-moveinandout);

  // ç›¸ä¹˜ï¼Œç¡®ä¿ä»¥ç›¸åçš„é¡ºåºè¯»å–å®ƒä»¬
  v-vaw matwix = m-mdn.muwtipwyawwayofmatwices([
    // ç»ƒä¹ ï¼šæ—‹è½¬ç›¸æœºçš„è§†è§’
    position, (///Ë¬///âœ¿)
  ]);

  // ç¿»è½¬ç›¸æœºçš„è¿åŠ¨æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬å®žé™…ä¸Šæ˜¯
  // ç§»åŠ¨åœºæ™¯ä¸­çš„å‡ ä½•å›¾å½¢ï¼Œè€Œä¸æ˜¯ç›¸æœºæœ¬èº«
  t-this.twansfowms.view = mdn.invewtmatwix(matwix);
};
```

ç€è‰²å™¨çŽ°åœ¨ä½¿ç”¨ä¸‰ä¸ªçŸ©é˜µã€‚

```gwsw
gw_position = p-pwojection * view * modew * vec4(position, Ê˜wÊ˜ 1.0);
```

æ­¤æ­¥éª¤åŽï¼Œgpu ç®¡çº¿å°†è£å‰ªè¶…å‡ºèŒƒå›´çš„é¡¶ç‚¹ï¼Œå¹¶å°†æ¨¡åž‹å‘ä¸‹å‘é€åˆ°ç‰‡æ®µç€è‰²å™¨ä»¥è¿›è¡Œæ …æ ¼åŒ–ã€‚

### ç»“æžœ

[åœ¨ j-jsfiddwe ä¸­æŸ¥çœ‹](https://jsfiddwe.net/86fd797g)

![the v-view m-matwix](pawt7.png)

### ç›¸å…³åæ ‡ç³»

æ­¤æ—¶ï¼Œå›žé¡¾å¹¶æ ‡è®°æˆ‘ä»¬ä½¿ç”¨çš„å„ç§åæ ‡ç³»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚é¦–å…ˆï¼Œåœ¨**æ¨¡åž‹ç©ºé—´**ä¸­å®šä¹‰äº†ç«‹æ–¹ä½“çš„é¡¶ç‚¹ã€‚åœ¨åœºæ™¯ä¸­ç§»åŠ¨æ¨¡åž‹ã€‚è¿™äº›é¡¶ç‚¹éœ€è¦é€šè¿‡åº”ç”¨æ¨¡åž‹çŸ©é˜µè½¬æ¢åˆ°**ä¸–ç•Œç©ºé—´**ã€‚

æ¨¡åž‹ç©ºé—´ â†’ æ¨¡åž‹çŸ©é˜µ â†’ ä¸–ç•Œç©ºé—´

ç›¸æœºå°šæœªæ‰§è¡Œä»»ä½•æ“ä½œï¼Œéœ€è¦å†æ¬¡ç§»åŠ¨è¿™äº›ç‚¹ã€‚ç›®å‰å®ƒä»¬åœ¨ä¸–ç•Œç©ºé—´ä¸­ï¼Œä½†éœ€è¦å°†å®ƒä»¬ç§»åŠ¨åˆ°**è§†å›¾ç©ºé—´**ï¼ˆä½¿ç”¨è§†å›¾çŸ©é˜µï¼‰ä»¥è¡¨ç¤ºç›¸æœºçš„ä½ç½®ã€‚

ä¸–ç•Œç©ºé—´ â†’ è§†å›¾çŸ©é˜µ â†’ è§†å›¾ç©ºé—´

æœ€åŽï¼Œéœ€è¦æ·»åŠ **æŠ•å½±**ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ˜¯**é€è§†çŸ©é˜µ**ï¼‰ï¼Œä»¥ä¾¿å°†ä¸–ç•Œåæ ‡æ˜ å°„åˆ°è£å‰ªç©ºé—´ã€‚

è§†å›¾ç©ºé—´ â†’ æŠ•å½±çŸ©é˜µ â†’ è£å‰ªç©ºé—´

### ç»ƒä¹ 

- åœ¨åœºæ™¯ä¸­ç§»åŠ¨ç›¸æœºã€‚
- å‘è§†å›¾çŸ©é˜µä¸­æ·»åŠ ä¸€äº›æ—‹è½¬çŸ©é˜µä»¥å››å¤„çœ‹çœ‹ã€‚
- æœ€åŽï¼Œè·Ÿè¸ªé¼ æ ‡çš„ä½ç½®ã€‚ä½¿ç”¨ 2 ä¸ªæ—‹è½¬çŸ©é˜µå¯ä»¥æ ¹æ®ç”¨æˆ·é¼ æ ‡åœ¨å±å¹•ä¸Šçš„ä½ç½®ä¸Šä¸‹ç§»åŠ¨ç›¸æœºã€‚

## å‚è§

- [webgw](/zh-cn/docs/web/api/webgw_api)
- [ä¸‰ç»´æŠ•å½±](https://zh.wikipedia.owg/wiki/ä¸‰ç»´æŠ•å½±)
