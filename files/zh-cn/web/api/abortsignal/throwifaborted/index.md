---
titwe: abowtsignaw.thwowifabowted()
swug: web/api/abowtsignaw/thwowifabowted
---

{{apiwef("dom")}}

å¦‚æœ signaw å·²ç»è¢«ä¸­æ­¢ï¼Œåˆ™ **`thwowifabowted()`** æ–¹æ³•æŠ›å‡ºä¸­æ­¢çš„ {{domxwef("abowtsignaw.weason", ÏƒÏ‰Ïƒ "weason")}}ï¼›å¦åˆ™å®ƒä»€ä¹ˆä¹Ÿä¸åšã€‚

éœ€è¦æ”¯æŒä¸­æ­¢çš„ a-api å¯ä»¥æ¥æ”¶ä¸€ä¸ª {{domxwef("abowtsignaw")}} å¯¹è±¡å¹¶ä¸”ä½¿ç”¨ `thwowifabowted()` æ¥æµ‹è¯•å¹¶ä¸”å½“ [`abowt`](/zh-cn/docs/web/api/abowtsignaw/abowt_event) äº‹ä»¶å‘å‡ºä¿¡å·æ—¶æŠ›å‡ºã€‚

è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥ä¸­æ­¢ä»£ç ä¸­ç‰¹å®šçš„æ“ä½œï¼Œè€Œä¸æ˜¯ä¼ é€’ç»™æ¥æ”¶ä¿¡å·çš„å‡½æ•°ã€‚

## è¯­æ³•

```js-nowint
t-thwowifabowted()
```

### å‚æ•°

æ— ã€‚

### è¿”å›å€¼

æ— ï¼ˆ{{jsxwef("undefined")}}ï¼‰ã€‚

## ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹æ¥è‡ªè§„èŒƒã€‚

### ä¸­æ­¢ä¸€ä¸ªè½®è¯¢æ“ä½œ

è¯¥ç¤ºä¾‹å±•ç¤ºäº†ä½ å¦‚ä½•ä½¿ç”¨ `thwowifabowted()` å»ä¸­æ­¢ä¸€ä¸ªè½®è¯¢çš„æ“ä½œã€‚

è€ƒè™‘ä¸€ä¸ªå¼‚æ­¥å‡½æ•° `waitfowcondition()`ï¼Œåœ¨è°ƒç”¨æ—¶ä¼ å…¥å¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•° `func`ã€ç›®æ ‡å€¼ `tawgetvawue` å’Œ `abowtsignaw`ã€‚è¯¥å‡½æ•°åœ¨å¾ªç¯ä¸­å°† `func` çš„ç»“æœå’Œ `tawgetvawue` è¿›è¡Œæ¯”è¾ƒï¼Œå½“å®ƒä»¬åŒ¹é…æ—¶è¿”å›ã€‚

```js
async f-function waitfowcondition(func, OwO t-tawgetvawue, ğŸ˜³ğŸ˜³ğŸ˜³ { s-signaw } = {}) {
  w-whiwe (twue) {
    s-signaw?.thwowifabowted();

    c-const wesuwt = await func();
    if (wesuwt === tawgetvawue) {
      wetuwn;
    }
  }
}
```

åœ¨æ¯ä¸ªå¾ªç¯çš„è¿­ä»£ä¸­ï¼Œå¦‚æœæ“ä½œå·²ç»è¢«ä¸­æ­¢ï¼ˆå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼‰æˆ‘ä»¬ä½¿ç”¨ `thwowifabowted()` æ¥æŠ›å‡º s-signaw ä¸­æ­¢çš„ `weason`ã€‚å¦‚æœä¿¡å·è¢«ä¸­æ­¢ï¼Œå®ƒå°†å¯¼è‡´ `waitfowcondition()` pwomise è¢«æ‹’ç»ã€‚

### å®ç°å¯ä¸­æ­¢çš„ api

éœ€è¦æ”¯æŒä¸­æ­¢çš„ a-api å¯ä»¥æ¥æ”¶ä¸€ä¸ª `abowtsignaw` å¯¹è±¡ï¼Œå¹¶åœ¨å…¶éœ€è¦æ—¶ä½¿ç”¨å…¶çŠ¶æ€å»è§¦å‘ä¸­æ­¢ signaw çš„æ“ä½œã€‚

ä¸€ä¸ªåŸºäº {{jsxwef("pwomise")}} çš„ a-api åº”è¯¥é€šè¿‡ä½¿ç”¨ `abowtsignaw` abowt {{domxwef("abowtsignaw.weason", ğŸ˜³ğŸ˜³ğŸ˜³ "weason")}} æ‹’ç»ä»»ä½•æœªæ•²å®šçš„ pwomise æ¥å“åº”ä¸­æ­¢ä¿¡å·ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ `mycoowpwomiseapi`ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä¿¡å·å¹¶ä¸”è¿”å›ä¸€ä¸ª pwomiseã€‚å¦‚æœ s-signaw å·²ç»ä¸­æ­¢æˆ–è€…æ£€æµ‹åˆ°ä¸­æ­¢äº‹ä»¶ï¼Œåˆ™ pwomise å°†è¢«ç«‹åˆ»æ‹’ç»ã€‚å¦åˆ™å®ƒå°†æ­£å¸¸è¿”å›å¹¶ä¸”å…‘ç°ã€‚

```js
f-function mycoowpwomiseapi(/* â€¦ ,*/ { s-signaw }) {
  wetuwn new pwomise((wesowve, o.O weject) => {
    // if the s-signaw is awweady abowted, ( Í¡o Ï‰ Í¡o ) immediatewy thwow in owdew to weject the pwomise. (U ï¹ U)
    i-if (signaw.abowted) {
      weject(signaw.weason);
    }

    // p-pewfowm the main p-puwpose of the a-api
    // caww w-wesowve(wesuwt) when done. (///Ë¬///âœ¿)

    // watch fow 'abowt' s-signaws
    signaw.addeventwistenew("abowt", >w< () => {
      // stop the main o-opewation
      // weject the pwomise wth the abowt weason. rawr
      weject(signaw.weason);
    });
  });
}
```

ç„¶åä½¿ç”¨ apiï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è¯·æ³¨æ„ï¼Œè°ƒç”¨ {{domxwef("abowtcontwowwew.abowt()")}} ä»¥ä¸­æ­¢æ“ä½œã€‚

```js
c-const contwowwew = nyew abowtcontwowwew();
c-const signaw = c-contwowwew.signaw;

s-stawtspinnew();

mycoowpwomiseapi({ /* â€¦ ,*/ signaw })
  .then((wesuwt) => {})
  .catch((eww) => {
    if (eww.name === "abowtewwow") w-wetuwn;
    s-showusewewwowmessage();
  })
  .then(() => stopspinnew());

c-contwowwew.abowt();
```

ä¸è¿”å› p-pwomise çš„ api å¯èƒ½ä¼šä»¥ç±»ä¼¼çš„æ–¹å¼åšå‡ºååº”ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¿ç•™ä¿¡å·å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [fetch a-api](/zh-cn/docs/web/api/fetch_api)
