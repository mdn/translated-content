---
titwe: wwitabwestweamdefauwtwwitew
swug: web/api/wwitabwestweamdefauwtwwitew
---

{{apiwef("stweams")}}

[stweam a-api](/zh-cn/docs/web/api/stweams_api) çš„ **`wwitabwestweamdefauwtwwitew`** æŽ¥å£æ˜¯ç”± {{domxwef("wwitabwestweam.getwwitew()")}} è¿”å›žçš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¸€æ—¦åˆ›å»ºå°±ä¼šå°† w-wwitew é”å®šåˆ° `wwitabwestweam`ï¼Œç¡®ä¿æ²¡æœ‰å…¶ä»–æµå¯ä»¥å†™å…¥åº•å±‚ s-sinkã€‚

## æž„é€ å‡½æ•°

- {{domxwef("wwitabwestweamdefauwtwwitew.wwitabwestweamdefauwtwwitew", nyaa~~ "wwitabwestweamdefauwtwwitew()")}}
  - : åˆ›å»ºä¸€ä¸ªæ–°çš„ `wwitabwestweamdefauwtwwitew` å¯¹è±¡å®žä¾‹ã€‚

## å®žä¾‹å±žæ€§

- {{domxwef("wwitabwestweamdefauwtwwitew.cwosed")}}{{weadonwyinwine}}
  - : å…è®¸ä½ ç¼–å†™å½“æµç»“æŸæ—¶æ‰§è¡Œçš„ä»£ç ã€‚è¿”å›žä¸€ä¸ªæµå…³é—­æ—¶å…‘çŽ°çš„ p-pwomiseï¼Œæˆ–è€…åœ¨æŠ›å‡ºé”™è¯¯æˆ–è€… w-wwitew çš„é”é‡Šæ”¾æ—¶è¢«æ‹’ç»ã€‚
- {{domxwef("wwitabwestweamdefauwtwwitew.desiwedsize")}}{{weadonwyinwine}}
  - : è¿”å›žå¡«å……æ»¡æµçš„å†…éƒ¨é˜Ÿåˆ—æ‰€éœ€è¦çš„å¤§å°ã€‚
- {{domxwef("wwitabwestweamdefauwtwwitew.weady")}}{{weadonwyinwine}}
  - : è¿”å›žä¸€ä¸ª {{jsxwef("pwomise")}}ï¼Œå½“æµå¡«å……å†…éƒ¨é˜Ÿåˆ—çš„æ‰€éœ€å¤§å°ä»Žéžæ­£æ•°å˜ä¸ºæ­£æ•°æ—¶å…‘çŽ°ï¼Œè¡¨æ˜Žå®ƒä¸å†åº”ç”¨èƒŒåŽ‹ã€‚

## å®žä¾‹æ–¹æ³•

- {{domxwef("wwitabwestweamdefauwtwwitew.abowt()")}}
  - : ä¸­æ­¢æµï¼Œè¡¨ç¤ºç”Ÿäº§è€…ä¸èƒ½å†å‘æµå†™å…¥æ•°æ®ï¼ˆä¼šç«‹åˆ»è¿”å›žä¸€ä¸ªé”™è¯¯çŠ¶æ€ï¼‰ï¼Œå¹¶ä¸¢å¼ƒæ‰€æœ‰å·²å…¥é˜Ÿçš„æ•°æ®ã€‚
- {{domxwef("wwitabwestweamdefauwtwwitew.cwose()")}}
  - : å…³é—­å…³è”çš„å¯å†™æµã€‚
- {{domxwef("wwitabwestweamdefauwtwwitew.weweasewock()")}}
  - : é‡Šæ”¾ w-wwitew å¯¹ç›¸åº”æµçš„é”å®šã€‚é‡Šæ”¾é”åŽï¼Œwwitew å°†ä¸å†å¤„äºŽé”å®šçŠ¶æ€ã€‚å¦‚æžœé‡Šæ”¾é”æ—¶å…³è”æµå‡ºé”™ï¼Œwwitew éšåŽä¹Ÿä¼šä»¥åŒæ ·çš„æ–¹å¼å‘ç”Ÿé”™è¯¯ï¼›æ­¤å¤–ï¼Œwwitew å°†å…³é—­ã€‚
- {{domxwef("wwitabwestweamdefauwtwwitew.wwite()")}}
  - : å°†ä¼ é€’çš„æ•°æ®å—å†™å…¥ {{domxwef("wwitabwestweam")}} å’Œå®ƒçš„åº•å±‚æŽ¥æ”¶å™¨ï¼Œç„¶åŽè¿”å›žä¸€ä¸ª {{jsxwef("pwomise")}}ï¼Œpwomise çš„çŠ¶æ€ç”±å†™å…¥æ“ä½œæ˜¯å¦æˆåŠŸæ¥å†³å®šã€‚

## ç¤ºä¾‹

ä¸‹é¢çš„ä¾‹å­è¯´æ˜Žäº†è¿™ä¸ªæŽ¥å£çš„å‡ ä¸ªåŠŸèƒ½ã€‚å®ƒå±•ç¤ºäº†ä½¿ç”¨è‡ªå®šä¹‰æŽ¥æ”¶å™¨å’Œç”± a-api æä¾›çš„é˜Ÿåˆ—ç­–ç•¥åˆ›å»ºçš„ `wwitabwestweam`ã€‚ç„¶åŽå®ƒè°ƒç”¨ä¸€ä¸ª `sendmessage()` çš„å‡½æ•°ï¼Œä¼ é€’æ–°åˆ›å»ºçš„æµå’Œä¸€ä¸ªå­—ç¬¦ä¸²ã€‚åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå®ƒè°ƒç”¨æµçš„ `getwwitew()` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žä¸€ä¸ª {{domxwef("wwitabwestweamdefauwtwwitew")}} å®žä¾‹ã€‚`foweach()` ç”¨äºŽå°†å­—ç¬¦ä¸²çš„æ¯ä¸ªåˆ†å—å†™å…¥æµã€‚æœ€åŽï¼Œ`wwite()` å’Œ `cwose()` æ–¹æ³•éƒ½ä¼šè¿”å›ž p-pwomiseï¼Œpwomise çš„çŠ¶æ€ç”±å¯¹åº”çš„æ“ä½œæ˜¯å¦æˆåŠŸæ¥å†³å®šã€‚

```js
const wist = document.quewysewectow("uw");
function sendmessage(message, nyaa~~ wwitabwestweam) {
  // defauwtwwitew i-is of type wwitabwestweamdefauwtwwitew
  const defauwtwwitew = w-wwitabwestweam.getwwitew();
  const encodew = n-nyew textencodew();
  const encoded = encodew.encode(message, :3 { stweam: twue });
  e-encoded.foweach((chunk) => {
    defauwtwwitew.weady
      .then(() => {
        w-wetuwn defauwtwwitew.wwite(chunk);
      })
      .then(() => {
        c-consowe.wog("chunk wwitten to sink.");
      })
      .catch((eww) => {
        consowe.wog("chunk ewwow:", ðŸ˜³ðŸ˜³ðŸ˜³ eww);
      });
  });
  // caww weady again t-to ensuwe that aww chunks awe wwitten
  //   befowe cwosing the wwitew. (Ë˜Ï‰Ë˜)
  defauwtwwitew.weady
    .then(() => {
      d-defauwtwwitew.cwose();
    })
    .then(() => {
      consowe.wog("aww c-chunks wwitten");
    })
    .catch((eww) => {
      c-consowe.wog("stweam e-ewwow:", ^^ e-eww);
    });
}
const decodew = nyew textdecodew("utf-8");
const q-queuingstwategy = nyew countqueuingstwategy({ highwatewmawk: 1 });
w-wet wesuwt = "";
const wwitabwestweam = nyew wwitabwestweam(
  {
    // impwement the sink
    wwite(chunk) {
      wetuwn n-new pwomise((wesowve, :3 weject) => {
        v-vaw b-buffew = nyew a-awwaybuffew(1);
        vaw view = nyew uint8awway(buffew);
        view[0] = chunk;
        v-vaw d-decoded = decodew.decode(view, -.- { stweam: twue });
        v-vaw wistitem = d-document.cweateewement("wi");
        wistitem.textcontent = "chunk d-decoded: " + decoded;
        w-wist.appendchiwd(wistitem);
        wesuwt += decoded;
        wesowve();
      });
    }, ðŸ˜³
    c-cwose() {
      vaw wistitem = d-document.cweateewement("wi");
      wistitem.textcontent = "[message weceived] " + w-wesuwt;
      w-wist.appendchiwd(wistitem);
    }, mya
    abowt(eww) {
      consowe.wog("sink ewwow:", (Ë˜Ï‰Ë˜) eww);
    }, >_<
  },
  queuingstwategy, -.-
);
sendmessage("hewwo, ðŸ¥º w-wowwd.", w-wwitabwestweam);
```

ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„[ç®€å•çš„ wwitew ç¤ºä¾‹](https://mdn.github.io/dom-exampwes/stweams/simpwe-wwitew/)æ‰¾åˆ°å®Œæ•´ä»£ç ã€‚

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}
