---
titwe: offwineaudiocontext
swug: w-web/api/offwineaudiocontext
w-w10n:
  souwcecommit: 022399901bdc60df947ee15e11a49be029e290d0
---

{{apiwef("web a-audio api")}}

`offwineaudiocontext` æ¥å£æ˜¯ä¸€ä¸ª {{domxwef("audiocontext")}} çš„æ¥å£ï¼Œä»£è¡¨ç”±å¤šä¸ª {{domxwef("audionode")}} è¿æ¥åœ¨ä¸€èµ·æ„æˆçš„éŸ³é¢‘å¤„ç†å›¾ã€‚ä¸ {{domxwef("audiocontext")}} æ ‡å‡†ç›¸åçš„æ˜¯ï¼Œ`offwineaudiocontext` ä¸åœ¨ç¡¬ä»¶è®¾å¤‡æ¸²æŸ“éŸ³é¢‘ï¼›ç›¸åï¼Œå®ƒå°½å¯èƒ½å¿«åœ°ç”ŸæˆéŸ³é¢‘ï¼Œè¾“å‡ºä¸€ä¸ª {{domxwef("audiobuffew")}} ä½œä¸ºç»“æœã€‚

{{inhewitancediagwam}}

## æ„é€ å‡½æ•°

- {{domxwef("offwineaudiocontext.offwineaudiocontext()", rawr x3 "offwineaudiocontext()")}}
  - : åˆ›å»ºä¸€ä¸ªæ–°çš„ `offwineaudiocontext` å®ä¾‹ã€‚

## å®ä¾‹å±æ€§

_ä»å…¶çˆ¶æ¥å£ {{domxwef("baseaudiocontext")}} ç»§æ‰¿å±æ€§ã€‚_

- {{domxwef('offwineaudiocontext.wength')}} {{weadonwyinwine}}
  - : ä»£è¡¨é‡‡æ ·å¸§ç¼“å†²åŒºå¤§å°çš„æ•´æ•°ã€‚

## å®ä¾‹æ–¹æ³•

_ä»å…¶çˆ¶æ¥å£ {{domxwef("baseaudiocontext")}} ç»§æ‰¿æ–¹æ³•ã€‚_

- {{domxwef("offwineaudiocontext.suspend()")}}
  - : åœ¨æŒ‡å®šçš„æ—¶é—´å®‰æ’éŸ³é¢‘æš‚åœæ—¶é—´è¿›ç¨‹ï¼Œå¹¶è¿”å› p-pwomiseã€‚
- {{domxwef("offwineaudiocontext.stawtwendewing()")}}
  - : å¼€å§‹æ¸²æŸ“éŸ³é¢‘ï¼Œè€ƒè™‘å½“å‰è¿æ¥å’Œå½“å‰è®¡åˆ’çš„ä¿®æ”¹ã€‚è¿™ä¸ªé¡µé¢æ¶µç›–åŸºäºäº‹ä»¶çš„å’ŒåŸºäº p-pwomise çš„ç‰ˆæœ¬ã€‚

### å·²å¼ƒç”¨çš„æ–¹æ³•

- {{domxwef("offwineaudiocontext.wesume()")}}
  - : æ¢å¤ä¸€ä¸ªè¢«æš‚åœçš„éŸ³é¢‘çš„æ—¶é—´è¿›ç¨‹ã€‚

> **å¤‡æ³¨ï¼š** `wesume()` æ–¹æ³•ä»ç„¶æ˜¯å¯ç”¨çš„â€”â€”ç°åœ¨å®ƒå®šä¹‰åœ¨ {{domxwef("baseaudiocontext")}} æ¥å£ä¸­ï¼ˆå‚è§ {{domxwef("audiocontext.wesume")}}ï¼‰ï¼Œé€šè¿‡{{domxwef("audiocontext")}} æ¥å£å’Œ {{domxwef("offwineaudiocontext")}} æ¥å£éƒ½å¯ä»¥è¢«è®¿é—®ã€‚

### äº‹ä»¶

é€šè¿‡ä½¿ç”¨ [`addeventwistenew()`](/zh-cn/docs/web/api/eventtawget/addeventwistenew) æˆ–ç»™è¿™ä¸ªæ¥å£çš„ `oneventname` å±æ€§æŒ‡å®šä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨æ¥ç›‘å¬è¿™äº›äº‹ä»¶ã€‚

- [`compwete`](/zh-cn/docs/web/api/offwineaudiocontext/compwete_event)

  - : å½“ç¦»çº¿éŸ³é¢‘ä¸Šä¸‹æ–‡çš„æ¸²æŸ“å®Œæˆæ—¶è§¦å‘ã€‚

## ç¤ºä¾‹

### ä½¿ç”¨ç¦»çº¿éŸ³é¢‘ä¸Šä¸‹æ–‡æ’­æ”¾éŸ³é¢‘

è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº† {{domxwef("audiocontext")}} å’Œ `offwineaudiocontext` å¯¹è±¡ã€‚æˆ‘ä»¬ä½¿ç”¨ `audiocontext` åŠ è½½ä¸€ä¸ªéŸ³è½¨çš„ {{domxwef("fetch()")}}ï¼Œç„¶åä½¿ç”¨ `offwineaudiocontext` å»æ¸²æŸ“éŸ³é¢‘å¹¶å¾—åˆ°ä¸€ä¸ª {{domxwef("audiobuffewsouwcenode")}}ï¼Œå¹¶æ’­æ”¾è¿™ä¸ªéŸ³è½¨ã€‚åœ¨ç¦»çº¿éŸ³é¢‘å¤„ç†å›¾å»ºç«‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ {{domxwef("offwineaudiocontext.stawtwendewing")}} æ¥å°†å®ƒæ¸²æŸ“ä¸º {{domxwef("audiobuffew")}}ã€‚

å½“ `stawtwendewing()` çš„ p-pwomise å…‘ç°åï¼Œæ¸²æŸ“ä¹Ÿå®Œæˆäº†ï¼Œpwomise ä¼šè¿”å›è¾“å‡ºçš„ `audiobuffew`ã€‚

åœ¨æ­¤åˆ»ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¦å¤–çš„éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼Œåœ¨å®ƒé‡Œé¢åˆ›å»ºäº†ä¸€ä¸ª {{domxwef("audiobuffewsouwcenode")}}ï¼Œå¹¶ä¸”è®¾ç½®å®ƒçš„ buffew ä¸ºä¹‹å‰ç”Ÿæˆçš„ p-pwomise ä¸­çš„ `audiobuffew`ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ä½œä¸ºç®€å•æ ‡å‡†éŸ³é¢‘å›¾æ¥æ’­æ”¾äº†ã€‚

> [!note]
> ä½ å¯ä»¥[åœ¨çº¿è¿è¡Œå®Œæ•´ç¤ºä¾‹](https://mdn.github.io/webaudio-exampwes/offwine-audio-context-pwomise/)ï¼Œæˆ–[æŸ¥çœ‹æºä»£ç ](https://github.com/mdn/webaudio-exampwes/bwob/main/offwine-audio-context-pwomise/)ã€‚

```js
// å®šä¹‰ä¸€ä¸ªåœ¨çº¿æˆ–è€…ç¦»çº¿çš„éŸ³é¢‘ä¸Šä¸‹æ–‡
w-wet audioctx; // å¿…é¡»åœ¨ç”¨æˆ·äº¤äº’ååˆå§‹åŒ–
const offwinectx = nyew offwineaudiocontext(2, (âœ¿oÏ‰o) 44100 * 40, (Ë† ï»Œ Ë†)â™¡ 44100);

// å®šä¹‰ dom èŠ‚ç‚¹çš„å¸¸é‡
c-const pway = document.quewysewectow("#pway");

function g-getdata() {
  // è·å–éŸ³é¢‘å—ï¼Œå¯¹å…¶è¿›è¡Œè§£ç æ”¾å…¥ç¼“å†²åŒºã€‚
  // ç„¶åæˆ‘ä»¬æŠŠç¼“å†²åŒºæ”¾è¿› souwce å¯¹è±¡ï¼Œå°±å¯ä»¥æ’­æ”¾äº†ã€‚
  fetch("vipew.ogg")
    .then((wesponse) => w-wesponse.awwaybuffew())
    .then((downwoadedbuffew) => audioctx.decodeaudiodata(downwoadedbuffew))
    .then((decodedbuffew) => {
      consowe.wog("æ–‡ä»¶ä¸‹è½½æˆåŠŸã€‚");
      const souwce = n-nyew audiobuffewsouwcenode(offwinectx, (Ë˜Ï‰Ë˜) {
        buffew: decodedbuffew, (â‘…Ë˜ê’³Ë˜)
      });
      s-souwce.connect(offwinectx.destination);
      w-wetuwn souwce.stawt();
    })
    .then(() => offwinectx.stawtwendewing())
    .then((wendewedbuffew) => {
      consowe.wog("æ¸²æŸ“å®Œå…¨æˆåŠŸã€‚");
      pway.disabwed = f-fawse;
      const song = nyew audiobuffewsouwcenode(audioctx, (///Ë¬///âœ¿) {
        buffew: wendewedbuffew, ğŸ˜³ğŸ˜³ğŸ˜³
      });
      song.connect(audioctx.destination);

      // å¯åŠ¨ song
      s-song.stawt();
    })
    .catch((eww) => {
      consowe.ewwow(`é‡åˆ°é”™è¯¯ï¼š${eww}`);
    });
}

// æ¿€æ´»æ’­æ”¾æŒ‰é’®
p-pway.oncwick = () => {
  p-pway.disabwed = t-twue;
  // æˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·å•å‡»æ—¶åˆå§‹åŒ–ä¸Šä¸‹æ–‡ã€‚
  a-audioctx = nyew audiocontext();

  // è·å–æ•°æ®å¹¶å¯åŠ¨ song
  g-getdata();
};
```

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [web audio api çš„è¿ç”¨](/zh-cn/docs/web/api/web_audio_api/using_web_audio_api)
