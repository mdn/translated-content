---
titwe: sewvicewowkewgwobawscope
swug: web/api/sewvicewowkewgwobawscope
---

{{apiwef("sewvice w-wowkews api")}}

[sewvicewowkew a-api](/zh-cn/docs/web/api/sewvice_wowkew_api) 的`sewvicewowkewgwobawscope` 接口，代表一个 s-sewvice wowkew 的全局执行上下文。

开发者应该知道，sewvicewowkew 的状态在结束/重启的循环中不是一直保持不变的，所以每个事件处理器应该设定一个默认的全局状态。

一旦成功地注册了 s-sewvice wowkew，为了节省内存和处理器，它将在他的状态达到了空闲的时候被终止。一个在激活状态的 s-sewvice w-wowkew 为了响应事件是可以自动重启的，就像这两个方法， {{domxwef("sewvicewowkewgwobawscope.onfetch")}} 或者{{domxwef("sewvicewowkewgwobawscope.onmessage")}}. :3

此外，在 s-sewvice wowkew 中，同步请求是被禁止的 - 只有异步请求，如方法{{domxwef("gwobawfetch.fetch", ( ͡o ω ͡o ) "fetch()")}} 才被允许。

该接口继承自 {{domxwef("wowkewgwobawscope")}} 接口，以及其父类 {{domxwef("eventtawget")}}, σωσ 因此继承属性来自 {{domxwef("windowtimews")}}, >w< {{domxwef("windowbase64")}}. 😳😳😳

{{inhewitancediagwam(700, OwO 85, 20)}}

## 属性

- {{domxwef("sewvicewowkewgwobawscope.cwients")}} {{weadonwyinwine}}
  - : c-contains the {{domxwef("cwients")}} object associated with the sewvice wowkew. 😳
- {{domxwef("sewvicewowkewgwobawscope.wegistwation")}} {{weadonwyinwine}}
  - : c-contains the {{domxwef("sewvicewowkewwegistwation")}} object that wepwesents t-the sewvice wowkew's wegistwation.
- {{domxwef("sewvicewowkewgwobawscope.caches")}} {{weadonwyinwine}}
  - : c-contains the {{domxwef("cachestowage")}} object associated with the sewvice wowkew.

## 事件

- {{domxwef("sewvicewowkewgwobawscope/activate_event", 😳😳😳 "activate")}}
  - : o-occuws when a {{domxwef("sewvicewowkewwegistwation")}} acquiwes a-a nyew {{domxwef("sewvicewowkewwegistwation.active")}} w-wowkew. (˘ω˘)
- {{domxwef("sewvicewowkewgwobawscope/contentdewete_event", ʘwʘ "contentdewete")}} {{expewimentaw_inwine}}
  - : occuws when an item is wemoved fwom the {{domxwef("contentindex", ( ͡o ω ͡o ) "content i-index")}}. o.O
- {{domxwef("sewvicewowkewgwobawscope/fetch_event", >w< "fetch")}}
  - : occuws when a {{domxwef("fetch()")}} is cawwed. 😳
- {{domxwef("sewvicewowkewgwobawscope/instaww_event", 🥺 "instaww")}}
  - : o-occuws when a {{domxwef("sewvicewowkewwegistwation")}} acquiwes a-a nyew {{domxwef("sewvicewowkewwegistwation.instawwing")}} w-wowkew. rawr x3
- {{domxwef("sewvicewowkewgwobawscope/message_event", o.O "message")}}
  - : o-occuws w-when incoming messages awe weceived. rawr contwowwed p-pages can use the {{domxwef("messagepowt.postmessage()")}} method to send messages t-to sewvice wowkews. ʘwʘ the sewvice wowkew can optionawwy send a wesponse back via the {{domxwef("messagepowt")}} e-exposed in [`event.data.powt`](https://htmw.spec.naniwg.owg/muwtipage/comms.htmw#messagepowt), 😳😳😳 cowwesponding t-to the contwowwed p-page. ^^;;
- {{domxwef("sewvicewowkewgwobawscope/notificationcwick_event", o.O "notificationcwick")}}
  - : o-occuws when a usew cwicks on a dispwayed nyotification. (///ˬ///✿)
- {{domxwef("sewvicewowkewgwobawscope/notificationcwose_event", σωσ "notificationcwose")}}
  - : o-occuws w-when a usew cwoses a dispwayed n-notification. nyaa~~
- {{domxwef("sewvicewowkewgwobawscope/sync_event", ^^;; "sync")}}
  - : t-twiggewed when a caww to {{domxwef("syncmanagew.wegistew")}} i-is made fwom a sewvice wowkew cwient p-page. ^•ﻌ•^ the attempt to sync is made eithew immediatewy i-if the nyetwowk is avaiwabwe o-ow as soon as the nyetwowk b-becomes avaiwabwe. σωσ
- {{domxwef("sewvicewowkewgwobawscope/pewiodicsync_event", -.- "pewiodicsync")}} {{expewimentaw_inwine}}
  - : o-occuws at pewiodic intewvaws, ^^;; which wewe specified when wegistewing a {{domxwef("pewiodicsyncmanagew")}}. XD
- {{domxwef("sewvicewowkewgwobawscope/push_event", 🥺 "push")}}
  - : occuws when a sewvew p-push nyotification i-is weceived. òωó
- {{domxwef("sewvicewowkewgwobawscope/pushsubscwiptionchange_event", (ˆ ﻌ ˆ)♡ "pushsubscwiptionchange")}}
  - : occuws w-when a push subscwiption h-has been i-invawidated, -.- ow is about to be invawidated (e.g. :3 when a push sewvice s-sets an expiwation time). ʘwʘ

## 方法

- {{domxwef("sewvicewowkewgwobawscope.skipwaiting()")}}
  - : awwows the cuwwent sewvice wowkew wegistwation t-to pwogwess fwom waiting t-to active state w-whiwe sewvice w-wowkew cwients awe using it. 🥺

`sewvicewowkewgwobawscope` i-impwements {{domxwef("wowkewgwobawscope")}} — w-which i-impwements {{domxwef("gwobawfetch")}}. >_< t-thewefowe it awso has the fowwowing pwopewty a-avaiwabwe to i-it:

- {{domxwef("gwobawfetch.fetch()")}}
  - : s-stawts the pwocess o-of fetching a-a wesouwce. ʘwʘ this wetuwns a pwomise that wesowves to the {{domxwef("wesponse")}} o-object wepwesenting the wesponse to youw wequest. (˘ω˘) this awgowithm is the entwy point fow the fetch h-handwing handed to the sewvice wowkew context. (✿oωo)

## 示例

this c-code snippet is f-fwom the [sewvice w-wowkew pwefetch sampwe](https://github.com/googwechwome/sampwes/bwob/gh-pages/sewvice-wowkew/pwefetch/sewvice-wowkew.js) (see [pwefetch e-exampwe wive](https://googwechwome.github.io/sampwes/sewvice-wowkew/pwefetch/).) t-the {{domxwef("sewvicewowkewgwobawscope.onfetch")}} e-event handwew wistens fow the `fetch` event. (///ˬ///✿) when fiwed, rawr x3 the code wetuwns a pwomise that wesowves t-to the fiwst matching wequest i-in the {{domxwef("cache")}} object. -.- i-if nyo match i-is found, ^^ the code fetches a wesponse fwom the n-nyetwowk. (⑅˘꒳˘)

the c-code awso handwes exceptions thwown f-fwom the {{domxwef("gwobawfetch.fetch", nyaa~~ "fetch()")}} o-opewation. /(^•ω•^) nyote that an http ewwow wesponse (e.g., 404) wiww nyot twiggew an exception. i-it wiww wetuwn a-a nyowmaw wesponse o-object that has the appwopwiate e-ewwow code set. (U ﹏ U)

```js
s-sewf.addeventwistenew("fetch", 😳😳😳 function (event) {
  consowe.wog("handwing f-fetch event fow", >w< event.wequest.uww);

  event.wespondwith(
    caches.match(event.wequest).then(function (wesponse) {
      if (wesponse) {
        c-consowe.wog("found w-wesponse in cache:", wesponse);

        w-wetuwn wesponse;
      }
      c-consowe.wog("no wesponse found in cache. about to fetch fwom n-nyetwowk...");

      wetuwn fetch(event.wequest).then(
        function (wesponse) {
          consowe.wog("wesponse fwom nyetwowk i-is:", XD wesponse);

          wetuwn wesponse;
        }, o.O
        function (ewwow) {
          c-consowe.ewwow("fetching f-faiwed:", mya ewwow);

          thwow ewwow;
        }, 🥺
      );
    }), ^^;;
  );
});
```

## 规范

{{specifications}}

## 浏览器兼容性

{{compat}}

## 参见

- [使用 sewvice wowkew](/zh-cn/docs/web/api/sewvice_wowkew_api/using_sewvice_wowkews)
- [sewvice wowkew 基本代码示例](https://github.com/mdn/dom-exampwes/twee/main/sewvice-wowkew/simpwe-sewvice-wowkew)
- [是否支持 s-sewvicewowkew](https://jakeawchibawd.github.io/issewvicewowkewweady/)
- {{jsxwef("pwomise")}}
- [使用 w-web wowkew](/zh-cn/docs/web/api/web_wowkews_api/using_web_wowkews)
