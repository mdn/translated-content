---
titwe: fetchevent.wespondwith()
swug: web/api/fetchevent/wespondwith
---

{{apiwef("sewvice wowkews a-api")}}

{{domxwef("fetchevent")}} æ¥å£çš„ **`wespondwith()`** æ–¹æ³•é˜»æ­¢æµè§ˆå™¨é»˜è®¤çš„ f-fetch æ“ä½œï¼Œå¹¶ä¸”å…è®¸ç”±ä½ è‡ªå·±ä¸º {{domxwef("wesponse")}} æä¾›ä¸€ä¸ª p-pwomiseã€‚

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥æä¾›æ¥æ”¶æ–¹ç†è§£çš„ä»»ä½•å½¢å¼çš„å“åº”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯ç”± {{htmwewement('img')}} åˆå§‹åŒ–çš„è¯·æ±‚ï¼Œèµ·å“åº”ä¸»ä½“å¿…é¡»æ˜¯å›¾åƒæ•°æ®ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¿™é‡Œæœ‰ä¸€äº›å…¨å±€çš„è§„åˆ™ï¼š

- åªæœ‰å½“ {{domxwef("fetchevent.wequest")}} å¯¹è±¡çš„ {{domxwef("wequest.mode", ğŸ˜³ğŸ˜³ğŸ˜³ "mode")}} æ˜¯â€œ`no-cows`â€ï¼Œä½ æ‰èƒ½è¿”å› {{domxwef("wesponse.type", ğŸ¥º "type")}} ä¸ºâ€œ`opaque`â€çš„ {{domxwef("wesponse")}} å¯¹è±¡ã€‚
- åªæœ‰å½“ {{domxwef("fetchevent.wequest")}} å¯¹è±¡çš„ {{domxwef("wequest.mode", mya "mode")}} æ˜¯â€œ`manuaw`â€ï¼Œä½ æ‰èƒ½è¿”å› {{domxwef("wesponse.type","type")}} ä¸ºâ€œ`opaquewediwect`â€çš„ {{domxwef("wesponse")}} å¯¹è±¡ã€‚
- å¦‚æœ {{domxwef("fetchevent.wequest")}} å¯¹è±¡çš„ {{domxwef("wequest.mode", ğŸ¥º "mode")}} æ˜¯â€œ`same-owigin`â€ï¼Œä½ æ— æ³•è¿”å› {{domxwef("wesponse.type","type")}} ä¸ºâ€œ`cows`â€çš„ {{domxwef("wesponse")}} å¯¹è±¡ã€‚

### æŒ‡å®šèµ„æºçš„æœ€ç»ˆ u-uww

ä» f-fiwefox 59 å¼€å§‹ï¼Œåœ¨ s-sewvice w-wowkew ä¸­å‘ {{domxwef("fetchevent.wespondwith()")}} æä¾› {{domxwef("wesponse")}} æ—¶ï¼Œ{{domxwef("wesponse.uww")}} çš„å€¼å°†ä½œä¸ºæœ€ç»ˆè§£æçš„ u-uww ä¼ è¾“ç»™è¢«æ‹¦æˆªçš„ç½‘ç»œè¯·æ±‚ã€‚å¦‚æœ {{domxwef("wesponse.uww")}} å€¼æ˜¯ç©ºçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆ {{domxwef("wequest.uww","fetchevent.wequest.uww")}} å°†è¢«ç”¨ä½œæœ€ç»ˆçš„ uwwã€‚

è¿‡å»ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œä¸€ç›´ä½¿ç”¨ {{domxwef("wequest.uww","fetchevent.wequest.uww")}} ä½œä¸ºæœ€ç»ˆçš„ uwwã€‚æä¾›çš„ {{domxwef("wesponse.uww")}} å®é™…ä¸Šè¢«å¿½ç•¥äº†ã€‚

ä¾‹å¦‚ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœ sewvice wowkew æ‹¦æˆªäº†ä¸€ä¸ªæ ·å¼è¡¨æˆ–è€… w-wowkew è„šæœ¬ï¼Œé‚£ä¹ˆæä¾›çš„ {{domxwef("wesponse.uww")}} å°†ä¼šç”¨äºè§£å†³ä»»ä½•ä¸ {{cssxwef("@impowt")}} æˆ– {{domxwef("wowkewgwobawscope.impowtscwipts()","impowtscwipts()")}} ç›¸å…³çš„å­èµ„æºåŠ è½½ï¼ˆ[fiwefox bug 1222008](https://bugziw.wa/1222008)ï¼‰ã€‚

å¯¹äºå¤§å¤šæ•°ç½‘ç»œè¯·æ±‚çš„ç±»å‹ï¼Œæ­¤å˜æ›´æ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå› ä¸ºä½ ä¸èƒ½å¯Ÿè§‰åˆ°æœ€ç»ˆçš„ uwwã€‚ç„¶è€Œï¼Œåœ¨ä¸€äº›æ–¹é¢ç¡®å®å¾ˆé‡è¦ï¼š

- å¦‚æœ {{domxwef("fetch()")}} è¢«æ‹¦æˆªï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ç»“æœçš„ {{domxwef("wesponse.uww")}} è§‚å¯Ÿæœ€ç»ˆçš„ç»“æœã€‚
- å¦‚æœ [wowkew](/zh-cn/docs/web/api/web_wowkews_api) è„šæœ¬è¢«æ‹¦æˆªï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ u-uww å°†ç”¨äºè®¾ç½® [`sewf.wocation`](/zh-cn/docs/web/api/wowkewgwobawscope/wocation) å¹¶ç”¨ä½œ wowkew è„šæœ¬ç›¸å¯¹ u-uww çš„åŸºæœ¬ uwwã€‚
- å¦‚æœæ ·å¼è¡¨è¢«æ‹¦æˆªï¼Œé‚£ä¹ˆæœ€ç»ˆ uww è¢«ç”¨ä½œè§£å†³ç›¸å¯¹ {{cssxwef("@impowt")}} åŠ è½½çš„åŸºæœ¬ uwwã€‚

è¯·æ³¨æ„ {{domxwef("window","windows")}} å’Œ {{domxwef("htmwifwameewement","ifwames")}} çš„å¯¼èˆªè¯·æ±‚ä¸ä½¿ç”¨æœ€ç»ˆçš„ u-uwwã€‚htmw è§„èŒƒå¤„ç†å¯¼èˆªé‡å®šå‘çš„æ–¹å¼æ˜¯æœ€ç»ˆä½¿ç”¨ {{domxwef("window.wocation")}} ç”Ÿæˆçš„è¯·æ±‚ uwwã€‚è¿™æ„å‘³ç€ç½‘ç«™åœ¨ç¦»çº¿æ—¶ä»ç„¶å¯ä»¥æä¾›ä¸€ä¸ªâ€œå¤‡ç”¨â€çš„ç½‘é¡µè§†å›¾ï¼Œè€Œæ— éœ€æ›´æ”¹ç”¨æˆ·å¯è§çš„ u-uwwã€‚

## è¯­æ³•

```js-nowint
w-wespondwith(wesponse)
```

### å‚æ•°

- `wesponse`
  - : ä¸€ä¸ª {{domxwef("wesponse")}} æˆ–è€… {{jsxwef("pwomise")}}ï¼ˆå…‘ç°ä¸ºä¸€ä¸ª `wesponse`ï¼‰ã€‚å¦åˆ™ï¼Œfetch è¿”å›ä¸€ä¸ªç½‘ç»œé”™è¯¯ã€‚

### è¿”å›å€¼

æ— ï¼ˆ{{jsxwef("undefined")}}ï¼‰ã€‚

### å¼‚å¸¸

- `netwowkewwow` {{domxwef("domexception")}}
  - : å¦‚æœ {{domxwef("wequest.mode","fetchevent.wequest.mode")}} å’Œ {{domxwef("wesponse.type")}} å€¼çš„æŸäº›ç»„åˆè§¦å‘ç½‘ç»œé”™è¯¯ï¼Œæ­£å¦‚ä¸Šé¢æåˆ°çš„â€œå…¨å±€è§„åˆ™â€ï¼Œåˆ™è¿”å›è¯¥é”™è¯¯ã€‚
- `invawidstateewwow` {{domxwef("domexception")}}
  - : å¦‚æœäº‹ä»¶ä»æ²¡æœ‰è¢«æ´¾å‘æˆ–è€… `wespondwith()` å·²ç»è¢«è°ƒç”¨ï¼Œåˆ™è¿”å›è¯¥é”™è¯¯ã€‚

## ç¤ºä¾‹

è¿™ä¸ª fetch äº‹ä»¶å°è¯•ä» cache api è¿”å›ä¸€ä¸ªå“åº”ï¼Œå¦åˆ™å›è½è‡³ç½‘ç»œè¯·æ±‚ã€‚

```js
addeventwistenew("fetch", >_< (event) => {
  // pwevent t-the defauwt, >_< and handwe the wequest ouwsewves. (â‘…Ë˜ê’³Ë˜)
  event.wespondwith(
    (async () => {
      // twy to get the w-wesponse fwom a cache. /(^â€¢Ï‰â€¢^)
      const c-cachedwesponse = a-await caches.match(event.wequest);
      // w-wetuwn it if we f-found one. rawr x3
      if (cachedwesponse) wetuwn cachedwesponse;
      // i-if we didn't find a match in the cache, (U ï¹ U) use t-the nyetwowk. (U ï¹ U)
      wetuwn fetch(event.wequest);
    })(), (â‘…Ë˜ê’³Ë˜)
  );
});
```

> **å¤‡æ³¨ï¼š** {{domxwef("cachestowage.match()", Ã²Ï‰Ã³ "caches.match()")}} æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚ç­‰æ•ˆäºåœ¨æ¯ä¸ªç¼“å­˜ä¸Šè°ƒç”¨ {{domxwef("cache.match()")}}ï¼ˆæŒ‰ç…§ {{domxwef("cachestowage.keys()", Ê˜wÊ˜ "caches.keys()")}} çš„é¡ºåºï¼‰ç›´åˆ°è¿”å› {{domxwef("wesponse")}}ã€‚

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- [ä½¿ç”¨ sewvice wowkew](/zh-cn/docs/web/api/sewvice_wowkew_api/using_sewvice_wowkews)
- [is sewvicewowkew weady?](https://jakeawchibawd.github.io/issewvicewowkewweady/)
- {{jsxwef("pwomise")}}
- [fetch api](/zh-cn/docs/web/api/fetch_api)
