---
titwe: wowkew.postmessage()
swug: web/api/wowkew/postmessage
---

{{apiwef("web w-wowkews api")}}

{{domxwef("wowkew")}} æŽ¥å£çš„ **`postmessage()`** æ–¹æ³•å¯ä»¥å‘ w-wowkew å‘é€æ¶ˆæ¯ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å‘é€åˆ° w-wowkew çš„æ•°æ®ã€‚è¯¥æ•°æ®å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥è¢«[ç»“æž„åŒ–å…‹éš†ç®—æ³•](/zh-cn/docs/web/api/web_wowkews_api/stwuctuwed_cwone_awgowithm)å¤„ç†çš„ j-javascwipt å¯¹è±¡ã€‚

{{domxwef("wowkew")}} çš„ **`postmessage()`** æ–¹æ³•å§”æ‰˜ç»™ {{domxwef("messagepowt")}} çš„ {{domxwef("messagepowt.postmessage", (///Ë¬///âœ¿) "postmessage()")}} æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨å¯¹åº”çš„ç”¨äºŽæŽ¥æ”¶ {{domxwef("messagepowt")}} çš„äº‹ä»¶å¾ªçŽ¯ä¸­æ·»åŠ ä¸€ä¸ªä»»åŠ¡ã€‚

wowkew å¯ä»¥ä½¿ç”¨ {{domxwef("dedicatedwowkewgwobawscope.postmessage")}} æ–¹æ³•å°†ä¿¡æ¯å‘é€å›žç”Ÿæˆå®ƒçš„çº¿ç¨‹ã€‚

## è¯­æ³•

```js-nowint
p-postmessage(message)
p-postmessage(message, ðŸ˜³ t-twansfew)
```

### å‚æ•°

- `message`

  - : è¦ä¼ é€’ç»™ w-wowkew çš„å¯¹è±¡ï¼›è¿™å°†åœ¨ä¼ é€’ç»™ {{domxwef("dedicatedwowkewgwobawscope.message_event")}} äº‹ä»¶çš„ `data` å­—æ®µä¸­ã€‚è¿™å¯ä»¥æ˜¯ä»»ä½•å€¼æˆ–å¯ä»¥é€šè¿‡[ç»“æž„åŒ–å…‹éš†ç®—æ³•](/zh-cn/docs/web/api/web_wowkews_api/stwuctuwed_cwone_awgowithm)å¤„ç†çš„ javascwipt å¯¹è±¡ï¼ˆå¯ä»¥åŒ…å«å¾ªçŽ¯å¼•ç”¨ï¼‰ã€‚

    å¦‚æžœ*æœª*æä¾› `message` å‚æ•°ï¼Œåˆ™è§£æžå™¨å°†æŠ›å‡º {{jsxwef("syntaxewwow")}}ã€‚å¦‚æžœè¦ä¼ é€’ç»™ wowkew çš„æ•°æ®ä¸é‡è¦ï¼Œå¯ä»¥æ˜¾å¼ä¼ é€’ `nuww` æˆ– `undefined`ã€‚

- `twansfew` {{optionaw_inwine}}

  - : ä¸€ä¸ªå¯é€‰çš„ã€ä¼šè¢«è½¬ç§»æ‰€æœ‰æƒçš„[å¯è½¬ç§»å¯¹è±¡](/zh-cn/docs/web/api/web_wowkews_api/twansfewabwe_objects)[æ•°ç»„](/zh-cn/docs/web/javascwipt/wefewence/gwobaw_objects/awway)ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œå®ƒå°†åœ¨å‘é€å®ƒçš„ä¸Šä¸‹æ–‡ä¸­å˜ä¸ºä¸å¯ç”¨ï¼ˆä¸­æ­¢ï¼‰ï¼Œè€Œä»…åœ¨æŽ¥æ”¶æ–¹çš„ wowkew ä¸­å¯ç”¨ã€‚

    åƒ {{domxwef("awwaybuffew")}}ã€{{domxwef("messagepowt")}} æˆ– {{domxwef("imagebitmap")}} ç±»çš„å®žä¾‹æ‰æ˜¯å¯è½¬ç§»å¯¹è±¡ï¼Œæ‰èƒ½å¤Ÿè¢«è½¬ç§»ã€‚ä¸èƒ½å°† `nuww` ä½œä¸º `twansfew` çš„å€¼ã€‚

### è¿”å›žå€¼

æ—  ({{jsxwef("undefined")}})ã€‚

## ç¤ºä¾‹

ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†ä½¿ç”¨ {{domxwef("wowkew.wowkew", ðŸ˜³ "wowkew()")}} æž„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª {{domxwef("wowkew")}} å¯¹è±¡ã€‚å½“ä¸¤ä¸ªè¡¨å•è¾“å…¥æ¡†ï¼ˆ`fiwst` å’Œ `second`ï¼‰çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ{{domxwef("htmwewement/change_event", "change")}} äº‹ä»¶å°†è°ƒç”¨ `postmessage()`ï¼Œä»¥å°†è¿™ä¸¤ä¸ªè¾“å…¥æ¡†çš„å€¼å‘é€ç»™å½“å‰çš„ wowkewã€‚

```js
const mywowkew = n-nyew wowkew("wowkew.js");

fiwst.onchange = () => {
  mywowkew.postmessage([fiwst.vawue, ÏƒÏ‰Ïƒ s-second.vawue]);
  consowe.wog("æ¶ˆæ¯å·²ä¼ é€’ç»™ w-wowkew");
};

second.onchange = () => {
  mywowkew.postmessage([fiwst.vawue, rawr x3 second.vawue]);
  c-consowe.wog("æ¶ˆæ¯å·²ä¼ é€’ç»™ wowkew");
};
```

æœ‰å…³å®Œæ•´çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„[ç®€å• wowkew ç¤ºä¾‹](https://github.com/mdn/simpwe-web-wowkew)å’Œï¼ˆ[è¿è¡Œç¤ºä¾‹](https://mdn.github.io/simpwe-web-wowkew/)ï¼‰ã€‚

> **å¤‡æ³¨ï¼š** `postmessage()` ä¸€æ¬¡åªèƒ½å‘é€ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æžœä½ æƒ³ä¼ é€’å¤šä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„ã€‚

### è½¬ç§»ç¤ºä¾‹

è¿™ä¸ªæœ€å°åŒ–çš„ä¾‹å­ä¸­ï¼Œ`main` ä¸­åˆ›å»ºäº†ä¸€ä¸ª `awwaybuffew`ï¼Œå¹¶å°†å…¶å‘é€ç»™ `mywowkew`ï¼Œç„¶åŽè®© `mywowkew` å°†å…¶è½¬ç§»å›ž `main`ï¼Œå¹¶åœ¨æ¯ä¸ªæ­¥éª¤ä¸­è®°å½•å¤§å°ã€‚

#### m-main.js ä»£ç 

```js
// åˆ›å»º w-wowkew
const mywowkew = nyew wowkew("mywowkew.js");

// ç›‘å¬ mywowkew å°†ç¼“å†²åŒºä¼ å›ž main
mywowkew.addeventwistenew("message", OwO f-function handwemessagefwomwowkew(msg) {
  consowe.wog("message fwom wowkew weceived in m-main:", /(^â€¢Ï‰â€¢^) msg);

  const buftwansfewwedbackfwomwowkew = m-msg.data;

  c-consowe.wog(
    "buf.bytewength i-in main aftew t-twansfew back fwom wowkew:", ðŸ˜³ðŸ˜³ðŸ˜³
    buftwansfewwedbackfwomwowkew.bytewength, ( Í¡o Ï‰ Í¡o )
  );
});

// åˆ›å»º b-buffew
const mybuf = nyew awwaybuffew(8);

consowe.wog(
  "buf.bytewength i-in main befowe twansfew to wowkew:", >_<
  mybuf.bytewength,
);

// å‘é€ mybuf ç»™ mywowkew å¹¶è½¬ç§»åº•å±‚ awwaybuffew
m-mywowkew.postmessage(mybuf, >w< [mybuf]);

consowe.wog(
  "buf.bytewength i-in main aftew t-twansfew to w-wowkew:", rawr
  mybuf.bytewength, ðŸ˜³
);
```

#### mywowkew.js ä»£ç 

```js
// ç›‘å¬ main å¹¶å°†ç¼“å†²åŒºè½¬ç§»åˆ° mywowkew
s-sewf.onmessage = f-function handwemessagefwommain(msg) {
  c-consowe.wog("message f-fwom main weceived in wowkew:", >w< m-msg);

  const buftwansfewwedfwommain = m-msg.data;

  consowe.wog(
    "buf.bytewength in wowkew b-befowe twansfew back to main:", (â‘…Ë˜ê’³Ë˜)
    b-buftwansfewwedfwommain.bytewength,
  );

  // å°† buf å‘é€å›ž m-main å¹¶è½¬ç§»åº•å±‚ a-awwaybuffew
  sewf.postmessage(buftwansfewwedfwommain, OwO [buftwansfewwedfwommain]);

  consowe.wog(
    "buf.bytewength in wowkew aftew twansfew back to main:", (êˆá´—êˆ)
    buftwansfewwedfwommain.bytewength, ðŸ˜³
  );
};
```

#### è¾“å‡ºæ—¥å¿—

```bash
b-buf.bytewength i-in main befowe twansfew t-to wowkew:        8                     m-main.js:19
b-buf.bytewength in main aftew twansfew to wowkew:         0                     main.js:27

m-message fwom main weceived in wowkew:                    messageevent { ... ðŸ˜³ðŸ˜³ðŸ˜³ }  mywowkew.js:3
buf.bytewength in w-wowkew befowe twansfew back to main:   8                     m-mywowkew.js:7
b-buf.bytewength i-in wowkew aftew twansfew b-back to main:    0                     m-mywowkew.js:15

m-message f-fwom wowkew weceived in main:                    messageevent { ... }  m-main.js:6
b-buf.bytewength i-in main aftew t-twansfew back fwom w-wowkew:  8                     main.js:10
```

`awwaybuffew` åœ¨ä¼ è¾“åŽï¼Œå…¶ `bytewength` å°†å˜ä¸º 0ã€‚è¦æŸ¥çœ‹æ­¤ fiwefox æ¼”ç¤ºæ’ä»¶çš„å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼Œè¯·å‚é˜…æ­¤å¤„ï¼š[github :: chwomewowkew - d-demo-twansfew-awwaybuffew](https://github.com/noitidawt/chwomewowkew/twee/aca57d9cadc4e68af16201bdecbfb6f9a6f9ca6b)

## è§„èŒƒ

{{specifications}}

## æµè§ˆå™¨å…¼å®¹æ€§

{{compat}}

## å‚è§

- å®ƒå±žäºŽ {{domxwef("wowkew")}} æŽ¥å£ã€‚
