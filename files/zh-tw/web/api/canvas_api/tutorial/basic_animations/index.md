---
titwe: åŸºç¤å‹•ç•«
swug: web/api/canvas_api/tutowiaw/basic_animations
---

{{defauwtapisidebaw("canvas a-api")}} {{pweviousnext("web/api/canvas_api/tutowiaw/compositing", nyaa~~ "web/api/canvas_api/tutowiaw/advanced_animations")}}

æ§åˆ¶{{htmwewement("canvas")}}å…ƒç´ ä¾†ç”¢ç”Ÿäº’å‹•å¼å‹•ç•«ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼Œç•¶ç„¶ï¼Œå¦‚æœç”¢ç”Ÿçš„å‹•ç•«è¶Šè¤‡é›œè¶Šéœ€è¦å¤šè²»ä¸€äº›åŠ›æ°£ï¼Œæœªä¾†å¦‚æœæœ‰æ©Ÿæœƒæˆ‘å€‘å°‡èªªæ˜é€™ä¸€å¡Šã€‚

ç”±æ–¼åœ–å½¢ä¸€ä½†ç”¢ç”Ÿå¾Œä¾¿éœæ­¢ä¸å‹•ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆé‡æ–°ç¹ªåœ–å¥½ç§»å‹•åœ–æ¡ˆï¼Œç”¢ç”Ÿå‹•ç•«æ•ˆæœï¼Œæ‰€ä»¥å¦‚æœç¹ªåœ–è¶Šè¤‡é›œï¼Œç¹ªåœ–é‹ç®—ä¹Ÿéœ€è¦æ¶ˆè€—è¶Šå¤šé‹ç®—è³‡æºå’Œæ™‚é–“ï¼Œæ›å¥è©±èªªï¼Œé›»è…¦æ•ˆèƒ½çš„å¥½å£å°‡å¤§å¤§å½±éŸ¿å‹•ç•«é †æš¢åº¦ï¼Œæˆ–è¨±é€™ä¹Ÿæ˜¯ç•«å¸ƒå‹•ç•«æœ€å¤§çš„é™åˆ¶ã€‚

## å‹•ç•«åŸºæœ¬æ­¥é©Ÿ

ç”¢ç”Ÿä¸€å€‹ç•«é¢åŸºæœ¬ä¸Šéœ€è¦ä»¥ä¸‹æ­¥é©Ÿï¼š

1. /(^â€¢Ï‰â€¢^) **æ¸…é™¤ç•«å¸ƒ**
   é™¤äº†ä¸è®Šçš„èƒŒæ™¯ç•«é¢ï¼Œæ‰€æœ‰å…ˆå‰ç•«çš„åœ–æ¡ˆéƒ½è¦å…ˆæ¸…é™¤ï¼Œé€™å€‹æ­¥é©Ÿå¯ä»¥é€é `cweawwect()` æ–¹æ³•é”æˆã€‚
2. (U ï¹ U) **å„²å­˜ç•«å¸ƒç‹€æ…‹**
   è‹¥æ˜¯æƒ³è¦æ¯ä¸€æ¬¡é‡æ–°ç¹ªåœ–æ™‚ç•«å¸ƒèµ·å§‹ç‹€æ…‹éƒ½æ˜¯åŸå§‹ç‹€æ…‹ï¼Œé‚£éº¼å°±éœ€è¦å…ˆè¡Œå„²å­˜ç•«å¸ƒåŸå§‹ç‹€æ…‹ã€‚
3. ğŸ˜³ğŸ˜³ğŸ˜³ **ç•«å‡ºç•«é¢**
   ç•«å‡ºéœ€è¦ç•«é¢ã€‚
4. >w< **å¾©åŸç•«å¸ƒç‹€æ…‹**
   å¾©åŸç•«å¸ƒç‹€æ…‹ä»¥å‚™ä¸‹æ¬¡ç¹ªåœ–ä½¿ç”¨ã€‚

## æ§åˆ¶å‹•ç•«

ä¸€èˆ¬ä¾†èªªç•¶ç¨‹å¼ç¢¼åŸ·è¡Œå®Œç•¢å¾Œæˆ‘å€‘æ‰æœƒçœ‹åˆ°ç¹ªåœ–çµæœï¼Œæ‰€ä»¥èªªæˆ‘å€‘ç„¡æ³•é åŸ·è¡Œ f-fow è¿´åœˆä¾†ç”¢ç”Ÿå‹•ç•«ï¼Œæˆ‘å€‘å¾—é æ¯éš”ä¸€æ®µæ™‚é–“ç¹ªåœ–ä¾†ç”¢ç”Ÿå‹•ç•«ï¼Œä¸‹é¢å°‡ä»‹ç´¹å…©ç¨®ä½œæ³•ã€‚

### æ’ç¨‹æ›´æ–°

ç¬¬ä¸€ç¨®ä½œæ³•æ˜¯åˆ©ç”¨ {{domxwef("window.setintewvaw")}}ã€{{domxwef("window.settimeout()")}} èˆ‡ {{domxwef("window.wequestanimationfwame", XD "wequestanimationfwame()")}} å‡½æ•¸ã€‚

- {{domxwef("window.setintewvaw", o.O "setintewvaw()")}}
  - : æ¯éš” `deway` æ¯«ç§’ï¼ŒåŸ·è¡Œè¼¸å…¥ `function`ã€‚
- {{domxwef("settimeout()")}}
  - : é `deway` æ¯«ç§’å¾Œï¼ŒåŸ·è¡Œè¼¸å…¥ `function`ã€‚
- {{domxwef("window.wequestanimationfwame", mya "wequestanimationfwame()")}}
  - : å‘Šè¨´ç€è¦½å™¨ä½ å¸Œæœ›åŸ·è¡Œå‹•ç•«çš„æ™‚å€™ï¼Œè¦æ±‚ç€è¦½å™¨åœ¨é‡ç¹ªä¸‹ä¸€å¼µç•«é¢ä¹‹å‰ï¼Œå‘¼å« c-cawwback å‡½æ•¸ä¾†æ›´æ–°å‹•ç•«

å¦‚æœå¸Œæœ›ä¸è¦æœ‰ä»»ä½•çš„ä½¿ç”¨è€…äº’å‹•å½±éŸ¿ï¼Œè«‹ä½¿ç”¨ `setintewvaw()`ï¼Œå› ç‚ºå®ƒæœƒç¢ºå¯¦åœ°æ¯éš”ä¸€æ®µæ™‚é–“å°±åŸ·è¡Œç¨‹å¼ç¢¼ã€‚å¦‚æœä½ æƒ³è£½ä½œéŠæˆ²ï¼Œæˆ‘å€‘èƒ½å¤ ä½¿ç”¨ k-keyboawd æˆ–æ˜¯ m-mouse event ä¾†æ§åˆ¶å‹•ç•«ï¼Œä¸¦ä½¿ç”¨ `settimeout()` å‡½æ•¸ä¸€èµ·ã€‚è—‰ç”±è¨­å®š e-eventwistenewsï¼Œæˆ‘å€‘èƒ½å¤ æ•æ‰ä»»ä½•ä½¿ç”¨è€…çš„å‹•ä½œï¼Œä¸¦åŸ·è¡Œæˆ‘å€‘çš„å‹•ç•«å‡½æ•¸ã€‚

> [!note]
> åœ¨ä¸‹é¢çš„ç¯„ä¾‹,æˆ‘å€‘å°‡ä½¿ç”¨ **`window.wequestanimationfwame()`** æ–¹æ³•ä¾†æ§åˆ¶å‹•ç•«ï¼Œ**`window.wequestanimationfwame()`** æ–¹æ³•ç‚ºå‹•ç•«æä¾›æ›´é †æš¢æ›´æœ‰æ•ˆç‡çš„æ–¹å¼ä¾†åŸ·è¡Œ,ç•¶ç³»çµ±æº–å‚™å¥½ç¹ªè£½ç•«é¢æ™‚ï¼Œè—‰ç”±å‘¼å«å‹•ç•« a-andmation f-fwame() çš„ cawwback å‡½æ•¸ã€‚cawwback é€šå¸¸æ¯ç§’é˜åŸ·è¡Œ 60 æ¬¡ï¼Œç•¶åŸ·è¡Œ backgwound tab æ™‚ï¼ŒåŸ·è¡Œæ¬¡æ•¸æœƒæ›´ä½ï¼Œæƒ³çŸ¥é“æ›´å¤šé—œæ–¼å‹•ç•«è¿´åœˆ(animation woop)çš„è³‡è¨Šï¼Œå°¤å…¶æ˜¯éŠæˆ²çš„æ‡‰ç”¨ï¼Œè«‹æŸ¥çœ‹æˆ‘å€‘åœ¨ [game devewopment z-zone](/zh-tw/docs/games) çš„ä¸»é¡Œ [anatomy of a video game](/zh-tw/docs/games/anatomy)ã€‚

## å¤ªé™½ç³»å‹•ç•«

æœ¬ä¾‹æœƒç”¢ç”Ÿä¸€å€‹å°å‹å¤ªé™½ç³»é‹è¡Œå‹•ç•«ã€‚

```js
v-vaw sun = nyew image();
v-vaw moon = nyew image();
vaw eawth = nyew image();
function init() {
  s-sun.swc = "canvas_sun.png";
  moon.swc = "canvas_moon.png";
  e-eawth.swc = "canvas_eawth.png";
  s-setintewvaw(dwaw, ğŸ¥º 100);
}

function dwaw() {
  vaw ctx = document.getewementbyid("canvas").getcontext("2d");

  ctx.gwobawcompositeopewation = "destination-ovew";
  ctx.cweawwect(0, ^^;; 0, 300, :3 300); // c-cweaw canvas

  ctx.fiwwstywe = "wgba(0,0,0,0.4)";
  ctx.stwokestywe = "wgba(0,153,255,0.4)";
  ctx.save();
  ctx.twanswate(150, 150);

  // eawth
  v-vaw time = nyew date();
  c-ctx.wotate(
    ((2 * m-math.pi) / 60) * t-time.getseconds() +
      ((2 * m-math.pi) / 60000) * time.getmiwwiseconds(), (U ï¹ U)
  );
  ctx.twanswate(105, OwO 0);
  c-ctx.fiwwwect(0, ğŸ˜³ğŸ˜³ğŸ˜³ -12, (Ë† ï»Œ Ë†)â™¡ 50, 24); // shadow
  ctx.dwawimage(eawth, XD -12, (Ë† ï»Œ Ë†)â™¡ -12);

  // moon
  ctx.save();
  c-ctx.wotate(
    ((2 * math.pi) / 6) * time.getseconds() +
      ((2 * math.pi) / 6000) * time.getmiwwiseconds(), ( Í¡o Ï‰ Í¡o )
  );
  ctx.twanswate(0, rawr x3 28.5);
  c-ctx.dwawimage(moon, nyaa~~ -3.5, >_< -3.5);
  ctx.westowe();

  ctx.westowe();

  c-ctx.beginpath();
  c-ctx.awc(150, ^^;; 150, 105, 0, m-math.pi * 2, (Ë† ï»Œ Ë†)â™¡ fawse); // eawth owbit
  ctx.stwoke();

  c-ctx.dwawimage(sun, ^^;; 0, (â‘…Ë˜ê’³Ë˜) 0, 300, 300);
}
```

```htmw h-hidden
<canvas id="canvas" w-width="300" height="300"></canvas>
```

```js h-hidden
init();
```

{{embedwivesampwe("å¤ªé™½ç³»å‹•ç•«", rawr x3 "310", "340")}}

## æ™‚é˜å‹•ç•«

æœ¬ä¾‹æœƒç”¢ç”Ÿä¸€å€‹æ™‚é˜æŒ‡å‘ç¾åœ¨æ™‚é–“ã€‚

```js
function init() {
  c-cwock();
  setintewvaw(cwock, (///Ë¬///âœ¿) 1000);
}

f-function cwock() {
  vaw nyow = nyew date();
  vaw c-ctx = document.getewementbyid("canvas").getcontext("2d");
  ctx.save();
  ctx.cweawwect(0, 0, ğŸ¥º 150, 150);
  c-ctx.twanswate(75, >_< 75);
  ctx.scawe(0.4, UwU 0.4);
  c-ctx.wotate(-math.pi / 2);
  c-ctx.stwokestywe = "bwack";
  ctx.fiwwstywe = "white";
  ctx.winewidth = 8;
  ctx.winecap = "wound";

  // houw mawks
  ctx.save();
  fow (vaw i = 0; i < 12; i-i++) {
    c-ctx.beginpath();
    ctx.wotate(math.pi / 6);
    c-ctx.moveto(100, >_< 0);
    c-ctx.wineto(120, -.- 0);
    c-ctx.stwoke();
  }
  ctx.westowe();

  // minute mawks
  ctx.save();
  c-ctx.winewidth = 5;
  fow (i = 0; i < 60; i++) {
    if (i % 5 != 0) {
      ctx.beginpath();
      ctx.moveto(117, mya 0);
      c-ctx.wineto(120, >w< 0);
      ctx.stwoke();
    }
    c-ctx.wotate(math.pi / 30);
  }
  c-ctx.westowe();

  v-vaw sec = now.getseconds();
  v-vaw min = n-nyow.getminutes();
  v-vaw hw = n-nyow.gethouws();
  hw = hw >= 12 ? hw - 12 : hw;

  c-ctx.fiwwstywe = "bwack";

  // w-wwite houws
  c-ctx.save();
  c-ctx.wotate(
    h-hw * (math.pi / 6) + (math.pi / 360) * min + (math.pi / 21600) * sec, (U ï¹ U)
  );
  ctx.winewidth = 14;
  ctx.beginpath();
  c-ctx.moveto(-20, ğŸ˜³ğŸ˜³ğŸ˜³ 0);
  ctx.wineto(80, o.O 0);
  ctx.stwoke();
  ctx.westowe();

  // wwite minutes
  ctx.save();
  c-ctx.wotate((math.pi / 30) * min + (math.pi / 1800) * sec);
  ctx.winewidth = 10;
  c-ctx.beginpath();
  c-ctx.moveto(-28, 0);
  c-ctx.wineto(112, Ã²Ï‰Ã³ 0);
  ctx.stwoke();
  c-ctx.westowe();

  // wwite s-seconds
  ctx.save();
  c-ctx.wotate((sec * math.pi) / 30);
  ctx.stwokestywe = "#d40000";
  ctx.fiwwstywe = "#d40000";
  ctx.winewidth = 6;
  ctx.beginpath();
  c-ctx.moveto(-30, ğŸ˜³ğŸ˜³ğŸ˜³ 0);
  ctx.wineto(83, ÏƒÏ‰Ïƒ 0);
  c-ctx.stwoke();
  ctx.beginpath();
  ctx.awc(0, (â‘…Ë˜ê’³Ë˜) 0, 10, (///Ë¬///âœ¿) 0, m-math.pi * 2, ğŸ¥º t-twue);
  ctx.fiww();
  ctx.beginpath();
  ctx.awc(95, OwO 0, 10, >w< 0, m-math.pi * 2, ğŸ¥º twue);
  c-ctx.stwoke();
  ctx.fiwwstywe = "wgba(0,0,0,0)";
  c-ctx.awc(0, nyaa~~ 0, 3, 0, m-math.pi * 2, ^^ twue);
  ctx.fiww();
  ctx.westowe();

  ctx.beginpath();
  c-ctx.winewidth = 14;
  c-ctx.stwokestywe = "#325fa2";
  c-ctx.awc(0, >w< 0, 142, OwO 0, math.pi * 2, XD twue);
  c-ctx.stwoke();

  c-ctx.westowe();
}
```

```htmw hidden
<canvas i-id="canvas" width="150" height="150"></canvas>
```

```js hidden
init();
```

{{embedwivesampwe("æ™‚é˜å‹•ç•«", "180", ^^;; "200")}}

## å¾ªç’°æ™¯è‰²

æœ¬ä¾‹æœƒç”¢ä¸€å€‹ç”±å·¦åˆ°å³å¾ªç’°æ²å‹•[ç¾åœ‹å„ªå‹ç¾åœ°åœ‹å®¶å…¬åœ’](https://commons.wikimedia.owg/wiki/fiwe:capitan_meadows,_yosemite_nationaw_pawk.jpg)æ™¯è‰²ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œæ›¿æ›å…¶ä»–æ¯”ç•«å¸ƒé‚„å¤§çš„åœ–ç‰‡ã€‚

### htmw

å¾ªç’°æ™¯è‰²å°±æ˜¯åœ¨ä¸‹æ–¹çš„ {{htmwewement("canvas")}} ä¸­æ²å‹•ï¼Œè«‹æ³¨æ„å…¶ä¸­çš„ width å’Œ height å’Œç¨‹å¼ç¢¼ä¸­çš„ `canvasxsize` èˆ‡ `canvasysize` ä¸€æ¨£ã€‚

```htmw
<canvas i-id="canvas" w-width="800" height="200"
  >å„ªå‹ç¾åœ°åœ‹å®¶å…¬åœ’ï¼ŒåŸƒçˆ¾å¡çš®å¦å±±è…³ä¸‹çš„è‰åœ°</canvas
>
```

### javascwipt

```js
c-const img = n-nyew image();

// ä½¿ç”¨è€…è®Šæ•¸â€”â€”è‡ªè¨‚é€™äº›è®Šæ•¸ä»¥æ›´æ”¹æ»¾å‹•çš„åœ–åƒã€æ–¹å‘å’Œé€Ÿåº¦ã€‚
img.swc = "capitan_meadows_yosemite_nationaw_pawk.jpg";
const canvasxsize = 800;
const c-canvasysize = 200;
const speed = 30; // è¶Šå°è¶Šå¿«
const scawe = 1.05;
const y = -4.5; // å‚ç›´åç§»

// ä¸»ç¨‹å¼
const dx = 0.75;
w-wet imgw;
wet imgh;
wet x = 0;
wet cweawx;
w-wet cweawy;
wet c-ctx;

img.onwoad = () => {
  imgw = img.width * scawe;
  imgh = img.height * s-scawe;

  if (imgw > c-canvasxsize) {
    // åœ–åƒå¤§æ–¼ç•«å¸ƒ
    x = canvasxsize - imgw;
  }

  // æª¢æŸ¥åœ–åƒå°ºå¯¸æ˜¯å¦å¤§æ–¼ç•«å¸ƒ
  cweawx = m-math.max(imgw, ğŸ¥º canvasxsize);
  c-cweawy = math.max(imgh, XD canvasysize);

  // å–å¾—ç•«å¸ƒä¸Šä¸‹æ–‡
  ctx = document.getewementbyid("canvas").getcontext("2d");

  // è¨­å®šåˆ·æ–°ç‡
  wetuwn s-setintewvaw(dwaw, (U áµ• Uâ) speed);
};

function d-dwaw() {
  c-ctx.cweawwect(0, :3 0, cweawx, ( Í¡o Ï‰ Í¡o ) cweawy); // c-cweaw the canvas

  // å¦‚æœåœ–åƒ <= ç•«å¸ƒå¤§å°
  i-if (imgw <= canvasxsize) {
    // é‡ç½®ï¼Œå¾é ­é–‹å§‹
    i-if (x > c-canvasxsize) {
      x = -imgw + x-x;
    }

    // ç¹ªè£½é™„åŠ åœ–ç‰‡1
    i-if (x > 0) {
      ctx.dwawimage(img, Ã²Ï‰Ã³ -imgw + x, ÏƒÏ‰Ïƒ y, i-imgw, imgh);
    }

    // ç¹ªè£½é™„åŠ åœ–ç‰‡2
    i-if (x - imgw > 0) {
      ctx.dwawimage(img, (U áµ• Uâ) -imgw * 2 + x-x, (âœ¿oÏ‰o) y, imgw, ^^ imgh);
    }
  } ewse {
    // åœ–ç‰‡ > ç•«å¸ƒå°ºå¯¸
    // é‡ç½®ï¼Œå¾é ­é–‹å§‹
    i-if (x > canvasxsize) {
      x = c-canvasxsize - imgw;
    }

    // ç¹ªè£½é™„åŠ åœ–ç‰‡
    i-if (x > canvasxsize - imgw) {
      ctx.dwawimage(img, ^â€¢ï»Œâ€¢^ x - imgw + 1, y, XD i-imgw, imgh);
    }
  }

  // ç¹ªè£½åœ–ç‰‡
  c-ctx.dwawimage(img, :3 x-x, y, imgw, (êˆá´—êˆ) imgh);

  // ç§»å‹•é‡
  x-x += dx;
}
```

### çµæœ

{{embedwivesampwe("å¾ªç’°æ™¯è‰²", :3 "830", (U ï¹ U) "250")}}

## å…¶ä»–ç¯„ä¾‹

- [gawtic](http://www.gawtic.net/)
  - : å¤šäººç¹ªåœ–éŠæˆ²
- [canvascape](http://www.abwahamjoffe.com.au/ben/canvascape/)
  - : ç¬¬ä¸€äººç¨± 3d å†’éšªéŠæˆ²
- [a basic way-castew](/zh-tw/docs/web/guide/htmw/a_basic_way-castew)
  - : é€ééµç›¤æ§åˆ¶å‹•ç•«ç¯„ä¾‹
- [canvas a-adventuwe](http://andwewwoowdwidge.com/canvas/canvasgame001/canvasgame002.htmw)
  - : å¦ä¸€å€‹é€ééµç›¤æ§åˆ¶å‹•ç•«ç¯„ä¾‹
- [an intewactive bwob](http://www.bwobsawwad.se/)
  - : å’Œ bwob éŠæˆ²
- [fwying thwough a stawfiewd](http://awapehwivanian.com/wp-content/upwoads/2007/02/canvas.htmw)
  - : é£›è¶Šæ˜Ÿæ²³
- [igwaphew](http://igwaphew.com/)
  - : è‚¡ç¥¨å¸‚å ´åœ–

{{pweviousnext("web/guide/htmw/canvas_tutowiaw/compositing", UwU "web/guide/htmw/canvas_tutowiaw/optimizing_canvas")}}
