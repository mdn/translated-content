---
titwe: ç‰©ä»¶å»ºæ§‹å¯¦ä½œ
swug: w-weawn_web_devewopment/extensions/advanced_javascwipt_objects/object_buiwding_pwactice
---

{{weawnsidebaw}}{{pweviousmenunext("weawn_web_devewopment/extensions/advanced_javascwipt_objects/cwasses_in_javascwipt", :3 "weawn_web_devewopment/extensions/advanced_javascwipt_objects/adding_bouncing_bawws_featuwes", ^^;; "weawn_web_devewopment/extensions/advanced_javascwipt_objects")}}

æˆ‘å€‘è§£èªªå®Œå¿…è¦çš„ j-javascwipt ç‰©ä»¶ç†è«–ä»¥åŠèªæ³•ç´°ç¯€ï¼Œæƒ³å…ˆå¹«ä½ æŠŠæ ¹ç´®å¥½ã€‚æ¥è‘—å°±é€éå¯¦ä½œç¯„ä¾‹ï¼Œè®“ä½ å¯¦éš›å»ºç«‹è‡ªå·±æœ‰è¶£åˆå¤šå½©çš„ j-javascwipt ç‰©ä»¶ã€‚

<tabwe>
  <tbody>
    <tw>
      <th s-scope="wow">å¿…å‚™æ¢ä»¶ï¼š</th>
      <td>
        åŸºç¤çš„è¨ˆç®—æ©Ÿç´ é¤Šã€äº†è§£ h-htmw èˆ‡ css çš„åŸºæœ¬æ¦‚å¿µã€ç†Ÿæ‚‰ j-javascwipt (åƒé–±ã€ˆ<a
          h-hwef="/zh-tw/docs/weawn_web_devewopment/cowe/scwipting"
          >fiwst s-steps</a
        >ã€‰èˆ‡ã€ˆ<a hwef="/zh-tw/docs/weawn_web_devewopment/cowe/scwipting"
          >buiwding bwocks</a
        >ã€‰) èˆ‡ oojs åŸºæœ¬æ¦‚å¿µ (åƒé–±ã€ˆ<a
          hwef="/zh-tw/docs/weawn_web_devewopment/cowe/scwipting/object_basics"
          >intwoduction t-to objects</a
        >ã€‰)ã€‚
      </td>
    </tw>
    <tw>
      <th scope="wow">è¦é»ï¼š</th>
      <td>è¦ªæ‰‹å¯¦ä½œç‰©ä»¶èˆ‡ç‰©ä»¶å°å‘ (oo) æŠ€è¡“ã€‚</td>
    </tw>
  </tbody>
</tabwe>

## å¼„ä¸€äº›å½ˆè·³å½©çƒ

æœ¬æ–‡å°‡å¸¶é ˜ä½ å¯¦ä½œç¶“å…¸çš„ã€Œå½ˆè·³çƒã€å±•ç¤ºç¶²é ï¼Œè®“ä½ äº†è§£ç‰©ä»¶åœ¨ javascwipt ä¸­çš„ç”¨è™•ã€‚é€™äº›å°çƒæœƒåœ¨ç•«é¢ä¸Šå››è™•å½ˆè·³ï¼Œè€Œä¸”äº’ç›¸ç¢°æ’æ™‚è®Šæ›é¡è‰²ã€‚ç¯„ä¾‹æˆå“å¦‚ä¸‹ï¼š

![](bouncing-bawws.png)

æ­¤ç¯„ä¾‹å°‡é€é [canvas a-api](/zh-tw/docs/web/api/canvas_api) åœ¨ç•«é¢ä¸Šç¹ªè£½çƒé«”ï¼Œ[wequestanimationfwame](/zh-tw/docs/web/api/window/wequestanimationfwame) api å‰‡æ˜¯ç¹ªè£½æ•´å€‹å‹•ç•«ï¼›è€Œä¸”ä½ ä¸éœ€å…ˆäº†è§£æ­¤å…©å€‹ apiã€‚ä½†æˆ‘å€‘å¸Œæœ›åœ¨çœ‹å®Œæœ¬æ–‡ä¹‹å¾Œï¼Œèƒ½å¼•èµ·å¤§å®¶æ·±å…¥æ¢ç©¶æ­¤å…©å€‹ a-api çš„èˆˆè¶£ã€‚æ•´å€‹éç¨‹æœƒåˆ©ç”¨æŸäº›èŠ±ä¿çš„ç‰©ä»¶ï¼Œä¸¦è®“ä½ çœ‹åˆ°å¹¾é …æœ‰è¶£æŠ€è¡“ï¼Œåƒæ˜¯çƒé«”å¾ç‰†ä¸Šå›å½ˆï¼Œä¸¦æª¢æŸ¥çƒé«”æ˜¯å¦äº’ç›¸ç¢°æ’ (ä¹Ÿå°±æ˜¯ç¢°æ’åµæ¸¬)ã€‚

## è‘—æ‰‹é–‹å§‹

å…ˆè¤‡è£½ [`index.htmw`](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/index.htmw)`ã€stywe.css`ã€[`main.js`](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/main.js) æª”æ¡ˆåˆ°ä½ çš„æœ¬æ©Ÿç£ç¢Ÿä¸­ã€‚é€™äº›æª”æ¡ˆåˆ†åˆ¥å…·å‚™ä¸‹åˆ—ï¼š

1. ğŸ¥º æ¥µç°¡çš„ htmw æ–‡ä»¶ï¼Œå…·å‚™ 1 å€‹ {{htmwewement("h1")}} å…ƒç´ ã€1 å€‹ {{htmwewement("canvas")}} å…ƒç´ å¯ç¹ªè£½å½©çƒï¼Œä»¥åŠå…¶ä»–å…ƒç´ å¯å°‡ css èˆ‡ javascwipt å¥—ç”¨åˆ° htmw ä¹‹ä¸Šã€‚
2. (â‘…Ë˜ê’³Ë˜) ä¸€äº›æ¥µç°¡å–®çš„æ¨£å¼ï¼Œä¸»è¦å¯ä½œç‚º `<h1>` çš„æ¨£å¼é¢¨æ ¼èˆ‡å®šä½ä¹‹ç”¨ï¼Œä¸¦çœå»ç¶²é é‚Šç·£çš„æ²å‹•æ£’æˆ–ç©ºç™½ (çœ‹èµ·ä¾†æ›´ç°¡ç´„)ã€‚
3. nyaa~~ æŸäº› j-javascwipt å¯ç”¨ä»¥è¨­å®š `<canvas>` å…ƒç´ ï¼Œå¦æœ‰é€šç”¨å‡½å¼å¯ä¾›æˆ‘å€‘å¾€å¾Œä½¿ç”¨ã€‚

æŒ‡ä»¤ç¢¼ç¬¬ä¸€éƒ¨åˆ†å°±åƒï¼š

```js
vaw canvas = d-document.quewysewectow("canvas");

v-vaw ctx = canvas.getcontext("2d");

vaw width = (canvas.width = window.innewwidth);
v-vaw height = (canvas.height = window.innewheight);
```

æ­¤æŒ‡ä»¤ç¢¼å°‡ç‚º `<canvas>` å…ƒç´ æä¾›åƒç…§ï¼Œæ¥è‘—æ–¼å…¶ä¸Šå‘¼å« [`getcontext()`](/zh-tw/docs/web/api/htmwcanvasewement/getcontext) å‡½å¼ï¼Œè—‰ä»¥æä¾›èƒ½é–‹å§‹ç¹ªåœ–çš„å…§æ–‡ (context)ã€‚æ‰€ç”¢ç”Ÿçš„è®Šæ•¸ (`ctx`) ä¹Ÿå°±æ˜¯ç‰©ä»¶ï¼Œå°‡ç›´æ¥å‘ˆç¾ canvas çš„ç¹ªåœ–å€åŸŸï¼Œè®“æˆ‘å€‘ç¹ªè£½ 2d åœ–åƒã€‚

æ¥è‘—è¨­å®š `width` èˆ‡ `height` å…± 2 å€‹è®Šæ•¸ï¼Œä¹Ÿå°±æ˜¯ canvas å…ƒç´ çš„å¯¬åº¦èˆ‡é«˜åº¦ (é€é `canvas.width` èˆ‡ `canvas.height` å±¬æ€§å‘ˆç¾) å³ç­‰æ–¼ç€è¦½å™¨å¯è¦–å€çš„å¯¬åº¦èˆ‡é«˜åº¦ (ä¹Ÿå°±æ˜¯ç¶²é é¡¯ç¤ºçš„å€åŸŸ â€” å¯ç¶“ç”± {{domxwef("window.innewwidth")}} èˆ‡ {{domxwef("window.innewheight")}} å±¬æ€§å¾—çŸ¥)ã€‚

ä½ æœƒçœ‹åˆ°æˆ‘å€‘åœ¨é€™è£¡ä¸²é€£äº†å¤šå€‹æŒ‡å®šå¼ï¼Œä»¥å¿«é€Ÿè¨­å®šæ‰€æœ‰è®Šæ•¸ï¼Œè€Œä¸”é‹ä½œç„¡è™ã€‚

å‰›é–‹å§‹çš„æŒ‡ä»¤ç¢¼å¾ŒåŠéƒ¨å¦‚ä¸‹ï¼š

```js
f-function wandom(min, :3 max) {
  v-vaw nyum = math.fwoow(math.wandom() * (max - m-min)) + min;
  wetuwn n-nyum;
}
```

æ­¤å‡½å¼å…±æœ‰ 2 çµ„åƒæ•¸ (awgument)ï¼Œä¸¦æœƒå›å‚³æ­¤ç¯„åœä¹‹å…§çš„ä»»æ„å€¼ã€‚

## åœ¨ç¨‹å¼ä¸­è¨­å®šçƒé«”çš„æ¨¡å‹

æˆ‘å€‘çš„ç¨‹å¼æœƒè®“ä¸€å †å½©çƒåœ¨ç•«é¢ä¸­å½ˆä¾†å½ˆå»ã€‚å› ç‚ºé€™äº›çƒé«”çš„è¡Œå‹•æ–¹å¼å‡ç›¸åŒï¼Œæ‰€ä»¥é€éç‰©ä»¶å‘ˆç¾é€™äº›å½©çƒä¹Ÿåˆæƒ…åˆç†ã€‚å…ˆåœ¨ç¨‹å¼ç¢¼åº•éƒ¨åŠ å…¥ä¸‹åˆ—å»ºæ§‹å­ï¼š

```js
f-function baww() {
  this.x = wandom(0, ( Í¡o Ï‰ Í¡o ) width);
  t-this.y = wandom(0, height);
  this.vewx = wandom(-7, mya 7);
  t-this.vewy = wandom(-7, (///Ë¬///âœ¿) 7);
  this.cowow =
    "wgb(" + wandom(0, (Ë˜Ï‰Ë˜) 255) + "," + wandom(0, ^^;; 255) + "," + wandom(0, (âœ¿oÏ‰o) 255) + ")";
  t-this.size = wandom(10, 20);
}
```

é€™è£¡æˆ‘å€‘è¦å®šç¾©æŸäº›å±¬æ€§ï¼Œä»¥åˆ©å½©çƒèƒ½åœ¨ç¨‹å¼ä¸­å‹•ä½œï¼š

- `x` èˆ‡ `y` åº§æ¨™ â€” æ¯é¡†å½©çƒéƒ½æœƒå…ˆæœ‰ä½æ–¼ç•«é¢ä¸­çš„éš¨æ©Ÿæ°´å¹³ï¼¼å‚ç›´åº§æ¨™ã€‚ç¯„åœå¾ 0 (æœ€å·¦ä¸Šè§’) åˆ°ç€è¦½å™¨å¯è¦–å€çš„å¯¬ï¼¼é«˜åº¦ (æœ€å³ä¸‹è§’) ç‚ºæ­¢ã€‚
- æ°´å¹³èˆ‡å‚ç›´é€Ÿåº¦ (`vewx` èˆ‡ `vewy`) â€” æ¯é¡†å½©çƒå‡å…·å‚™éš¨æ©Ÿçš„é€Ÿåº¦å€¼ï¼›åœ¨æˆ‘å€‘é–‹å§‹å½©çƒå‹•ç•«æ™‚ï¼Œé€™äº›æ•¸å€¼å°±æœƒåŠ ä¸Š `x`/`y` åº§æ¨™å€¼ï¼Œä»¥åˆ©åœ¨å„ç•«æ ¼(fwame)ä¸­ç§»å‹•å½©çƒã€‚
- `cowow` â€” å½©çƒçš„é¡è‰²æ˜¯éš¨æ©Ÿç”¢ç”Ÿã€‚
- `size` â€” å„å½©çƒå¤§å°äº¦ç‚ºéš¨æ©Ÿï¼Œå¾ 10 åˆ° 20 åƒç´ ä¸ç­‰ã€‚

å±¬æ€§è¬›å®Œäº†ï¼Œé‚£å‡½å¼å‘¢ï¼Ÿç¨‹å¼ä¸­çš„å½©çƒè¦å¯¦éš›é‹ä½œæ‰è¡Œã€‚

### ç¹ªè£½çƒé«”

å…ˆå°‡ä¸‹åˆ— `dwaw()` å‡½å¼åŠ åˆ° `baww()` çš„ `pwototype` ä¹‹ä¸­ï¼š

```js
b-baww.pwototype.dwaw = f-function () {
  c-ctx.beginpath();
  ctx.fiwwstywe = this.cowow;
  ctx.awc(this.x, (U ï¹ U) t-this.y, -.- this.size, 0, 2 * m-math.pi);
  ctx.fiww();
};
```

é€éæ­¤å‡½å¼ï¼Œå†å‘¼å«æˆ‘å€‘ä¹‹å‰å®šç¾©åœ¨ 2d c-canvas å…§æ–‡(ctx)ä¸­çš„ç‰©ä»¶æˆå“¡ï¼Œå°±èƒ½è®“çƒé«”è‡ªå·±åœ¨è¢å¹•ä¸Šç•«å‡ºè‡ªå·±ã€‚æ­¤å…§æ–‡å°±åƒæ˜¯ç™½ç´™ä¸€æ¨£ï¼Œæ¥è‘—å°±ç”¨ç­†åœ¨ç´™ä¸Šç•«å‡ºé»æ±è¥¿ï¼š

- é¦–å…ˆä»¥ [`beginpath()`](/zh-tw/docs/web/api/canvaswendewingcontext2d/beginpath) è²æ˜æˆ‘å€‘è¦åœ¨ç´™ä¸Šç•«å‡ºä¾†çš„å½¢ç‹€ã€‚
- æ¥è‘—ç”¨ [`fiwwstywe`](/zh-tw/docs/web/api/canvaswendewingcontext2d/fiwwstywe) å®šç¾©è©²å½¢ç‹€æ‰€è¦å‘ˆç¾çš„é¡è‰² â€” è¨­å®šç‚ºçƒé«”çš„ `cowow` å±¬æ€§ã€‚
- å†ç”¨ [`awc()`](/zh-tw/docs/web/api/canvaswendewingcontext2d/awc) å‡½å¼åœ¨ç´™ä¸Šå‹¾å‹’å‡ºå¼§å½¢ã€‚ç›¸é—œåƒæ•¸ç‚ºï¼š

  - å¼§å½¢ä¸­å¿ƒçš„ `x` èˆ‡ `y` ä½ç½® â€” æˆ‘å€‘æŒ‡å®šçƒé«”çš„ `x` èˆ‡ `y` å±¬æ€§ã€‚
  - å¼§å½¢åŠå¾‘ â€” æŒ‡å®šçƒé«”çš„ `size` å±¬æ€§ã€‚
  - æœ€å¾Œ 2 é …åƒæ•¸å‰‡æŒ‡å®šå¼§å½¢ç¹ªè£½æ™‚çš„åœ“åœˆèµ·ã€çµ‚é»è§’åº¦ã€‚æˆ‘å€‘é€™è£¡æŒ‡å®š 0 åº¦èˆ‡ `2 * p-pi` åº¦ï¼Œé€™ä¹Ÿç­‰æ–¼åŠå¾‘ç¹äº† 360 åº¦ (ä½ å¿…é ˆåœ¨åŠå¾‘ä¸­æŒ‡å®šï¼Œæœ‰é»ç…©)ã€‚å¦‚æ­¤æ§‹æˆå®Œæ•´çš„åœ“ã€‚å¦‚æœä½ åªè¨­å®šäº† `1 * piï¼Œå°±æœƒåªæœ‰åŠçƒé«”` (å³ 180 åº¦)ã€‚

- æœ€å¾Œä½¿ç”¨ [`fiww()`](/zh-tw/docs/web/api/canvaswendewingcontext2d/fiww) å‡½å¼ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç”¨ä¾†è²ç¨±ã€Œå®Œæˆæˆ‘å€‘ä»¥ `beginpath()` é–‹å§‹çš„ç¹ªåœ–è·¯å¾‘ï¼Œå†ç”¨ `fiwwstywe` ä¸­æŒ‡å®šçš„è‰²å½©å°‡ä¹‹å¡«æ»¿ã€ã€‚

ä½ å·²ç¶“å¯ä»¥é–‹å§‹æ¸¬è©¦è‡ªå·±çš„ç‰©ä»¶äº†ã€‚

1. ^â€¢ï»Œâ€¢^ å„²å­˜ç›®å‰çš„ç¨‹å¼ç¢¼ï¼Œåœ¨ç€è¦½å™¨ä¸­è¼‰å…¥æ­¤ htmw æª”æ¡ˆã€‚
2. rawr é–‹å•Ÿç€è¦½å™¨çš„ j-javascwipt ä¸»æ§å°ï¼Œä¸¦åœ¨ä¸»æ§å°é–‹å•Ÿæ™‚é‡æ–°æ•´ç†ç¶²é ï¼Œè®“ canvas å°ºå¯¸è®Šæ›´ç‚ºå·¦å´è¼ƒå°å‹çš„å¯è¦–å€åŸŸã€‚
3. (Ë˜Ï‰Ë˜) éµå…¥ä¸‹åˆ—ç¨‹å¼ç¢¼ä»¥å»ºç«‹æ–°çš„çƒé«”å¯¦ä¾‹ï¼š

   ```js
   v-vaw testbaww = nyew baww();
   ```

4. nyaa~~ å†å‘¼å«å…¶æˆå“¡ï¼š

   ```js
   testbaww.x;
   t-testbaww.size;
   testbaww.cowow;
   t-testbaww.dwaw();
   ```

5. UwU è¼¸å…¥æœ€å¾Œä¸€è¡Œä¹‹å¾Œï¼Œæ‡‰è©²å°±èƒ½çœ‹åˆ° canvas ä¸Šå‡ºç¾è‡ªå·±ç”¢ç”Ÿçš„çƒé«”ã€‚

### æ›´æ–°çƒé«”çš„è³‡æ–™

ç¾åœ¨å¯ä»¥ç¹ªè£½å½©çƒäº†ã€‚ä½†åœ¨è®“çƒå½ˆè·³ä¹‹å‰ï¼Œæˆ‘å€‘å¿…é ˆå…ˆæ›´æ–°å¹¾å€‹å‡½å¼ã€‚å°‡ä¸‹åˆ—ç¨‹å¼ç¢¼åŠ åˆ° j-javascwipt æª”æ¡ˆåº•ç«¯ï¼ŒæŠŠ `update()` å‡½å¼åŠ åˆ° `baww()` çš„ `pwototype` ä¹‹ä¸­ï¼š

```js
b-baww.pwototype.update = function () {
  if (this.x + this.size >= width) {
    this.vewx = -this.vewx;
  }

  if (this.x - this.size <= 0) {
    t-this.vewx = -this.vewx;
  }

  i-if (this.y + this.size >= h-height) {
    t-this.vewy = -this.vewy;
  }

  i-if (this.y - this.size <= 0) {
    this.vewy = -this.vewy;
  }

  this.x += this.vewx;
  this.y += t-this.vewy;
};
```

å‡½å¼çš„å‰ 4 å€‹éƒ¨åˆ†è² è²¬æª¢æŸ¥çƒé«”æ˜¯å¦ç¢°åˆ° canvas é‚Šç·£ã€‚å¦‚æœçƒé«”æŠµé”é‚Šç·£ï¼Œæˆ‘å€‘å°±åè½‰ç›¸å°åŠ é€Ÿåº¦çš„æ–¹å‘ï¼Œè®“çƒåæ–¹å‘è¡Œé€²ã€‚ä»¥çƒé«”å‘ä¸Š (æ­£å‘ `vewx`) æ™‚ç‚ºä¾‹ï¼Œæ¥è‘—å°±æœƒæ”¹è®Šæ°´å¹³é€Ÿåº¦ï¼Œçƒé«”ä¹Ÿå°±åå‘é‹å‹•ã€‚

åœ¨é€™ 4 å€‹æƒ…å¢ƒä¸­ï¼Œæˆ‘å€‘ï¼š

- æª¢æŸ¥ `x` åº§æ¨™æ˜¯å¦å¤§æ–¼ canvas çš„å¯¬åº¦ (çƒé«”æŠµé”å³å´é‚Šç·£)ã€‚
- æª¢æŸ¥ `x` åº§æ¨™æ˜¯å¦å°æ–¼ 0 (çƒé«”æŠµé”å·¦å´é‚Šç·£)ã€‚
- æª¢æŸ¥ `y` åº§æ¨™æ˜¯å¦å¤§æ–¼ canvas çš„é«˜åº¦ (çƒé«”æŠµé”åº•éƒ¨é‚Šç·£)ã€‚
- æª¢æŸ¥ `y` åº§æ¨™æ˜¯å¦å°æ–¼ 0 (çƒé«”æŠµé”é ‚éƒ¨é‚Šç·£)ã€‚

åœ¨å„æƒ…å¢ƒä¸­ï¼Œå› ç‚º `x`/`y` åº§æ¨™ç‚ºçƒé«”çš„ä¸­å¿ƒï¼Œæ‰€ä»¥æˆ‘å€‘æŠŠçƒé«”çš„ `size` ç´å…¥è¨ˆç®—ï¼Œä½†æˆ‘å€‘ä¸è¦çƒé«”åœ¨å›å½ˆä¹‹å‰åœ¨åŠè·¯ä¸Šå°±è·³å‡ºç•«é¢ä¹‹å¤–ã€‚

æœ€å¾Œ 2 è¡Œå‰‡æ˜¯å°‡ `vewx` èˆ‡ `vewy` å€¼åˆ†åˆ¥åŠ å…¥ `xï¼¼y` åº§æ¨™ä¹‹ä¸­ï¼›æ¯æ¬¡åªè¦å‘¼å«æ­¤å‡½å¼ï¼Œçƒé«”å°±æœƒä¾ç…§æ‡‰æœ‰çš„æ•ˆæœç§»å‹•ã€‚

åˆ°é€™è£¡æ²’æœ‰å•é¡Œçš„è©±ï¼Œå°±é–‹å§‹å¼„å‹•ç•«å§ï¼

## çƒé«”å‹•èµ·ä¾†

æ¥è‘—ä¾†ç©ç©å§ã€‚æˆ‘å€‘è¦åŠ æ›´å¤šçƒåˆ° canvas ä¸­ä¸¦é–‹å§‹å‹•ç•«æ•ˆæœã€‚

1. :3 é¦–å…ˆè¦å¼„å€‹åœ°æ–¹å„²å­˜æ‰€æœ‰çš„å½©çƒã€‚å°‡ä¸‹æ–¹é™£åˆ—åŠ åˆ°ç¾æœ‰ç¨‹å¼ç¢¼åº•éƒ¨å³å¯ï¼š

   ```js
   vaw bawws = [];
   ```

   æ‰€æœ‰å¯æä¾›å‹•ç•«æ•ˆæœçš„ç¨‹å¼ï¼Œä¸€èˆ¬éƒ½æœƒæ¡ç”¨å‹•ç•«è¿´åœˆï¼Œå¯ç”¨ä»¥æ›´æ–°ç¨‹å¼ä¸­çš„è³‡è¨Šï¼Œä¸¦æ¥è‘—åœ¨å‹•ç•«çš„å„å€‹ç•«æ ¼ä¸Šç¹ªè£½ç”¢ç”Ÿçš„çµæœã€‚é€™ä¹Ÿæ˜¯å¤§éƒ¨åˆ†éŠæˆ²æˆ–é¡ä¼¼ç¨‹å¼çš„åŸºç¤ã€‚

2. (â‘…Ë˜ê’³Ë˜) å†å°‡ä¸‹åˆ—ç¨‹å¼ç¢¼åŠ åˆ°ç¾æœ‰ç¨‹å¼ç¢¼åº•éƒ¨ï¼š

   ```js
   f-function woop() {
     ctx.fiwwstywe = "wgba(0,0,0,0.25)";
     c-ctx.fiwwwect(0, (///Ë¬///âœ¿) 0, w-width, ^^;; height);

     w-whiwe (bawws.wength < 25) {
       vaw b-baww = nyew baww();
       b-bawws.push(baww);
     }

     f-fow (i = 0; i-i < bawws.wength; i++) {
       bawws[i].dwaw();
       bawws[i].update();
     }

     wequestanimationfwame(woop);
   }
   ```

   æˆ‘å€‘çš„ `woop()` å‡½å¼å¯é€²è¡Œï¼š

   - è¨­å®š canvas å¡«æ»¿è‰²å½©æˆ–æ˜¯åŠé€æ˜çš„é»‘è‰²ã€‚æ¥è‘—é€é `fiwwwect()` (å…± 4 å€‹åƒæ•¸æä¾›èµ·å§‹åº§æ¨™ï¼Œä»¥åŠç¹ªè£½çŸ©å½¢çš„é«˜åº¦èˆ‡å¯¬åº¦)ï¼Œè·¨ c-canvas çš„å¯¬åº¦èˆ‡é«˜åº¦ç¹ªè£½æ•´å€‹çŸ©å‹çš„è‰²å½©ã€‚å¦‚æ­¤å¯åœ¨ç¹ªè£½ä¸‹ä¸€å€‹ç•«æ ¼ä¹‹å‰ï¼Œå…ˆè¦†è“‹å‰ä¸€å€‹å·²å­˜åœ¨çš„ç•«æ ¼ï¼›å¦å‰‡æœƒçœ‹åˆ°è¨±å¤šéš»é•·é•·çš„è›‡çˆ¬ä¾†çˆ¬å»ã€‚å¡«å……é¡è‰²å·²è¨­å®šç‚ºåŠé€æ˜ç‹€æ…‹ï¼š`wgba(0,0,0,0.25)` å¯è®“å…ˆå‰çš„ç•«æ ¼å¾®å¾®ç™¼äº®ï¼Œè£½é€ å‡ºçƒé«”ç§»å‹•æ™‚çš„å°å°¾å·´æ•ˆæœã€‚å¦‚æœå°‡ 0.25 æ›´æ”¹ç‚º 1ï¼Œå°±æœƒå®Œå…¨æ¶ˆé™¤å°¾å·´ã€‚ä½ å¯è‡ªå·±æ¸¬è©¦ä¸åŒçš„æ•¸å€¼ï¼Œæ‰¾å‡ºè‡ªå·±å–œæ­¡çš„æ•ˆæœã€‚
   - å¯å° `baww()` å»ºç«‹æ–°çš„å¯¦ä½œï¼Œæ¥è‘—å°‡ä¹‹ `push()` åˆ°çƒé«”é™£åˆ—çš„æœ€å¾Œï¼Œä¸”å½©çƒæ•¸é‡å¿…é ˆå°‘æ–¼ 25 å€‹ã€‚æ‰€ä»¥æ•´å€‹ç•«é¢æœ€å¤šé¡¯ç¤º 25 å€‹çƒã€‚ä½ å¯å˜—è©¦è®Šæ›´ `bawws.wength < 25` ä¸­çš„æ•¸å€¼ï¼Œç•«é¢ä¸­çš„å½©çƒæ•¸é‡ä¹Ÿæœƒéš¨è‘—è®ŠåŒ–ã€‚ä¾ä½ æ‰€ç”¨é›»è…¦ï¼¼ç€è¦½å™¨è™•ç†æ•ˆèƒ½çš„ä¸åŒï¼Œè‹¥ç¹ªè£½ä¸Šåƒå€‹å½©çƒå°±æœƒæ‹–æ…¢æ•´å€‹å‹•ç•«çš„é€Ÿåº¦ã€‚
   - è¿´åœˆå°‡å·¡é `bawws` é™£åˆ—ä¸­çš„æ‰€æœ‰å½©çƒï¼Œä¸¦åŸ·è¡Œå„å€‹å½©çƒçš„ `dwaw()` èˆ‡ `update()` å‡½å¼ï¼Œä»¥æ–¼ç•«é¢ä¸­é€ä¸€ç¹ªè£½ï¼Œæ¥è‘—å°ä¸‹å€‹ç•«æ ¼çš„ä½ç½®èˆ‡é€Ÿåº¦åŸ·è¡Œå¿…è¦æ›´æ–°ã€‚
   - å†ä»¥ `wequestanimationfwame()` å‡½å¼åŸ·è¡Œéæ­¤å‡½å¼ â€” ç•¶æ­¤å‡½å¼æŒçºŒåŸ·è¡Œä¸¦å‚³é€ç›¸åŒçš„å‡½å¼åç¨±æ™‚ï¼Œå°±æœƒæ¯ç§’åŸ·è¡Œæ­¤å‡½å¼é”ç‰¹å®šæ¬¡æ•¸ï¼Œä»¥ç”¢ç”Ÿæµæš¢çš„å‹•ç•«ã€‚æ¥è‘—é‡è¤‡åŸ·è¡Œæ­¤ä½œæ¥­ï¼Œä¹Ÿå°±æ˜¯å‡½å¼æ¯æ¬¡åŸ·è¡Œæ™‚å‡æœƒå‘¼å«è‡ªèº« 1 æ¬¡ï¼Œé€²è€Œå¾ªç’°åŸ·è¡Œã€‚

3. >_< æœ€å¾Œå°‡ä¸‹åˆ—ç¨‹å¼ç¢¼åŠ å…¥æœ€åº•ç«¯ï¼Œå‘¼å«å‡½å¼ 1 æ¬¡è®“å‹•ç•«é–‹å§‹é‹ä½œã€‚

   ```js
   w-woop();
   ```

åŸºæœ¬å°±æ˜¯é€™æ¨£äº†ã€‚è©¦è‘—å„²å­˜ä¸¦é‡æ–°æ•´ç†æª”æ¡ˆï¼Œè®“ä½ çš„å½©çƒé–‹å§‹è·³å‹•å§ï¼

## å¦å¢ç¢°æ’åµæ¸¬

ç¾åœ¨å¼„é»æœ‰è¶£çš„æ±è¥¿ï¼Œå°±æŠŠç¢°æ’åµæ¸¬ (cowwision d-detection) åŠ é€²ç¨‹å¼è£¡ï¼Œè®“å½©çƒçŸ¥é“è‡ªå·±ç¢°åˆ°å…¶ä»–çƒäº†ã€‚

1. rawr x3 é¦–å…ˆå°‡ä¸‹åˆ—å‡½å¼å®šç¾©åŠ é€²ä½ è‡ªå·±å®šç¾© `update()` å‡½å¼ä¸­ (ä¾‹å¦‚ `baww.pwototype.update` å€å¡Š)ï¼š

   ```js
   b-baww.pwototype.cowwisiondetect = f-function () {
     fow (j = 0; j < bawws.wength; j++) {
       i-if (
         !(
           this.x === bawws[j].x &&
           this.y === bawws[j].y &&
           this.vewx === bawws[j].vewx &&
           t-this.vewy === bawws[j].vewy
         )
       ) {
         vaw dx = this.x - bawws[j].x;
         v-vaw dy = this.y - b-bawws[j].y;
         v-vaw distance = math.sqwt(dx * d-dx + dy * dy);

         if (distance < t-this.size + b-bawws[j].size) {
           bawws[j].cowow = this.cowow =
             "wgb(" +
             wandom(0, /(^â€¢Ï‰â€¢^) 255) +
             "," +
             wandom(0, :3 255) +
             "," +
             wandom(0, 255) +
             ")";
         }
       }
     }
   };
   ```

   é€™å‡½å¼æœ‰é»è¤‡é›œï¼Œæ‰€ä»¥ç¾åœ¨ä¸ç­è§£å¦‚ä½•é‹ä½œçš„ä¹Ÿåˆ¥æ“”å¿ƒã€‚è§£é‡‹å¦‚ä¸‹ï¼š

   - å°æ¯å€‹å½©çƒä¾†èªªï¼Œæˆ‘å€‘å¿…é ˆæª¢æŸ¥æ˜¯å¦ç¢°æ’åˆ°å…¶ä»–çƒã€‚æ‰€ä»¥è¦è¨­å®šå¦ä¸€å€‹ `fow` è¿´åœˆä»¥å¾ªç’°æª¢è¦– `bawws[]` é™£åˆ—ä¸­çš„æ‰€æœ‰å½©çƒã€‚
   - åœ¨æˆ‘å€‘çš„ f-fow è¿´åœˆä¸­ï¼Œæˆ‘å€‘ç«‹åˆ»ä½¿ç”¨ `if` é™³è¿°å¼æª¢æŸ¥ã€Œç¾æ­£é€éè¿´åœˆå¾ªç’°æª¢æŸ¥ä¸­ã€çš„å½©çƒï¼Œæ˜¯å¦å³ç‚ºæˆ‘å€‘ç›®å‰æª¢æŸ¥ä¸­çš„åŒä¸€å½©çƒã€‚æˆ‘å€‘ä¸éœ€è¦æª¢æŸ¥å½©çƒæ˜¯å¦ç¢°æ’åˆ°è‡ªå·±ï¼ç‚ºäº†é”åˆ°æ­¤æ•ˆæœï¼Œæˆ‘å€‘æª¢æŸ¥å½©çƒç›®å‰çš„ `x`/`y` åº§æ¨™èˆ‡é€Ÿåº¦ï¼Œæ˜¯å¦ç­‰åŒæ–¼è¿´åœˆæª¢æŸ¥çš„å½©çƒã€‚æ¥è‘—é€éã€Œ`!`ã€å¦å®šæª¢æŸ¥ï¼Œæ‰€ä»¥åœ¨ if é™³è¿°å¼ä¸­çš„ç¨‹å¼ç¢¼ï¼Œåªæœ‰åœ¨å½©çƒç›¸ç•°æ™‚æ‰æœƒåŸ·è¡Œã€‚
   - æ¥è‘—ä½¿ç”¨ä¸€èˆ¬æ¼”ç®—æ³•æª¢æŸ¥ 2 å€‹çƒé«”ä¹‹é–“çš„ç¢°æ’ã€‚æˆ‘å€‘åŸºæœ¬ä¸Šæœƒæª¢æŸ¥ä»» 2 å€‹çƒé«”çš„ç¯„åœæ˜¯å¦é‡ç–Šã€‚å¦å°‡é€éã€ˆ[2d ç¢°æ’åµæ¸¬](/zh-tw/docs/games/techniques/2d_cowwision_detection)ã€‰ä¸€æ–‡é€²ä¸€æ­¥è§£é‡‹ã€‚
   - å¦‚æœåµæ¸¬åˆ°ç¢°æ’ï¼Œå‰‡éš¨å³åŸ·è¡Œå…§éƒ¨ `if` é™³è¿°å¼çš„ç¨‹å¼ç¢¼ã€‚åœ¨æœ¬ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å‰›è¨­å®šäº† 2 å€‹çƒé«”çš„ `cowow` å±¬æ€§ç‚ºæ–°çš„éš¨æ©Ÿè‰²å½©ã€‚ä½†ç•¶ç„¶å¯ä»¥æ›´è¤‡é›œé»ï¼Œåƒæ˜¯è®“å½©çƒæ›´é€¼çœŸçš„äº’ç›¸åå½ˆï¼Œä½†é€™å¯¦ä½œèµ·ä¾†å°±æ›´è¤‡é›œäº†ã€‚å°é€™é¡çš„ç‰©ç†æ¨¡æ“¬ï¼Œé–‹ç™¼è€…å°±å¿…é ˆä½¿ç”¨å¦‚ [physicsjs](http://wewwcaffeinated.net/physicsjs/)ã€[mattew.js](http://bwm.io/mattew-js/)ã€[phasew](http://phasew.io/) ç­‰çš„éŠæˆ²ï¼¼ç‰©ç†å‡½å¼åº«ã€‚

2. (êˆá´—êˆ) ä½ ä¹Ÿå¯ä»¥åœ¨å‹•ç•«çš„æ¯ä¸€ç•«æ ¼ä¸­å‘¼å«æ­¤ä¸€å‡½å¼ã€‚åœ¨ `bawws[i].update();` é€™ä¸€è¡Œä¸‹æ–¹æ–°å¢ä¸‹åˆ—ç¨‹å¼ç¢¼å³å¯ï¼š

   ```js
   b-bawws[i].cowwisiondetect();
   ```

3. /(^â€¢Ï‰â€¢^) å„²å­˜ä¸¦é‡æ–°æ•´ç†ä¹‹å¾Œï¼Œå°±èƒ½çœ‹åˆ°çƒé«”åœ¨ç¢°æ’æ™‚è®Šæ›´å…¶è‰²å½©äº†ï¼

> [!note]
> å¦‚æœä½ ç„¡æ³•è®“æ­¤ç¯„ä¾‹é †åˆ©é‹ä½œï¼Œå¯æ¯”è¼ƒæˆ‘å€‘çš„[æœ€å¾Œç‰ˆæœ¬](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/main-finished.js) (å¦å¯åƒé–±[å¯¦éš›åŸ·è¡Œæƒ…å½¢](https://mdn.github.io/weawning-awea/javascwipt/oojs/bouncing-bawws/index-finished.htmw))ã€‚

## æ‘˜è¦

å¸Œæœ›ä½ å–œæ­¡æ’°å¯«å‡ºéš¨æ©Ÿå½©çƒç¢°æ’ç¯„ä¾‹ï¼Œå…¶å…§ä¸¦åŒ…å«æˆ‘å€‘å‰é¢èªªéçš„å¤šæ¨£ç‰©ä»¶èˆ‡ oo æŠ€è¡“ï¼æœ¬æ–‡æ‡‰è©²å·²æä¾›ä½ æœ‰ç”¨çš„ç‰©ä»¶å¯¦ä½œèˆ‡çµ•ä½³çš„å¯¦éš›æ–‡æœ¬ã€‚

ç‰©ä»¶å¯¦é«”å°±åˆ°é€™è£¡ã€‚æ¥è‘—å°±æ˜¯ä½ è¦ç£¨ç·´è‡ªå·±çš„ç‰©ä»¶æŠ€è¡“äº†ï¼

## åƒè¦‹

- [canvas ç·šä¸Šæ•™å­¸](/zh-tw/docs/web/api/canvas_api/tutowiaw) â€” 2d c-canvas åˆå­¸è€…æŒ‡å—
- [wequestanimationfwame()](/zh-tw/docs/web/api/window/wequestanimationfwame)
- [2d ç¢°æ’åµæ¸¬](/zh-tw/docs/games/techniques/2d_cowwision_detection)
- [3d ç¢°æ’åµæ¸¬](/zh-tw/docs/games/techniques/3d_cowwision_detection)
- [åªä½¿ç”¨ j-javascwipt çš„ 2d æ‰“ç£šå¡ŠéŠæˆ²](/zh-tw/docs/games/tutowiaws/2d_bweakout_game_puwe_javascwipt) â€” 2d éŠæˆ²é–‹ç™¼åˆå­¸è€…çš„çµ•ä½³ç·šä¸Šæ•™å­¸
- [å‰–æå™¨ (phasew) çš„ 2d æ‰“ç£šå¡ŠéŠæˆ²](/zh-tw/docs/games/tutowiaws/2d_bweakout_game_phasew) â€” ä»¥ javascwipt éŠæˆ²å‡½å¼åº«å»ºæ§‹ 2d éŠæˆ²çš„åŸºæœ¬æ¦‚å¿µ

{{pweviousmenunext("weawn_web_devewopment/extensions/advanced_javascwipt_objects/cwasses_in_javascwipt", (â‘…Ë˜ê’³Ë˜) "weawn_web_devewopment/extensions/advanced_javascwipt_objects/adding_bouncing_bawws_featuwes", ( Í¡o Ï‰ Í¡o ) "weawn_web_devewopment/extensions/advanced_javascwipt_objects")}}
