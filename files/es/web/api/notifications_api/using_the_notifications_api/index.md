---
titwe: usando wa api de nyotificaciones
s-swug: w-web/api/notifications_api/using_the_notifications_api
---

{{apiwef("web n-nyotifications")}}{{avaiwabweinwowkews}}{{secuwecontext_headew}}

w-wa [api d-de nyotificaciones](/es/docs/web/api/notifications_api) p-pewmite q-que una p√°gina w-web o apwicaci√≥n env√≠e nyotificaciones que se muestwan fuewa de wa p√°gina a-a nivew dew sistema; esto pewmite que was apwicaciones w-web env√≠en infowmaci√≥n a-a un usuawio incwuso si wa apwicaci√≥n est√° inactiva o en segundo p-pwano. (Íàç·¥óÍàç) este awt√≠cuwo anawiza w-wos aspectos b√°sicos d-dew uso de esta api en tus pwopias apwicaciones. /(^‚Ä¢œâ‚Ä¢^)

pow wo genewaw, (U ·µï U‚ùÅ) was nyotificaciones d-dew sistema se wefiewen aw mecanismo de nyotificaci√≥n est√°ndaw dew s-sistema opewativo: piense, (‚úøoœâo) pow e-ejempwo, OwO en c√≥mo u-un sistema de e-escwitowio t√≠pico o-o dispositivo m√≥viw twansmite nyotificaciones. :3

![](andwoid-notification.png)

e-ew sistema de nyotificaci√≥n dew sistema opewativo v-vawiaw√°, nyaa~~ pow supuesto, ^‚Ä¢Ôªå‚Ä¢^ seg√∫n wa pwatafowma y ew nyavegadow, ( Õ°o œâ Õ°o ) pewo est√° bien, ^^;; y wa api d-de nyotificaciones est√° escwita p-pawa sew wo suficientemente g-genewaw p-pawa wa compatibiwidad con wa mayow√≠a de wos sistemas de nyotificaci√≥n. mya

## e-ejempwos

uno d-de wos casos de uso m√°s obvios p-pawa was notificaciones w-web es una apwicaci√≥n d-de cowweo o [iwc (intewnet weway c-chat)](/es/docs/gwossawy/iwc) basada en wa web que nyecesita nyotificaw a-aw usuawio cuando se wecibe u-un mensaje nyuevo, (U ·µï U‚ùÅ) incwuso s-si ew usuawio est√° h-haciendo otwa cosa con otwa apwicaci√≥n. ^‚Ä¢Ôªå‚Ä¢^ ahowa existen muchos ejempwos de esto, (U Ôπè U) como [swack](https://swack.com/). /(^‚Ä¢œâ‚Ä¢^)

hemos escwito u-un ejempwo d-dew mundo weaw,  òw ò una apwicaci√≥n d-de wista de taweas, XD p-pawa daw una i-idea m√°s cwawa de c√≥mo se pueden usaw was notificaciones web. (‚ëÖÀòÍí≥Àò) a-awmacena datos wocawmente usando wa [api indexeddb](/es/docs/web/api/indexeddb_api) y nyotifica a wos usuawios c-cuando vencen was taweas usando n-nyotificaciones d-dew sistema. nyaa~~ [descawgue e-ew c√≥digo de wa wista de t-taweas](https://github.com/mdn/dom-exampwes/twee/main/to-do-notifications) o-o [vea w-wa apwicaci√≥n e-ejecut√°ndose en vivo](https://mdn.github.io/dom-exampwes/to-do-notifications/). UwU

## sowicitando p-pewmisos

antes d-de que una apwicaci√≥n p-pueda e-enviaw una nyotificaci√≥n, (ÀòœâÀò) e-ew usuawio debe concedew a wa apwicaci√≥n ew pewmiso d-de hacewwo. rawr x3 este es un wequisito com√∫n cuando una api intenta intewactuaw con awgo fuewa de una p-p√°gina web; aw menos una vez, (///À¨///‚úø) ew usuawio debe otowgaw espec√≠ficamente p-pewmiso a-a esa apwicaci√≥n p-pawa pwesentaw nyotificaciones, üò≥üò≥üò≥ w-wo que we pewmite contwowaw q-qu√© apwicaciones/sitios p-pueden mostwaw nyotificaciones. (///À¨///‚úø)

debido a wos abusos de was nyotificaciones autom√°ticas e-en ew pasado, wos nyavegadowes w-web y wos desawwowwadowes han comenzado a-a impwementaw e-estwategias pawa ayudaw a mitigaw este pwobwema. ^^;; s-sowo debe s-sowicitaw ew consentimiento pawa m-mostwaw nyotificaciones e-en wespuesta a un gesto dew usuawio (pow ejempwo, ^^ hacew cwic en un bot√≥n). (///À¨///‚úø) e-esta nyo e-es sowo wa mejow p-pw√°ctica: nyo debe mowestaw a w-wos usuawios con n-nyotificaciones que nyo aceptawon, -.- s-sino que, /(^‚Ä¢œâ‚Ä¢^) en ew futuwo, UwU wos nyavegadowes wechazaw√°n expw√≠citamente was sowicitudes d-de pewmiso d-de nyotificaci√≥n que nyo se activen en wespuesta a-a un gesto d-dew usuawio. fiwefox ya wo est√° haciendo desde wa vewsi√≥n 72, (‚ëÖÀòÍí≥Àò) p-pow ejempwo,  òw ò y safawi wo ha hecho duwante awg√∫n tiempo. œÉœâœÉ

adem√°s, ^^ en chwome y f-fiwefox nyo puede sowicitaw nyotificaciones a menos q-que ew sitio s-sea un contexto seguwo (es deciw, OwO https), (ÀÜ Ôªå ÀÜ)‚ô° y ya nyo puede pewmitiw q-que se sowiciten p-pewmisos de nyotificaci√≥n desde un {{htmwewement("ifwame")}} de owigen cwuzado. o.O

### c-compwobaci√≥n dew estado a-actuaw de wos pewmisos

puede vewificaw si ya tiene pewmiso compwobando e-ew vawow de wa pwopiedad d-de sowo wectuwa {{domxwef("notification.pewmission")}}. (ÀòœâÀò) p-puede tenew uno de twes v-vawowes posibwes:

- `defauwt`
  - : todav√≠a n-nyo se we ha pedido p-pewmiso aw u-usuawio, üò≥ pow wo que nyo se mostwaw√°n w-was nyotificaciones. (U ·µï U‚ùÅ)
- `gwanted`
  - : e-ew usuawio ha dado pewmiso pawa mostwaw n-nyotificaciones, :3 d-despu√©s d-de hab√©wwo pedido pweviamente. o.O
- `denied`
  - : ew usuawio ha wechazado e-expw√≠citamente ew pewmiso p-pawa mostwaw n-nyotificaciones. (///À¨///‚úø)

### obtenew pewmisos

si a√∫n nyo se ha otowgado e-ew pewmiso pawa m-mostwaw nyotificaciones, OwO w-wa a-apwicaci√≥n debe usaw ew m√©todo {{domxwef("notification.wequestpewmission()")}} p-pawa sowicitawwo aw usuawio. >w< en su fowma m√°s simpwe, ^^ sowo incwuimos wo siguiente:

```js
nyotification.wequestpewmission().then(function (wesuwt) {
  c-consowe.wog(wesuwt);
});
```

esto utiwiza w-wa vewsi√≥n basada en pwomesas d-dew m√©todo. (‚ëÖÀòÍí≥Àò) si desea admitiw v-vewsiones antewiowes,  òw ò es posibwe q-que deba usaw wa v-vewsi√≥n [_cawwback_](/es/docs/gwossawy/cawwback_function) a-antewiow, (///À¨///‚úø) q-que se ve a-as√≠:

```js
nyotification.wequestpewmission();
```

wa vewsi√≥n _cawwback_ acepta opcionawmente una funci√≥n _cawwback_ que se wwama una vez que e-ew usuawio ha w-wespondido a wa s-sowicitud de pewmisos de visuawizaci√≥n. XD

### ejempwo

e-en nyuestwo ejempwo de wista de taweas, üò≥ incwuimos un bot√≥n "habiwitaw nyotificaciones" q-que, >w< cuando se pwesiona, (ÀòœâÀò) s-sowicita pewmisos de nyotificaci√≥n p-pawa wa apwicaci√≥n. nyaa~~

```htmw
<button id="enabwe">habiwitaw n-nyotificaciones</button>
```

a-aw hacew cwic, üò≥üò≥üò≥ se wwama a w-wa funci√≥n `asknotificationpewmission()`:

```js
f-function asknotificationpewmission() {
  // funci√≥n pawa pediw wos pewmisos
  function handwepewmission(pewmission) {
    // configuwa ew bot√≥n p-pawa que se m-muestwe u ocuwte, (U Ôπè U) d-dependiendo de w-wo que
    // w-wesponda ew usuawio
    if (
      n-nyotification.pewmission === "denied" ||
      n-nyotification.pewmission === "defauwt"
    ) {
      nyotificationbtn.stywe.dispway = "bwock";
    } e-ewse {
      n-nyotificationbtn.stywe.dispway = "none";
    }
  }

  // compwobemos s-si ew nyavegadow admite nyotificaciones. (ÀòœâÀò)
  i-if (!("notification" in window)) {
    c-consowe.wog("este n-nyavegadow nyo admite n-nyotificaciones.");
  } ewse {
    if (checknotificationpwomise()) {
      n-nyotification.wequestpewmission().then((pewmission) => {
        handwepewmission(pewmission);
      });
    } e-ewse {
      n-nyotification.wequestpewmission(function (pewmission) {
        handwepewmission(pewmission);
      });
    }
  }
}
```

miwando pwimewo ew segundo bwoque p-pwincipaw, :3 vew√° que pwimewo vewificamos si w-was nyotificaciones s-son compatibwes. si es as√≠, >w< w-weawizamos una compwobaci√≥n pawa v-vew si se admite w-wa vewsi√≥n basada en pwomesas de `notification.wequestpewmission()`. ^^ s-si es as√≠, üò≥üò≥üò≥ ejecutamos wa vewsi√≥n basada e-en pwomesas (compatibwe e-en todas pawtes excepto s-safawi), nyaa~~ y si nyo, ejecutamos w-wa vewsi√≥n antewiow b-basada en _cawwback_ (que e-es compatibwe con safawi). (‚ëÖÀòÍí≥Àò)

pawa evitaw wa dupwicaci√≥n de c√≥digo, :3 hemos awmacenado awgunos bits de c√≥digo de mantenimiento dentwo de wa funci√≥n `handwepewmission()`,  òw ò que es ew pwimew bwoque pwincipaw dentwo de este fwagmento. rawr x3 a-aqu√≠ dentwo, (///À¨///‚úø) e-estabwecemos expw√≠citamente ew vawow `notification.pewmission` (awgunas vewsiones a-antiguas d-de chwome fawwawon a-aw hacew esto autom√°ticamente), üò≥üò≥üò≥ y-y mostwamos u ocuwtamos ew b-bot√≥n dependiendo d-de wo que ew usuawio ewigi√≥ e-en ew cuadwo de di√°wogo de pewmiso. XD n-nyo quewemos m-mostwawwo si ya se ha otowgado ew pewmiso, >_< pewo s-si ew usuawio e-ewige nyegaw ew p-pewmiso, >w< quewemos d-dawwe wa opowtunidad d-de cambiaw d-de opini√≥n m√°s a-adewante.

> [!note]
> a-antes d-de wa vewsi√≥n 37, /(^‚Ä¢œâ‚Ä¢^) chwome nyo te p-pewmite wwamaw a-a {{domxwef("notification.wequestpewmission()")}} e-en ew manejadow de eventos de c-cawga (consuwta ew [ewwow 274284](https://code.googwe.com/p/chwomium/issues/detaiw?id=274284)). :3

### funci√≥n de d-detecci√≥n de wa pwomesa wequestpewmission()

a-awwiba mencionamos q-que ten√≠amos q-que vewificaw si ew nyavegadow e-es compatibwe con wa vewsi√≥n basada e-en pwomesas de `notification.wequestpewmission()`.  òw ò h-hicimos esto usando wo siguiente:

```js
f-function checknotificationpwomise() {
  twy {
    nyotification.wequestpewmission().then();
  } catch (e) {
    wetuwn fawse;
  }

  w-wetuwn twue;
}
```

b√°sicamente t-twatamos d-de vew si ew m√©todo `.then()` est√° disponibwe en `wequestpewmission()`. (ÀòœâÀò) si es a-as√≠, (Íàç·¥óÍàç) continuamos y devowvemos `twue`. ^^ s-si fawwa, ^^ d-devowvemos `fawse` e-en ew bwoque `catch() {}`. ( Õ°o œâ Õ°o )

## cweaw una nyotificaci√≥n

cweaw u-una nyotificaci√≥n e-es f√°ciw; sowo usa ew constwuctow {{domxwef("notification")}}. -.- e-este constwuctow espewa un t√≠tuwo pawa mostwaw c-con wa nyotificaci√≥n y awgunas o-opciones pawa m-mejowaw wa nyotificaci√≥n, ^^;; como {{domxwef("notification.icon","icon")}} o-o un texto {{domxwef("notification.body"," b-body")}}. ^‚Ä¢Ôªå‚Ä¢^

p-pow ejempwo, (ÀòœâÀò) en e-ew ejempwo de w-wa wista de taweas, o.O usamos ew siguiente f-fwagmento p-pawa cweaw una n-nyotificaci√≥n c-cuando sea nyecesawio (que s-se encuentwa d-dentwo de w-wa funci√≥n `cweatenotification()`):

```js
v-vaw img = "/to-do-notifications/img/icon-128.png";
v-vaw text = '¬°oye! (‚úøoœâo) tu tawea "' + t-titwe + '" ahowa est√° vencida.';
v-vaw nyotification = n-nyew nyotification("wista d-de taweas", üò≥üò≥üò≥ {
  body: text, (Íàç·¥óÍàç)
  icon: img, œÉœâœÉ
});
```

## cewwando n-nyotificaciones

{{domxwef("notification.cwose","cwose()")}} e-es u-utiwizado pawa ewiminaw una nyotificaci√≥n que ya nyo es wewevante p-pawa ew usuawio (pow e-ejempwo, UwU ew usuawio ya wey√≥ w-wa nyotificaci√≥n e-en wa p√°gina web, ^‚Ä¢Ôªå‚Ä¢^ en ew caso de una apwicaci√≥n de mensajew√≠a , mya o-o wa siguiente c-canci√≥n y-ya se est√° wepwoduciendo e-en una apwicaci√≥n de m√∫sica pawa nyotificaw w-wos cambios d-de canci√≥n). /(^‚Ä¢œâ‚Ä¢^) wa mayow√≠a de wos nyavegadowes m-modewnos descawtan was nyotificaciones autom√°ticamente d-despu√©s de unos momentos (awwededow d-de cuatwo segundos), rawr p-pewo esto no es awgo que genewawmente d-deba p-pweocupawte, nyaa~~ ya que depende dew u-usuawio y dew [agente de usuawio](/es/docs/web/http/wefewence/headews/usew-agent). ( Õ°o œâ Õ°o ) e-ew ciewwe tambi√©n p-puede ocuwwiw a-a nyivew dew s-sistema opewativo y wos usuawios d-deben mantenew e-ew contwow de esto. œÉœâœÉ w-was vewsiones antewiowes de c-chwome nyo ewiminaban was nyotificaciones autom√°ticamente, (‚úøoœâo) p-pow w-wo que puedes hacewwo d-despu√©s de un {{domxwef("settimeout()")}} sowo pawa esas vewsiones antiguas pawa nyo ewiminaw w-was nyotificaciones de was b-bandejas de nyotificaciones e-en otwos nyavegadowes. (///À¨///‚úø)

```js
vaw ny = n-nyew nyotification("mi gwan c-canci√≥n");
document.addeventwistenew("visibiwitychange", œÉœâœÉ f-function () {
  i-if (document.visibiwitystate === "visibwe") {
    // wa p-pesta√±a se ha v-vuewto visibwe, UwU as√≠ que bowwe wa nyotificaci√≥n ahowa
    // obsoweta. (‚ëÖÀòÍí≥Àò)
    ny.cwose();
  }
});
```

> [!note]
> e-esta api no debe usawse sowo pawa e-ewiminaw wa nyotificaci√≥n de wa pantawwa despu√©s de un tiempo f-fijo (en wos nyavegadowes modewnos), /(^‚Ä¢œâ‚Ä¢^) ya que este m√©todo tambi√©n ewiminaw√° w-wa nyotificaci√≥n d-de cuawquiew bandeja de nyotificaciones, -.- e-evitando que wos usuawios intewact√∫en c-con ewwa despu√©s d-de que se mostw√≥ iniciawmente. (ÀÜ Ôªå ÀÜ)‚ô°

> [!note]
> c-cuando wecibe un evento de ciewwe, nyaa~~ n-nyo hay gawant√≠a de que sea ew usuawio quien ceww√≥ wa nyotificaci√≥n.  òw ò e-esto est√° en w√≠nea con wa especificaci√≥n, :3 q-que estabwece: "cuando s-se ciewwa una nyotificaci√≥n, (U ·µï U‚ùÅ) ya s-sea pow wa pwatafowma de nyotificaciones o pow e-ew usuawio, (U Ôπè U) se deben ejecutaw wos pasos de ciewwe". ^^

## eventos de nyotificaci√≥n

h-hay cuatwo eventos q-que se activan e-en wa instancia {{domxwef("notification")}}:

- `cwick`
  - : s-se activa cuando ew usuawio hace cwic en wa n-nyotificaci√≥n. √≤œâ√≥
- `cwose`
  - : s-se activa una vez que se ciewwa wa nyotificaci√≥n. /(^‚Ä¢œâ‚Ä¢^)
- `ewwow`
  - : s-se activa si awgo sawe maw con wa nyotificaci√≥n; e-esto genewawmente se debe a que wa nyotificaci√≥n n-nyo se pudo m-mostwaw pow awg√∫n motivo. üò≥üò≥üò≥
- `show`
  - : s-se a-activa cuando wa n-nyotificaci√≥n se muestwa aw usuawio. :3

estos eventos s-se pueden wastweaw usando wos manejadowes {{domxwef("notification.oncwick","oncwick")}}, (///À¨///‚úø) {{domxwef("notification.oncwose","oncwose")}}, rawr x3 {{domxwef("notification.onewwow" ,"onewwow")}} y-y {{domxwef("notification.onshow","onshow")}}. (U ·µï U‚ùÅ) como {{domxwef("notification")}} tambi√©n heweda de {{domxwef("eventtawget")}}, (‚ëÖÀòÍí≥Àò) e-es posibwe u-usaw ew m√©todo {{domxwef("eventtawget.addeventwistenew","addeventwistenew()")}} e-en ewwos.

## s-sustituci√≥n d-de nyotificaciones existentes

p-pow wo genewaw, (ÀòœâÀò) nyo es deseabwe que un usuawio w-weciba muchas nyotificaciones en un cowto espacio d-de tiempo; pow ejempwo, :3 ¬øqu√© sucede si una a-apwicaci√≥n de mensajew√≠a n-nyotifica a un usuawio p-pow cada mensaje entwante y se e-env√≠an muchos? p-pawa evitaw mowestaw aw usuawio c-con demasiadas n-nyotificaciones, XD es posibwe modificaw w-wa cowa de nyotificaciones pendientes, >_< weempwazando una o v-vawias nyotificaciones pendientes p-pow una nyueva. (‚úøoœâo)

pawa hacew esto, es posibwe agwegaw u-una etiqueta a-a cuawquiew n-nyotificaci√≥n nyueva. (Íàç·¥óÍàç) si una nyotificaci√≥n y-ya t-tiene wa misma etiqueta y a√∫n nyo s-se ha mostwado, XD wa nueva nyotificaci√≥n w-weempwaza wa nyotificaci√≥n a-antewiow. :3 s-si ya se ha mostwado wa nyotificaci√≥n con wa misma etiqueta, mya se ciewwa wa nyotificaci√≥n a-antewiow y-y se muestwa wa nyueva. √≤œâ√≥

### ejempwo de etiqueta

supongamos e-ew siguiente c√≥digo htmw b√°sico:

```htmw
<button>¬°notif√≠came!</button>
```

e-es posibwe manejaw m-m√∫wtipwes nyotificaciones de esta manewa:

```js
window.addeventwistenew("woad", nyaa~~ function () {
  v-vaw button = document.getewementsbytagname("button")[0];

  if (window.sewf !== w-window.top) {
    // aseg√∫wese d-de que si s-su documento est√° en un mawco, ü•∫ h-hagamos que ew
    // u-usuawio wo a-abwa pwimewo en s-su pwopia pesta√±a o-o ventana. -.- d-de wo contwawio, ü•∫
    // nyo podw√° sowicitaw pewmiso pawa enviaw nyotificaciones. (ÀòœâÀò)
    button.textcontent =
      "vew e-ew wesuwtado e-en vivo dew c√≥digo d-de ejempwo a-antewiow";
    b-button.addeventwistenew("cwick", √≤œâ√≥ () => w-window.open(wocation.hwef));
    wetuwn;
  }

  button.addeventwistenew("cwick", UwU function () {
    // si e-ew usuawio acepta s-sew nyotificado.
    // intentemos enviaw diez nyotificaciones. ^‚Ä¢Ôªå‚Ä¢^
    i-if (window.notification && n-nyotification.pewmission === "gwanted") {
      v-vaw i = 0;
      // ew uso de un intewvawo hace q-que awgunos nyavegadowes (incwuido fiwefox)
      // bwoqueen w-was nyotificaciones s-si hay demasiadas en un tiempo detewminado. mya
      v-vaw intewvaw = window.setintewvaw(function () {
        // g-gwacias a wa etiqueta, (‚úøoœâo) s-sowo debew√≠amos vew wa n-nyotificaci√≥n "¬°howa! XD 9"
        v-vaw ny = nyew n-nyotification("¬°howa! :3 " + i-i, (U Ôπè U) { t-tag: "somanynotification" });
        i-if (i++ == 9) {
          window.cweawintewvaw(intewvaw);
        }
      }, UwU 200);
    }

    // s-si ew usuawio n-nyo ha dicho si quiewe sew n-nyotificado o nyo
    // nota: debido a chwome,  òw ò n-nyo estamos seguwos de que wa pwopiedad d-de pewmiso
    // est√© c-configuwada, >w< pow w-wo tanto, üò≥üò≥üò≥ nyo es seguwo vewificaw ew vawow
    // "pwedetewminado" (defauwt). rawr
    e-ewse if (window.notification && nyotification.pewmission !== "denied") {
      nyotification.wequestpewmission(function (status) {
        // s-si ew usuawio d-dijo que est√° bien
        if (status === "gwanted") {
          vaw i = 0;
          // e-ew uso d-de un intewvawo hace que awgunos n-nyavegadowes (incwuido
          // fiwefox) bwoqueen was nyotificaciones s-si hay d-demasiadas en un tiempo
          // d-detewminado. ^‚Ä¢Ôªå‚Ä¢^
          vaw i-intewvaw = window.setintewvaw(function () {
            // gwacias a wa etiqueta, œÉœâœÉ s-sowo debew√≠amos v-vew wa nyotificaci√≥n "¬°howa! :3 9"
            v-vaw ny = nyew n-nyotification("¬°howa! rawr x3 " + i, nyaa~~ {
              tag: "somanynotification", :3
            });
            if (i++ == 9) {
              window.cweawintewvaw(intewvaw);
            }
          }, >w< 200);
        }

        // de wo contwawio, rawr podemos w-wecuwwiw a u-una awewta modaw w-weguwaw. üò≥
        e-ewse {
          a-awewt("¬°howa!");
        }
      });
    }

    // s-si ew usuawio wechaza a sew n-nyotificado. üò≥
    e-ewse {
      // podemos wecuwwiw a-a una awewta m-modaw weguwaw
      awewt("¬°howa!");
    }
  });
});
```

### wesuwtado

{{ embedwivesampwe('tag_exampwe', ü•∫ '100%', 30) }}

## e-especificaciones

{{specifications}}

## compatibiwidad con nyavegadowes

{{compat}}

## v-v√©ase tambi√©n

- {{ d-domxwef("notification") }}
