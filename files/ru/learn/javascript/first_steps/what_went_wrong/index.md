---
title: Что пошло не так? Устранение ошибок JavaScript
slug: Learn/JavaScript/First_steps/What_went_wrong
---

{{LearnSidebar}}{{PreviousMenuNext("Learn/JavaScript/Первые_шаги/A_first_splash", "Learn/JavaScript/Первые_шаги/Variables", "Learn/JavaScript/Первые_шаги")}}

Когда вы создали игру «Угадай номер» в предыдущей статье, вы, возможно, обнаружили, что она не работает. Не бойтесь — эта статья призвана избавить вас от разрыва волос над такими проблемами, предоставив вам несколько простых советов о том, как найти и исправить ошибки в программах JavaScript.

| Нужно: | базовая компьютерная грамотность, базовое понимание HTML и CSS, понимание того, что такое JavaScript.              |
| ------ | ------------------------------------------------------------------------------------------------------------------ |
| Цель   | получить способность и уверенность в том, чтобы приступить к исправлению простых проблем в вашем собственном коде. |

## Типы ошибок

Когда вы делаете что-то не так в коде, есть два основных типа ошибок, с которыми вы столкнётесь:

- **Синтаксические ошибки:** Это орфографические ошибки в коде, которые фактически заставляют программу вообще не запускаться, или перестать работать на полпути — вам также будут предоставлены некоторые сообщения об ошибках. Обычно они подходят для исправления, если вы знакомы с правильными инструментами и знаете, что означают сообщения об ошибках!
- **Логические ошибки:** Это ошибки, когда синтаксис действительно правильный, но код не тот, каким вы его предполагали, что означает, что программа работает успешно, но даёт неверные результаты. Их часто сложнее находить, чем синтаксические ошибки, так как обычно не возникает сообщение об ошибке, которое направляет вас к источнику ошибки.

Ладно, все _не так_ просто — есть и другие отличия, которые вы поймёте, пока будете изучать язык JavaScript глубже. Однако вышеуказанной классификации достаточно на раннем этапе вашей карьеры. Мы рассмотрим оба эти типа в дальнейшем.

## Ошибочный пример

Чтобы начать работу, давайте вернёмся к нашей игре с угадыванием чисел — за исключением того, что мы будем изучать версию с некоторыми преднамеренными ошибками. Перейдите в Github и сделайте себе локальную копию [number-game-errors.html](https://github.com/mdn/learning-area/blob/master/javascript/introduction-to-js-1/troubleshooting/number-game-errors.html) (см. здесь [как это работает](http://mdn.github.io/learning-area/javascript/introduction-to-js-1/troubleshooting/number-game-errors.html)).

1. Чтобы начать работу, откройте локальную копию внутри вашего любимого текстового редактора и вашего браузера.
2. Попробуйте сыграть в игру — вы заметите, что когда вы нажимаете кнопку «Submit guess», она не работает!

> [!NOTE]
> Возможно, у вас может быть собственная версия игрового примера, которая не работает, которую вы можете исправить! Мы по-прежнему хотели бы, чтобы вы работали над статьёй с нашей версией, чтобы вы могли изучать методы, которые мы здесь преподаём. Затем вы можете вернуться и попытаться исправить ваш пример.

На этом этапе давайте рассмотрим консоль разработчика, чтобы увидеть, можем ли мы видеть какие-либо синтаксические ошибки, а затем попытаемся их исправить. Вы узнаете, как это сделать, ниже.

## Исправление синтаксических ошибок

Раньше в курсе мы заставили вас набрать некоторые простые команды JavaScript в [консоль разработчика JavaScript](/ru/docs/Learn/Common_questions/What_are_browser_developer_tools) (если вы не можете вспомнить, как открыть это в своём браузере, следуйте предыдущей ссылке, чтобы узнать, как это сделать). Что ещё более полезно, так это то, что консоль предоставляет вам сообщения об ошибках всякий раз, когда существует синтаксическая ошибка внутри JavaScript, которая подаётся в механизм JavaScript браузера. Теперь пойдём на охоту.

1. Перейдите на вкладку, в которой у вас есть number-game-errors.html, и откройте консоль JavaScript. Вы должны увидеть сообщение об ошибке в следующих строках: ![](not-a-function.png)
2. Это довольно простая ошибка для отслеживания, и браузер даёт вам несколько полезных бит информации, которые помогут вам (скриншот выше от Firefox, но другие браузеры предоставляют аналогичную информацию). Слева направо, у нас есть:

   - Красный «x» означает, что это ошибка.
   - Сообщение об ошибке, указывающее, что пошло не так: «TypeError: guessSubmit.addeventListener не является функцией»
   - Ссылка «Узнать больше», которая ссылается на страницу MDN, которая объясняет, что эта ошибка означает в огромных количествах деталей.
   - Имя файла JavaScript, который ссылается на вкладку «Отладчик» консоли разработчика. Если вы перейдёте по этой ссылке, вы увидите точную строку, где подсвечивается ошибка.
   - Номер строки, в которой находится ошибка, и номер символа в этой строке, где первая ошибка. В этом случае у нас есть строка 86, символ номер 3.

3. Если мы посмотрим на строку 86 в нашем редакторе кода, мы найдём эту строку:

   ```js
   guessSubmit.addeventListener("click", checkGuess);
   ```

4. В сообщении об ошибке говорится, что «guessSubmit.addeventListener не является функцией», поэтому мы, вероятно, где-то ошиблись. Если вы не уверены в правильности написания синтаксиса, часто бывает полезно найти функцию на MDN. Лучший способ сделать это в настоящее время — поиск «mdn _имя-функции_» в вашей любимой поисковой системе. Вот ссылка, которая поможет сократить вам некоторое время в данном случае: [`addEventListener()`](/ru/docs/Web/API/EventTarget/addEventListener).
5. Итак, глядя на эту страницу, кажется, что ошибка в том, что мы неправильно назвали имя функции! Помните, что JavaScript чувствителен к регистру, поэтому любые незначительные отличия в орфографии или регистре текста могут вызвать ошибку. Изменение этого параметра в addEventListener должно быть исправлено. Сделайте это сейчас.

> **Примечание:**См. наш [TypeError: «x»](/ru/docs/Web/JavaScript/Reference/Errors/Not_a_function) не является справочной страницей функций для получения дополнительной информации об этой ошибке.

### Синтаксические ошибки: второй раунд

> **Примечание:** [`console.log()`](/ru/docs/Web/API/Console/log) это часто используемая функция отладки, которая выводит значение в консоль. Поэтому она будет выводить значение `lowOrHi` в консоли, как только мы попытаемся установить его в строке 48.

1. Сохраните и обновите страницу, и вы увидите, что ошибка исчезла.
2. Теперь, если вы попробуете ввести значение и нажать кнопку "Submit guess", вы увидите ... другую ошибку! ![](variable-is-null.png)
3. На этот раз сообщается об ошибке: "TypeError: lowOrHi is null", в строке 78.

   > **Примечание:** [`Null`](/ru/docs/Glossary/Null) — это специальное значение, которое означает "ничего" или "не значение". Поэтому `lowOrHi` был объявлен и инициализирован без значения — у него нет типа или значения.

   > [!NOTE]
   > Эта ошибка не появилась, как только страница была загружена, потому что эта ошибка произошла внутри функции (внутри `checkGuess() { ... }` блока). Об этом вы узнаете более подробно в нашей более поздней статье о функциях, код внутри функций выполняется в отдельной области для кода внешних функций. В этом случае код не был запущен, и ошибка не была брошена до тех пор, пока функция `checkGuess()` не была запущена строкой 86.

4. Посмотрите на строку 78, и вы увидите следующий код:

   ```js
   lowOrHi.textContent = "Last guess was too high!";
   ```

5. Эта строка пытается установить свойство `textContent` переменной `lowOrHi` как текстовую строку, но это не работает, поскольку `lowOrHi` не содержит того, что должна. Давайте посмотрим, почему так происходит — попробуйте найти другие экземпляры `lowOrHi` в коде. Самый ранний экземпляр, который вы найдёте в JavaScript, находится в строке 48:

   ```js
   const lowOrHi = document.querySelector("lowOrHi");
   ```

6. На этом этапе мы пытаемся заставить переменную содержать ссылку на элемент документа HTML. Давайте проверим, является ли значение `null` после выполнения этой строки. Добавьте следующий код в строку 49:

   ```js
   console.log(lowOrHi);
   ```

7. Сохраните и обновите, и вы должны увидеть результат работы `console.log()` в консоли браузера. ![](console-log-output.png) Разумеется, значение `lowOrHi` на данный момент равно `null`, поэтому определённо существует проблема в строке 48.
8. Давайте подумаем о том, что может быть проблемой. Строка 48 использует метод [`document.querySelector()`](/ru/docs/Web/API/Document/querySelector) для получения ссылки на элемент, выбирая его с помощью селектора CSS. Посмотрев далее наш файл, мы можем найти обсуждаемый элемент `<p>`:

   ```js
   <p class="lowOrHi"></p>
   ```

9. Поэтому нам нужен селектор классов, который начинается с точки (.), но селектор, передаваемый в метод `querySelector()` в строке 48, не имеет точки. Возможно, это и есть проблема! Попробуйте изменить `lowOrHi` на `.lowOrHi` в строке 48.
10. Повторите попытку сохранения и обновления, и ваш вызов `console.log()` должен вернуть элемент `<p>`, который мы хотим. Уф! Ещё одна ошибка исправлена! Вы можете удалить строку с `console.log()` сейчас, или оставить для дальнейшего применения — выбирайте сами.

> [!NOTE]
> Загляните на справочную страницу [TypeError: "x" is (not) "y"](/ru/docs/Web/JavaScript/Reference/Errors/Unexpected_type), чтобы узнать больше об этой ошибке.

### Синтаксические ошибки: третий раунд

1. Теперь, если вы снова попробуете сыграть в игру, вы должны добиться большего успеха — игра должна играть абсолютно нормально, пока вы не закончите игру, либо угадав нужное число, либо потеряв жизни.
2. На данном этапе игра снова слетает, и выводится такая же ошибка, как и в начале — "TypeError: resetButton.addeventListener is not a function"! Однако, теперь она происходит из-за строки 94.
3. Посмотрев на строку 94, легко видеть, что здесь сделана такая же ошибка. Нам просто нужно изменить `addeventListener` на `addEventListener`.

## Логическая ошибка

На этом этапе игра должна проходить отлично, однако, поиграв несколько раз, вы, несомненно заметите, что случайное число, которое вы должны угадать, всегда 0 или 1. Определённо не совсем так, как мы хотим, чтобы игра была разыграна!

Безусловно, где-то в игре есть логическая ошибка — игра не возвращает ошибку, она просто работает неправильно.

1. Найдём переменную `randomNumber` , и строку где в первый раз устанавливали случайное число. Пример, в котором мы храним случайное число, которое должны угадать, на строке 44:

   ```js
   let randomNumber = Math.floor(Math.random()) + 1;
   ```

   И на строке 113, где мы генерируем случайное число, каждый раз после окончания игры:

   ```js
   randomNumber = Math.floor(Math.random()) + 1;
   ```

2. Чтобы проверить, действительно ли проблема в этом, давайте обратимся к нашему другу `console.log()` снова — вставьте её ниже строк с ошибками:

   ```js
   console.log(randomNumber);
   ```

3. Сохраните и обновите, а дальше попробуйте пару раз сыграть — в консоли вы увидите что `randomNumber` равна 1 в каждой точке, где вы её записали после строк с ошибками.

### Работаем через логику

Чтобы исправить это, давайте рассмотрим как работает строка. Первое, мы вызываем [`Math.random()`](/ru/docs/Web/JavaScript/Reference/Global_Objects/Math/random), который генерирует случайное десятичное число, между 0 и 1, например 0.5675493843.

```js
Math.random();
```

Дальше, мы передаём результат вызова `Math.random()` через [`Math.floor()`](/ru/docs/Web/JavaScript/Reference/Global_Objects/Math/floor), который округляет число вниз, до ближайшего целого числа. Затем мы добавляем 1 к данному результату:

```
Math.floor(Math.random()) + 1;
```

Округление случайного десятичного числа к меньшему, всегда будет возвращать 0, так что добавление к нему единицы будет возвращать всегда 1. Нам нужно умножить случайное число на 100, прежде чем мы округлим его к меньшему. Следующая строка вернёт нам случайное число между 0 и 99:

```js
Math.floor(Math.random() * 100);
```

поэтому нам нужно добавить 1, чтоб нам возвращалось случайное число между 1 и 100:

```js
Math.floor(Math.random() * 100) + 1;
```

А теперь, исправьте обе строки с ошибками, затем сохраните и обновите, игра должна работать так, как мы и планировали!

## Другие распространённые ошибки

Существуют и другие распространённые ошибки, которые вы обнаружите в своём коде. В этом разделе показано большинство из них.

### В программе всегда говорится, что вы выиграли, независимо от того, что вы ввели

Причиной этому является все то же перепутывание оператора присваивания (`=`) со строгим сравнением (`===`). Например, если мы изменим внутри `checkGuess()` эту строку кода:

```js
if (userGuess === randomNumber) {
```

на эту

```js
if (userGuess = randomNumber) {
```

мы всегда будем получать `true`, заставляя программу сообщать, что игра была выиграна. Будьте осторожны!

### SyntaxError: отсутствует ) после списка аргументов

Эта ошибка проста — обычно она означает, что вы пропустили закрывающую скобку с конца вызова функции / метода.

> [!NOTE]
> Загляните на справочную страницу [SyntaxError: missing ) after argument list](/ru/docs/Web/JavaScript/Reference/Errors/Missing_parenthesis_after_argument_list) для получения дополнительной информации об этой ошибке.

### SyntaxError: missing : after property id

Эта ошибка обычно связана с неправильно сформированным объектом JavaScript, но в этом случае нам удалось получить её, изменив

```js
function checkGuess() {
```

на

```js
function checkGuess( {
```

Это заставило браузер думать, что мы пытаемся передать содержимое функции в функцию в качестве аргумента. Будьте осторожны с этими скобками!

### SyntaxError: missing } after function body

Это легко — обычно это означает, что вы пропустили одну из ваших фигурных скобок из функции или условной структуры. Мы получили эту ошибку, удалив одну из закрывающих фигурных скобок возле нижней части функции `checkGuess()`.

### SyntaxError: expected expression, got '_string_' or SyntaxError: string literal contains an unescaped line break

Эти ошибки обычно означает, что вы пропустили открывающую или закрывающую кавычку для строковых значений. В первой ошибки выше, _строка_ будет заменена на неожиданный персонаж (ей) , что браузер нашёл вместо кавычек в начале строки. Вторая ошибка означает , что строка не закончилась кавычки.

При всех этих ошибках действуйте так, как в наших примерах, которые мы рассмотрели в пошаговом руководстве. Когда возникает ошибка, посмотрите полученный номер строки, перейдите к этой строке и посмотрите, можете ли вы определить, что случилось. Имейте в виду, что ошибка не обязательно будет на этой строке, а также, что ошибка может быть вызвана не такой же проблемой, которую мы привели выше!

> [!NOTE]
> Смотрите [SyntaxError: Unexpected token](/ru/docs/Web/JavaScript/Reference/Errors/Unexpected_token) и [SyntaxError: string literal contains an unescaped line break](/ru/docs/Web/JavaScript/Reference/Errors/String_literal_EOL) для получения более подробной информации об этих ошибках.

## Резюме

Итак, мы научились основам выяснения ошибок в простых программах JavaScript. Не всегда так просто разобраться, что не так в вашем коде, но, по крайней мере, это сэкономит вам несколько часов сна и позволит вам продвигаться немного быстрее, когда что-либо заработает не так, как ожидалось, в вашем учебном путешествии.

## Смотрите также

- Есть много других типов ошибок, которые не перечислены здесь; мы составляем ссылку , которая объясняет , что они означают подробно - см. [ссылку ошибки JavaScript](/ru/docs/Web/JavaScript/Reference/Errors) .
- Если вы столкнётесь с любыми ошибками в коде, которые вы не знаете , как исправить после прочтения этой статьи, вы можете получить помощь! Спросите на [нить обучения Область дискурсе](https://discourse.mozilla-community.org/t/learning-web-development-marking-guides-and-questions/16294) , или в [#mdn](irc://irc.mozilla.org/mdn) IRC канал на [Mozilla IRC](https://wiki.mozilla.org/IRC). Расскажите нам, какая у вас ошибка, и мы постараемся вам помочь. Приложите пример своего кода для большей ясности проблемы.

{{PreviousMenuNext("Learn/JavaScript/Первые_шаги/A_first_splash", "Learn/JavaScript/Первые_шаги/Variables", "Learn/JavaScript/Первые_шаги")}}
