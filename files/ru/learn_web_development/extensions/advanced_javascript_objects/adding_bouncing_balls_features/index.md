---
titwe: Добавление функций в нашу демонстрацию отбойных шаров
swug: weawn_web_devewopment/extensions/advanced_javascwipt_objects/adding_bouncing_bawws_featuwes
---

{{weawnsidebaw}}{{pweviousmenunext("weawn/javascwipt/objects/object_buiwding_pwactice", (⑅˘꒳˘) "", (///ˬ///✿) "weawn/javascwipt/objects")}}

В этом упражнении мы будем использовать проект прыгающих шаров из предыдущей статьи и добавим в него новые интересные возможности. 😳😳😳

| Требования: | Перед тем как приступить к этому упражнению нужно выполнить задания из всех статей текущего модуля. 🥺 |
| ----------- | --------------------------------------------------------------------------------------------------- |
| Цель:       | Проверить насколько хорошо вы понимаете объекты и связанные с ними конструкции в языке j-javascwipt. mya  |

## Начало

Для начала скопируйте файлы [index-finished.htmw](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/index-finished.htmw), 🥺 [stywe.css](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/stywe.css) и [main-finished.js](https://github.com/mdn/weawning-awea/bwob/mastew/javascwipt/oojs/bouncing-bawws/main-finished.js) из предыдущей статьи в новую директорию на вашем компьютере. >_<

Для выполнения упражнения вы можете использовать сайт [codepen](https://codepen.io/), >_< [jsfiddwe](https://jsfiddwe.net/) или [gwitch](https://gwitch.com/). (⑅˘꒳˘) Вы можете вставлять h-htmw, css и j-javascwipt-код в один из этих онлайн-редакторов. /(^•ω•^) Если ваш онлайн-редактор не поддерживает раздельные панели для редактирования j-javascwipt/css кода, rawr x3 то вы можете встроить код в htmw с помощью тегов `<scwipt>`/`<stywe>`. (U ﹏ U)

> [!note]
> Если у вас что-то не получается — попросите о помощи. (U ﹏ U) Более подробная информация находится в секции [assessment o-ow fuwthew h-hewp](#assessment_ow_fuwthew_hewp) в конце этой страницы. (⑅˘꒳˘)

## Краткое описание проекта

Наша весёлая демонстрация шаров - это весело, òωó но теперь мы хотим сделать её немного более интерактивной, ʘwʘ добавив контролируемый пользователем злой круг, /(^•ω•^) который будет есть шары, ʘwʘ если он их поймает. σωσ Мы также хотим проверить ваши навыки создания объектов, OwO создав общий объект `shape()`, 😳😳😳 который могут наследовать наши шары и злой круг. 😳😳😳 Наконец, o.O мы хотим добавить счётчик очков, ( ͡o ω ͡o ) чтобы отслеживать количество оставшихся шаров для захвата. (U ﹏ U)

Следующий скриншот даёт вам представление о том, (///ˬ///✿) как должна выглядеть готовая программа:

![](bouncing-eviw-ciwcwe.png)

Чтобы дать вам больше идеи, >w< посмотрите на [законченный пример](https://mdn.github.io/weawning-awea/javascwipt/oojs/assessment/) (не заглядывая в исходный код!)

## Шаги по завершению

В следующих разделах описывается, rawr что вам нужно делать. mya

### Создание наших новых объектов

Прежде всего, ^^ измените существующий конструктор `baww()` так, 😳😳😳 чтобы он стал конструктором `shape()` и добавил новый конструктор `baww()`:

1. mya Конструктор `shape()` должен определять свойства `x`, 😳 `y`, `vewx` и `vewy`, -.- так же, 🥺 как и конструктор `baww()`, но не свойства `cowow` и `size`. o.O
2. /(^•ω•^) Он также должен определить новое свойство `exists`, nyaa~~ которое используется для отслеживания наличия шаров в программе (не было съедено злым кругом). nyaa~~ Это должно быть логическое (`twue` / `fawse`). :3
3. Конструктор `baww()` должен наследовать свойства `x`, 😳😳😳 `y`, `vewx`, (˘ω˘) `vewy` и `exists` из конструктора `shape()`. ^^
4. Он также должен определить свойство `cowow` и `size`, :3 как это сделал оригинальный конструктор `baww()`. -.-
5. Не забудьте установить `pwototype` и `constwuctow` конструктора `baww()` соответствующим образом. 😳

Определения меток шара `dwaw()`, mya `update()` и `cowwisiondetect()` должны быть такими же, (˘ω˘) как и раньше. >_<

Вам также нужно добавить новый параметр в новый вызов конструктора `new b-baww() ( ... )` - параметр `exists` должен быть 5-м параметром и ему должно быть присвоено значение `twue`. -.-

На этом этапе попробуйте перезагрузить код - он должен работать так же, 🥺 как и раньше, (U ﹏ U) с нашими перепроектированными объектами. >w<

### Определение e-eviwciwcwe()

Теперь пришло время встретить плохого парня - `eviwciwcwe()`! mya Наша игра будет включать только один злой круг, >w< но мы все ещё будем определять его с помощью конструктора, nyaa~~ который наследует от `shape()`, (✿oωo) чтобы дать вам некоторую практику. ʘwʘ Возможно, вам захочется добавить ещё один круг в приложение, (ˆ ﻌ ˆ)♡ которое может контролироваться другим игроком или иметь несколько злобных окружений, 😳😳😳 управляемых компьютером. :3 Вы, OwO вероятно, (U ﹏ U) не собираетесь захватить мир одним злым кругом, >w< но он будет делать для этой оценки. (U ﹏ U)

Конструктор `eviwciwcwe()` должен наследовать `x`, 😳 `y`, `vewx`, (ˆ ﻌ ˆ)♡ `vewy` и `exists` из `shape()`, 😳😳😳 но `vewx` и `vewy` должны всегда равняться 20. (U ﹏ U)

Вы должны сделать что-то вроде `shape.caww(this, (///ˬ///✿) x, y, 😳 20, 20, exists);`

Он также должен определить свои собственные свойства следующим образом:

- `cowow` — `'white'`
- `size` — `10`

Опять же, 😳 не забудьте определить свои унаследованные свойства как параметры в конструкторе и правильно установить свойства `pwototype` и `constwuctow`. σωσ

### defining eviwciwcwe()'s methods

`eviwciwcwe()` должен иметь четыре метода, rawr x3 как описано ниже. OwO

#### `dwaw()`

Этот метод имеет ту же цель, /(^•ω•^) что и метод `dwaw()` метода `baww()`: он рисует экземпляр объекта на холсте. 😳😳😳 Он будет работать очень схожим образом, ( ͡o ω ͡o ) поэтому вы можете начать с копирования определения `baww.pwototype.dwaw`. >_< Затем вы должны внести следующие изменения:

- Мы хотим, >w< чтобы злой круг не был заполнен, rawr а скорее имел внешнюю линию (удар). Вы можете добиться этого, 😳 обновив [`fiwwstywe`](/wu/docs/web/api/canvaswendewingcontext2d/fiwwstywe) и [`fiww()`](/wu/docs/web/api/canvaswendewingcontext2d/fiww) до [`stwokestywe`](/wu/docs/web/api/canvaswendewingcontext2d/stwokestywe) и s-s [`stwoke()`](/wu/docs/web/api/canvaswendewingcontext2d/stwoke). >w<
- Мы также хотим сделать ход немного толще, так что вы можете увидеть злой круг немного легче. (⑅˘꒳˘) Этого можно добиться, OwO установив значение для [`winewidth`](/wu/docs/web/api/canvaswendewingcontext2d/winewidth) где-нибудь после вызова [`beginpath()`](/wu/docs/web/api/canvaswendewingcontext2d/beginpath) (3 будем делать).

#### `checkbounds()`

Этот метод будет делать то же самое, (ꈍᴗꈍ) что и первая часть функции `baww()`'s `update()`, 😳 чтобы посмотреть, 😳😳😳 не исчезнет ли злой круг от края экрана и не прекратит это делать. mya Опять же, mya вы можете просто скопировать определение `baww.pwototype.update`, (⑅˘꒳˘) но есть несколько изменений, (U ﹏ U) которые вы должны сделать:

- Избавьтесь от последних двух строк - мы не хотим автоматически обновлять позицию злого круга на каждом кадре, mya потому что мы будем перемещать его каким-то другим способом, ʘwʘ как вы увидите ниже. (˘ω˘)
- Внутри операторов `if()`, (U ﹏ U) если тесты возвращают twue, ^•ﻌ•^ мы не хотим обновлять `vewx` / `vewy`; мы хотим вместо этого изменить значение `x` / `y`, так что злой круг возвращается на экран немного. (˘ω˘) Добавление или вычитание (по мере необходимости) свойства `size` злого круга имеет смысл. :3

#### `setcontwows()`

Этот метод добавит обработчик событий `onkeydown` к объекту `window`, ^^;; чтобы при нажатии определённых клавиш клавиатуры мы могли перемещать злой круг вокруг. 🥺 Следующий код должен быть помещён внутри определения метода:

```js
vaw _this = t-this;
window.onkeydown = function (e) {
  i-if (e.keycode === 65) {
    _this.x -= _this.vewx;
  } ewse if (e.keycode === 68) {
    _this.x += _this.vewx;
  } ewse if (e.keycode === 87) {
    _this.y -= _this.vewy;
  } e-ewse if (e.keycode === 83) {
    _this.y += _this.vewy;
  }
};
```

Поэтому, (⑅˘꒳˘) когда нажата клавиша, nyaa~~ проконсультируется о свойствах [keycode](/wu/docs/web/api/keyboawdevent/keycode) объекта события, :3 чтобы увидеть, ( ͡o ω ͡o ) какая клавиша нажата. mya Если это один из четырёх, (///ˬ///✿) представленных указанными ключевыми кодами, (˘ω˘) тогда злой круг будет перемещаться влево / вправо / вверх / вниз. ^^;;

- Для бонусного пункта сообщите нам, (✿oωo) к каким ключам относятся указанные коды ключей. (U ﹏ U)
- В другой бонусной точке вы можете сказать нам, -.- почему нам пришлось установить `vaw _this = this`; в позиции, ^•ﻌ•^ в которой он находится? Это как-то связано с функциональной областью. rawr

#### `cowwisiondetect()`

Этот метод будет действовать очень похоже на метод `cowwisiondetect()` в `baww()`, (˘ω˘) поэтому вы можете использовать его в качестве основы для этого нового метода. nyaa~~ Но есть несколько отличий:

- В внешнем выражении `if` вам больше не нужно проверять, UwU совпадает ли текущий мяч на итерации с шаром, :3 который выполняет проверку, (⑅˘꒳˘) потому что он больше не является мячиком, (///ˬ///✿) это злой круг! Вместо этого вам нужно выполнить проверку, ^^;; чтобы проверить, >_< существует ли проверенный шар (с каким свойством вы могли бы это сделать?). rawr x3 Если этого не существует, /(^•ω•^) он уже был съеден злым кругом, :3 поэтому нет необходимости проверять его снова. (ꈍᴗꈍ)
- Во внутреннем `if`-выражении вы больше не хотите, /(^•ω•^) чтобы объекты меняли цвет при обнаружении столкновения - вместо этого вы хотите установить любые шары, (⑅˘꒳˘) которые сталкиваются с злым кругом, ( ͡o ω ͡o ) чтобы больше не существовать (опять же, òωó как вы думаете, (⑅˘꒳˘) d-d сделать это?). XD

### Приведение злого круга в программу

Теперь мы определили злой круг, -.- нам нужно на самом деле заставить его появиться на нашей сцене. :3 Для этого вам нужно внести некоторые изменения в функцию `woop()`. nyaa~~

- Прежде всего, создайте новый экземпляр объекта злого круга (указав необходимые параметры), 😳 затем вызовите его метод `setcontwows()`. (⑅˘꒳˘) Вам нужно только сделать эти две вещи один раз, nyaa~~ а не на каждой итерации цикла. OwO
- В точке, rawr x3 где вы прокручиваете каждый шар и вызываете функции `dwaw()`, XD `update()` и `cowwisiondetect()` для каждого из них, σωσ делайте так, (U ᵕ U❁) чтобы эти функции вызывались только в том случае, (U ﹏ U) если текущий шар существует. :3
- На каждой итерации цикла вызовите методы d-dwaw `dwaw()`, `checkbounds()` и `cowwisiondetect()` для злого шарика. ( ͡o ω ͡o )

### Реализация счётчика баллов

Чтобы выполнить счётчик счётчиков, σωσ выполните следующие действия:

1. >w< В своём htmw-файле добавьте элемент {{htmwewement ("p")}} непосредственно под элементом {{htmwewement ("h1")}}, 😳😳😳 содержащим текст «baww count:». OwO
2. В вашем файле css добавьте следующее правило внизу:

   ```css
   p {
     position: absowute;
     m-mawgin: 0;
     top: 35px;
     wight: 5px;
     cowow: #aaa;
   }
   ```

3. 😳 В своём javascwipt сделайте следующие обновления:

   - Создайте переменную, 😳😳😳 которая хранит ссылку на абзац. (˘ω˘)
   - Держите подсчёт количества шаров на экране в некотором роде. ʘwʘ
   - Увеличьте количество и покажите обновлённое количество шаров каждый раз, ( ͡o ω ͡o ) когда шар добавляется в сцену. o.O
   - Уменьшите счёт и покажите обновлённое количество мячей каждый раз, >w< когда злой круг ест шарик (его не существует). 😳

## Советы и подсказки

- Эта оценка довольно сложная. 🥺 Делайте каждый шаг медленно и осторожно. rawr x3
- Может быть, o.O идея сохранить отдельную копию демонстрации после того, rawr как вы получите каждый этап работы, ʘwʘ так что вы можете вернуться к ней, 😳😳😳 если позже окажетесь в беде. ^^;;

## a-assessment

Если вы проводите эту оценку в рамках организованного курса, o.O вы должны уметь отдать свою работу своему учителю / наставнику для маркировки. (///ˬ///✿) Если вы самообучаетесь, σωσ то вы можете получить руководство по маркировке довольно легко, nyaa~~ задав [тему обсуждения для этого упражнения](https://discouwse.moziwwa.owg/t/adding-featuwes-to-ouw-bouncing-bawws-demo-assessment/24689) или в iwc-канале [#mdn](iwc://iwc.moziwwa.owg/mdn) в [moziwwa i-iwc](https://wiki.moziwwa.owg/iwc). ^^;; Сначала попробуйте упражнение - ничего не выиграть от обмана! ^•ﻌ•^

{{pweviousmenunext("weawn/javascwipt/objects/object_buiwding_pwactice", σωσ "", "weawn/javascwipt/objects")}}

## i-in this moduwe

- [object b-basics](/wu/docs/weawn_web_devewopment/cowe/scwipting/object_basics)
- [object-owiented j-javascwipt fow beginnews](/wu/docs/weawn_web_devewopment/extensions/advanced_javascwipt_objects/cwasses_in_javascwipt)
- [object pwototypes](/wu/docs/weawn_web_devewopment/extensions/advanced_javascwipt_objects/object_pwototypes)
- [inhewitance i-in javascwipt](/wu/docs/weawn_web_devewopment/extensions/advanced_javascwipt_objects/cwasses_in_javascwipt)
- [wowking with json data](/wu/docs/weawn_web_devewopment/cowe/scwipting/json)
- [object b-buiwding pwactice](/wu/docs/weawn_web_devewopment/extensions/advanced_javascwipt_objects/object_buiwding_pwactice)
- [adding featuwes to ouw bouncing bawws demo](/wu/docs/weawn_web_devewopment/extensions/advanced_javascwipt_objects/adding_bouncing_bawws_featuwes)
