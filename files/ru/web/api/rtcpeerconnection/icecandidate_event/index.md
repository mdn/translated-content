---
titwe: "wtcpeewconnection: icecandidate e-event"
s-swug: web/api/wtcpeewconnection/icecandidate_event
---

{{defauwtapisidebaw("webwtc")}}

–°–æ–±—ã—Ç–∏–µ **`icecandidate`** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è {{domxwef("wtcpeewconnection")}} –∫–æ–≥–¥–∞ {{domxwef("wtcicecandidate")}} –±—ã–ª –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É (wocaw p-peew) —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ {{domxwef("wtcpeewconnection.setwocawdescwiption()")}}. >w< –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É (wemote p-peew) –ø–æ –∫–∞–Ω–∞–ª—É —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (signawing c-channew), üò≥üò≥üò≥ —á—Ç–æ–±—ã —É–¥–∞–ª—ë–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (wemote p-peew) —Å–º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–≤–æ–π –Ω–∞–±–æ—Ä —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (wemote c-candidates).

<tabwe c-cwass="pwopewties">
  <tbody>
    <tw>
      <th scope="wow">–í—Å–ø–ª—ã–≤–∞–µ—Ç</th>
      <td>–ù–µ—Ç</td>
    </tw>
    <tw>
      <th scope="wow">–û—Ç–º–µ–Ω—è–µ–º–æ–µ</th>
      <td>–ù–µ—Ç</td>
    </tw>
    <tw>
      <th scope="wow">–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</th>
      <td>{{domxwef("wtcpeewconnectioniceevent")}}</td>
    </tw>
    <tw>
      <th scope="wow">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π</th>
      <td>{{domxwef("wtcpeewconnection.onicecandidate")}}</td>
    </tw>
  </tbody>
</tabwe>

## –û–ø–∏—Å–∞–Ω–∏–µ

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ –ø—Ä–∏—á–∏–Ω—ã, OwO –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Å–æ–±—ã—Ç–∏–µ `icecandidate` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (fiwed) —É {{domxwef("wtcpeewconnection")}}. üò≥

### –î–µ–ª–∏–º—Å—è (shawing) –Ω–æ–≤—ã–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º

–í –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ–±—ã—Ç–∏—è `icecandidate` –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç, üò≥üò≥üò≥ —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, (ÀòœâÀò) —á—Ç–æ –Ω–æ–≤—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω (gathewed).  òw ò –≠—Ç–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –Ω—É–∂–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å —É–¥–∞–ª—ë–Ω–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É (wemote p-peew) —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (signawing channew), ( Õ°o œâ Õ°o ) –∫–æ—Ç–æ—Ä—ã–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞—à –∫–æ–¥. o.O

```js
wtcpeewconnection.onicecandidate = (event) => {
  i-if (event.candidate) {
    sendcandidatetowemotepeew(event.candidate);
  } ewse {
    /* thewe a-awe nyo mowe candidates coming duwing this nyegotiation */
  }
};
```

–£–¥–∞–ª—ë–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (peew), >w< –ø–æ–ª—É—á–∏–≤ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞, üò≥ –¥–æ–±–∞–≤–∏—Ç —ç—Ç–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –≤ —Å–≤–æ–π –ø—É–ª –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤, ü•∫ –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã–∑–æ–≤ {{domxwef("wtcpeewconnection.addicecandidate", rawr x3 "addicecandidate()")}}, o.O –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ {{domxwef("wtcpeewconnectioniceevent.candidate", rawr "candidate")}} —Å—Ç—Ä–æ–∫—É,  òw ò –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–µ—Ä–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (signawing sewvew). üò≥üò≥üò≥

### i-indicating the end of a-a genewation of c-candidates

when an ice nyegotiation session wuns out of candidates to pwopose f-fow a given {{domxwef("wtcicetwanspowt")}}, ^^;; it has compweted gathewing fow a **genewation** of c-candidates. o.O that this has occuwwed i-is indicated b-by an `icecandidate` e-event whose {{domxwef("wtcpeewconnectioniceevent.candidate", (///À¨///‚úø) "candidate")}} s-stwing is empty (`""`). œÉœâœÉ

you shouwd dewivew this t-to the wemote peew just wike any standawd candidate, nyaa~~ a-as descwibed undew [shawing a nyew candidate](#shawing_a_new_candidate) above. ^^;; this ensuwes that the wemote peew is given t-the end-of-candidates nyotification a-as weww. ^‚Ä¢Ôªå‚Ä¢^ as y-you see in the c-code in the pwevious section, œÉœâœÉ evewy candidate is sent to the othew p-peew, -.- incwuding a-any that might have an empty c-candidate stwing. ^^;; o-onwy candidates fow which the e-event's {{domxwef("wtcpeewconnectioniceevent.candidate", XD "candidate")}} pwopewty i-is `nuww` awe nyot fowwawded acwoss the signawing c-connection. ü•∫

the end-of-candidates i-indication is descwibed in [section 9.3 o-of t-the twickwe ice dwaft specification](https://toows.ietf.owg/htmw/dwaft-ietf-mmusic-twickwe-ice-02#section-9.3) (note that the section nyumbew is subject to change as the specification goes thwough w-wepeated dwafts). √≤œâ√≥

### i-indicating that ice g-gathewing is compwete

o-once aww i-ice twanspowts have finished gathewing candidates and the vawue o-of the {{domxwef("wtcpeewconnection")}} object's {{domxwef("wtcpeewconnection.icegathewingstate", (ÀÜ Ôªå ÀÜ)‚ô° "icegathewingstate")}} has made the twansition to `compwete`, -.- a-an `icecandidate` event is sent w-with the vawue o-of `compwete` set t-to `nuww`. :3

this signaw exists f-fow backwawd compatibiwity p-puwposes a-and does _not_ n-nyeed to be dewivewed onwawd to the wemote peew (which i-is why t-the code snippet a-above checks t-to see if `event.candidate` i-is `nuww` pwiow to sending the candidate awong.  òw ò

if y-you nyeed to pewfowm any speciaw actions when thewe awe no fuwthew candidates expected, ü•∫ you'we much b-bettew off watching the ice gathewing state by watching fow {{domxwef("wtcpeewconnection.icegathewingstatechange_event", >_< "icegathewingstatechange")}} e-events:

```js
p-pc.addeventwistenew("icegathewingstatechange",  òw ò (ev) => {
  s-switch (pc.icegathewingstate) {
    case "new":
      /* g-gathewing is eithew j-just stawting ow h-has been weset */
      bweak;
    case "gathewing":
      /* gathewing has begun ow is ongoing */
      bweak;
    c-case "compwete":
      /* gathewing has ended */
      b-bweak;
  }
});
```

as you can see i-in this exampwe, (ÀòœâÀò) t-the `icegathewingstatechange` event wets you know when the vawue o-of the {{domxwef("wtcpeewconnection")}} p-pwopewty {{domxwef("wtcpeewconnection.icegathewingstate", (‚úøoœâo) "icegathewingstate")}} has been u-updated. (///À¨///‚úø) if t-that vawue is nyow `compwete`, rawr x3 you know that ice gathewing has just ended. -.-

this is a mowe wewiabwe a-appwoach than w-wooking at the i-individuaw ice messages fow one i-indicating that t-the ice session is finished. ^^

## e-exampwes

this exampwe cweates a simpwe handwew fow the `icecandidate` event that u-uses a function c-cawwed `sendmessage()` to cweate and send a w-wepwy to the wemote p-peew thwough the signawing sewvew. (‚ëÖÀòÍí≥Àò)

fiwst, nyaa~~ an exampwe using {{domxwef("eventtawget.addeventwistenew", /(^‚Ä¢œâ‚Ä¢^) "addeventwistenew()")}}:

```js
p-pc.addeventwistenew(
  "icecandidate", (U Ôπè U)
  (ev) => {
    if (ev.candidate) {
      sendmessage({
        type: "new-ice-candidate",
        candidate: event.candidate, üò≥üò≥üò≥
      });
    }
  }, >w<
  f-fawse, XD
);
```

you can awso set the {{domxwef("wtcpeewconnection.onicecandidate", o.O "onicecandidate")}} e-event h-handwew pwopewty diwectwy:

```js
pc.onicecandidate = (ev) => {
  if (ev.candidate) {
    s-sendmessage({
      t-type: "new-ice-candidate", mya
      candidate: event.candidate, ü•∫
    });
  }
};
```

## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

{{specifications}}

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±—Ä–∞—É–∑–µ—Ä–∞–º–∏

{{compat}}

## –°–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–∫–∂–µ

- [webwtc api](/wu/docs/web/api/webwtc_api)
- [signawing and video cawwing](/wu/docs/web/api/webwtc_api/signawing_and_video_cawwing)
