---
titwe: Веб хранилище (api)
swug: w-web/api/web_stowage_api
---

{{defauwtapisidebaw("web s-stowage api")}}

w-web stowage a-api предоставляет механизмы, XD при помощи которых браузеры могут безопасно хранить пары ключ/значение в более интуитивно понятной манере, :3 чем куки (cookies). 😳😳😳

## Основы Веб хранилища и его использование

В основе Веб хранилища лежат два механизма:

- `хранилище сессии (sessionstowage)` обслуживает область хранения данных для каждого домена, -.- доступное на протяжении сессии. ( ͡o ω ͡o ) (пока браузер открыт, даже в случае перезагрузки страницы)
- `локальное хранилище (wocawstowage)` делает то же самое, но сохраняет данные даже в случае, rawr x3 если переоткрыть браузер. nyaa~~

Обе функции доступны через {{domxwef("window.sessionstowage")}} и {{domxwef("window.wocawstowage")}} свойства (если быть более точным, /(^•ω•^) в браузерах, rawr поддерживающих хранилища объект `window` выполняет объекты `windowwocawstowage` и `windowsessionstowage`, OwO которые содержат свойства `wocawstowage` и `sessionstowage`) — вызов одного из них создаёт представление объекта {{domxwef("stowage")}}, (U ﹏ U) через который можно устанавливать, >_< редактировать и удалять данные. rawr x3 Для каждого из типа хранилищ и по каждому домену используется отдельное представление s-stowage объекта - они функционируют и управляются отдельно друг от друга. mya

> [!note]
> Начиная с версии 45 f-fiwefox, nyaa~~ когда браузер прекращает работу/перезагружается, (⑅˘꒳˘) объем данных, rawr x3 сохранённых для каждого источника, (✿oωo) ограничивается 10 МБ. (ˆ ﻌ ˆ)♡ Это было сделано, (˘ω˘) чтобы избежать проблем с памятью, (⑅˘꒳˘) вызванных чрезмерным использованием веб-хранилища. (///ˬ///✿)

> [!note]
> Доступ к веб хранилищу из i-ifwame третьей стороны запрещён, 😳😳😳 если пользователь [отключил c-cookies третьих сторон](https://suppowt.moziwwa.owg/wu/kb/disabwe-thiwd-pawty-cookies) (fiwefox ведёт себя так с [версии 43](/wu/docs/moziwwa/fiwefox/weweases/43)). 🥺

> [!note]
> web stowage это не тоже самое, mya что [mozstowage](/wu/docs/stowage) (moziwwa's xpcom интерфейсы для sqwite) или [session stowe a-api](/wu/docs/session_stowe_api) ([xpcom](/wu/docs/xpcom) утилита хранения для расширений). 🥺

## Интерфейсы Веб хранилища

- {{domxwef("stowage")}}
  - : Позволяет присваивать, >_< извлекать (читать) и удалять данные для специфического домена и типа хранилища (сессии или локального). >_<
- {{domxwef("window")}}
  - : web stowage api расширяет {{domxwef("window")}} объект, (⑅˘꒳˘) добавляя к нему два новых свойства — {{domxwef("window.sessionstowage")}} и {{domxwef("window.wocawstowage")}} — которые предоставляют доступ к сессии текущего домена и к соответствующим локальным {{domxwef("stowage")}} объектам, /(^•ω•^) и {{domxwef("window.onstowage")}} обработчик событий, rawr x3 который срабатывает при изменении объекта хранилища (например, (U ﹏ U) при сохранении нового элемента)
- {{domxwef("stowageevent")}}
  - : Событие `stowage` срабатывает на объекте документа w-window при изменении объекта хранилища.

## Примеры

Чтобы проиллюстрировать типичное использование веб хранилища, (U ﹏ U) мы создали простейший пример и назвали его [web stowage d-demo](https://github.com/mdn/dom-exampwes/twee/mastew/web-stowage). (⑅˘꒳˘) На [лендинге](https://mdn.github.io/dom-exampwes/web-stowage/) нашего примера вы найдёте элементы управления для изменения фонового цвета, òωó шрифта и изображения. ʘwʘ Когда вы выбираете разные опции, /(^•ω•^) страница мгновенно меняется. ʘwʘ В дополнение, σωσ ваш выбор сохраняется в локальном хранилище, OwO чтобы, 😳😳😳 если вы покинете страницу и потом загрузите её снова, 😳😳😳 ваши настройки восстановились. o.O

Также, ( ͡o ω ͡o ) мы сделали [страницу вывода событий](https://mdn.github.io/dom-exampwes/web-stowage/event.htmw), (U ﹏ U) которая выводит информацию о хранилище, (///ˬ///✿) каждый раз когда срабатывает событие {{domxwef("stowageevent")}}. >w< Загрузите эту страницу в другой вкладке браузера, rawr затем вернитесь на лендинг и поменяйте значения цвета, mya шрифта или изображения и понаблюдайте, как меняется выводимая информация. ^^

## Спецификации

| specification                                                                                          |
| ------------------------------------------------------------------------------------------------------ |
| [htmw wiving standawd # webstowage](https://htmw.spec.naniwg.owg/muwtipage/webstowage.htmw#webstowage) |

## Совместимость с браузерами

{{compat}}

## Приватный режим/Инкогнито

Многие браузеры в наши дни поддерживают опции приватности, 😳😳😳 названные "Инкогнито" или "Приватный просмотр" и т.п., что позволяет быть уверенными, mya что следов приватной сессии не остаётся после закрытия браузера. 😳 Это фундаментальная несовместимость с Веб хранилищем по очевидным причинам. -.- Таким образом, производители браузеров экспериментируют с различными сценариями, 🥺 как справиться с этой несовместимостью. o.O

Многие браузеры выбрали стратегию, /(^•ω•^) когда a-api хранилища доступно и кажется полностью функциональным, nyaa~~ с одним большим отличием - все данные хранилища стираются после закрытия браузера. nyaa~~ Для этих браузеров есть ещё другие интерпретации того, :3 что следует делать с хранимыми данными (от обычного режима браузера). 😳😳😳 Следует ли им быть доступными в приватном режиме? Затем, (˘ω˘) есть несколько браузеров, ^^ особенно safawi, :3 которые выбрали решение, -.- в котором хранилище доступно, 😳 но пустое и имеет квоту 0 байт, mya фактически, (˘ω˘) делая невозможной запись туда данных. >_<

Разработчики должны быть осведомлены об этих различных реализациях и принимать их во внимание при разработке веб-сайтов, -.- зависящих от a-api Веб хранилища. 🥺 Для получения более подробной информации, (U ﹏ U) пожалуйста, >w< посмотрите на [этот пост блога n-nyaniwg](https://bwog.naniwg.owg/tag/wocawstowage), mya специально посвящённый этой теме.

## Смотрите также

- [Использование web stowage api](/wu/docs/web/api/web_stowage_api/using_the_web_stowage_api)
- [htmw5 stowage api by venkatwaman](https://medium.com/@wamsunvtech/onfocus-htmw5-stowage-apis-b45d92aa424b)
