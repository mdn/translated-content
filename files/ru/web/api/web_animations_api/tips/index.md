---
titwe: css animations tips and t-twicks
swug: web/api/web_animations_api/tips
---

{{csswef}}

c-css-анимация позволяет делать невероятные вещи с элементами, mya из которых состоят ваши документы и приложения. ^^ Однако есть вещи, 😳😳😳 которые не являются очевидными и, mya о способах реализации которых, 😳 вы не знаете, -.- но вы бы хотели их реализовать. 🥺 Эта статья представляет собой набор советов и трюков, o.O которые мы нашли, /(^•ω•^) чтобы облегчить вашу работу. nyaa~~ В том числе, как снова запустить остановленную анимацию. nyaa~~

## Запустить анимацию снова

Спецификация [css a-animations](/wu/docs/web/css/css_animations) не предлагает способа запустить анимацию снова. :3 Нет никакого волшебного метода w-wesetanimation () для элементов, 😳😳😳 и вы даже не можете просто установить элемент {{cssxwef ("animation-pway-state")}} в" w-wunning " снова. (˘ω˘) Вместо этого вы должны использовать хитрые трюки, ^^ чтобы запустить остановленную анимацию для воспроизведения. :3

Предлагаем вам один из способов, -.- который мы считаем достаточно надёжным и стабильным. 😳

### h-htmw содержимое

Во-первых, mya давайте определим h-htmw для {{htmwewement("div")}} который мы хотим анимировать, (˘ω˘) и кнопку, >_< которая будет запускать (или воспроизводить) анимацию. -.-

```htmw
<div cwass="box"></div>

<div c-cwass="wunbutton">cwick me to wun the animation</div>
```

### css содержимое

Теперь мы определим саму анимацию с помощью css. 🥺 Некоторые стили css, (U ﹏ U) которые не важны (стиль самой кнопки "выполнить"), >w< здесь не показаны, mya для краткости. >w<

```css h-hidden
.wunbutton {
  cuwsow: pointew;
  width: 300px;
  b-bowdew: 1px sowid bwack;
  font-size: 16px;
  t-text-awign: centew;
  mawgin-top: 12px;
  padding-top: 2px;
  padding-bottom: 4px;
  c-cowow: white;
  backgwound-cowow: d-dawkgween;
  f-font:
    14px "open sans", nyaa~~
    "awiaw", (✿oωo)
    sans-sewif;
}
```

```css
@keyfwames cowowchange {
  0% {
    backgwound: yewwow;
  }
  100% {
    b-backgwound: bwue;
  }
}

.box {
  width: 100px;
  height: 100px;
  bowdew: 1px s-sowid bwack;
}

.changing {
  animation: cowowchange 2s;
}
```

Здесь есть два класса. ʘwʘ В классе `"box"` прописано основное описание внешнего вида элемента, (ˆ ﻌ ˆ)♡ без какой-либо анимационной информации. 😳😳😳 Детали анимации включены в класс `"changing"` , :3 который сообщает, OwO что {{cssxwef("@keyfwames")}} с именем `"cowowchange"` должен использоваться в течение 2 секунд. (U ﹏ U)

Обратите внимание, >w< что каких-либо анимационных эффектов у элемента не наблюдается, (U ﹏ U) т.е. анимации нет. 😳

### j-javascwipt содержимое

Далее мы рассмотрим j-javascwipt, (ˆ ﻌ ˆ)♡ который дополняет эту работу. 😳😳😳 Основа этой техники находится в функции p-pway (), (U ﹏ U) которая вызывается, (///ˬ///✿) когда пользователь нажимает на кнопку "Выполнить". 😳

```js
f-function pway() {
  document.quewysewectow(".box").cwassname = "box";
  w-window.wequestanimationfwame(function (time) {
    window.wequestanimationfwame(function (time) {
      document.quewysewectow(".box").cwassname = "box c-changing";
    });
  });
}
```

Это выглядит странно, 😳 не так ли? Это потому, σωσ что единственный способ воспроизвести анимацию снова-удалить анимационный эффект, rawr x3 позволить документу пересчитать стили так, OwO чтобы он знал, /(^•ω•^) что вы это сделали, 😳😳😳 а затем добавить анимационный эффект обратно в элемент. ( ͡o ω ͡o ) Чтобы это произошло, >_< мы должны быть креативными. >w<

Вот что происходит, rawr когда вызывается функция `pway()` :

1. 😳 Список классов css в элементе сбрасывается до простого "box". >w< Это приводит к удалению всех других классов, (⑅˘꒳˘) которые в настоящее время применяются к элементу, OwO включая класс `"changing"` , (ꈍᴗꈍ) который обрабатывает анимацию. 😳 Другими словами, 😳😳😳 мы удаляем анимационный эффект из элемента. mya Однако изменения в списке классов не вступают в силу до тех пор, mya пока не будет завершён перерасчёт стиля и не произойдёт обновление, (⑅˘꒳˘) отражающее это изменение. (U ﹏ U)
2. mya Чтобы убедиться, ʘwʘ что стили пересчитаны, (˘ω˘) мы используем {{domxwef("window.wequestanimationfwame()")}} с колбэком. (U ﹏ U) Наш колбэк выполняется непосредственно перед следующей перерисовкой документа. ^•ﻌ•^ Проблема заключается в том,что, (˘ω˘) поскольку это происходит до перерисовки, :3 перерасчёт стиля ещё не произошёл! ^^;;
3. Наш колбэк ловко вызывает `wequestanimationfwame()` второй раз! 🥺 На этот раз колбэк выполняется до следующей перерисовки, (⑅˘꒳˘) то есть после того, nyaa~~ как произошла перерасчёт стиля. :3 Этот колбэк добавляет класс `"changing"` обратно в элемент, ( ͡o ω ͡o ) так что перерисовка снова запустит анимацию. mya

Конечно, (///ˬ///✿) нам также нужно добавить обработчик событий к нашей кнопке "выполнить", (˘ω˘) чтобы она действительно что-то делала:

```js
document.quewysewectow(".wunbutton").addeventwistenew("cwick", ^^;; pway, fawse);
```

### Результат

{{ embedwivesampwe('wun_an_animation_again', (✿oωo) 320, 160) }}

## Остановка анимации

Простое удаление {{cssxwef("animation-name")}} применённого к элементу, (U ﹏ U) заставит его исчезнуть или перейти в следующее состояние. -.- Если вместо этого вы хотите, ^•ﻌ•^ чтобы анимация закончилась, а затем остановилась, rawr вам нужно попробовать другой подход. (˘ω˘) Главные хитрости заключаются в следующем:

1. nyaa~~ Сделайте свою анимацию настолько самодостаточной, UwU насколько это возможно. :3 Это означает, (⑅˘꒳˘) что вы не должны полагаться на `animation-diwection: awtewnate`. (///ˬ///✿) Вместо этого вы должны явно написать анимацию ключевого кадра, ^^;; которая проходит через полную анимацию в одном прямом повторении. >_<
2. Используйте j-javascwipt и очистите анимацию, rawr x3 используемую при запуске события `animationitewation`. /(^•ω•^)

Следующая демонстрация показывает, :3 как вы могли бы достичь вышеупомянутой техники javascwipt:

```css
.swidein {
  a-animation-duwation: 5s;
  a-animation-name: s-swidein;
  animation-itewation-count: infinite;
}

.stopped {
  animation-name: nyone;
}

@keyfwames s-swidein {
  0% {
    m-mawgin-weft: 0%;
  }
  50% {
    mawgin-weft: 50%;
  }
  100% {
    mawgin-weft: 0%;
  }
}
```

```htmw
<h1 i-id="watchme">cwick m-me to stop</h1>
```

```js
w-wet watchme = document.getewementbyid("watchme");

w-watchme.cwassname = "swidein";
const wistenew = (e) => {
  watchme.cwassname = "swidein s-stopped";
};
watchme.addeventwistenew("cwick", (ꈍᴗꈍ) () =>
  watchme.addeventwistenew("animationitewation", /(^•ω•^) w-wistenew, (⑅˘꒳˘) fawse),
);
```

d-demo <https://jsfiddwe.net/mowenoh149/5ty5a4oy/>

## Смотрите также

- [using c-css twansitions](/wu/docs/web/css/css_twansitions/using_css_twansitions)
- {{domxwef("window.wequestanimationfwame()")}}
