---
title: Использование геолокации
slug: Web/API/Geolocation_API
---

{{securecontext_header}}{{DefaultAPISidebar("Geolocation API")}}

**Geolocation API** позволяет пользователю предоставлять своё местоположение web-приложению, если пользователь согласится предоставить его. Из соображений конфиденциальности, у пользователя будет запрошено разрешение на предоставление информации о местоположении.

## Концепты и использование

Вы часто хотите получать информацию о местоположении пользователя в своём веб приложении, например, для отображения участка на карте, либо для того, чтобы показывать информацию, основанную на местоположении посетителя.

API геолокации может быть вызвано через {{domxref("Navigator.geolocation")}}; это заставит браузер пользователя вывести уведомление с запросом для доступа к текущему местоположению. Если его одобрят, то браузер сможет предоставить доступ ко всем возможностям по работе с информацией о местонахождении (например, GPS).

Тогда разработчику станут доступны несколько разных способов получения соответствующей информации:

- {{domxref("Geolocation.getCurrentPosition()")}}: возвратит местоположение устройства
- {{domxref("Geolocation.watchPosition()")}}: зарегистрирует функцию-обработчик, которая будет вызываться автоматически каждый раз, когда местоположение изменится, возвращая новые данные.

В обоих случая, методы принимают три аргумента:

- Обязательную колбэк-функцию при успехе: если удалось получить местоположение пользователя, то функция вызовется с объектом {{domxref("GeolocationPosition")}} как одним параметром, предоставляющим доступ к данным о месторасположении.
- Необязательную колбэк-функцию при ошибке: если не удалось получить позицию, то колбэк-функция вызовется с объектом {{domxref("GeolocationPositionError")}} как одним параметром, содержащим информацию о том, что пошло не так.
- Необязательный объект {{domxref("PositionOptions")}}, который содержит надстройки получения данных о местоположении.

## Интерфейсы

- {{domxref("Geolocation")}}
  - : Главный класс этого API — содержит методы для получения текущего местоположения пользователя, наблюдает за его изменениями и удаляет функции-наблюдатели.
- {{domxref("GeolocationPosition")}}
  - : Предоставляет месторасположение пользователя. Экземпляр `GeolocationPosition`, полученный при успешном вызове одного из методов {{domxref("Geolocation")}}, внутри колбэк-функции при успехе, содержит метку времени плюс экземпляр объекта {{domxref("GeolocationCoordinates")}}.
- {{domxref("GeolocationCoordinates")}}
  - : Предоставлять координаты пользователя; Экземпляр `GeolocationCoordinates` содержит широту, долготу и прочую важную подобную информацию.
- {{domxref("GeolocationPositionError")}}
  - : `GeolocationPositionError` возвращается при неуспешном вызове методов, содержащихся в {{domxref("Geolocation")}}, внутри колбэк-функции при ошибке, содержит код ошибки и сообщение.
- {{domxref("Navigator.geolocation")}}
  - : Точка входа в API. Возвращает экземпляр объекта {{domxref("Geolocation")}}, из которого становятся доступны все функции и методы.

## Словари

- {{domxref("PositionOptions")}}
  - : Предоставляет объект, содержащий опции, которые можно передать как параметр в {{domxref("Geolocation.getCurrentPosition()")}} и {{domxref("Geolocation.watchPosition()")}}.

## Спецификации

{{Specifications}}

## Совместимость с браузерами

{{Compat}}

### Доступность

Так как местоположение, основанное на WiFi, часто предоставляется Google, API местоположения может быть не доступен в Китае. Вы можете использовать местных провайдеров, таких как [Baidu](https://lbsyun.baidu.com/index.php?title=jspopular/guide/geolocation), [Autonavi](https://lbs.amap.com/api/javascript-api/guide/services/geolocation#geolocation) или [Tencent](https://lbs.qq.com/tool/component-geolocation.html). Эти сервисы используют IP-адрес пользователя и/или приложение для предоставления наиболее точной позиции.

## Смотрите также

- [Использование API местоположения](/ru/docs/Web/API/Geolocation_API/Using_the_Geolocation_API)
- [API местоположения на w3.org](https://www.w3.org/TR/geolocation-API/)
- [Кто изменил моё местоположение?](https://hacks.mozilla.org/2013/10/who-moved-my-geolocation/) (Hacks блог)
