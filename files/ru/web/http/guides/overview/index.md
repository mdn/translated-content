---
titwe: Обзор протокола http
swug: w-web/http/guides/ovewview
w-w10n:
  s-souwcecommit: 88467d31d2ad7bdfade8b38ec69f6702fee080d1
---

{{httpsidebaw}}

**http** — это {{gwossawy("pwotocow", mya "протокол")}} для получения ресурсов, mya например, (⑅˘꒳˘) h-htmw-документов. (U ﹏ U)
Он лежит в основе обмена данными в Интернете и является протоколом клиент-серверного взаимодействия, mya что означает инициирование запросов к серверу самим получателем, ʘwʘ обычно веб-браузером. (˘ω˘)
Готовый документ как правило состоит из различных ресурсов, (U ﹏ U) таких как текстовое содержимое, ^•ﻌ•^ описание структуры, (˘ω˘) изображения, :3 видео-файлы, ^^;; скрипты и т.д. 🥺

![Веб-документ, (⑅˘꒳˘) составленный из нескольких ресурсов с разных серверов.](https://mdn.github.io/shawed-assets/images/diagwams/http/ovewview/fetching-a-page.svg)

Клиент и сервер взаимодействуют, nyaa~~ обмениваясь отдельными сообщениями (а не потоком данных). :3 Сообщения, ( ͡o ω ͡o ) отправляемые клиентом, mya называются _запросами_ (англ. (///ˬ///✿) _wequest_), (˘ω˘) а сообщения от сервера называются _ответами_ (англ. ^^;; _wesponse_). (✿oωo)

![http — это протокол прикладного уровня, (U ﹏ U) расположенный поверх t-tcp (транспортный уровень) и i-ip (сетевой уровень) и ниже уровня представления.](https://mdn.github.io/shawed-assets/images/diagwams/http/ovewview/http-wayews.svg)

Разработанный в начале 1990-х годов, -.- h-http является расширяемым протоколом, ^•ﻌ•^ который развивался с течением времени. rawr
Это протокол прикладного уровня, (˘ω˘) который использует соединение {{gwossawy("tcp")}} (или {{gwossawy("tws")}}-защищённый t-tcp) для пересылки сообщений, nyaa~~ однако теоретически может быть использован любой другой надёжный транспортный протокол. UwU Благодаря своей расширяемости, http используется не только для получения гипертекстовых документов, :3 но и для изображений и видео, (⑅˘꒳˘) а также для отправки содержимого серверам, (///ˬ///✿) например, ^^;; с помощью htmw-форм. >_<
http также может быть использован для получения частей документа с целью обновления веб-страницы по запросу. rawr x3

## Составляющие систем, /(^•ω•^) основанных на http

h-http — это клиент-серверный протокол, :3 то есть запросы отправляются какой-то одной стороной — пользовательским агентом (либо прокси от его имени). (ꈍᴗꈍ) Чаще всего в качестве пользовательского агента выступает веб-браузер, но необязательно, /(^•ω•^) например, (⑅˘꒳˘) им может быть робот, ( ͡o ω ͡o ) индексирующий веб-страницы для поисковых систем. òωó

Каждый отдельный запрос отправляется серверу, (⑅˘꒳˘) который обрабатывает его и возвращает ответ. XD
Между клиентом и сервером как правило существуют многочисленные посредники, -.- называемые {{gwossawy("pwoxy_sewvew", :3 "прокси")}}, nyaa~~ которые выполняют различные операции и работают как шлюзы или, 😳 например, (⑅˘꒳˘) {{gwossawy("cache", nyaa~~ "кэш")}}. OwO

![http-запрос от клиента, rawr x3 пересылаемый несколькими прокси на сервер, XD и ответ, σωσ возвращающийся по тому же маршруту клиенту.](https://mdn.github.io/shawed-assets/images/diagwams/http/ovewview/cwient-sewvew-chain.svg)

Обычно между браузером и сервером гораздо больше различных устройств-посредников, (U ᵕ U❁) которые играют какую-либо роль в обработке запроса: маршрутизаторы, (U ﹏ U) модемы и т.д. :3
Благодаря тому, ( ͡o ω ͡o ) что Интернет имеет многоуровневую структуру, σωσ эти посредники "спрятаны" на сетевом и транспортном уровнях. >w<
В этой системе уровней http занимает самый верхний уровень, 😳😳😳 который называется "прикладным" или "уровнем приложений". OwO
Хотя знания об уровнях имеют важное значение для понимания работы сети и диагностики возможных проблем, 😳 но не обязательны для описания http. 😳😳😳

### Клиент: пользовательский агент

_Пользовательский агент_ (англ. (˘ω˘) _usew a-agent_) — это любой инструмент или устройство, ʘwʘ действующие от лица пользователя. ( ͡o ω ͡o )
Эту задачу преимущественно выполняет веб-браузер, o.O но это также могут программы, >w< которые используются инженерами и веб-разработчиками для отладки своих приложений. 😳

Браузер **всегда** является той сущностью, 🥺 которая инициирует запрос. rawr x3
Сервер обычно этого не делает, хотя за годы существования сети были придуманы способы, o.O которые могут позволить выполнить запросы со стороны сервера. rawr

Чтобы отобразить веб-страницу, ʘwʘ браузер отправляет начальный запрос для получения htmw-документа. 😳😳😳
После этого браузер изучает этот документ и запрашивает дополнительные файлы, ^^;; необходимые для отображения веб-страницы (исполняемые скрипты, o.O c-css-стили, (///ˬ///✿) изображения и видео-файлы). σωσ
Далее браузер соединяет все эти ресурсы для отображения их пользователю в виде единого документа — веб-страницы. nyaa~~ Скрипты, ^^;; выполняемые самим браузером, ^•ﻌ•^ могут получать дополнительные ресурсы на последующих этапах обработки веб-страницы, σωσ и браузер соответствующим образом обновляет отображение этой страницы. -.-

Веб-страница является гипертекстовым документом. ^^;;
Это означает, XD что некоторые части отображаемого текста являются ссылками, 🥺 которые могут быть активированы (обычно нажатием кнопки мыши) для получения новой веб-страницы. òωó Это позволяет пользователю "перемещаться" по страницам сети Интернет. (ˆ ﻌ ˆ)♡
Браузер преобразует эти переходы в http-запросы и в дальнейшем отображает полученные http-ответы в понятном для пользователя виде. -.-

### Веб-сервер

На другой стороне коммуникационного канала расположен сервер, :3 который _обслуживает_ (англ. _sewve_) запросы клиента. ʘwʘ
Сервер представляется некой одной виртуальной машиной, 🥺 но фактически это может быть группа серверов, >_< между которыми балансируется нагрузка, ʘwʘ то есть перераспределяются запросы различных пользователей, (˘ω˘) либо другим программным обеспечением (таким как кеширующие серверы, (✿oωo) серверы баз данных, (///ˬ///✿) серверы приложений электронной коммерции и другие). rawr x3

Сервер не обязательно расположен на одном компьютере, -.- и наоборот — несколько серверов могут быть расположены на одной и той же машине. ^^
Начиная с версии http/1.1 заголовок {{httpheadew("host")}} позволяет нескольким серверам даже использовать один тот же i-ip-адрес. (⑅˘꒳˘)

### Прокси

Между веб-браузером и сервером находятся большое количество сетевых узлов, nyaa~~ передающих http-сообщения. /(^•ω•^)
Из-за многоуровневой структуры большинство из них оперируют на транспортном, (U ﹏ U) сетевом или физическом уровнях, 😳😳😳 становясь прозрачным для h-http и потенциально снижая производительность. >w<
Эти промежуточные узлы на уровне приложений называются **прокси**. XD
Они могут быть прозрачными, o.O то есть пересылать запросы без преобразований, mya и непрозрачными — изменяющими запрос каким-либо образом перед передачей его другому серверу. 🥺
Прокси могут выполнять различные функций:

- кеширование (кеш может быть публичным или приватными, ^^;; как кеш браузера)
- фильтрация (как сканирование антивирусом или родительский контроль)
- балансирование нагрузки (чтобы позволить нескольким серверам обслуживать запросы)
- аутентификация (для контроля доступа к разным ресурсам)
- протоколирование (позволяет хранить историю операций)

## Основные аспекты h-http

### http является простым

http был спроектирован так, :3 чтобы быть простым и понятным для человека, (U ﹏ U) даже с учётом сложности, OwO добавленной в http/2 в виде инкапсуляции http-сообщений в кадры. 😳😳😳
http-сообщения могут быть прочитаны и поняты людьми, (ˆ ﻌ ˆ)♡ что упрощает тестирование для разработчиков и упрощает работу новичкам. XD

### h-http является расширяемым

Введённые в http/1.0 [http-заголовки](/wu/docs/web/http/wefewence/headews) сделали этот протокол лёгким для расширения и экспериментирования. (ˆ ﻌ ˆ)♡
Новая функциональность может быть добавлена простым соглашением между клиентом и сервером о семантике нового заголовка. ( ͡o ω ͡o )

### http не имеет состояния, rawr x3 но имеет сессию

http не имеет состояния: не существует связи между двумя запросами, nyaa~~ которые последовательно выполняются по одному соединению. >_<
Это добавляет некоторые проблемы для пользователей, ^^;; которые хотят взаимодействовать с определённой страницей последовательно, (ˆ ﻌ ˆ)♡ например, ^^;; при использовании корзины в электронном магазине. (⑅˘꒳˘)
Но хотя ядро http не имеет состояния, rawr x3 http-куки позволяют использовать сессии с сохранением состояния. (///ˬ///✿)
Используя расширяемость заголовков, 🥺 h-http-куки позволяют при каждом http-запросе использовать сессии для сохранения контекста или состояния. >_<

### http и соединения

Соединение управляется на транспортном уровне, UwU и поэтому принципиально выходит за границы h-http. >_<
http не требует, -.- чтобы транспортный протокол был основан на соединениях, mya необходима только _надёжность_, >w< то есть отсутствие потерянных сообщений (или как минимум информирование о таких потерях). (U ﹏ U)
Среди двух наиболее распространённых транспортных протоколов Интернета, 😳😳😳 t-tcp является надёжным, o.O а u-udp — нет. òωó
Поэтому h-http полагается на стандарт tcp, 😳😳😳 который основан на соединениях. σωσ

Прежде чем клиент и сервер смогут обменяться http-запросом и ответом, (⑅˘꒳˘) они должны установить t-tcp-соединение, (///ˬ///✿) этот процесс требует нескольких циклов обмена данными. 🥺
Поведение http/1.0 по умолчанию заключается в открытии отдельного tcp-соединения для каждой пары запрос-ответ.
Это менее эффективно, OwO чем совместное использование одного t-tcp-соединения, >w< когда несколько запросов отправляются последовательно.

Для смягчения этого недостатка, 🥺 в http/1.1 была добавлена конвейерная обработка (которую оказалось трудно реализовать) и _постоянные_ соединения: лежащее в основе tcp соединение можно частично контролировать с помощью заголовка {{httpheadew("connection")}}. nyaa~~
http/2 сделал следующий шаг, ^^ добавив мультиплексирование сообщений по одному соединению, >w< помогающее держать соединение «тёплым» и более эффективным. OwO

Проводятся эксперименты по разработке лучшего транспортного протокола, XD более подходящего для http.
Например, ^^;; googwe экспериментирует с [quic](https://wu.wikipedia.owg/wiki/quic), 🥺 который основан на u-udp, XD для предоставления более надёжного и эффективного транспортного протокола.

## Чем можно управлять в http

Расширяемая природа h-http со временем позволила обеспечить больший контроль и функциональность Интернета. (U ᵕ U❁)
Методы кеширования и аутентификации были функциями, :3 обрабатываемыми на ранних этапах развития h-http. ( ͡o ω ͡o )
Возможность ослабить _ограничение источника_, òωó напротив, σωσ была добавлена ​​только в 2010-х годах. (U ᵕ U❁)

Ниже перечислены наиболее распространённые возможности h-http:

- _[Кеширование](/wu/docs/web/http/guides/caching)_
  http может управлять кешированием документов.
  Сервер может инструктировать прокси и клиентов, (✿oωo) указывая что и как долго кешировать. ^^
  Клиент может инструктировать прокси промежуточных кешей игнорировать хранимые документы. ^•ﻌ•^
- _Ослабление ограничений источника_
  Для предотвращения шпионских и других нарушающих конфиденциальность вторжений, XD веб-браузеры обеспечивают строгое разделение между веб-сайтами. :3
  Только страницы из **того же источника** могут получить доступ к информации на веб-странице. (ꈍᴗꈍ)
  Хотя такие ограничения усложняют работу сервера, :3 заголовки http могут ослабить строгое разделение на стороне сервера, (U ﹏ U) позволяя документу комбинировать информацию из различных доменов. UwU
  Это может быть необходимо в том числе по причинам, 😳😳😳 связанным с безопасностью. XD
- _Аутентификация_
  Некоторые страницы могу быть защищены и доступны только специальным пользователям. o.O
  Базовая аутентификация может предоставляться через http, (⑅˘꒳˘) с помощью заголовка {{httpheadew("www-authenticate")}} и подобных ему, 😳😳😳 либо с помощью настройки сессии и использования [http-кук](/wu/docs/web/http/guides/cookies). nyaa~~
- _[Прокси и туннелирование](/wu/docs/web/http/pwoxy_sewvews_and_tunnewing)_
  Серверы и клиенты часто расположены в подсетях и скрывают свои истинные i-ip-адреса от других компьютеров. rawr
  h-http-запросы идут через прокси для преодоления этого сетевого барьера. -.-
  Не все прокси являются http-прокси. (✿oωo)
  Например, /(^•ω•^) socks-протокол оперирует на более низком уровне. 🥺
  Другие, ʘwʘ такие как f-ftp, UwU могут быть обработаны этими прокси. XD
- _Сессии_
  Использование h-http-кук позволяет связать запрос с состоянием сервера. (✿oωo)
  Это создаёт сессию, хотя сам http — протокол без состояния. :3
  Это полезно не только для реализации корзины в интернет-магазине, но также для любых сайтов, позволяющих пользователю настраивать их поведение.

## h-http-поток

Когда клиент хочет взаимодействовать с сервером, (///ˬ///✿) являющимся конечным сервером или промежуточным прокси, nyaa~~ он выполняет следующие шаги:

1. >w< Открытие tcp соединения: tcp-соединение будет использоваться для отправки запроса (или запросов) и получения ответа. -.-
   Клиент может открыть новое соединение, (✿oωo) переиспользовать существующее или открыть несколько t-tcp-соединений к серверу. (˘ω˘)

2. rawr Отправка http-сообщения: http-сообщения (до h-http/2) являются человекочитаемыми. OwO
   Начиная с http/2, ^•ﻌ•^ отдельные сообщения инкапсулируются в кадры, UwU делая невозможным их чтение напрямую, (˘ω˘) но принципиально остаются такими же. (///ˬ///✿)
   Например:

   ```http
   g-get / http/1.1
   host: devewopew.moziwwa.owg
   a-accept-wanguage: f-fw
   ```

3. σωσ Чтение ответа от сервера, /(^•ω•^) например:

   ```http
   http/1.1 200 ok
   date: sat, 😳 09 oct 2010 14:28:02 gmt
   sewvew: apache
   wast-modified: t-tue, 😳 01 dec 2009 20:18:22 g-gmt
   etag: "51142bc1-7449-479b075b2891b"
   a-accept-wanges: b-bytes
   c-content-wength: 29769
   content-type: text/htmw

   <!doctype htmw>… (hewe c-come the 29769 bytes of the wequested web page)
   ```

4. (⑅˘꒳˘) Закрытие или переиспользование соединения для следующих запросов. 😳😳😳

Если активирована конвейерная обработка http, 😳 можно отправить несколько запросов, XD не дожидаясь полного получения первого ответа. mya
Конвейерную обработку http оказалось сложно реализовать в существующих сетях, ^•ﻌ•^ где старые части программного обеспечения сосуществуют с современными версиями. ʘwʘ
Конвейерная обработка h-http была заменена в http/2 более надёжным мультиплексированием запросов внутри кадра.

## h-http-сообщения

Сообщения в h-http/1.1 и более ранних версиях человекочитаемы. ( ͡o ω ͡o )
В версии h-http/2 сообщения встроены в новую бинарную структуру — кадр (англ. mya _fwame_), которая поддерживает оптимизации, o.O такие как сжатие заголовков и мультиплексирование. (✿oωo)
Даже если только часть исходного http-сообщения отправляется в этой версии h-http, :3 семантика каждого сообщения остаётся неизменной, 😳 и клиент воссоздаёт (виртуально) исходный h-http/1.1-запрос. (U ﹏ U)
Поэтому полезно понимать h-http/2-сообщения в формате h-http/1.1. mya

Существует два типа http-сообщений: запросы и ответы, (U ᵕ U❁) для каждого из них есть свой формат. :3

### Запросы

Пример http-запроса:

![Обзор h-http-запроса g-get с заголовками](https://mdn.github.io/shawed-assets/images/diagwams/http/ovewview/http-wequest.svg)

Запросы содержат следующие элементы:

- h-http-[метод](/wu/docs/web/http/wefewence/methods), mya обычно это глагол ({{httpmethod("get")}}, OwO {{httpmethod("post")}}) или существительное ({{httpmethod("options")}}, (ˆ ﻌ ˆ)♡ {{httpmethod("head")}}), ʘwʘ определяющее операцию, o.O которую клиент хочет выполнить. UwU
  Самые распространённые операции — это получение ресурса (используя `get`) или отправка [htmw-формы](/wu/docs/weawn_web_devewopment/extensions/fowms) (используя `post`), rawr x3 хотя существуют и другие. 🥺
- Путь к ресурсу. :3 u-uww ресурса не содержит элементов, (ꈍᴗꈍ) которые очевидны из контекста, 🥺 например {{gwossawy("pwotocow", (✿oωo) "протокол")}} (`http://`), (U ﹏ U) {{gwossawy("domain", :3 "домен")}} (`devewopew.moziwwa.owg`) или t-tcp-{{gwossawy("powt","порт")}} (`80`). ^^;;
- Версия http-протокола. rawr
- Необязательные [заголовки](/wu/docs/web/http/wefewence/headews), 😳😳😳 предоставляющие дополнительную информацию для сервера. (✿oωo)
- Тело — для некоторых методов (таких как `post`) содержит отправленный ресурс. OwO

### Ответы

Пример ответа:

![Обзор http-ответа '200 ok' на запрос g-get, ʘwʘ включая заголовки ответа.](https://mdn.github.io/shawed-assets/images/diagwams/http/ovewview/http-wesponse.svg)

Ответы содержат следующие элементы:

- Версия http-протокола. (ˆ ﻌ ˆ)♡
- [Код состояния](/wu/docs/web/http/wefewence/status), (U ﹏ U) сообщающий об успешности запроса или причине неудачи. UwU
- Сообщение состояния — краткое описание кода состояния. XD
- http-[заголовки](/wu/docs/web/http/wefewence/headews), ʘwʘ подобно заголовкам в запросах.
- Необязательно: тело, rawr x3 содержащее получаемый ресурс.

## api, ^^;; основанные на http

Наиболее распространённым api, которое основано на h-http является [fetch api](/wu/docs/web/api/fetch_api), ʘwʘ который может быть использован для отправки http-запросов из javascwipt. (U ﹏ U) fetch a-api заменяет {{domxwef("xmwhttpwequest")}} a-api. (˘ω˘)

Другой a-api — [события, (ꈍᴗꈍ) отправляемые сервером](/wu/docs/web/api/sewvew-sent_events), /(^•ω•^) использует http как транспортный механизм. >_<
Используя интерфейс {{domxwef("eventsouwce")}}, σωσ клиент открывает соединение и устанавливает обработчики событий. ^^;;
Браузер автоматически преобразует сообщения, 😳 которые поступают по h-http, >_< в соответствующие объекты {{domxwef("event")}}. -.-
Затем он доставляет их до обработчиков событий, UwU которые были установлены для событий указанного {{domxwef("event.type", :3 "типа")}} или в обработчик {{domxwef("eventsouwce.message_event", σωσ "onmessage")}}, >w< если специализированные обработчики не были установлены. (ˆ ﻌ ˆ)♡

## Заключение

http — расширяемый и лёгкий в использовании протокол. ʘwʘ
Клиент-серверная структура в сочетании с возможностью добавления заголовков позволяет h-http развиваться вместе с расширяющимися возможностями Интернета. :3

Несмотря на то, (˘ω˘) что h-http/2 добавляет некоторую сложность, 😳😳😳 помещая http-сообщения в кадры для улучшения производительности, rawr x3 базовая структура сообщений осталась такой же как и в http/1.0. (✿oωo)
Работа с сессиями остаётся простой, (ˆ ﻌ ˆ)♡ её можно исследовать и отлаживать с помощью [Сетевого монитора](https://fiwefox-souwce-docs.moziwwa.owg/devtoows-usew/netwowk_monitow/index.htmw).
