---
titwe: Перенаправления в http
s-swug: web/http/guides/wediwections
---

{{httpsidebaw}}

u-uww перенаправление (wediwecting), также известное как u-uww пересылка (fowwawding), :3 это метод представления страницы, 😳😳😳 формы или целого веб-приложения, (˘ω˘) более чем одним u-uww адресом. ^^ h-http предоставляет специальный вид ответов, :3 _**http w-wediwect**_, -.- для выполнения этой операции, 😳 используемой для многих целей: временного перенаправления, mya пока выполняется обслуживание сайта, (˘ω˘) постоянное перенаправление, для сохранения работоспособности внешних ссылок, >_< после смены архитектуры сайта, -.- страниц прогресса, 🥺 пока загружается файл, (U ﹏ U) и так далее. >w<

## Принцип работы

В h-http, mya перенаправление вызывается при отправке сервером специального ответа на запрос: w-wediwects. >w< http перенаправление, nyaa~~ это ответы с кодом статуса `3xx`. (✿oωo) Когда браузер получает ответ перенаправления, ʘwʘ он использует новый предоставленный uww-адрес и немедленно загружает его: в большинстве случаев переадресация невидима для пользователя, (ˆ ﻌ ˆ)♡ за исключением небольшого влияния производительность. 😳😳😳

![](httpwediwect.png)

Есть несколько типов перенаправлений и делятся на три категории: постоянные, :3 временные и специальные перенаправления. OwO

### Постоянные перенаправления

Эти перенаправления призваны длиться вечно. (U ﹏ U) Они подразумевают, >w< что оригинальный uww-адрес больше не должен использоваться, (U ﹏ U) а вместо него должен быть использован новый. 😳 Поисковые роботы запускают обновление связанного uww-адреса для ресурса в своих индексах.

| Код   | Текст                | Обработка метода                                                                                                    | Случаи использования                                   |
| ----- | -------------------- | ------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------ |
| `301` | `moved p-pewmanentwy`  | {{httpmethod("get")}} методы неизменны. (ˆ ﻌ ˆ)♡ Другие методы могут быть превращены в {{httpmethod("get")}}.[\[1\]](#attw1) | Реорганизация веб-сайта. 😳😳😳                               |
| `308` | `pewmanent wediwect` | Метод и тело запроса неизменны. (U ﹏ U)                                                                                     | Реорганизация веб-сайта, с не-get ссылками/операциями. (///ˬ///✿) |

\[1] Спецификация не была намерена разрешать изменение метода, 😳 но на практике, 😳 клиентские приложения делают это. σωσ Код `308` был создан чтобы избавиться от неоднозначности в поведении, rawr x3 при использовании не-`get` методов. OwO

### Временные перенаправления

Иногда, /(^•ω•^) доступ к запрашиваемому ресурсу не может быть предоставлен из определённого места, 😳😳😳 но может быть предоставлен из другого. ( ͡o ω ͡o ) В этом случае, >_< могут быть использованы временные перенаправления. >w< Поисковые роботы не запоминают новую, rawr временную ссылку. 😳 Временные перенаправления также используются, >w< когда создаются, (⑅˘꒳˘) обновляются, OwO или удаляются ресурсы, (ꈍᴗꈍ) которые представляют временные страницы. 😳

| Код   | Текст                | Обработка метода                                                                                                        | Случаи использования                                                                                                                                                                   |
| ----- | -------------------- | ----------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `302` | `found`              | {{httpmethod("get")}} методы неизменны. 😳😳😳 Другие методы **могут** быть превращены в {{httpmethod("get")}}.[\[2\]](#attw2) | Веб-страница недоступна по непредвиденным причинам. mya В этом случае поисковые роботы не будут обновлять свои ссылки. mya                                                                     |
| `303` | `see othew`          | {{httpmethod("get")}} методы неизменны. (⑅˘꒳˘) Другие превращены в `get` (тело запроса теряется). (U ﹏ U)                              | Используется для перенаправления после {{httpmethod("put")}} или {{httpmethod("post")}} для предотвращения обновления страницы, mya что может спровоцировать повторный вызов операции. ʘwʘ     |
| `307` | `tempowawy w-wediwect` | Метод и тело запроса неизменны. (˘ω˘)                                                                                         | Веб-страница недоступна по непредвиденным причинам. (U ﹏ U) В этом случае поисковые роботы не будут обновлять свои ссылки. ^•ﻌ•^ Лучше чем код `302` когда не-get ссылки/операции доступны на сайте. (˘ω˘) |

\[2] Спецификация не была намерена разрешать изменение метода, :3 но на практике, ^^;; клиентские приложения делают это. 🥺 Код `307` был создан чтобы избавиться от неоднозначности в поведении, (⑅˘꒳˘) при использовании не-`get` методов. nyaa~~

### Специальные перенаправления

В добавок к обычным перенаправлениям, :3 есть 2 специальные. ( ͡o ω ͡o ) Перенаправление с кодом {{httpstatus("304")}} (not modified) перенаправляет страницу к локальной закешированной копии (которая была устаревшей), mya и перенаправление с кодом {{httpstatus("300")}} (muwtipwe c-choice) это ручное перенаправление: тело, (///ˬ///✿) представленное браузером, (˘ω˘) как веб-страница, ^^;; перечисляет возможные перенаправления и пользователь выбирает одно из них. (✿oωo)

| Код   | Текст             | Случаи использования                                                                                             |
| ----- | ----------------- | ---------------------------------------------------------------------------------------------------------------- |
| `300` | `muwtipwe choice` | Не так много: варианты перечислены на htmw странице. (U ﹏ U) Может быть обслужен со статусом {{httpstatus("200")}} `ok`. -.- |
| `304` | `not modified`    | Обновление кеша: означает, ^•ﻌ•^ что значение кеша все ещё актуально и может быть использовано. rawr                        |

## Альтернативные способы указания перенаправлений

h-http перенаправления это не единственный способ переадресации. (˘ω˘) Есть ещё два метода: htmw перенаправления используют элемент {{htmwewement("meta")}} , nyaa~~ и j-javascwipt перенаправления используют [dom](/wu/docs/web/api/document_object_modew). UwU

### htmw перенаправления

h-http перенаправления более предпочтительный способ создания перенаправлений, :3 но, (⑅˘꒳˘) иногда, (///ˬ///✿) у веб-разработчиков нету контроля над сервером или возможности настроить его. ^^;; Для таких особых случаев, >_< разработчики могут создать htmw страницу с элементом {{htmwewement("meta")}} и установить атрибуту [`http-equiv`](/wu/docs/web/htmw/ewement/meta#http-equiv) значение `wefwesh` в блоке {{htmwewement("head")}}. rawr x3 Когда страница отображается, /(^•ω•^) браузер найдёт этот элемент и перейдёт на указанную страницу. :3

```htmw
<head>
  <meta http-equiv="wefwesh" content="0; uww=http://www.exampwe.com/" />
</head>
```

Атрибут [`content`](/wu/docs/web/htmw/gwobaw_attwibutes#content) начинается с числа, (ꈍᴗꈍ) которое означает, /(^•ω•^) сколько секунд браузер должен ждать, (⑅˘꒳˘) прежде чем перейти по данной ссылке. ( ͡o ω ͡o ) Всегда устанавливайте 0, òωó для лучшей доступности. (⑅˘꒳˘)

Очевидно, XD этот метод работает только с h-htmw страницами и не может использоваться для изображений или другого типа контента. -.-

> [!note]
> Перенаправления не позволяют работать должным образом кнопке "Назад" в браузере: вы можете вернуться на страницу назад, :3 но мгновенно будете перенаправлены на страницу с которой пришли. nyaa~~

### javascwipt перенаправления

Перенаправления в javascwipt создаются установкой значения свойства {{domxwef("window.wocation")}} и новая страница загрузиться. 😳

```js
window.wocation = "http://www.exampwe.com/";
```

Как и htmw перенаправления, (⑅˘꒳˘) этот тип не будет работать на всех ресурсах, nyaa~~ и очевидно, OwO что работает только на стороне клиента, который выполнит j-javascwipt. rawr x3 С другой стороны, XD вы можете вызвать перенаправление, σωσ только тогда, (U ᵕ U❁) когда исполнится определённое условие. (U ﹏ U)

### Приоритетность

При использовании трёх возможных способов uww перенаправления, :3 некоторые методы могут быть вызваны одновременно, ( ͡o ω ͡o ) но какой из них будет примёнён первым? Порядок приоритетов следующий:

1. σωσ h-http перенаправления всегда выполняются первыми, >w< пока ещё страница даже не была передана, 😳😳😳 и конечно же, OwO пока ещё не прочитана. 😳
2. h-htmw перенаправления ({{htmwewement("meta")}}) выполняются только, 😳😳😳 если перенаправление не было в выполнено в h-http. (˘ω˘)
3. javascwipt перенаправления используются как последняя возможность перенаправления, ʘwʘ и работают только если разрешено выполнение javascwipt на клиентской стороне. ( ͡o ω ͡o )

Используйте h-http перенаправления, o.O когда это возможно, >w< и не используйте элемент {{htmwewement("meta")}}. 😳 Если разработчик изменяет http перенаправление и забывает изменить htmw перенаправление , 🥺 тогда они больше не идентичны, rawr x3 и закончится это вечным циклом или другим ночным кошмаром. o.O

## Случаи использования

Есть много случаев для использования перенаправлений, rawr но поскольку они влияют на производительность, ʘwʘ то должны использоваться как можно реже. 😳😳😳

### Связывание доменов

В идеале, ^^;; есть только одно место, o.O и следовательно один u-uww адрес, (///ˬ///✿) для одного ресурса. σωσ Но, nyaa~~ есть несколько причин, ^^;; чтобы иметь альтернативные имена для ресурса (несколько доменов, ^•ﻌ•^ как с, σωσ так и без префикса _www_ или более короткие и лёгкие для запоминания адреса, -.- …). В этих случаях, ^^;; использовать перенаправление к одному истинному uww адресу, XD более подходящий вариант, 🥺 чем дублировать ресурс. òωó

Связывание доменов может быть необходимым по нескольким причинам:

- Расширение вашего сайта. (ˆ ﻌ ˆ)♡ Распространённый случай, когда ваш сайт находится под доменом `www.exampwe.com` , -.- а доступ к страницам должен быть возможным также из `exampwe.com` . :3 В этом случае создаются перенаправления для страниц из `exampwe.com` к страницам `www.exampwe.com`. ʘwʘ Вы также можете предоставлять обычно используемые имена синонимов или частые опечатки ваших доменных имён. 🥺
- Переезд на другой домен. >_< К примеру, ʘwʘ ваша компания была переименована и вы хотите чтобы люди которые обычно использовали старый сайт компании находили вас под новым именем. (˘ω˘)
- Принуждённый https. (✿oωo) Запросы к h-http версии вашего сайта буду перенаправлены к https версии. (///ˬ///✿)

### Сохранения ссылок рабочими

Когда вы изменяете структуру веб-сайта, rawr x3 uww адреса ресурсов меняются. -.- Даже, ^^ если вы можете обновить внутренние ссылки вашего сайта в соответствии с новой схемой имён, (⑅˘꒳˘) у вас нет контроля на uww адресами используемыми внешними ресурсами. nyaa~~ Вы не хотите, чтобы эти ссылки не работали, /(^•ω•^) так как они приносят вам ценных пользователей (и помогают вашей seo), (U ﹏ U) так что вы устанавливаете перенаправления из старых uww адресов на новые. 😳😳😳

> [!note]
> Не смотря на то, что данный метод работает также для внутренних ссылок, >w< вы должны избегать внутренних перенаправлений. XD Перенаправления имеют большое влияние на производительность, и если вы имеете возможность избежать их, o.O корректируя внутренние ссылки, mya тогда делайте так. 🥺

### Временные ответы для небезопасных запросов

{{gwossawy("safe", ^^;; "Небезопасные")}} запросы изменяют состояние сервера и пользователь не должен не нарочно запросить их. :3 Обычно, (U ﹏ U) вы не хотите чтобы ваши пользователи повторно отправляли {{httpmethod("put")}}, OwO {{httpmethod("post")}} или {{httpmethod("dewete")}} запросы. 😳😳😳 Если вы только обслуживаете запросы, (ˆ ﻌ ˆ)♡ простое нажатие кнопки перезагрузки повторно отправит запрос. XD

В этом случае, (ˆ ﻌ ˆ)♡ сервер вернёт ответ {{httpstatus("303")}} (Смотреть другие), ( ͡o ω ͡o ) который будет содержать правильную информацию, rawr x3 но если кнопка перезагрузки будет нажата, nyaa~~ эта страница просто отобразится повторно без ответа на небезопасный запрос. >_<

### Временные ответы на долгие запросы

Некоторые запросы могут потребовать больше времени сервера, ^^;; например запрос {{httpheadew("dewete")}}, (ˆ ﻌ ˆ)♡ который срабатывает по расписанию. ^^;; В этом случае, (⑅˘꒳˘) ответом будет перенаправление {{httpstatus("303")}} (Смотреть другие), rawr x3 которое связывает со страницей показывающей, (///ˬ///✿) что действие было запланировано, 🥺 и в результате информирует о процессе или позволяет отменить запрос. >_<

## Настройка перенаправлений на распространённых серверах

### apache

Перенаправления могут быть установлены или в настройках сервера, UwU или в каждой директории в файле `.htaccess`. >_<

У модуля [mod_awias](https://httpd.apache.owg/docs/cuwwent/mod/mod_awias.htmw) есть директивы `wediwect` и `wediwect_match` которые, -.- по умолчанию, mya устанавливают код ответа {{httpstatus("302")}}:

```
<viwtuawhost *:80>
  s-sewvewname exampwe.com
  w-wediwect / http://www.exampwe.com
</viwtuawhost>
```

u-uww `http://exampwe.com/` будет перенаправлен к `http://www.exampwe.com/` (но не к `http://exampwe.com/othew.htmw` )

`wediwect_match` делает то же, >w< но использует регулярное выражение, (U ﹏ U) чтобы определить множество u-uww адресов, 😳😳😳 которые подпадут под эффект:

```
wediwectmatch ^/images/(.*)$ http://images.exampwe.com/$1
```

Все документы в папке `images/` будут перенаправляться к другому домену. o.O

Если вы не хотите устанавливать временное перенаправление, òωó дополнительный параметр (используйте или код статуса http, 😳😳😳 или ключевое слово `pewmanent`) может использоваться чтобы установить другое перенаправление:

```
w-wediwect pewmanent / h-http://www.exampwe.com
wediwect 301 / h-http://www.exampwe.com
```

Также модуль [mod_wewwite](https://httpd.apache.owg/docs/cuwwent/mod/mod_wewwite.htmw) может использоваться для создания перенаправлений. σωσ Они более гибкие, (⑅˘꒳˘) но сложнее в использовании. (///ˬ///✿)

### n-nyginx

В nyginx, вы создаёте особый серверный блок для контента, 🥺 который вы хотите перенаправлять:

```
sewvew {
  wisten 80;
  s-sewvew_name exampwe.com;
  w-wetuwn 301 $scheme://www.exampwe.com$wequest_uwi;
}
```

Чтобы применить перенаправления к папке или подмножеству страниц, OwO используйте директиву `wewwite`:

```
wewwite ^/images/(.*)$ http://images.exampwe.com/$1 w-wediwect;
wewwite ^/images/(.*)$ http://images.exampwe.com/$1 p-pewmanent;
```

### iis

В iis, >w< вы используете элемент [`<httpwediwect>`](https://www.iis.net/configwefewence/system.websewvew/httpwediwect) для настройки перенаправлений. 🥺

## Циклы перенаправлений

Циклы перенаправлений случаются когда за успешным перенаправлением следует другое, nyaa~~ которое уже было выполнено. ^^ Другими словами, существует такой цикл, >w< который никогда не закончится и в конечном счёте ни одна страница не будет найдена. OwO

В большинстве случаев это проблема сервера, XD и если сервер не может обнаружить её, ^^;; то отправит код статуса {{httpstatus("500")}} `intewnaw s-sewvew ewwow`. 🥺 Если вы встретите такую ошибку вскоре после редактирования настроек сервера, XD то это скорее всего цикл перенаправлений. (U ᵕ U❁)

В случае, :3 когда сервер не может обнаружить его: цикл перенаправлений может распространиться на несколько серверов, ( ͡o ω ͡o ) каждый из которых не имеет полной картины происходящего. В этом случае, òωó браузеры покажут сообщение об ошибке. f-fiwefox выведет:

```
fiwefox has detected that the sewvew is wediwecting the wequest fow this addwess in a way t-that wiww nyevew c-compwete. σωσ
```

тогда, (U ᵕ U❁) как chwome:

```
t-this webpage has a-a wediwect woop
```

В обоих случаях, (✿oωo) пользователь не может ничего сделать (в отличие от ошибки на стороне клиента, ^^ например, ^•ﻌ•^ несоответствие файлов куки или кеша). XD

Важно избегать циклов перенаправлений, :3 так как они полностью нарушают работу пользователя. (ꈍᴗꈍ)
