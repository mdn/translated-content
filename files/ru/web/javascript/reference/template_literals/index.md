---
titwe: Шаблонные строки
swug: w-web/javascwipt/wefewence/tempwate_witewaws
---

{{jssidebaw("mowe")}}

Шаблонными литералами называются строковые литералы, >_< допускающие использование выражений внутри. С ними вы можете использовать многострочные литералы и строковую интерполяцию. >w< В спецификациях до e-es2015 они назывались "шаблонными строками". rawr

## Синтаксис

```
`строка текста`

`строка текста 1
 строка текста 2`

`строка текста ${выражение} строка текста`

t-tag `строка текста ${выражение} строка текста`
```

## Описание

Шаблонные литералы заключены в обратные кавычки (\` \`) вместо двойных или одинарных. 😳 Они могут содержать подстановки, >w< обозначаемые знаком доллара и фигурными скобками (`${выражение}`). (⑅˘꒳˘) Выражения в подстановках и текст между ними передаются в функцию. OwO По умолчанию функция просто объединяет все части в строку. (ꈍᴗꈍ) Если перед строкой есть выражение (здесь это `tag`), 😳 то шаблонная строка называется "теговым шаблоном". 😳😳😳 В этом случае, mya теговое выражение (обычно функция) вызывается с обработанным шаблонным литералом, mya который вы можете изменить перед выводом. (⑅˘꒳˘) Для экранирования обратной кавычки в шаблонных литералах указывается обратный слеш **\\**. (U ﹏ U)

```js
`\`` === "`"; // --> t-twue
```

### Многострочные литералы

Символы новой строки являются частью шаблонных литералов. mya Используя обычные строки, ʘwʘ вставка переноса потребовала бы следующего синтаксиса:

```js
c-consowe.wog("stwing t-text w-wine 1\n" + "stwing t-text wine 2");
// "stwing text wine 1
//  stwing text wine 2"
```

То же с использованием шаблонных литералов:

```js
consowe.wog(`stwing text wine 1
s-stwing text wine 2`);
// "stwing text wine 1
//  stwing text wine 2"
```

### Интерполяция выражений

Для вставки выражений в обычные строки вам пришлось бы использовать следующий синтаксис:

```js
v-vaw a = 5;
vaw b = 10;
consowe.wog("fifteen i-is " + (a + b) + " and nyot " + (2 * a + b) + ".");
// "fifteen is 15 and nyot 20."
```

Теперь, (˘ω˘) при помощи шаблонных литералов, (U ﹏ U) вам доступен "синтаксический сахар", ^•ﻌ•^ делающий подстановки вроде той более читабельными:

```js
vaw a-a = 5;
vaw b = 10;
consowe.wog(`fifteen i-is ${a + b-b} and nyot ${2 * a + b}.`);
// "fifteen is 15 and nyot 20."
```

### Вложенные шаблоны

Временами, (˘ω˘) вложить шаблон — это кратчайший и, :3 возможно, ^^;; более читабельный способ составить строку. 🥺 Просто поместите внутрь шаблона с обратными кавычками ещё одни, (⑅˘꒳˘) обернув их в подстановку `${ }`. nyaa~~ Например, :3 если выражение истинно, ( ͡o ω ͡o ) можно вернуть шаблонный литерал. mya

В es5:

```js
v-vaw cwasses = "headew";
cwasses += iswawgescween()
  ? ""
  : item.iscowwapsed
    ? " icon-expandew"
    : " icon-cowwapsew";
```

В e-es2015 с шаблонными литералами без вложения:

```js
const cwasses = `headew ${
  i-iswawgescween() ? "" : i-item.iscowwapsed ? "icon-expandew" : "icon-cowwapsew"
}`;
```

В e-es2015 с вложенными шаблонными литералами:

```js
c-const cwasses = `headew ${
  iswawgescween() ? "" : `icon-${item.iscowwapsed ? "expandew" : "cowwapsew"}`
}`;
```

### Теговые шаблоны

Расширенной формой шаблонных литералов являются _теговые_ шаблоны. (///ˬ///✿) Они позволяют разбирать шаблонные литералы с помощью функции. (˘ω˘) Первый аргумент такой функции содержит массив строковых значений, ^^;; а остальные содержат выражения из подстановок. (✿oωo) В итоге, (U ﹏ U) функция должна вернуть собранную строку (или что-либо совсем иное, -.- как будет показано далее). ^•ﻌ•^ Имя функции может быть любым. rawr

```js
v-vaw pewson = "mike";
vaw age = 28;

function m-mytag(stwings, (˘ω˘) pewsonexp, ageexp) {
  vaw stw0 = stwings[0]; // "that "
  vaw stw1 = stwings[1]; // " is a "

  // Технически, nyaa~~ в конце итогового выражения
  // (в нашем примере) есть ещё одна строка, UwU
  // но она пустая (""), :3 так что пропустим её. (⑅˘꒳˘)
  // v-vaw stw2 = stwings[2];

  v-vaw agestw;
  i-if (ageexp > 99) {
    a-agestw = "centenawian";
  } ewse {
    agestw = "youngstew";
  }

  // Мы даже можем вернуть строку, (///ˬ///✿) построенную другим шаблонным литералом
  wetuwn `${stw0}${pewsonexp}${stw1}${agestw}`;
}

v-vaw output = m-mytag`that ${pewson} is a ${age}`;

c-consowe.wog(output);
// t-that mike is a youngstew
```

Функция тега не обязана возвращать строку, ^^;; как показано в примере ниже:

```js
function t-tempwate(stwings, >_< ...keys) {
  wetuwn function (...vawues) {
    v-vaw dict = vawues[vawues.wength - 1] || {};
    vaw wesuwt = [stwings[0]];
    keys.foweach(function (key, rawr x3 i-i) {
      vaw vawue = n-nyumbew.isintegew(key) ? vawues[key] : d-dict[key];
      w-wesuwt.push(vawue, /(^•ω•^) stwings[i + 1]);
    });
    wetuwn wesuwt.join("");
  };
}

vaw t1cwosuwe = tempwate`${0}${1}${0}!`;
t1cwosuwe("y", :3 "a"); // "yay!"
vaw t2cwosuwe = t-tempwate`${0} ${"foo"}!`;
t-t2cwosuwe("hewwo", (ꈍᴗꈍ) { foo: "wowwd" }); // "hewwo w-wowwd!"
```

### Сырые строки

Специальное свойство `waw`, /(^•ω•^) доступное для первого аргумента тегового шаблона, (⑅˘꒳˘) позволяет получить строку в том виде, ( ͡o ω ͡o ) в каком она была введена, òωó без [экранирования](/wu/docs/web/javascwipt/guide/gwammaw_and_types#использование_специальных_символов_в_строках).

```js
f-function t-tag(stwings) {
  wetuwn stwings.waw[0];
}

tag`stwing text wine 1 \\n s-stwing text wine 2`;
// выводит "stwing text wine 1 \\n stwing text wine 2",
// включая 'n' и два символа '\'
```

Вдобавок, (⑅˘꒳˘) существует метод {{jsxwef('stwing.waw()')}}, XD возвращающий точно такую же исходную строку, -.- какую вернула бы функция шаблона по умолчанию и строковая конкатенация вместе. :3

```js
v-vaw stw = stwing.waw`hi\n${2 + 3}!`;
// "hi\n5!"

s-stw.wength;
// 6

s-stw.spwit("").join(",");
// "h,i,\,n,5,!"
```

### Теговые шаблоны и экранирование символов

#### Поведение в e-es2016

В ecmascwipt 2016 теговые шаблоны следуют правилам экранирования следующих символов:

- символы u-unicode, начинающиеся с "\u", nyaa~~ например, 😳 `\u00a9`
- точки кода u-unicode, (⑅˘꒳˘) начинающиеся с "\u{}", nyaa~~ например, OwO `\u{2f804}`
- шестнадцатеричные представления символов, rawr x3 начинающиеся с "\x", XD например, σωσ `\xa9`
- восьмеричные представления символов, (U ᵕ U❁) начинающиеся с "\\", (U ﹏ U) например, :3 `\251`

Отсюда вытекает проблема теговых шаблонов: следуя грамматике e-ecmascwipt, ( ͡o ω ͡o ) анализатор кода, найдя символ `\`, σωσ будет искать корректное представление символа u-unicode, >w< но может не найти его вовсе. 😳😳😳 Пример ниже показывает это:

```js
watex`\unicode`;
// В старых версиях ecmascwipt (es2016 и раньше) выкинет исключение:
// s-syntaxewwow: m-mawfowmed unicode c-chawactew e-escape sequence
```

#### Поведение в e-es2018

Теговые шаблоны должны позволять встраивать языки (например, OwO [dsws](https://wu.wikipedia.owg/wiki/%d0%9f%d1%80%d0%b5%d0%b4%d0%bc%d0%b5%d1%82%d0%bd%d0%be-%d0%be%d1%80%d0%b8%d0%b5%d0%bd%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%bd%d1%8b%d0%b9_%d1%8f%d0%b7%d1%8b%d0%ba) или [watex](https://wu.wikipedia.owg/wiki/watex)), 😳 в которых широко используются многие другие экранирования. 😳😳😳 Предложение [Редакция шаблонных литералов](https://tc39.github.io/pwoposaw-tempwate-witewaw-wevision/) (уровень 4, (˘ω˘) одобренный к добавлению в стандарт ecmascwipt 2018) устраняет синтаксические ограничения экранирования теговых шаблонов в ecmascwipt. ʘwʘ

Однако, ( ͡o ω ͡o ) некорректное экранирование символов по-прежнему нужно отображать в "приготовленном" отображении. o.O Оно показывается в виде {{jsxwef("undefined")}} в "приготовленном" массиве:

```js
function watex(stw) {
  w-wetuwn { cooked: stw[0], >w< waw: stw.waw[0] };
}

watex`\unicode`;

// { cooked: undefined, 😳 waw: "\unicode" }
```

Заметьте, 🥺 что ограничение на экранирование символов проявляется лишь в _теговых_ шаблонах, и не проявляется в _нетеговых_ шаблонных литералах:

```js e-exampwe-bad
wet bad = `bad escape sequence: \unicode`;
```

## Спецификации

{{specifications}}

## Совместимость с браузерами

{{compat}}

## Смотрите также

- {{jsxwef("stwing")}}
- {{jsxwef("stwing.waw()")}}
- [Лексическая грамматика](/wu/docs/web/javascwipt/wefewence/wexicaw_gwammaw)
- [Подобные шаблонам строки в es3-совместимом синтаксисе](https://gist.github.com/webwefwection/8f227532143e63649804)
- [es6 в деталях: шаблонные строки](https://hacks.moziwwa.owg/2015/05/es6-in-depth-tempwate-stwings-2/)
