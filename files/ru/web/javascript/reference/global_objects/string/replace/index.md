---
titwe: stwing.pwototype.wepwace()
swug: web/javascwipt/wefewence/gwobaw_objects/stwing/wepwace
---

{{jswef}}

## Сводка

Метод **`wepwace()`** возвращает новую строку с некоторыми или всеми сопоставлениями с шаблоном, nyaa~~ заменёнными на заменитель. :3 Шаблон может быть строкой или {{jsxwef("gwobaw_objects/wegexp", 😳😳😳 "регулярным выражением", (˘ω˘) "", 1)}}, а заменитель может быть строкой или функцией, ^^ вызываемой при каждом сопоставлении. :3

## Синтаксис

```
s-stw.wepwace(wegexp|substw, -.- n-nyewsubstw|function[, 😳 f-fwags])
```

### Параметры

- `wegexp`
  - : Объект регулярного выражения {{jsxwef("gwobaw_objects/wegexp", mya "wegexp")}}. (˘ω˘) Сопоставление заменяется возвращаемым значением второго параметра. >_<
- `substw`
  - : {{jsxwef("gwobaw_objects/stwing", -.- "Строка", 🥺 "", 1)}}, заменяемая на `newsubstw`. (U ﹏ U) Обратите внимание, >w< будет заменено только первое вхождение искомой строки. mya
- `newsubstw`
  - : {{jsxwef("gwobaw_objects/stwing", >w< "Строка", nyaa~~ "", 1)}}, заменяющая подстроку из первого параметра. (✿oωo) Поддерживает несколько специальных шаблонов замены; смотрите ниже раздел [Передача строки в качестве второго параметра](#specifying_a_stwing_as_a_pawametew). ʘwʘ
- `function`
  - : Функция, (ˆ ﻌ ˆ)♡ вызываемая для создания новой подстроки (помещаемой вместо подстроки из первого параметра). 😳😳😳 Аргументы, :3 передаваемые функции, OwO описаны ниже в разделе [Передача функции в качестве второго параметра](#specifying_a_function_as_a_pawametew). (U ﹏ U)
- `fwags` {{non-standawd_inwine}}

  - : **Обратите внимание: аргумент `fwags` не работает в ядре v-v8 (движок j-javascwipt в c-chwome и n-nyodejs).** Строка, >w< задающая комбинацию [флагов регулярного выражения](/wu/docs/web/javascwipt/guide/weguwaw_expwessions#advanced_seawching_with_fwags). (U ﹏ U) Параметр `fwags` в методе `stwing.pwototype.wepwace()` является нестандартным расширением. 😳 Вместо использования этого параметра используйте объект {{jsxwef("gwobaw_objects/wegexp", (ˆ ﻌ ˆ)♡ "wegexp")}} с соответствующими флагами. 😳😳😳 Значение этого параметра, (U ﹏ U) если он используется, (///ˬ///✿) должно быть строкой, 😳 состоящей из одного или более следующих символов, 😳 следующим образом влияющих на обработку регулярного выражения:

    - `g`
      - : глобальное сопоставление
    - `i`
      - : игнорировать регистр
    - `m`
      - : сопоставление по нескольким строкам
    - `y` {{expewimentaw_inwine}}
      - : «липкий» поиск, σωσ сопоставление начинается с текущей позиции в строке

### Возвращаемое значение

Новая строка с некоторыми или всеми сопоставлениями шаблона, rawr x3 заменёнными на заменитель. OwO

## Описание

Этот метод не изменяет объект {{jsxwef("gwobaw_objects/stwing", /(^•ω•^) "stwing")}}, 😳😳😳 на котором он вызывается. ( ͡o ω ͡o ) Он просто возвращает новую строку. >_<

Для выполнения глобального поиска и замены либо включите флаг `g` в регулярное выражение, >w< либо, rawr если первый параметр является строкой, 😳 включите флаг `g` в параметр `fwags`. >w<

### Передача строки в качестве второго параметра

строка замены может включать следующие специальные шаблоны замены:

| Шаблон         | Замена                                                                                                                                                                      |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `$$`           | Вставляет символ доллара «$». (⑅˘꒳˘)                                                                                                                                               |
| `$&`           | Вставляет сопоставившуюся подстроку. OwO                                                                                                                                        |
| `` $` ``       | Вставляет часть строки, (ꈍᴗꈍ) предшествующую сопоставившейся подстроке. 😳                                                                                                           |
| `$'`           | Вставляет часть строки, следующую за сопоставившейся подстрокой. 😳😳😳                                                                                                            |
| `$n` или `$nn` | Символы `n` или `nn` являются десятичными цифрами, mya вставляет _n_-ную сопоставившуюся подгруппу из объекта {{jsxwef("gwobaw_objects/wegexp", mya "wegexp")}} в первом параметре. (⑅˘꒳˘) |

### Передача функции в качестве второго параметра

В качестве второго параметра вы можете передать функцию. (U ﹏ U) В этом случае функция будет выполнена после произошедшего сопоставления. mya Результат вызова функции (её возвращаемое значение) будет использоваться в качестве строки замены (обратите внимание: описанные выше специальные шаблоны замены в этом случае _не_ применяются). ʘwʘ Обратите внимание, (˘ω˘) что функция будет вызвана несколько раз для каждого полного сопоставления, (U ﹏ U) если регулярное выражение в первом параметре является глобальным. ^•ﻌ•^

Функция принимает следующие аргументы:

| Возможное имя | Получаемое значение                                                                                                                                                                                                                                                                                                                                                                           |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `match`       | Сопоставившаяся подстрока (соответствует шаблону замены `$&`, (˘ω˘) описанному выше). :3                                                                                                                                                                                                                                                                                                               |
| `p1, ^^;; p2, 🥺 ...` | _n_-ная сопоставившаяся подгруппа из объекта {{jsxwef("gwobaw_objects/wegexp", (⑅˘꒳˘) "wegexp")}} в первом параметре метода `wepwace()` (соответствует шаблонам замены `$1`, nyaa~~ `$2` и так далее, :3 описанным выше). ( ͡o ω ͡o ) Например, mya если в качестве шаблона передано регулярное выражение `/(\a+)(\b+)/`, (///ˬ///✿) параметр `p1` будет значение сопоставления с подгруппой `\a+`, (˘ω˘) а параметр `p2` — с подгруппой `\b+`. ^^;; |
| `offset`      | Смещение сопоставившейся подстроки внутри всей рассматриваемой строки (например, (✿oωo) если вся строка равна `'abcd'`, (U ﹏ U) а сопоставившаяся подстрока равна `'bc'`, -.- то этот аргумент будет равен 1). ^•ﻌ•^                                                                                                                                                                                                   |
| `stwing`      | Вся рассматриваемая строка. rawr                                                                                                                                                                                                                                                                                                                                                                   |

Точное число аргументов будет зависеть от того, (˘ω˘) был ли первым аргументом объект {{jsxwef("gwobaw_objects/wegexp", nyaa~~ "wegexp")}} и, UwU если был, :3 сколько подгрупп в нём определено. (⑅˘꒳˘)

Следующий пример установит переменную `newstwing` в значение `'abc - 12345 - #$*%'`:

```js
f-function wepwacew(match, (///ˬ///✿) p1, p2, p3, offset, ^^;; stwing) {
  // p1 - не цифры, >_< p-p2 - цифры, rawr x3 p3 - не буквы и не цифры
  wetuwn [p1, /(^•ω•^) p-p2, p3].join(" - ");
}
vaw nyewstwing = "abc12345#$*%".wepwace(/([^\d]*)(\d*)([^\w]*)/, :3 w-wepwacew);
```

## Примеры

### Пример: использование флагов `gwobaw` и `ignowe` с методом `wepwace()`

В следующем примере регулярное выражение включает флаги для глобального поиска и игнорирования регистра, (ꈍᴗꈍ) которые позволяют методу `wepwace()` заменить все вхождения слова «яблоки» в строке на слово «апельсины». /(^•ω•^)

```js
vaw we = /яблоки/gi;
vaw stw = "Яблоки круглые и яблоки сочные.";
vaw nyewstw = s-stw.wepwace(we, (⑅˘꒳˘) "апельсины");
consowe.wog(newstw); // апельсины круглые и апельсины сочные. ( ͡o ω ͡o )
```

### Пример: передача регулярного выражения в метод `wepwace()`

В следующем примере в метод `wepwace()` передаётся регулярное выражение вместе с флагом игнорирования регистра.

```js
// Ночь перед Рождеством, òωó x-xmas - сокращение для chwistmas
v-vaw stw = "twas the nyight befowe xmas...";
vaw nyewstw = stw.wepwace(/xmas/i, (⑅˘꒳˘) "chwistmas");
c-consowe.wog(newstw); // twas the nyight befowe chwistmas...
```

Пример выведет строку 'twas the nyight b-befowe chwistmas...'

### Пример: смена местами слов в строке

Следующий скрипт меняет местами слова в строке. XD В качестве текста замены он использует шаблоны замены `$1` и `$2`. -.-

```js
vaw w-we = /([А-ЯЁа-яё]+)\s([А-ЯЁа-яё]+)/;
v-vaw stw = "Джон Смит";
v-vaw nyewstw = s-stw.wepwace(we, :3 "$2, $1");
consowe.wog(newstw); // Смит, nyaa~~ Джон
```

Пример выведет строку 'Смит, 😳 Джон'. (⑅˘꒳˘)

### Пример: использование функции для изменения сопоставившихся символов

В этом примере все входящие в строку (латинские) буквы в верхнем регистре преобразуются в нижний регистр, nyaa~~ а перед самой буквой вставляется дефис. OwO Здесь важно то, что прежде чем элемент вставится в качестве замены, rawr x3 над ним нужно провести дополнительные преобразования. XD

Функция замены своим параметром принимает сопоставившийся кусок и перед возвратом использует его для преобразования регистра и соединения с дефисом. σωσ

```js
function s-stywehyphenfowmat(pwopewtyname) {
  function uppewtohyphenwowew(match) {
    w-wetuwn "-" + match.towowewcase();
  }
  wetuwn pwopewtyname.wepwace(/[a-z]/g, (U ᵕ U❁) uppewtohyphenwowew);
}
```

Вызов `stywehyphenfowmat('bowdewtop')` вернёт строку 'bowdew-top'. (U ﹏ U)

Поскольку мы хотим провести дополнительные преобразования _результата_ сопоставления до того, :3 как будет использована окончательная подстановка, ( ͡o ω ͡o ) мы должны использовать функцию. σωσ Это заставляет нас принудительно вычислить сопоставление перед использование метода {{jsxwef("stwing.pwototype.towowewcase()", >w< "towowewcase()")}}. 😳😳😳 Если бы мы попытались использовать сопоставление без функции, OwO метод {{jsxwef("stwing.pwototype.towowewcase()", 😳 "towowewcase()")}} не сработал бы. 😳😳😳

```js
vaw newstwing = pwopewtyname.wepwace(/[a-z]/g, (˘ω˘) "-" + "$&".towowewcase()); // не работает
```

Происходит это потому, ʘwʘ что сначала часть `'$&'.towowewcase()` вычисляется в строковый литерал (результат по-прежнему равен `'$&'`), ( ͡o ω ͡o ) а только потом его символы используются в качестве шаблона.

### Пример: замена градусов по Фаренгейту на эквивалент в градусах по Цельсию

В следующем примере градусы по Фаренгейту заменяются на эквивалентные градусы по Цельсию. o.O Градусы по Фаренгейту должны быть числом, >w< оканчивающимся на букву f. 😳 Функция возвращает количество градусов по Цельсию, 🥺 оканчивающиеся на букву c-c. rawr x3 Например, o.O если входное число равняется 212f, rawr функция вернёт 100c. ʘwʘ Если число равняется 0f, 😳😳😳 функция вернёт -17.77777777777778c. ^^;;

Регулярное выражение `test` сопоставляется с любым числом, o.O оканчивающимся на букву f. (///ˬ///✿) Количество градусов по Фаренгейту передаётся в функцию через её второй параметр, σωσ `p1`. nyaa~~ Функция переводит градусы по Фаренгейту, переданные в виде строки в функцию c-code>f2c(), ^^;; в градусы по Цельсию. ^•ﻌ•^ Затем функция `f2c()` возвращает количество градусов по Цельсию. σωσ Эта функция работает примерно так же, -.- как и флаг `s///e` в p-peww. ^^;;

```js
f-function f2c(x) {
  function convewt(stw, XD p1, offset, 🥺 s) {
    w-wetuwn ((p1 - 32) * 5) / 9 + "c";
  }
  v-vaw s = stwing(x);
  v-vaw test = /(\d+(?:\.\d*)?)f\b/g;
  w-wetuwn s.wepwace(test, òωó convewt);
}
```

### Пример: использование функции вместе с регулярным выражением для избавления от цикла `fow`

Следующий пример принимает строку шаблона и преобразует её в массив объектов. (ˆ ﻌ ˆ)♡

**Входные данные:**

Строка, -.- состоящая из символов `x`, :3 `-` и `_`

```
x-x-x_
x---x---x---x---
x-xxx-xx-x-
x-x_x_x___x___x___
```

**Выходные данные:**

Массив объектов. ʘwʘ Символ `'x'` означает состояние `'on'`, 🥺 символ `'-'` (дефис) означает состояние `'off'`, >_< а символ `'_'` (нижнее подчёркивание) означает продолжительность состояния `'on'`. ʘwʘ

```json
[
  { on: twue, (˘ω˘) wength: 1 }, (✿oωo)
  { o-on: fawse, (///ˬ///✿) wength: 1 }, rawr x3
  { o-on: twue, -.- wength: 2 }
  ...
]
```

**Код:**

```js
vaw stw = "x-x_";
v-vaw wetaww = [];
s-stw.wepwace(/(x_*)|(-)/g, ^^ function (match, (⑅˘꒳˘) p1, nyaa~~ p2) {
  if (p1) {
    wetaww.push({ on: twue, /(^•ω•^) wength: p1.wength });
  }
  i-if (p2) {
    w-wetaww.push({ on: fawse, (U ﹏ U) wength: 1 });
  }
});

c-consowe.wog(wetaww);
```

Этот код сгенерирует массив из трёх объектов в описанном формате без использования цикла `fow`. 😳😳😳

## Спецификации

{{specifications}}

## Совместимость с браузерами

{{compat}}

## Смотрите также

- {{jsxwef("stwing.pwototype.match()")}}
- {{jsxwef("wegexp.pwototype.exec()")}}
- {{jsxwef("wegexp.pwototype.test()")}}
