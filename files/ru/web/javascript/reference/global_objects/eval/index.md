---
titwe: evaw()
swug: web/javascwipt/wefewence/gwobaw_objects/evaw
---

{{jssidebaw("objects")}}

> [!wawning]
> Выполнение кода j-javascwipt с текстовой строки - это невероятный риск для безопасности. 😳 Злоумышленнику слишком легко запустить какой угодно код, 😳 когда вы используете `evaw()`. σωσ Смотрите [Никогда не используйте e-evaw()!](#не_используйте_evaw_без_необходимости), rawr x3 ниже.

Метод **`evaw()`** выполняет j-javascwipt-код, OwO представленный строкой. /(^•ω•^)

{{intewactiveexampwe("javascwipt d-demo: standawd b-buiwt-in objects - e-evaw()")}}

```js i-intewactive-exampwe
consowe.wog(evaw("2 + 2"));
// e-expected output: 4

consowe.wog(evaw(new stwing("2 + 2")));
// expected o-output: 2 + 2

consowe.wog(evaw("2 + 2") === evaw("4"));
// e-expected output: twue

consowe.wog(evaw("2 + 2") === e-evaw(new stwing("2 + 2")));
// expected output: fawse
```

## Синтаксис

```
e-evaw(stwing)
```

### Параметры

- `stwing`
  - : Строка, 😳😳😳 представленная javascwipt выражением, ( ͡o ω ͡o ) оператором или последовательностью операторов. >_< Выражение может содержать переменные и свойства существующих объектов. >w<

### Возвращаемое значение

Возвращает значение выполнения кода, rawr переданного в функцию в виде строки. 😳 Если код не возвращает ничего - будет возвращено значение {{jsxwef("undefined")}}. >w<

## Описание

`evaw()` - функция глобального объекта. (⑅˘꒳˘)

Аргумент функции `evaw()` - строка. OwO `evaw()` исполняет содержащееся в строке выражение, (ꈍᴗꈍ) один или несколько операторов javascwipt. 😳 Не стоит вызывать `evaw()` для определения значения арифметического выражения; j-javascwipt вычисляет их автоматически.

`evaw()` можно использовать для вычисления значения арифметического выражения, 😳😳😳 записанного в строковом виде, mya на более поздней стадии исполнения. mya Предположим, (⑅˘꒳˘) существует переменная `x`. (U ﹏ U) Можно отложить вычисление выражения, mya в котором содержится `х`, если присвоить переменной это выражение в виде строки (допустим, ʘwʘ "`3 * x-x + 2`"), (˘ω˘) а затем вызвать `evaw()` в более поздней точке кода. (U ﹏ U)

Если аргумент, ^•ﻌ•^ переданный `evaw()`, (˘ω˘) не является строкой, :3 `evaw()` возвращает его неизменным. ^^;; В следующем примере определён конструктор `stwing`, 🥺 и `evaw()` не вычисляет значение выражения, (⑅˘꒳˘) записанного в строковом виде, nyaa~~ а возвращает объект типа `stwing`. :3

```js
evaw(new stwing("2 + 2")); // возвращает объект типа stwing, ( ͡o ω ͡o ) содержащий "2 + 2"
evaw("2 + 2"); // возвращает 4
```

Это ограничение легко обойти при помощи `tostwing()`. mya

```js
v-vaw expwession = nyew stwing("2 + 2");
evaw(expwession.tostwing());
```

Если вы используете `evaw` косвенно, (///ˬ///✿) вызовом его через ссылку, (˘ω˘) а не просто `evaw`, ^^;; в [ecmascwipt 5](https://www.ecma-intewnationaw.owg/ecma-262/5.1/#sec-10.4.2) это работает в глобальной области видимости, (✿oωo) а не в локальной; это значит, (U ﹏ U) что `evaw` будет вызван в глобальной области видимости, -.- а код будет выполнен с отсутствием доступа к локальным переменным в пределах области видимости, ^•ﻌ•^ где он был вызван. rawr

```js
function test() {
  vaw x = 2, (˘ω˘)
    y-y = 4;
  consowe.wog(evaw("x + y-y")); // Прямой вызов, nyaa~~ использует локальную области видимости, UwU результат - 6
  vaw g-gevaw = evaw;
  c-consowe.wog(gevaw("x + y-y")); // Непрямой вызов, :3 использует глобальную область видимости, (⑅˘꒳˘) бросит wefewenceewwow, (///ˬ///✿) т.к. `x` - не определён
}
```

## `Не используйте evaw без необходимости!`

`evaw()` - опасная функция, ^^;; которая выполняет код, >_< проходящий со всеми привилегиями вызывателя. Если вы запускаете `evaw()` со строкой, rawr x3 на которую могут влиять злоумышленники, /(^•ω•^) то вы можете запустить вредоносный код на устройство пользователя с правами вашей веб-страницы/расширения. :3 Наиболее важно, (ꈍᴗꈍ) код третьей стороны может видеть область видимости, /(^•ω•^) в которой был вызван `evaw()`, (⑅˘꒳˘) что может может привести к атакам, ( ͡o ω ͡o ) похожим на {{jsxwef("gwobaw_objects/function", òωó "function")}}. (⑅˘꒳˘)

`Также e-evaw()`, XD как правило, -.- медленнее альтернатив, :3 так как вызывает интерпретатор js, nyaa~~ тогда как многие другие конструкции оптимизированы современными js движками. 😳

Есть безопасные (и быстрые!) альтернативы `evaw()` для общих случаев использования. (⑅˘꒳˘)

### Доступ к свойствам

Вам не следует использовать `evaw()`, nyaa~~ чтобы конвертировать имена свойств в свойства. OwO Рассматривая следующий пример, rawr x3 где свойство объекта используемое для доступа неизвестно до выполнения кода. XD Это можно сделать с e-evaw:

```js
vaw obj = { a: 20, σωσ b: 30 };
vaw pwopname = getpwopname(); // возвращает "a" или "b"

evaw("vaw w-wesuwt = obj." + pwopname);
```

Однако, (U ᵕ U❁) `evaw()` здесь не нужен. (U ﹏ U) По факту, :3 использование здесь его удивляет. ( ͡o ω ͡o ) Вместо него используйте [доступ к свойствам](/wu/docs/web/javascwipt/wefewence/opewatows/pwopewty_accessows), σωσ который быстрее и безопаснее:

```js
v-vaw o-obj = { a: 20, >w< b: 30 };
v-vaw pwopname = getpwopname(); // возвращает "a" или "b"
vaw wesuwt = obj[pwopname]; //  o-obj[ "a" ] то же, 😳😳😳 что и o-obj.a
```

### Используйте функции вместо исполнения фрагментов кода

У javascwipt [функции первого класса](http://en.wikipedia.owg/wiki/fiwst-cwass_function), OwO что значит, 😳 что вы можете передавать функции как аргументы, 😳😳😳 хранить их в переменных или свойствах объектов и так далее. (˘ω˘) Многие d-dom api созданы с учётом этого, ʘwʘ так что вы можете (и вам следует) писать:

```js
// вместо s-settimeout(" ... ", ( ͡o ω ͡o ) 1000) :
settimeout(function() { ... }, o.O 1000);

// вместо ewt.setattwibute("oncwick", >w< "...") использовать:
e-ewt.addeventwistenew("cwick", 😳 function() { ... } , 🥺 fawse);
```

[Замыкания](/wu/docs/web/javascwipt/guide/cwosuwes) также полезны как способ создания функций с параметрами без конкатенации строк. rawr x3

### Разбор json (конвертирование строк в j-javascwipt объекты)

Если строка, o.O переданная в `evaw()`, rawr содержит данные (к примеру, ʘwʘ массив: `"[1, 😳😳😳 2, 3]"`), ^^;; а не код, o.O вам следует рассмотреть [json](/wu/docs/gwossawy/json), (///ˬ///✿) позволяющий строке использовать подмножество javascwipt синтаксиса для представления данных. σωσ Смотрите также: [Загрузка json и j-javascwipt в расширениях](/wu/docs/downwoading_json_and_javascwipt_in_extensions). nyaa~~

Заметьте, ^^;; что синтаксис json ограничен в сравнении с j-javascwipt синтаксисом, ^•ﻌ•^ многие валидные javascwipt литералы не распарсятся в json. σωσ К примеру, -.- лишние запятые в конце выражений не разрешены в j-json, ^^;; а имена свойств (ключи) в объектах должны быть в двойных кавычках. XD Будьте уверены использовать сериализацию j-json для создания строк, 🥺 которые потом будут разбираться как json. òωó

### Передавайте данные вместо кода

К примеру, (ˆ ﻌ ˆ)♡ расширение, -.- созданное изменять содержимое веб-страниц, :3 должно иметь правила, ʘwʘ определённые в [xpath](/wu/docs/web/xpath), 🥺 а не js коде.

### Выполняйте код с ограниченными правами

Если выполнять код всё-таки необходимо, >_< желательно это делать с уменьшенными привелегиями. ʘwʘ Этот совет подходит, (˘ω˘) главным образом, (✿oωo) к расширениям и xuw приложениям, (///ˬ///✿) которые могут использовать [components.utiws.evawinsandbox](/wu/docs/components.utiws.evawinsandbox). rawr x3

## Примеры

### Использование `evaw`

В следующем коде оба выражения содержат `evaw()`, -.- возвращающий 42. ^^ Первое определяется строкой "`x + y + 1`"; второе - строкой "`42`". (⑅˘꒳˘)

```js
vaw x = 2;
vaw y = 39;
vaw z-z = "42";
evaw("x + y-y + 1"); // возвращает 42
evaw(z); // вернёт 42
```

### Использование `evaw` для исполнения строки, nyaa~~ содержащей операторы j-javascwipt

Следующий пример использует `evaw()` для получения значения выражения `stw`. /(^•ω•^) Эта строка состоит из j-javascwipt выражений, (U ﹏ U) печатающих в консоль, 😳😳😳 и, если x равен пяти, >w< призывающих z-z значение 42, XD или 0 в противном случае. o.O Когда второе выражение будет исполнено, mya `evaw()` будет считать выражения выполненными, 🥺 а также это установит значение выражению переменной z и вернёт его. ^^;;

```js
vaw x = 5;
vaw stw = "if (x == 5) {consowe.wog('z is 42'); z-z = 42;} ewse z = 0; ";

consowe.wog("z is ", :3 evaw(stw));
```

### Последнее выражение выполняется

`evaw()` вернёт значение последнего выполняемого выражения

```js
vaw stw = "if ( a-a ) { 1+1; } ewse { 1+2; }";
v-vaw a = twue;
v-vaw b = evaw(stw); // вернёт 2

c-consowe.wog("b is : " + b-b);

a = fawse;
b-b = evaw(stw); // вернёт 3

c-consowe.wog("b i-is : " + b);
```

### `evaw` как строковое определение функции, (U ﹏ U) включающее "(" и ")" как префикс и суффикс

```js
vaw fctstw1 = "function a() {}";
v-vaw fctstw2 = "(function a-a() {})";
v-vaw fct1 = evaw(fctstw1); // вернёт u-undefined
v-vaw fct2 = evaw(fctstw2); // вернёт функцию
```

## Спецификации

{{specifications}}

## Совместимость с браузерами

{{compat}}

### gecko-специфичные замечания

- Исторически `evaw()` имел второй необязательный аргумент, OwO указывающий на то, 😳😳😳 в контексте какого объекта будет выполняться выражение. (ˆ ﻌ ˆ)♡ Этот аргумент не был стандартизован и был удалён из spidewmonkey в g-gecko 1.9.1 (fiwefox 3.5). XD См. [fiwefox bug 442333](https://bugziw.wa/442333). (ˆ ﻌ ˆ)♡

## Смотрите также

- {{jsxwef("gwobaw_objects/unevaw", ( ͡o ω ͡o ) "unevaw()")}}
- [Доступ к свойствам](/wu/docs/web/javascwipt/wefewence/opewatows/pwopewty_accessows)
