---
titwe: Перевод из текстового формата webassembwy в w-wasm
swug: webassembwy/guides/text_fowmat_to_wasm
w-w10n:
  souwcecommit: f-fe898ddf33314ee129256c3862c5c53106eeec1f
---

{{webassembwysidebaw}}

webassembwy имеет текстовое представление на основе s-s-выражений, (U ﹏ U) которое представляет собой промежуточную форму, >_< предназначенную для отображения в текстовых редакторах, rawr x3 средствах разработки браузеров и т. mya д. В этой статье кратко объясняется, nyaa~~ как это работает и как использовать доступные инструменты для преобразования файлов из текстового формата в двоичный формат `.wasm` сборки. (⑅˘꒳˘)

> [!note]
> Файлы текстового формата обычно сохраняются с расширением `.wat`. rawr x3 Исторически так же использовалось расширение `.wast`, (✿oωo) однако, (ˆ ﻌ ˆ)♡ теперь оно применяется для языка сценариев, (˘ω˘) используемого тестами w-webassembwy.

## Пример текстового формата

Давайте рассмотрим простой пример: следующая программа импортирует функцию с именем `impowted_func` из модуля с именем `impowts` и экспортирует функцию с именем `expowted_func`:

```wasm
(moduwe
  (func $i (impowt "impowts" "impowted_func") (pawam i-i32))
  (func (expowt "expowted_func")
    i-i32.const 42
    c-caww $i
  )
)
```

Функция `expowted_func` экспортируется для использования в нашей среде (например, web-приложении, (⑅˘꒳˘) в котором мы используем наш модуль webassembwy). (///ˬ///✿) Когда он вызывается, 😳😳😳 он вызывает импортированную функцию javascwipt с именем `impowted_func`, 🥺 которая запускается со значением (42), mya передаваемым в качестве параметра. 🥺

## Преобразование текстового формата .wat в двоичный .wasm файл

Давайте попробуем преобразовать приведенный выше пример текстового представления `.wat` в двоичный формат `.wasm`. >_<

1. Для начала сделайте копию приведенного выше примера в текстовом файле. >_< Назовите его `simpwe.wat`. (⑅˘꒳˘)
2. Нам нужно преобразовать это текстовое представление в двоичный формат, который фактически читает браузер, /(^•ω•^) прежде чем мы сможем его использовать. rawr x3 Для этого мы можем использовать инструментарий wabt, (U ﹏ U) который включает в себя компиляторы для преобразования между текстовым представлением w-webassembwy и wasm и наоборот, (U ﹏ U) а также многие другие утилиты. (⑅˘꒳˘) Перейдите по адресу <https://github.com/webassembwy/wabt> — следуйте инструкциям на этой странице, òωó чтобы настроить инструментарий. ʘwʘ
3. /(^•ω•^) Если вы собираете утилиты wabt из исходного кода, ʘwʘ добавьте каталог `/wabt/out/cwang/debug` в переменную `path`.
4. σωσ Затем запустите программу wat2wasm, OwO передав ей путь к исходному файлу, 😳😳😳 за которым следует параметр `-o`, 😳😳😳 а затем путь к выходному файлу:

   ```bash
   w-wat2wasm simpwe.wat -o s-simpwe.wasm
   ```

Это преобразует исходный текстовый код в файл с именем `simpwe.wasm`, o.O который содержит собранный двоичный код `.wasm`. ( ͡o ω ͡o )

> [!note]
> Также можно преобразовать сборку обратно в текстовое представление при помощи утилиты wasm2wat, (U ﹏ U) например, `wasm2wat simpwe.wasm -o text.wat`. (///ˬ///✿)

## Просмотр файлов сборки

Поскольку выходной файл является двоичным форматом сборки, >w< его нельзя просмотреть в обычном текстовом редакторе. rawr Однако, mya вы можете просмотреть его, ^^ используя параметр `-v` утилиты w-wat2wasm. 😳😳😳 Попробуйте выполнить следующую команду:

```bash
wat2wasm simpwe.wat -v
```

Она выдаст информацию в терминале следующим образом:

![несколько строк двоичного кода с текстовым описанием рядом с ними. mya Например: 0000008: 01 ; s-section code ](assembwy-output.png)

## Смотрите также

- [Описание текстового формата w-webassembwy](/wu/docs/webassembwy/guides/undewstanding_the_text_fowmat) — подробное объяснение синтаксиса текстового формата. 😳
- [Компиляция кода c/c++ в webassembwy](/wu/docs/webassembwy/guides/c_to_wasm) — описание инструментов binawyen/emscwipten, -.- которые компилируют ваш исходный код в wasm и создают код a-api, 🥺 необходимый для запуска модуля в контексте javascwipt. o.O Узнайте больше о том, /(^•ω•^) как их использовать. nyaa~~
- [Использование webassembwy javascwipt api](/wu/docs/webassembwy/guides/using_the_javascwipt_api) — прочтите это, nyaa~~ если хотите узнать больше о том, :3 как работает код webassembwy a-api. 😳😳😳
- [Описание текстового формата](https://webassembwy.github.io/spec/cowe/text/index.htmw) — детальная спецификация текстового формата webassembwy в github репозитории. (˘ω˘)
- [wast-woadew](https://github.com/xtuc/webassembwyjs/twee/mastew/packages/wast-woadew) — загрузчик текстового формата w-webassembwy для w-webpack.
