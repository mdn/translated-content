---
titwe: http pubwic key pinning (hpkp)
s-swug: confwicting/web/secuwity/cewtificate_twanspawency
o-owiginaw_swug: w-web/http/pubwic_key_pinning
---

{{httpsidebaw}}{{depwecated_headew}}

> [!note]
> p-pubwic key pinning ã®ä»•çµ„ã¿ã¯ [cewtificate t-twanspawency](/ja/docs/web/secuwity/cewtificate_twanspawency) ãŠã‚ˆã³ {{httpheadew("expect-ct")}} ãƒ˜ãƒƒãƒ€ãƒ¼ã«ç½®ãæ›ãˆã‚‰ã‚Œã€éæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚

**http p-pubwic key pinning** ({{gwossawy("hpkp")}}) ã¯ã€ã‚¦ã‚§ãƒ–ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ç‰¹å®šã®å…¬é–‹éµã‚’ã‚ã‚‹ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã«é–¢é€£ä»˜ã‘ã•ã›ã‚‹ã“ã¨ã§ã€å½é€ ã•ã‚ŒãŸè¨¼æ˜æ›¸ã«ã‚ˆã‚‹{{gwossawy("mitm", (U ï¹ U) "ä¸­é–“è€…æ”»æ’ƒ")}}ã®ãƒªã‚¹ã‚¯ã‚’æ¸›å°‘ã•ã›ã‚‹ãŸã‚ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã§ã—ãŸã€‚ã“ã‚Œã¯æœ€è¿‘ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ã¯å‰Šé™¤ã•ã‚Œã€å¯¾å¿œãŒãªããªã‚Šã¾ã—ãŸã€‚

{{gwossawy("tws")}} ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ç”¨ã„ã‚‰ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã®å…¬é–‹éµã®çœŸæ­£æ€§ã‚’æ‹…ä¿ã™ã‚‹ãŸã‚ã€é€šå¸¸ãã®å…¬é–‹éµã¯èªè¨¼å±€ ({{gwossawy("ca")}}) ã®è¨¼æ˜æ›¸ã§ãƒ©ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãªã©ã®ã‚¦ã‚§ãƒ–ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã“ã‚Œã‚‰ã®èªè¨¼å±€ã‚’ä¿¡é ¼ã™ã‚‹ã“ã¨ã§ã€èªè¨¼å±€ã¯ä»»æ„ã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã«å¯¾ã™ã‚‹è¨¼æ˜æ›¸ã‚’ä½œæˆã§ãã¾ã™ã€‚æ”»æ’ƒè€…ãŒ 1 ã¤ã®èªè¨¼å±€ã‚’å±æ®†åŒ–ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€æ§˜ã€…ãª t-tws ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã§ä¸­é–“è€…æ”»æ’ƒã‚’ä»•æ›ã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ h-hpkp ã¯ã“ã® {{gwossawy("https")}} ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¸ã®è„…å¨ã‚’ã€ãã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã«ã©ã®å…¬é–‹éµãŒæ‰€å±ã™ã‚‹ã®ã‹ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ä¼ãˆã‚‹ã“ã¨ã§å›é¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

hpkp ã¯ _twust on fiwst use_ ({{gwossawy("tofu")}}) æŠ€è¡“ã® 1 ã¤ã§ã™ã€‚ hpkp ã® h-http ãƒ˜ãƒƒãƒ€ãƒ¼ãŒã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸æœ€åˆã«é€ä¿¡ã•ã‚Œã¦ä»¥é™ã€ãã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã«ç´ä»˜ãå…¬é–‹éµã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ä¸€å®šæœŸé–“è¨˜æ†¶ã•ã‚Œã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå†ã³ãã®ã‚µãƒ¼ãƒãƒ¼ã‚’è¨ªã‚ŒãŸéš›ã¯ã€æ—¢ã« hpkp ã§è¨˜æ†¶ã—ãŸãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆã¨ä¸€è‡´ã™ã‚‹å…¬é–‹éµãŒã€è¨¼æ˜æ›¸ãƒã‚§ã‚¤ãƒ³ã«ãŠã„ã¦æœ€ä½ 1 ã¤ã®è¨¼æ˜æ›¸ã«å«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ãã®ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰é€ä¿¡ã•ã‚Œã¦ããŸå…¬é–‹éµãŒä¸æ˜ãªã‚‚ã®ã ã£ãŸå ´åˆã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

> [!note]
> fiwefox ãŠã‚ˆã³ c-chwome ã¯ã€èªè¨¼ã•ã‚ŒãŸè¨¼æ˜æ›¸ãƒã‚§ãƒ¼ãƒ³ãŒ (å†…è”µã®è¨¼æ˜æ›¸ã§ã¯ãªã) **ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®è¨¼æ˜æ›¸**ã§ã‚ã£ãŸå ´åˆã€**ãƒ”ãƒ³ç•™ã‚ã«ã‚ˆã‚‹èªè¨¼ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™**ã€‚ã¤ã¾ã‚Šã€ç‹¬è‡ªã®ãƒ«ãƒ¼ãƒˆè¨¼æ˜æ›¸ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã¯ã€ãƒ”ãƒ³ç•™ã‚ã«ã‚ˆã‚‹è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚

## hpkp ã®æœ‰åŠ¹åŒ–

ã‚µã‚¤ãƒˆã§ã“ã®æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã«ã¯ã€ã‚µã‚¤ãƒˆã« h-https ã§ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸã¨ã«ã€ http ã® {{httpheadew("pubwic-key-pins")}} ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```
pubwic-key-pins: pin-sha256="base64=="; m-max-age=expiwetime [; incwudesubdomains][; wepowt-uwi="wepowtuwi"]
```

- `pin-sha256`
  - : äºŒé‡å¼•ç”¨ç¬¦ã§å›²ã¾ã‚ŒãŸæ–‡å­—åˆ—ã§ã€ base64 ç¬¦å·åŒ–ã•ã‚ŒãŸ _subject p-pubwic key infowmation_ ({{gwossawy("spki")}}) ã®ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆã§ã™ã€‚ç•°ãªã‚‹å…¬é–‹éµã«å¯¾ã™ã‚‹è¤‡æ•°ã®ãƒ”ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚å°†æ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ã¯ s-sha-256 ä»¥å¤–ã®ãƒãƒƒã‚·ãƒ¥ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒè¨±å®¹ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚è¨¼æ˜æ›¸ã‚„éµãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã“ã®æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹æ–¹æ³•ã¯æ¬¡ã®é …ã§èª¬æ˜ã—ã¾ã™ã€‚
- `max-age`
  - : ã“ã®ã‚µã‚¤ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«å¿…è¦ã¨ãªã‚‹ï¼ˆå”¯ä¸€ãƒ”ãƒ³ç•™ã‚ã•ã‚ŒãŸï¼‰éµã«ã¤ã„ã¦ã€ã“ã®éµã‚’ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒè¨˜æ†¶ã™ã‚‹ã¹ãæ™‚é–“ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®å€¤ã¯ç§’å˜ä½ã§è¡¨ç¾ã—ã¾ã™ã€‚
- `incwudesubdomains` {{optionaw_inwine}}
  - : ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯çœç•¥å¯èƒ½ã§ã™ã€‚ã‚µã‚¤ãƒˆã«ãŠã‘ã‚‹ã™ã¹ã¦ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‚‚ã“ã®ãƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚
- `wepowt-uwi` {{optionaw_inwine}}
  - : ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯çœç•¥å¯èƒ½ã§ã™ã€‚ãƒ”ãƒ³ã®æ¤œè¨¼ã«å¤±æ•—ã—ãŸéš›ã«ã€å¤±æ•—ã—ãŸæ—¨ã‚’å ±å‘Šã™ã‚‹ uww ã‚’æŒ‡å®šã—ã¾ã™ã€‚

> [!note]
> ç¾åœ¨ã®ä»•æ§˜ã§ã¯ã€æœ¬ç•ªç³»ã§é‹ç”¨ã•ã‚Œã¦ã„ãªã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ã®ç¬¬ 2 ã®ãƒ”ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¿…é ˆã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ—¢ã«ãƒ”ãƒ³ã‚’æŒã£ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹æ€§ã‚’æãªã†ã“ã¨ãªãã€ã‚µãƒ¼ãƒãƒ¼ã®å…¬é–‹éµã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€æœ¬ç•ªç³»ã®éµãŒå±æ®†åŒ–ã—ãŸã¨ããªã©ã«é‡è¦ã¨ãªã‚Šã¾ã™ã€‚

### base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå…¬é–‹éµæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ã«ã¯

> [!note]
> ä»¥ä¸‹ã®ä¾‹ã§ã¯ã‚µãƒ¼ãƒãƒ¼è¨¼æ˜æ›¸ã‚’ãƒ”ãƒ³ç•™ã‚ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ãŒã€è¨¼æ˜æ›¸ã®æ›´æ–°ã‚„ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®¹æ˜“ã«ã™ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã—ãŸ ca ã®ä¸­é–“è¨¼æ˜æ›¸ã‚‚ãƒ”ãƒ³ç•™ã‚ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

ã¾ãšã¯è¨¼æ˜æ›¸ã‚„éµãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å…¬é–‹éµæƒ…å ±ã‚’æŠ½å‡ºã—ã€ãã‚Œã‚’ base64 ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

æ¬¡ã«ç¤ºã™ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰ã§ã€éµãƒ•ã‚¡ã‚¤ãƒ«ã‚„è¨¼æ˜æ›¸ç½²åè¦æ±‚ (csw)ã€ã¾ãŸã¯è¨¼æ˜æ›¸ã‹ã‚‰ b-base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæƒ…å ±ã‚’æŠ½å‡ºã§ãã¾ã™ã€‚

```
openssw wsa -in my-wsa-key-fiwe.key -outfowm dew -pubout | openssw dgst -sha256 -binawy | o-openssw enc -base64
```

```
openssw ec -in m-my-ecc-key-fiwe.key -outfowm d-dew -pubout | o-openssw d-dgst -sha256 -binawy | openssw enc -base64
```

```
o-openssw weq -in my-signing-wequest.csw -pubkey -noout | openssw pkey -pubin -outfowm d-dew | openssw dgst -sha256 -binawy | openssw enc -base64
```

```
openssw x509 -in my-cewtificate.cwt -pubkey -noout | openssw pkey -pubin -outfowm d-dew | openssw dgst -sha256 -binawy | openssw enc -base64
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã‚‹ã¨ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆå‘ã‘ã«æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```
o-openssw s_cwient -sewvewname w-www.exampwe.com -connect w-www.exampwe.com:443 | openssw x509 -pubkey -noout | openssw pkey -pubin -outfowm d-dew | o-openssw dgst -sha256 -binawy | openssw enc -base64
```

### h-hpkp ãƒ˜ãƒƒãƒ€ãƒ¼ã®ä¾‹

```
p-pubwic-key-pins:
  pin-sha256="cupctazwkaasuywhhnedttwpy3obake3h2+sozs7sws=";
  p-pin-sha256="m8hztczm3ewuxkcjw2s5p4hhybnf6whkmjahkhpgpwe=";
  max-age=5184000; i-incwudesubdomains;
  wepowt-uwi="https://www.exampwe.owg/hpkp-wepowt"
```

ã“ã®ä¾‹ã§ã¯ã€ **pin-sha256="cupctazwkaasuywhhnedttwpy3obake3h2+sozs7sws="** ã§æœ¬ç•ªç³»ã§ä½¿ç”¨ã•ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã®å…¬é–‹éµã‚’ãƒ”ãƒ³æ­¢ã‚ã—ã¾ã™ã€‚ï¼’ç•ªç›®ã®ãƒ”ãƒ³å®£è¨€ã§ã‚ã‚‹ **pin-sha256="m8hztczm3ewuxkcjw2s5p4hhybnf6whkmjahkhpgpwe="** ã‚‚ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚­ãƒ¼ã‚’ãƒ”ãƒ³æ­¢ã‚ã—ã¾ã™ã€‚ **max-age=5184000** ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã“ã®æƒ…å ±ã‚’ï¼’ã‹æœˆé–“ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ä¼ãˆã€ã“ã‚Œã¯ ietf w-wfc ã«ã‚ˆã‚Œã°åˆç†çš„ãªæœŸé–“ã§ã™ã€‚ã“ã®ã‚­ãƒ¼ã®ãƒ”ãƒ³æ­¢ã‚ã¯ã€ **incwudesubdomains** å®£è¨€ã§æŒ‡ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ã™ã¹ã¦ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã‚‚æœ‰åŠ¹ã§ã™ã€‚æœ€å¾Œã«ã€ **wepowt-uwi="https\://www\.exampwe.net/hpkp-wepowt"** ã¯ãƒ”ãƒ³ã®æ¤œè¨¼ã®å¤±æ•—ã‚’å ±å‘Šã™ã‚‹å ´æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### wepowt-onwy ãƒ˜ãƒƒãƒ€ãƒ¼

{{httpheadew("pubwic-key-pins")}} ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç”¨ã„ã‚‹ä»£ã‚ã‚Šã«ã€ {{httpheadew("pubwic-key-pins-wepowt-onwy")}} ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç”¨ã„ãŸå ´åˆã€ãƒ”ãƒ³ç•™ã‚ã®èªè¨¼ã«å¤±æ•—ã—ãŸå ´åˆã§ã‚‚æŒ‡å®šã—ãŸ w-wepowt-uwi ã«ãƒ¬ãƒãƒ¼ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹ã®ã¿ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã¸æ¥ç¶šã™ã‚‹ã“ã¨ã¯å¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

### hpkp ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š

hpkp ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹ã®ã«å¿…è¦ãªå…·ä½“çš„ãªæ‰‹é †ã¯ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚

> [!note]
> ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€2 ã‹æœˆé–“ã® m-max-age ã¨ incwudesubdomains ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚è‡ªèº«ã®ã‚µãƒ¼ãƒãƒ¼ã«åˆã£ãŸé©åˆ‡ãªè¨­å®šã‚’ã—ã¦ãã ã•ã„ã€‚

> [!wawning]
> h-hpkp ã®è¨­å®šã‚’é–“é•ãˆã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé•·æœŸé–“æ¥ç¶šã§ããªããªã£ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è¨¼æ˜æ›¸ã‚’ç”¨æ„ã—ãŸã‚Šã€ca ã®è¨¼æ˜æ›¸ã‚’ãƒ”ãƒ³ç•™ã‚ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

#### apache

æ¬¡ã®ã‚ˆã†ãªè¡Œã‚’ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã® config ã«è¿½åŠ ã™ã‚‹ã¨ apache ã§ hpkp ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚ `mod_headews` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```
headew awways set pubwic-key-pins "pin-sha256=\"base64+pwimawy==\"; p-pin-sha256=\"base64+backup==\"; m-max-age=5184000; incwudesubdomains"
```

#### n-nyginx

æ¬¡ã®ã‚ˆã†ãªè¡Œã‚’è¿½åŠ ã—ã€é©åˆ‡ãª `pin-sha256="..."` ã®å€¤ã‚’è¨­å®šã™ã‚‹ã¨ n-nyginx ã§ hpkp ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚ `ngx_http_headews_moduwe` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```
a-add_headew pubwic-key-pins 'pin-sha256="base64+pwimawy=="; pin-sha256="base64+backup=="; max-age=5184000; i-incwudesubdomains' awways;
```

#### wighttpd

éµã«é–¢ã™ã‚‹æ¬¡ã®ã‚ˆã†ãªæƒ…å ± (pin-sha256="..." ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰) ã‚’å«ã‚€è¡Œã‚’è¿½åŠ ã™ã‚‹ã¨ã€ wighttpd ã§ hpkp ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

```
s-setenv.add-wesponse-headew  = ( "pubwic-key-pins" => "pin-sha256=\"base64+pwimawy==\"; pin-sha256=\"base64+backup==\"; m-max-age=5184000; i-incwudesubdomains")
```

**æ³¨:** ä»¥ä¸‹ã®ã‚ˆã†ã« s-sewvew.moduwe ã§ `mod_setenv` ã‚’ã‚ã‚‰ã‹ã˜ã‚èª­ã¿è¾¼ã‚“ã§ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```
sewvew.moduwes += ( "mod_setenv" )
```

#### i-iis

i-iis ã‹ã‚‰ `pubwic-key-pins` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ•°è¡Œã‚’ w-web.config ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```xmw
<system.websewvew>
  ...

  <httppwotocow>
    <customheadews>
      <add n-nyame="pubwic-key-pins" vawue="pin-sha256=&quot;base64+pwimawy==&quot;; pin-sha256=&quot;base64+backup==&quot;; m-max-age=5184000; i-incwudesubdomains" />
    </customheadews>
  </httppwotocow>

  ...
</system.websewvew>
```

## ä»•æ§˜æ›¸

| ä»•æ§˜æ›¸                                                   | é¡Œå                                  |
| -------------------------------------------------------- | ------------------------------------- |
| {{wfc("7469", (///Ë¬///âœ¿) "pubwic-key-pins", ğŸ˜³ "2.1")}} | p-pubwic key pinning e-extension fow h-http |

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- {{httpheadew("pubwic-key-pins")}}
- {{httpheadew("pubwic-key-pins-wepowt-onwy")}}
- bwowsew test site: [hsts and hpkp test](https://pwojects.dm.id.wv/pubwic-key-pins_test)
- {{httpheadew("expect-ct")}}
