---
title: The legacy Iterator protocol
slug: >-
  Web/JavaScript/Reference/Deprecated_and_obsolete_features/The_legacy_Iterator_protocol
tags:
  - JavaScript
  - Legacy Iterator
translation_of: >-
  Web/JavaScript/Reference/Deprecated_and_obsolete_features/The_legacy_Iterator_protocol
---
<div>{{jsSidebar("More")}}</div>

<div class="warning"><strong>非標準。</strong> 非標準。レガシーイテレータープロトコルは SpiderMonkey 固有の機能で、Firefox 58 以降で削除済みです。将来向きの用途に、<a href="/docs/Web/JavaScript/Reference/Statements/for...of" title="/docs/Web/JavaScript/Reference/Statements/for...of">for..of</a> ループと <a href="/docs/Web/JavaScript/Guide/The_Iterator_protocol">iterator protocol</a> を使用することを検討してください。</div>

<h2 id="非推奨のFirefox専用イテレータプロトコル">非推奨のFirefox専用イテレータプロトコル</h2>

<p>Firefox version 26以前は、標準の<a href="/docs/Web/JavaScript/Guide/The_Iterator_protocol">ES2015 Iterator protocol</a>に似ている別のイテレータプロトコルを実装していました。</p>

<p>オブジェクトが次のセマンティックスをもつ<code>next()</code>メソッドを実装するとき、そのオブジェクトはレガシーイテレータで、イテレーションの最後に{{jsxref("Global_Objects/StopIteration", "StopIteration")}}をスローします。</p>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">プロパティ</th>
   <th scope="col">値</th>
  </tr>
  <tr>
   <td><code>next</code></td>
   <td>引き数なしの関数。値を返します。</td>
  </tr>
 </tbody>
</table>

<h3 id="レガシーイテレータプロトコルとES6イテレータプロトコルの違い">レガシーイテレータプロトコルとES6イテレータプロトコルの違い</h3>

<ul>
 <li>プレースホルダオブジェクトの<code>value</code>プロパティのかわりに、<code>next</code>の呼び出しの戻り値として直接値が返されます。</li>
 <li>{{jsxref("Global_Objects/StopIteration", "StopIteration")}}オブジェクトをスローすることによって反復終了が発現しました。</li>
</ul>

<h3 id="古いプロトコルをもつ簡単な例">古いプロトコルをもつ簡単な例</h3>

<pre class="brush: js">function makeIterator(array){
    var nextIndex = 0;

    return {
       next: function(){
           if(nextIndex &lt; array.length){
               return array[nextIndex++];
           else
               throw new StopIteration();
       }
    }
}

var it = makeIterator(['yo', 'ya']);

console.log(it.next()); // 'yo'
console.log(it.next()); // 'ya'
try{
    console.log(it.next());
}
catch(e){
    if(e instanceof StopIteration){
         // iteration over
    }
}
</pre>

<h2 id="関連情報">関連情報</h2>

<ul>
 <li><a href="/docs/Web/JavaScript/Guide/Iterators_and_Generators">イテレーターとジェネレーター</a></li>
 <li>More <a href="/docs/Web/JavaScript/Reference/Deprecated_and_obsolete_features">非推奨の機能、廃止された機能</a></li>
</ul>
