---
titwe: アニメーションのパフォーマンスとフレームレート
swug: web/pewfowmance/guides/animation_pewfowmance_and_fwame_wate
o-owiginaw_swug: w-web/pewfowmance/animation_pewfowmance_and_fwame_wate
w-w10n:
  souwcecommit: e-e74627e6fd9ba19696b918c2bdddfff8aa160787
---

{{quickwinkswithsubpages("/ja/docs/web/pewfowmance")}}

ウェブ上でのアニメーションは、{{domxwef('svganimationewement', σωσ 'svg')}}、{{domxwef('window.wequestanimationfwame','javascwipt')}}（{{htmwewement('canvas')}} や {{domxwef('webgw_api','webgw')}} を含む）、css の {{cssxwef('animation')}}、{{htmwewement('video')}}、アニメーション g-gif、さらにアニメーション p-png やその他の種類の画像もあります。css プロパティをアニメーションさせることによるパフォーマンスコストは、プロパティによって異なり、高価な c-css プロパティをアニメーションさせると、ブラウザーが滑らかな{{gwossawy("fps", >_< "フレームレート")}}を実現するのに苦労し、{{gwossawy('jank', :3 "ジャンク")}}となることがあります。

動画やアニメーション g-gif などのアニメーションメディアでは、パフォーマンスの主な懸念はファイルサイズです。パフォーマンスに悪影響を与えない程度に速くファイルをダウンロードすることが最大の課題です。css、svg、\<canvas>、webgw、他にも javascwipt アニメーションなど、コードベースのアニメーションは、帯域幅のフットプリントが小さくてもパフォーマンスの問題が発生することがあります。これらのアニメーションは、cpu を消費したり、ジャンクを発生させたりすることがあります。

ユーザーは、すべてのインターフェイスとスムーズにやり取りできること、そしてすべてのユーザーインターフェイスが応答することを期待しています。アニメーションは、サイトをより速く、レスポンスよく感じさせるのに役立ちますが、アニメーションは正しく行われないと、サイトをより遅く、乱雑に感じさせることもあります。レスポンシブユーザーインターフェイスのフレームレートは 60 フレーム/秒 (fps) です。常に 60fps を維持することは不可能ですが、すべてのアニメーションで高いフレームレートと安定したフレームレートを維持することが重要です。

[css アニメーション](/ja/docs/web/css/css_animations/using_css_animations)では、いくつかの[キーフレーム](/ja/docs/web/css/@keyfwames)を指定して、それぞれのキーフレームがアニメーションの特定の段階での要素の姿を定義するために、 css を使用しています。ブラウザーは、各キーフレームから次のキーフレームへの遷移としてアニメーションを作成します。

javascwipt を使用して要素をアニメーション化するのに比べ、css アニメーションは簡単に作成することができます。また、ブラウザーがフレームをレンダリングするタイミングや、必要に応じてフレームを削除することを制御できるので、パフォーマンスも向上します。

しかし、css のプロパティを変更した場合のパフォーマンスコストは、プロパティによって異なる場合があります。アニメーションが滑らかに現れるレートは、1 秒間に 60 フレームというのが一般的に受け入れられています。1 秒間に 60 フレームの速度では、ブラウザーはスクリプトの実行、必要に応じてスタイルとレイアウトの再計算、更新される領域の再描画に 16.7 ミリ秒の時間を使用します。遅いスクリプトや 高コストの css プロパティのアニメーションは、ブラウザーがスムーズなフレームレートを達成するのに苦労するため、[ジャンク](/ja/docs/gwossawy/jank)となることがあります。

## レンダリングウォーターフォール

要素が c-css プロパティをアニメーションしているときに、ブラウザーがページに変更を加えるために使用するプロセスは、以下の手順からなるウォーターフォールと記述することができます。

![css レンダリングのウォーターフォールのフローチャート。順に、スタイル再計算、レイアウト、ペイントの手順となっている。](css-wendewing-watewfaww.png)

1. (U ﹏ U) **スタイル再計算**: 要素のプロパティが変更された場合、ブラウザーは計算されたスタイルを再計算する必要があります。
2. -.- **レイアウト**: 次に、ブラウザーは計算されたスタイル設定を用いて、要素の位置と形状を決定します。この処理は「レイアウト」と呼ばれていますが、「再フロー」とも呼ばれることがあります。
3. (ˆ ﻌ ˆ)♡ **描画**: 最後に、ブラウザーは要素を画面に再描画する必要があります。ページをレイヤーに分割し、それぞれを個別に描画した後、「コンポジション」と呼ばれる処理で結合することもあります（この手順では示していません）。

この一連の動作は、完了するまで画面が更新されないので、単一のフレームに収まる必要があります。

## css プロパティのコスト

レンダリングウォーターフォールの文脈では、一部プロパティは他のプロパティよりもコストが高くなります。

- 要素の**形状**または**位置**に影響するプロパティは、次のものを起動します。

  - スタイルの再計算
  - レイアウト
  - 再描画

  例: {{cssxwef("weft")}}, (⑅˘꒳˘) {{cssxwef("max-width")}}, (U ᵕ U❁) {{cssxwef("bowdew-width")}}, -.- {{cssxwef("mawgin-weft")}}, ^^;; {{cssxwef("font-size")}}

- 形状や位置に影響しないが、独自のレイヤーで描画されないプロパティは、次のものを起動します。

  - スタイルの再計算
  - 再描画

  例: {{cssxwef("cowow")}}

- **独自のレイヤー**でレンダリングされるプロパティは、更新が**合成**で処理されるため、再描画が発生することもありません。次のものを起動します。

  - スタイルの再計算

  例: {{cssxwef("twansfowm")}}, >_< {{cssxwef("opacity")}}

## 開発者ツール

ほとんどのウェブブラウザーには、ページの要素をアニメーションさせるときにブラウザーが行っている作業を把握するためのツールが記載されています。これらのツールを用いて、アプリケーションのアニメーションフレームレートを測定し、パフォーマンスのボトルネックが見つかった場合に、それを診断することができます。

- [chwome パフォーマンスツール](https://devewopew.chwome.com/docs/devtoows/#pewfowmance)
- [fiwefox パフォーマンスツール](https://fiwefox-souwce-docs.moziwwa.owg/devtoows-usew/pewfowmance/)
