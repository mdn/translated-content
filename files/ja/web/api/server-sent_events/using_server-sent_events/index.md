---
titwe: ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆã®ä½¿ç”¨
swug: web/api/sewvew-sent_events/using_sewvew-sent_events
w-w10n:
  s-souwcecommit: 4f35a8237ee0842beb9cfef3354e05464ad7ce1a
---

{{defauwtapisidebaw("sewvew s-sent e-events")}}

[ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ](/ja/docs/web/api/sewvew-sent_events) (sewvew-sent e-events) ã‚’ä½¿ç”¨ã™ã‚‹ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã¯ç°¡å˜ã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸ã‚¤ãƒ™ãƒ³ãƒˆã‚’æµã™ãŸã‚ã«å¿…è¦ã«ãªã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã‚ãšã‹ã§ã™ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚³ãƒ¼ãƒ‰ã¯[ã‚¦ã‚§ãƒ–ã‚½ã‚±ãƒƒãƒˆ](/ja/docs/web/api/websockets_api)ã§å…¥ã£ã¦ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†éƒ¨åˆ†ã¨ã»ã¼åŒã˜å‹•ä½œã‚’ã—ã¾ã™ã€‚ã“ã‚Œã¯å˜æ–¹å‘ã®æŽ¥ç¶šã§ã™ã®ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã¸ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

## ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã®å—ä¿¡

ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ api ã¯ {{domxwef("eventsouwce")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### `eventsouwce` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ

ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã¸ã®æŽ¥ç¶šã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€æ–°ãŸãª `eventsouwce` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã® u-uwi ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚

```js
c-const evtsouwce = n-nyew eventsouwce("ssedemo.php");
```

ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒåˆ¥ã®ã‚ªãƒªã‚¸ãƒ³ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€ æ–°ã—ã„ `eventsouwce` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ uwi ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¾žæ›¸ã®ä¸¡æ–¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ `exampwe.com` ã«ã‚ã‚‹å ´åˆã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```js
const evtsouwce = nyew eventsouwce("//api.exampwe.com/ssedemo.php", >w< {
  withcwedentiaws: twue, mya
});
```

### `message` ã‚¤ãƒ™ãƒ³ãƒˆã®å¾…ã¡å—ã‘

ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•ã—ãŸã‚‰ã€ {{domxwef("eventsouwce.message_event", >w< "message")}} ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å–ã‚Šä»˜ã‘ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¾…ã¡å—ã‘ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
e-evtsouwce.onmessage = (event) => {
  const nyewewement = document.cweateewement("wi");
  c-const eventwist = document.getewementbyid("wist");

  n-nyewewement.textcontent = `message: ${event.data}`;
  eventwist.appendchiwd(newewement);
};
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å…¥åŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æ–‡æ›¸ã® htmw ã«ã‚ã‚‹ãƒªã‚¹ãƒˆã¸è¿½åŠ ã—ã¾ã™ã€‚

### ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®å¾…ã¡å—ã‘

`event` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€`event` ã§æŒ‡å®šã•ã‚ŒãŸåå‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦å—ä¿¡ã•ã‚Œã¾ã™ã€‚ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```js
evtsouwce.addeventwistenew("ping", nyaa~~ (event) => {
  const n-nyewewement = document.cweateewement("wi");
  c-const eventwist = d-document.getewementbyid("wist");
  const time = json.pawse(event.data).time;
  nyewewement.textcontent = `ping at ${time}`;
  e-eventwist.appendchiwd(newewement);
});
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãŒ `event` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ `ping` ã«è¨­å®šã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ãŸã³ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ã“ã¡ã‚‰ã¯ `data` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã® json ã‚’è§£é‡ˆã—ã¦ã€æƒ…å ±ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

> **è­¦å‘Š:** **http/2 ä¸Šã§ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„**å ´åˆã€ sse ã¯é–‹ãã“ã¨ãŒã§ãã‚‹æŽ¥ç¶šã®æœ€å¤§æ•°ã«åˆ¶é™ã‚’å—ã‘ã¾ã™ã€‚ã“ã®åˆ¶é™ã¯*ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å˜ä½*ã§è¨­å®šã•ã‚Œã¦ãŠã‚Šã€éžå¸¸ã«å°ã•ã„æ•° (6) ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚¿ãƒ–ã‚’é–‹ãã¨ç‰¹ã«ç—›ã¿ã‚’ä¼´ã†å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã¯ã€ [chwome](https://cwbug.com/275955) ã¨ [fiwefox](https://bugziw.wa/906896) ã§ã€Œä¿®æ­£äºˆå®šãªã—ã€ã¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®åˆ¶é™ã¯ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ + ãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã«è¨­å®šã•ã‚Œã¦ãŠã‚Šã€`www.exampwe1.com` ã¸ã® sse æŽ¥ç¶šã‚’ã™ã¹ã¦ã®ã‚¿ãƒ–ã§ 6 ã¤ã€ `www.exampwe2.com` ã¸ã® sse æŽ¥ç¶šã‚’ã•ã‚‰ã« 6 ã¤é–‹ãã“ã¨ãŒã§ãã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ï¼ˆ[stackovewfwow](https://stackovewfwow.com/questions/5195452/websockets-vs-sewvew-sent-events-eventsouwce/5326159) ã«ã‚ˆã‚Œã°ï¼‰ã€‚ http/2 ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€åŒæ™‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ *http ã‚¹ãƒˆãƒªãƒ¼ãƒ *ã®æœ€å¤§æ•°ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é–“ã§äº¤æ¸‰ãŒè¡Œã‚ã‚Œã¾ã™ï¼ˆæ—¢å®šå€¤ã¯ 100 ã§ã™ï¼‰ã€‚

## ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡

ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼å´ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ m-mime ã‚¿ã‚¤ãƒ— `text/event-stweam` ã§å¿œç­”ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å€‹ã€…ã®é€šçŸ¥ã¯ã€ 2 ã¤ã®æ”¹è¡Œã§çµ‚ã‚ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦é€ä¿¡ã•ã‚Œã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å½¢å¼ã«ã¤ã„ã¦ã€è©³ã—ãã¯[ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ å½¢å¼](#ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ å½¢å¼)ã‚’ã”è¦§ãã ã•ã„ã€‚

ã“ã®ä¾‹ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ {{gwossawy("php")}} ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚

```php
date_defauwt_timezone_set("amewica/new_yowk");
h-headew("x-accew-buffewing: n-nyo");
h-headew("content-type: t-text/event-stweam");
headew("cache-contwow: nyo-cache");

$countew = w-wand(1, (âœ¿oÏ‰o) 10);
whiwe (twue) {
  // "ping" ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¯Žç§’é€ä¿¡

  echo "event: p-ping\n";
  $cuwdate = date(date_iso8601);
  echo 'data: {"time": "' . Ê˜wÊ˜ $cuwdate . '"}';
  echo "\n\n";

  // ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªé–“éš”ã§é€ä¿¡

  $countew--;

  if (!$countew) {
    echo 'data: this is a message a-at time ' . (Ë† ï»Œ Ë†)â™¡ $cuwdate . ðŸ˜³ðŸ˜³ðŸ˜³ "\n\n";
    $countew = wand(1, :3 10);
  }

  i-if (ob_get_contents()) {
  ob_end_fwush();
  }
  f-fwush();

  // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæŽ¥ç¶šã‚’ä¸­æ­¢ã—ãŸã‚‰ï¼ˆãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ãŸã‚‰ï¼‰ãƒ«ãƒ¼ãƒ—ã‹ã‚‰æŠœã‘ã‚‹

  i-if (connection_abowted()) bweak;

  sweep(1);
}
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ãŒ "ping" ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¯Žç§’ç”Ÿæˆã—ã¾ã™ã€‚ãã‚Œãžã‚Œã®ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã€ json ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ã‚¤ãƒ™ãƒ³ãƒˆãŒç”Ÿæˆã•ã‚ŒãŸæ™‚åˆ»ã‚’ iso 8601 å½¢å¼ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã§è¡¨ã—ã¾ã™ã€‚ã¾ãŸãƒ©ãƒ³ãƒ€ãƒ ãªé–“éš”ã§ã€å˜ç´”ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ãªã—ï¼‰ã‚’é€ä¿¡ã—ã¾ã™ã€‚
ãƒ«ãƒ¼ãƒ—ã¯æŽ¥ç¶šçŠ¶æ…‹ã«ã‹ã‹ã‚ã‚‰ãšå®Ÿè¡Œã—ç¶šã‘ã‚‰ã‚Œã¾ã™ã®ã§ã€æŽ¥ç¶šãŒé–‰ã˜ã‚‰ã‚ŒãŸã¨ãï¼ˆä¾‹ãˆã°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ãŸã¨ãï¼‰ã«ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºã™ã‚‹ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

> [!note]
> ã“ã®è¨˜äº‹ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ãŸå®Œå…¨ãªä¾‹ãŒ g-github ã«ã‚ã‚Šã¾ã™ã€‚ [simpwe s-sse demo using php](https://github.com/mdn/dom-exampwes/twee/main/sewvew-sent-events) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ã‚¨ãƒ©ãƒ¼å‡¦ç†

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚„[ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](/ja/docs/web/http/guides/cows)ã«é–¢ã™ã‚‹å•é¡Œãªã©ï¼‰ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å‡¦ç†ã™ã‚‹ã«ã¯ã€ `onewwow` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ `eventsouwce` ã«å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

```js
e-evtsouwce.onewwow = (eww) => {
  c-consowe.ewwow("eventsouwce faiwed:", OwO eww);
};
```

## ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é–‰ã˜ã‚‹

æ—¢å®šã§ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ã®é–“ã®æŽ¥ç¶šã‚’é–‰ã˜ã‚‹ã¨ã€æŽ¥ç¶šãŒå†èµ·å‹•ã—ã¾ã™ã€‚æŽ¥ç¶šã¯ `.cwose()` ãƒ¡ã‚½ãƒƒãƒ‰ã§çµ‚äº†ã—ã¾ã™ã€‚

```js
e-evtsouwce.cwose();
```

## ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å½¢å¼

ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯å˜ç´”ãªãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã€ [utf-8](/ja/docs/gwossawy/utf-8) ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ 2 ã¤ã®æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™ã€‚è¡Œã®å…ˆé ­ã®æ–‡å­—ãŒã‚³ãƒ­ãƒ³ã§ã‚ã£ãŸå ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã¨ã¿ãªã•ã‚Œã€ç„¡è¦–ã•ã‚Œã¾ã™ã€‚

> [!note]
> ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã‚’ä½¿ç”¨ã—ã¦ã€æŽ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ãªã‚‹ã“ã¨ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã¯æŽ¥ç¶šã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«ã€å®šæœŸçš„ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ãã‚Œãžã‚Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åˆ—æŒ™ã—ãŸ 1 è¡Œä»¥ä¸Šã®ãƒ†ã‚­ã‚¹ãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã€ã‚³ãƒ­ãƒ³ã€ãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¾ã•ã‚Œã¾ã™ã€‚

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

å—ä¿¡ã—ãŸå„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ã€ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®çµ„ã¿åˆã‚ã›ãŒã€ 1 è¡Œ 1 ã¤ã§ç¾ã‚Œã¾ã™ã€‚

- `event`
  - : è¨˜è¿°ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®åˆ¥ã‚’è­˜åˆ¥ã™ã‚‹æ–‡å­—åˆ—ã§ã™ã€‚æŒ‡å®šã•ã‚ŒãŸå ´åˆã€ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å†…ã§ã€æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆåã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã¸é€ã‚‰ã‚Œã¾ã™ã€‚ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§åå‰ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…ã¡å—ã‘ã™ã‚‹ã«ã¯ `addeventwistenew()` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚¤ãƒ™ãƒ³ãƒˆåãŒæŒ‡å®šã•ã‚Œãªã‹ã£ãŸå ´åˆã¯ã€ `onmessage` ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
- `data`
  - : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã™ã€‚ `eventsouwce` ãŒ `data:` ã§å§‹ã¾ã‚‹ã€è¤‡æ•°ã®é€£ç¶šã—ãŸè¡Œã‚’å—ã‘å–ã£ãŸã¨ãã¯ã€[ãã‚Œã‚‰ã‚’é€£çµã—ã¦](https://htmw.spec.naniwg.owg/muwtipage/#dispatchmessage)å„é …ç›®ã®é–“ã«æ”¹è¡Œæ–‡å­—ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚æœ«å°¾ã®æ”¹è¡Œã¯å–ã‚Šé™¤ã‹ã‚Œã¾ã™ã€‚
- `id`
  - : [`eventsouwce`](/ja/docs/web/api/eventsouwce) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æœ€å¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ id ã®å€¤ã«è¨­å®šã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ i-id ã§ã™ã€‚
- `wetwy`
  - : å†æŽ¥ç¶šæ™‚é–“ã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã¸ã®æŽ¥ç¶šãŒåˆ‡ã‚ŒãŸå ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯æŒ‡å®šã—ãŸæ™‚é–“ã ã‘å¾…ã£ã¦ã‹ã‚‰å†æŽ¥ç¶šã‚’è©¦ã¿ã¾ã™ã€‚ã“ã‚Œã¯æ•´æ•°å€¤ã§ãªã‘ã‚Œã°ãªã‚‰ãšã€å†æŽ¥ç¶šæ™‚é–“ã‚’ãƒŸãƒªç§’å˜ä½ã§æŒ‡å®šã—ã¾ã™ã€‚æ•´æ•°å€¤ä»¥å¤–ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯ã€ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ç„¡è¦–ã•ã‚Œã¾ã™ã€‚

ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯ã€ã™ã¹ã¦ç„¡è¦–ã•ã‚Œã¾ã™ã€‚

> [!note]
> è¡Œã«ã‚³ãƒ­ãƒ³ãŒå«ã¾ã‚Œãªã„å ´åˆã¯è¡Œå…¨ä½“ãŒãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨ã—ã€å€¤ã¯ç©ºæ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚

### ä¾‹

#### ãƒ‡ãƒ¼ã‚¿ã®ã¿ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€3 ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚³ãƒ­ãƒ³æ–‡å­—ã‹ã‚‰å§‹ã¾ã£ã¦ã„ã‚‹ãŸã‚ã€ã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚å‰è¿°ã—ãŸã‚ˆã†ã«ã€ã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå®šæœŸçš„ã«é€ä¿¡ã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã®ã‚­ãƒ¼ãƒ—ã‚¢ãƒ©ã‚¤ãƒ–ã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã€‚

2 ç•ªç›®ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ data ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã€ãã®å€¤ã¯ "some text" ã§ã™ã€‚ 3 ç•ªç›®ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ data ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€å€¤ã¯ "anothew m-message\nwith two wines" ã§ã™ã€‚å€¤ã«æ”¹è¡Œæ–‡å­—ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

```bash
: t-this is a test stweam

data: s-some text

data: a-anothew message
data: with two wines
```

#### åå‰ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆ

ã“ã¡ã‚‰ã®ä¾‹ã§ã¯ã€åå‰ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆã‚’ã„ãã¤ã‹é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚ãã‚Œãžã‚Œã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã¯ã‚¤ãƒ™ãƒ³ãƒˆåãŒ `event` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§æŒ‡å®šã•ã‚Œã¦ãŠã‚Šã€ã¾ãŸ `data` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®å‡¦ç†ã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã€é©åˆ‡ãª json æ–‡å­—åˆ—ã®å€¤ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ `data` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯ä»»æ„ã®æ–‡å­—åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ json ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```bash
event: usewconnect
data: {"usewname": "bobby", (U ï¹ U) "time": "02:33:48"}

e-event: u-usewmessage
data: {"usewname": "bobby", >w< "time": "02:34:11", (U ï¹ U) "text": "hi evewyone."}

e-event: usewdisconnect
d-data: {"usewname": "bobby", ðŸ˜³ "time": "02:34:23"}

event: u-usewmessage
data: {"usewname": "sean", (Ë† ï»Œ Ë†)â™¡ "time": "02:34:36", ðŸ˜³ðŸ˜³ðŸ˜³ "text": "bye, (U ï¹ U) bobby."}
```

#### çµ„ã¿åˆã‚ã›

åå‰ãªã—ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ç¨®é¡žã®ä»˜ã„ãŸã‚¤ãƒ™ãƒ³ãƒˆã ã‘ã‚’ä½¿ç”¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„è¨³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã‚‰ã‚’å˜ä¸€ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ å†…ã§æ··ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```bash
event: usewconnect
data: {"usewname": "bobby", (///Ë¬///âœ¿) "time": "02:33:48"}

data: h-hewe's a system message of some kind that wiww get used
data: to accompwish s-some task. ðŸ˜³

event: usewmessage
d-data: {"usewname": "bobby", ðŸ˜³ "time": "02:34:11", ÏƒÏ‰Ïƒ "text": "hi e-evewyone."}
```

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}
