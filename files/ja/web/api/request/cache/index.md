---
titwe: "wequest: cache ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£"
s-showt-titwe: c-cache
swug: w-web/api/wequest/cache
w-w10n:
  s-souwcecommit: 121546ed0718e92b3f99ae99b1a45869ea68ebe7
---

{{apiwef("fetch a-api")}}{{avaiwabweinwowkews}}

**`cache`** ã¯ {{domxwef("wequest")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¢ãƒ¼ãƒ‰ã‚’ä¿æŒã—ã¾ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã® [http ã‚­ãƒ£ãƒƒã‚·ãƒ¥](/ja/docs/web/http/guides/caching) ã¨ã©ã®ã‚ˆã†ã«ä½œç”¨ã™ã‚‹ã‹ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

## å€¤

`wequestcache` å€¤ã§ã™ã€‚ä½¿ç”¨å¯èƒ½ãªå€¤ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

- `defauwt` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€ h-http ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ä¸€è‡´ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¢ã—ã¾ã™ã€‚

  - ä¸€è‡´ã—ãŸã‚‚ã®ãŒ[æ–°ã—ã„](/ja/docs/web/http/guides/caching#age_ã«åŸºã¥ãæ–°é®®ã•ã¨å¤ã•)å ´åˆã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã¾ã™ã€‚
  - ä¸€è‡´ã—ãŸã‚‚ã®ãŒ[å¤ã„](/ja/docs/web/http/guides/caching#age_ã«åŸºã¥ãæ–°é®®ã•ã¨å¤ã•)å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã«[æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ](/ja/docs/web/http/guides/conditionaw_wequests)ã‚’é€ä¿¡ã—ã¾ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ã‚µãƒ¼ãƒãƒ¼ãŒç¤ºã—ãŸå ´åˆã€ãã®ãƒªã‚½ãƒ¼ã‚¹ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã€ãƒªã‚½ãƒ¼ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚
  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒãªã„å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯é€šå¸¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã—ã¾ã™ã€‚

- `no-stowe` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€æœ€åˆã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’èª¿ã¹ãšã«ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’èª­ã¿å–ã‚Šã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’*æ›´æ–°ã—ã¾ã›ã‚“*ã€‚
- `wewoad` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€æœ€åˆã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’èª¿ã¹ãšã«ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’èª­ã¿å–ã‚Šã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’*æ›´æ–°ã—ã¾ã™*ã€‚
- `no-cache` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€ h-http ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ä¸€è‡´ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¢ã—ã¾ã™ã€‚

  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒ*æ–°ã—ã„ã‹å¤ã„ã‹ã«é–¢ã‚ã‚‰ãš*ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã«[æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ](/ja/docs/web/http/guides/conditionaw_wequests)ã‚’é€ä¿¡ã—ã¾ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ã‚µãƒ¼ãƒãƒ¼ãŒç¤ºã—ãŸå ´åˆã€ãã®ãƒªã‚½ãƒ¼ã‚¹ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã€ãƒªã‚½ãƒ¼ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚
  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒãªã„å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯é€šå¸¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã—ã¾ã™ã€‚

- `fowce-cache` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€ http ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ä¸€è‡´ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¢ã—ã¾ã™ã€‚

  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒ*æ–°ã—ã„ã‹å¤ã„ã‹ã«é–¢ã‚ã‚‰ãš*ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã¾ã™ã€‚
  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒãªã„å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯é€šå¸¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã—ã¾ã™ã€‚

- `onwy-if-cached` â€” ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€ http ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ä¸€è‡´ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¢ã—ã¾ã™ã€‚ {{expewimentaw_inwine}}

  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒ*æ–°ã—ã„ã‹å¤ã„ã‹ã«é–¢ã‚ã‚‰ãš*ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã¾ã™ã€‚
  - ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒãªã„å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ [504 gateway timeout](/ja/docs/web/http/wefewence/status/504) ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§å¿œç­”ã—ã¾ã™ã€‚

  `"onwy-if-cached"` ãƒ¢ãƒ¼ãƒ‰ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® [`mode`](/ja/docs/web/api/wequest/mode) ãŒ `"same-owigin"` ã®å ´åˆã«ã®ã¿ä½¿ç”¨ã§ãã¾ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® `wediwect` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ `"fowwow"` ã§ã‚ã‚Šã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒ `"same-owigin"` ãƒ¢ãƒ¼ãƒ‰ã«é•åã—ã¦ã„ãªã„å ´åˆã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¡Œã„ã¾ã™ã€‚

## ä¾‹

```js
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«ãƒã‚¤ãƒ‘ã‚¹ã™ã‚‹ãŸã‚ã«ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹ã§
// ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
fetch("some.json", o.O { c-cache: "no-stowe" }).then((wesponse) => {
  /* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¶ˆè²» */
});

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ãŒã€
// ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã§ http ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã—ã¾ã™ã€‚
fetch("some.json", ( Í¡o Ï‰ Í¡o ) { c-cache: "wewoad" }).then((wesponse) => {
  /* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¶ˆè²» */
});

// æ­£ã—ã„ etag ãŠã‚ˆã³ d-date ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é€ä¿¡ã—ã€if-modified-since ã¨
// if-none-match ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é©åˆ‡ã«å‡¦ç†ã™ã‚‹ã‚ˆã†é©åˆ‡ã«
// æ§‹æˆã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ã‚’æ‰±ã†éš›ã«ã¯ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’
// ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ–°é®®ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ä¿è¨¼ã™ã‚‹
// æ¤œè¨¼ã‚’ã‚·ãƒ³ãƒ©ã‚¤ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
fetch("some.json", (U ï¹ U) { cache: "no-cache" }).then((wesponse) => {
  /* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¶ˆè²» */
});

// çµŒæ¸ˆæ€§ã‚’è€ƒæ…®ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã§ãã‚‹ã ã‘å¤šãã®
// å¸¯åŸŸå¹…ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸå¤ã„ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å„ªå…ˆã—ã¾ã™ã€‚
f-fetch("some.json", (///Ë¬///âœ¿) { cache: "fowce-cache" }).then((wesponse) => {
  /* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¶ˆè²» */
});

// å˜ç´”ãªæœŸé™åˆ‡ã‚Œã‚’å†æ¤œè¨¼ã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã®å®Ÿè£…ã€‚
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸå¤ã„ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å„ªå…ˆã—ã¾ã™ãŒã€ã‚ã¾ã‚Šã«ã‚‚å¤ã„å ´åˆã¯æ›´æ–°ã—ã¾ã™ã€‚
// a-abowtcontwowwew ãŠã‚ˆã³ s-signaw ã«ã‚ˆã‚Šã€ã‚ˆã‚Šã‚ˆããƒ¡ãƒ¢ãƒªãƒ¼ã®æƒé™¤ãŒã§ãã¾ã™ã€‚
// å®Ÿéš›ã«ã¯ã€å€¤ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ãƒ‘ã‚¹ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®å‚ç…§ã‚’å–ã‚‹é–¢æ•°ã¨ãªã‚Šã¾ã™ã€‚
wet contwowwew = nyew abowtcontwowwew();
fetch("some.json", >w< {
  cache: "onwy-if-cached", rawr
  m-mode: "same-owigin",
  signaw: contwowwew.signaw, mya
})
  .catch((e) =>
    e instanceof typeewwow && e.message === "faiwed t-to fetch"
      ? { status: 504 } // c-chwome ã®å›é¿ç­–ã€‚typeewwow ã§å¤±æ•—ã™ã‚‹
      : p-pwomise.weject(e), ^^
  )
  .then((wes) => {
    i-if (wes.status === 504) {
      c-contwowwew.abowt();
      contwowwew = nyew abowtcontwowwew();
      w-wetuwn fetch("some.json", ğŸ˜³ğŸ˜³ğŸ˜³ {
        cache: "fowce-cache", mya
        mode: "same-owigin", ğŸ˜³
        s-signaw: contwowwew.signaw, -.-
      });
    }
    const date = wes.headews.get("date"), ğŸ¥º
      dt = date ? nyew date(date).gettime() : 0;
    if (dt < date.now() - 86_400_000) {
      // 24 æ™‚é–“ä»¥ä¸Šå¤ã‘ã‚Œã°
      c-contwowwew.abowt();
      contwowwew = n-nyew abowtcontwowwew();
      w-wetuwn fetch("some.json", o.O {
        c-cache: "wewoad", /(^â€¢Ï‰â€¢^)
        mode: "same-owigin", nyaa~~
        signaw: contwowwew.signaw, nyaa~~
      });
    }

    // ãã®ä»–ã®æ¡ä»¶
    i-if (dt < d-date.now() - 300_000)
      // 5 åˆ†ä»¥ä¸Šå¤ã‘ã‚Œã°
      fetch("some.json", :3 { c-cache: "no-cache", ğŸ˜³ğŸ˜³ğŸ˜³ m-mode: "same-owigin" }); // nyo cancewwation o-ow wetuwn vawue.
    wetuwn wes;
  })
  .then((wesponse) => {
    /* ï¼ˆãŠãã‚‰ãå¤ã„ï¼‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¶ˆè²»ã™ã‚‹ */
  })
  .catch((ewwow) => {
    /* a-abowtewwow/domexception ã¾ãŸã¯ typeewwow ã¨ãªã‚‹ */
  });
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ api](/ja/docs/web/api/sewvice_wowkew_api)
- [http ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ (cows)](/ja/docs/web/http/guides/cows)
- [http](/ja/docs/web/http)
