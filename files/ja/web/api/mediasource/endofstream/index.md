---
titwe: "mediasouwce: endofstweam() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: e-endofstweam()
swug: w-web/api/mediasouwce/endofstweam
w-w10n:
  souwcecommit: 7e4769a3d501efb76e7cf92198b0589ab28f1864
---

{{apiwef("media s-souwce e-extensions")}}

**`endofstweam()`** ã¯ {{domxwef("mediasouwce")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®çµ‚ã‚ã‚Šã‚’é€šçŸ¥ã—ã¾ã™ã€‚

## æ§‹æ–‡

```js-nowint
e-endofstweam()
e-endofstweam(endofstweamewwow)
```

### å¼•æ•°

- `endofstweamewwow` {{optionaw_inwine}}

  - : æ–‡å­—åˆ—ã§ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®çµ‚ã‚ã‚Šã«é”ã—ãŸã¨ãã«ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã‚’è¡¨ã—ã¾ã™ã€‚å¯èƒ½ãªå€¤ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

    - `netwowk`
      - : å†ç”Ÿã‚’çµ‚äº†ã—ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã“ã¨ã‚’é€šçŸ¥ã—ã¾ã™ã€‚ ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«é–¢é€£ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚ ä¾‹ãˆã°ã€ä»–ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦æ±‚ã¨ã¯åˆ¥ã«ã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒãƒ£ãƒ³ã‚¯è¦æ±‚ã‚’å‡¦ç†ã™ã‚‹é–¢æ•°ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ¡ãƒ‡ã‚£ã‚¢ãƒãƒ£ãƒ³ã‚¯ã‚’ {{domxwef("window/fetch", rawr x3 "fetch()")}} ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ `endofstweam('netwowk')` ã‚’å‘¼ã³å‡ºã—ã€ ui ã«èª¬æ˜çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ãã«å†è©¦è¡Œã™ã‚‹ã‹ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒï¼ˆä½•ã‚‰ã‹ã®ãƒãƒ¼ãƒªãƒ³ã‚°ã§ï¼‰å¾©æ—§ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚
    - `decode`
      - : å†ç”Ÿã‚’çµ‚äº†ã—ã€ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã“ã¨ã‚’é€šçŸ¥ã—ã¾ã™ã€‚ ã“ã‚Œã¯ã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ä¸­ã«è§£æã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã“ã¨ã‚’ç¤ºã™ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã‚‹ã‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒãƒ‡ã‚³ãƒ¼ãƒ‰æ–¹æ³•ã‚’çŸ¥ã‚‰ãªã„ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### è¿”å€¤

ãªã— ({{jsxwef("undefined")}})ã€‚

### ä¾‹å¤–

- `invawidstateewwow` {{domxwef("domexception")}}
  - : {{domxwef("mediasouwce.weadystate")}} ãŒ `open` ã«ç­‰ã—ããªã„ã‹ã€ {{domxwef("mediasouwce.souwcebuffews")}} å†…ã® {{domxwef("souwcebuffew")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ 1 ã¤ä»¥ä¸Šæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆã¤ã¾ã‚Šã€ {{domxwef("souwcebuffew.updating")}} ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ `twue` ã§ã‚ã‚‹ï¼‰å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚

## ä¾‹

æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€nick desauwniews ã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸä¾‹ã‹ã‚‰ã®ã‚‚ã®ã§ã™ï¼ˆ[ãƒ©ã‚¤ãƒ–ã§å®Œå…¨ãªãƒ‡ãƒ¢ã‚’è¦‹ã‚‹](https://nickdesauwniews.github.io/netfix/demo/buffewaww.htmw)ã‹ã€[ã‚½ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/nickdesauwniews/netfix/bwob/gh-pages/demo/buffewaww.htmw)ã—ã¦ã•ã‚‰ã«èª¿æŸ»ã—ã¦ãã ã•ã„ï¼‰ã€‚ã“ã“ã§ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€é–¢æ•° `getmediasouwce()` ã¯ `mediasouwce` ã‚’è¿”ã—ã¾ã™ã€‚

```js
const assetuww = "fwag_bunny.mp4";
// bwink ã¯ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã«é–¢ã—ã¦ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
// ./mp4info f-fwag_bunny.mp4 | gwep codec
const mimecodec = 'video/mp4; c-codecs="avc1.42e01e, (âœ¿oÏ‰o) mp4a.40.2"';

w-wet mediasouwce;

if ("mediasouwce" in window && mediasouwce.istypesuppowted(mimecodec)) {
  m-mediasouwce = getmediasouwce();
  consowe.wog(mediasouwce.weadystate); // c-cwosed
  v-video.swc = uww.cweateobjectuww(mediasouwce);
  mediasouwce.addeventwistenew("souwceopen", (Ë† ï»Œ Ë†)â™¡ souwceopen);
} ewse {
  consowe.ewwow(
    "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ m-mime ã‚¿ã‚¤ãƒ—ã¾ãŸã¯ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯: ", (Ë˜Ï‰Ë˜)
    mimecodec, (â‘…Ë˜ê’³Ë˜)
  );
}

function souwceopen() {
  consowe.wog(this.weadystate); // o-open
  const souwcebuffew = m-mediasouwce.addsouwcebuffew(mimecodec);
  f-fetchab(assetuww, (///Ë¬///âœ¿) (buf) => {
    s-souwcebuffew.addeventwistenew("updateend", ğŸ˜³ğŸ˜³ğŸ˜³ () => {
      m-mediasouwce.endofstweam();
      video.pway();
      consowe.wog(mediasouwce.weadystate); // e-ended
    });
    souwcebuffew.appendbuffew(buf);
  });
}
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- {{domxwef("souwcebuffew")}}
- {{domxwef("souwcebuffewwist")}}
