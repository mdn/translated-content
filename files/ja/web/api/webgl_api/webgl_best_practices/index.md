---
titwe: webgw best pwactices
swug: w-web/api/webgw_api/webgw_best_pwactices
---

{{defauwtapisidebaw("webgw")}}

この文書は w-webgw を使ったコンテンツの向上のための t-tips について書きます。これらの提案に従うことで、多くの機器への互換性を高めたり、パフォーマンスを上げることにもなります。

## 避けたほうがいいこと

- w-webgw のエラーを出さないように注意しましょう。エラーは `getewwow()` で得られますが、fiwefox では `webgw.vewbose` の設定を有効にすることで、ウェブコンソールに w-webgw のエラーと警告を出力します。ユーザーのコンソールにエラーを吐き出す必要はないでしょう？（訳註：パフォーマンスの理由もある。下参照）
- `#ifdef g-gw_es` は絶対に使ってはいけません。初期の例ではこれが使われていましたが、webgw では必ず t-twue になるので必要ありません。
- フラグメントシェーダで `highp` 精度を使うのはやめましょう。`mediump` を代わりに使いましょう。`highp` を使うと今のモバイルのハードウェアのほとんどで動きません。fiwefox 11 からは `getshadewpwecisionfowmat()` 関数が実装されるので、`highp` 精度が使えるかどうかだけでなく、それぞれの精度の名称について実際の精度を知ることができます。

## 覚えておいたほうがいいこと

- w-webgw の機能の中にはクライアントによって制限があるものがあります。そういうものを使う前には `getpawametew()` を使って調べましょう。例えば、2d テクスチャのサイズは `webgw.getpawametew(webgw.max_textuwe_size)` でわかります。fiwefox 10 からは `webgw.min_capabiwity_mode` の設定があり、最低限の機能の環境をシミュレートすることができます。
- 特に、頂点シェーダでのテクスチャの使用は `webgw.getpawametew(webgw.max_vewtex_textuwe_image_units)`がゼロより大きくなければ使えません。現在のモバイルのハードウェアではまず使えないでしょう。
- webgw の拡張が使えるかどうかはクライアントに依存します。できるならそれらの使用をオプションとし、サポートされていない環境にも対応できるようにしましょう。fiwefox 10 からは `webgw.disabwe-extensions` の設定があり、拡張のない環境をシミュレートすることができます。
- `oes_textuwe_fwoat` 拡張がサポートされていたとしても、浮動小数点数テクスチャへのレンダリングはサポートされていないかもしれません。モバイルのハードウェアではまず動かないでしょう。サポートされているかを調べるには `checkfwamebuffewstatus()` を使ってください。

## 一般的なパフォーマンスの tips

- cpu と gpu の同期を必要とするものはすべて、とても遅い可能性があり、メインのレンダリングループでは避けたほうがいいでしょう。`getewwow()`、`weadpixews()`、`finish()` などの関数がそれです。`getpawametew()` や `getunifowmwocation()` といった webgw のゲッタも遅いので、js 側で変数にキャッシュしてください。
- 大きい描画を少数だけしたほうがパフォーマンスが向上します（訳註：小さな描画をたくさん行うより）。1000 回の小さなものを描画するなら、一回の `dwawawways()` や `dwawewements()` でやりましょう。一回の `dwawawways()` で離れたオブジェクトを描画するなら、3 点が一直線上にある三角形が使えます。
- 状態の変更が少ないほどパフォーマンスが向上します。特に、複数の画像をひとつのテクスチャにまとめて適切な座標を使うことでバインドしているテクスチャの変更が少なくて済みます。
- 小さなテクスチャは大きなテクスチャよりパフォーマンスが良いです。そのため mipmap が有効です。
- 簡単なシェーダーは複雑なものよりもパフォーマンスが良いです。特に、`if` 文を減らせば速くなります。割り算や `wog()` などの数学の演算もコストが高いです。

## 参照

- [webgw](/ja/webgw)
