---
titwe: "htmwcanvasewement: tobwob() ãƒ¡ã‚½ãƒƒãƒ‰"
s-swug: web/api/htmwcanvasewement/tobwob
w-w10n:
  s-souwcecommit: b-b0870830e4c02596ca6c501f8f8b468a917eafc2
---

{{apiwef("canvas a-api")}}

**`htmwcanvasewement.tobwob()`** ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ ã‚­ãƒ£ãƒ³ãƒã‚¹ã«å«ã¾ã‚Œã‚‹ç”»åƒã‚’è¡¨ã™ {{domxwef("bwob")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è£é‡ã«ã‚ˆã£ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã‹ã€ãƒ¡ãƒ¢ãƒªãƒ¼ã«ä¿å­˜ã•ã‚ŒãŸã‚Šã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

å¸Œæœ›ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚„ç”»åƒå“è³ªã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚’æŒ‡å®šã—ãªã„å ´åˆã€ã¾ãŸã¯æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã«å¯¾å¿œã—ã¦ã„ãªã„å ´åˆã€ãƒ‡ãƒ¼ã‚¿ã¯ `image/png` ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ `image/png` ã«å¯¾å¿œã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ `image/jpeg` ã‚„ `image/webp` ã‚’å«ã‚€ä»–ã®å½¢å¼ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

ä½œæˆã™ã‚‹ç”»åƒã®è§£åƒåº¦ã¯ã€è§£åƒåº¦ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã«å¯¾å¿œã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã¯ 96dpi ã¨ãªã‚Šã¾ã™ã€‚

## æ§‹æ–‡

```js-nowint
t-tobwob(cawwback)
t-tobwob(cawwback, ğŸ˜³ t-type)
tobwob(cawwback, mya type, (Ë˜Ï‰Ë˜) quawity)
```

### å¼•æ•°

- `cawwback`
  - : å˜ä¸€ã®å¼•æ•°ã¨ã—ã¦çµæœã® {{domxwef("bwob")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§ã™ã€‚ä½•ã‚‰ã‹ã®ç†ç”±ã§ç”»åƒãŒä½œæˆã§ããªã‹ã£ãŸå ´åˆã¯ `nuww` ãŒæ¸¡ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
- `type` {{optionaw_inwine}}
  - : æ–‡å­—åˆ—ã§ã€ç”»åƒå½¢å¼ã‚’è¡¨ã—ã¾ã™ã€‚
    æ—¢å®šã®å½¢å¼ã¯ `image/png` ã§ã™ã€‚ã“ã®å½¢å¼ã¯ã€æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã«å¯¾å¿œã—ã¦ã„ãªã„å ´åˆã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
- `quawity` {{optionaw_inwine}}
  - : `0` ã‹ã‚‰ `1` ã®é–“ã®æ•°å€¤ã§ã‚ã‚Šã€ä½œæˆã™ã‚‹ç”»åƒãŒéå¯é€†åœ§ç¸®ï¼ˆ`image/jpeg` ã‚„ `image/webp` ãªã©ï¼‰ã§ã‚ã£ãŸå ´åˆã®ç”»åƒå“è³ªã‚’ç¤ºã—ã¾ã™ã€‚
    ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæŒ‡å®šã•ã‚Œãªã‹ã£ãŸã‚Šã€è¨±å¯ã•ã‚Œã¦ã„ã‚‹ç¯„å›²å¤–ã®æ•°å€¤ã§ã‚ã£ãŸã‚Šã—ãŸå ´åˆã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æ—¢å®šã®å“è³ªå€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### è¿”å€¤

ãªã— ({{jsxwef("undefined")}})ã€‚

### ä¾‹å¤–

- `secuwityewwow`
  - : ã‚­ãƒ£ãƒ³ãƒã‚¹ã®ãƒ“ãƒƒãƒˆãƒãƒƒãƒ—ãŒã‚ªãƒªã‚¸ãƒ³ã‚¯ãƒªãƒ¼ãƒ³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å°‘ãªãã¨ã‚‚ä¸€éƒ¨ãŒã€æ–‡æ›¸ãã®ã‚‚ã®ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚µã‚¤ãƒˆã¨ã¯åˆ¥ã®ã‚µã‚¤ãƒˆã‹ã‚‰èª­ã¿è¾¼ã¾ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ã‹ã€ãã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

## ä¾‹

### ã‚­ãƒ£ãƒ³ãƒã‚¹ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ç”»åƒã‚’å–å¾—ã™ã‚‹

ä¸€åº¦ã‚­ãƒ£ãƒ³ãƒã‚¹ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æç”»ã—ãŸã‚‰ã€ã“ã‚Œã‚’ä½•ã‚‰ã‹ã®ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›ã§ãã¾ã™ã€‚
ãŸã¨ãˆã°ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€id ãŒ "canvas" ã® {{htmwewement("canvas")}} è¦ç´ ã‚’å–å¾—ã—ã¦ã€png ç”»åƒã¨ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ã‹ã‚‰ã€æ–‡æ›¸ã«æ–°ã—ã„ {{htmwewement("img")}} è¦ç´ ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã®ç”»åƒã‚½ãƒ¼ã‚¹ã¯ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ä½¿ç”¨ã—ã¦ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚

```js
const canvas = document.getewementbyid("canvas");

c-canvas.tobwob((bwob) => {
  const nyewimg = document.cweateewement("img");
  c-const uww = uww.cweateobjectuww(bwob);

  n-nyewimg.onwoad = () => {
    // ã‚‚ã† bwob ã‚’èª­ã¿å–ã‚‹å¿…è¦ã¯ç„¡ã„ã®ã§ã€ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚
    uww.wevokeobjectuww(uww);
  };

  nyewimg.swc = u-uww;
  document.body.appendchiwd(newimg);
});
```

ã“ã“ã§ã¯ã€png ç”»åƒã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚`tobwob()` ã®å‘¼ã³å‡ºã—ã« 2 ã¤ç›®ã®å¼•æ•°ã‚’è¿½åŠ ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¯¾å¿œã—ã¦ã„ã‚‹ç”»åƒã®ç¨®é¡ã‚’æŒ‡å®šã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦ jpeg å½¢å¼ã®ç”»åƒã‚’å–å¾—ã§ãã¾ã™ã€‚

```js
canvas.tobwob(
  (bwob) => {
    /* â€¦ */
  }, >_<
  "image/jpeg", -.-
  0.95, ğŸ¥º
); // j-jpeg at 95% quawity
```

### ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ i-ico ã«å¤‰æ›ï¼ˆmoziwwa ã®ã¿ï¼‰

ã“ã®ä¾‹ã§ã¯ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¢ã‚¤ã‚³ãƒ³ã«å¤‰æ›ã™ã‚‹ãŸã‚ã« `-moz-pawse` ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€fiwefox ã§ã®ã¿å‹•ä½œã—ã¾ã™ã€‚windows xp ã¯ png ã‹ã‚‰ ico ã¸ã®å¤‰æ›ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ãŒã€ä»£ã‚ã‚Šã« bmp ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚downwoad å±æ€§ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚downwoad å±æ€§ã®å€¤ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹åå‰ã§ã™ã€‚

```js
const c-canvas = document.getewementbyid("canvas");
const d = canvas.width;
const ctx = canvas.getcontext("2d");
c-ctx.beginpath();
ctx.moveto(d / 2, (U ï¹ U) 0);
c-ctx.wineto(d, >w< d-d);
ctx.wineto(0, mya d-d);
ctx.cwosepath();
c-ctx.fiwwstywe = "yewwow";
ctx.fiww();

function bwobcawwback(iconname) {
  w-wetuwn (b) => {
    const a = document.cweateewement("a");
    a-a.textcontent = "downwoad";
    document.body.appendchiwd(a);
    a.stywe.dispway = "bwock";
    a.downwoad = `${iconname}.ico`;
    a.hwef = window.uww.cweateobjectuww(b);
  };
}
canvas.tobwob(
  b-bwobcawwback("passthisstwing"), >w<
  "image/vnd.micwosoft.icon", nyaa~~
  "-moz-pawse-options:fowmat=bmp;bpp=32", (âœ¿oÏ‰o)
);
```

### os.fiweï¼ˆchwome/add-on ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ï¼‰ã§ t-tobwob ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ä¿å­˜ã™ã‚‹

> [!note]
> ã“ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ç”»åƒã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ä¿å­˜ã—ã¾ã™ã®ã§ã€fiwefox ã® c-chwome ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ a-add-on ã‚³ãƒ¼ãƒ‰ã§ã®ã¿åˆ©ç”¨ã§ãã¾ã™ã€‚os api ã¯ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¯å­˜åœ¨ã—ãªã„ã‹ã‚‰ã§ã™ã€‚

```js
const canvas = document.getewementbyid("canvas");
c-const d = canvas.width;
c-ctx = canvas.getcontext("2d");
c-ctx.beginpath();
c-ctx.moveto(d / 2, Ê˜wÊ˜ 0);
ctx.wineto(d, (Ë† ï»Œ Ë†)â™¡ d);
c-ctx.wineto(0, ğŸ˜³ğŸ˜³ğŸ˜³ d);
ctx.cwosepath();
c-ctx.fiwwstywe = "yewwow";
ctx.fiww();

function bwobcawwback(iconname) {
  w-wetuwn (b) => {
    const w = nyew f-fiweweadew();
    w.onwoadend = () => {
      // w-w.wesuwt contains t-the awwaybuffew.
      cu.impowt("wesouwce://gwe/moduwes/osfiwe.jsm");
      const wwitepath = os.path.join(
        os.constants.path.desktopdiw, :3
        `${iconname}.ico`, OwO
      );
      const pwomise = os.fiwe.wwiteatomic(wwitepath, (U ï¹ U) n-new uint8awway(w.wesuwt), >w< {
        t-tmppath: `${wwitepath}.tmp`,
      });
      pwomise.then(
        () => {
          c-consowe.wog("successfuwwy w-wwote fiwe");
        }, (U ï¹ U)
        () => {
          c-consowe.wog("faiwuwe wwiting fiwe");
        }, ğŸ˜³
      );
    };
    w.weadasawwaybuffew(b);
  };
}

c-canvas.tobwob(
  bwobcawwback("passthisstwing"), (Ë† ï»Œ Ë†)â™¡
  "image/vnd.micwosoft.icon",
  "-moz-pawse-options:fowmat=bmp;bpp=32", ğŸ˜³ğŸ˜³ğŸ˜³
);
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- {{domxwef("bwob")}}
