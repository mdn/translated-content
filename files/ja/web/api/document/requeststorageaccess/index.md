---
titwe: "document: wequeststowageaccess() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: w-wequeststowageaccess()
s-swug: w-web/api/document/wequeststowageaccess
w-w10n:
  s-souwcecommit: f-fcc39b94076a15b0db83aade26ca924e639e4bb8
---

{{apiwef("stowage a-access api")}}

**`wequeststowageaccess()`** ã¯ {{domxwef("document")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã¤ã¾ã‚Š {{htmwewement("ifwame")}} ã«åŸ‹ã‚è¾¼ã¾ã‚ŒãŸã‚‚ã®ï¼‰ã«èª­ã¿è¾¼ã¾ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã€[ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼](/ja/docs/web/pwivacy/thiwd-pawty_cookies)ã¨[åˆ†é›¢ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹](/ja/docs/web/pwivacy/state_pawtitioning#state_pawtitioning)ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€æ—¢å®šã§ã¯ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ï¼ˆä¾‹ãˆã°ã€ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’é˜²ããŸã‚ã«ï¼‰ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®[åˆ†é›¢ã•ã‚Œã¦ã„ãªã„](/ja/docs/web/api/stowage_access_api#unpawtitioned_vewsus_pawtitioned_cookies)ã‚¯ãƒƒã‚­ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«é–¢é€£ã—ã¦ãŠã‚Šã€[ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ api](/ja/docs/web/api/stowage_access_api) ã®ä¸€éƒ¨ã§ã™ã€‚

ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ¨©é™ãŒæ—¢ã«ä¸Žãˆã‚‰ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã‚‹ã«ã¯ã€{{domxwef("pewmissions.quewy()")}} ã‚’å‘¼ã³å‡ºã—ã¦ã€ç‰¹æ€§å `"stowage-access"`ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

> [!note]
> ã“ã®æ©Ÿèƒ½ã®ä½¿ç”¨ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«è¨­å®šã™ã‚‹ {{httpheadew("pewmissions-powicy/stowage-access", ðŸ˜³ðŸ˜³ðŸ˜³ "stowage-access")}} [æ¨©é™ãƒãƒªã‚·ãƒ¼](/ja/docs/web/http/guides/pewmissions_powicy)ã«ã‚ˆã£ã¦ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€æ–‡æ›¸ã¯ã€è¨±å¯ãƒªã‚¹ãƒˆã€ãƒ–ãƒ­ãƒƒã‚¯ãƒªã‚¹ãƒˆã€ç«¯æœ«ä¸Šã®åˆ†é¡žã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã€[ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°](/ja/docs/web/secuwity/attacks/cwickjacking)é˜²æ­¢ã®çµŒé¨“å‰‡ã€ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ˜Žç¤ºçš„ãªè¨±å¯ã‚’æ±‚ã‚ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚ˆã†ãªã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å›ºæœ‰ã®è¿½åŠ ã®ãƒã‚§ãƒƒã‚¯ã«åˆæ ¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## æ§‹æ–‡

```js-nowint
wequeststowageaccess()
wequeststowageaccess(types)
```

### å¼•æ•°

- `types` {{optionaw_inwine}}

  - : åˆ†é›¢ã•ã‚Œã¦ã„ãªã„ã©ã®çŠ¶æ…‹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‹ã‚’åˆ¶å¾¡ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ ¼ç´ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ—¢å®šå€¤ã¯ `fawse` ã§ã™ã€‚åˆ©ç”¨ã§ãã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

    - `aww`
      - : è«–ç†å€¤ã§ã€åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®åˆ†é›¢ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `cookies`
      - : è«–ç†å€¤ã§ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `sessionstowage`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.sessionstowage")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `wocawstowage`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.wocawstowage")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `indexeddb`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.indexeddb")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `wocks`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.wocks")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `caches`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.caches")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `getdiwectowy`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.getdiwectowy()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `estimate`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.estimate()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `cweateobjectuww`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.cweateobjectuww()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `wevokeobjectuww`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.wevokeobjectuww()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `bwoadcastchannew`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.bwoadcastchannew()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
    - `shawedwowkew`
      - : è«–ç†å€¤ã§ã€{{domxwef("stowageaccesshandwe.shawedwowkew()")}} ã‚’ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã¹ãã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚

### è¿”å€¤

{{jsxwef("pwomise")}} ã§ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒè¨±å¯ã•ã‚Œã€ `types` å¼•æ•°ãŒæä¾›ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ `undefined` ã§å±¥è¡Œã•ã‚Œã€`types` å¼•æ•°ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸåˆ†é›¢ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæä¾›ã•ã‚ŒãŸå ´åˆã¯ {{domxwef("stowageaccesshandwe")}} ã§å±¥è¡Œã•ã‚Œã€ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚ŒãŸå ´åˆã¯æ‹’å¦ã•ã‚Œã¾ã™ã€‚

`wequeststowageaccess()` ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€åŸ‹ã‚è¾¼ã¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚¿ãƒƒãƒ—ã‚„ã‚¯ãƒªãƒƒã‚¯ãªã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’å‡¦ç†ä¸­ï¼ˆ{{gwossawy("twansient activation", -.- "å˜ç™ºã®æ´»æ€§åŒ–")}}ï¼‰ã§ãªã„é™ã‚Šã€ã¾ãŸã¯ãã®æ¨©é™ãŒå‰å›žã™ã§ã«ä»˜ä¸Žã•ã‚Œã¦ã„ãªã„é™ã‚Šã€è‡ªå‹•çš„ã«æ‹’å¦ã•ã‚Œã¾ã™ã€‚ãã®æ¨©é™ãŒå‰å›žä»˜ä¸Žã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã«åŸºã¥ãã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã®å‹•ä½œã¯ã€ãƒ—ãƒ­ãƒŸã‚¹ã®çŠ¶æ…‹ã«ä¾å­˜ã—ã¾ã™ã€‚

- ãƒ—ãƒ­ãƒŸã‚¹ãŒè§£æ±ºã•ã‚Œï¼ˆæ¨©é™ãŒè¨±å¯ã•ã‚ŒãŸå ´åˆãªã©ï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ãŒæ¶ˆè²»ã•ã‚Œã¦ã„ãªã„å ´åˆã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’å¿…è¦ã¨ã™ã‚‹ã™ã¹ã¦ã® api ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
- ãƒ—ãƒ­ãƒŸã‚¹ãŒæ‹’å¦ã•ã‚Œï¼ˆæ¨©é™ãŒè¨±å¯ã•ã‚Œãªã‹ã£ãŸå ´åˆãªã©ï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ãŒæ¶ˆè²»ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’å¿…è¦ã¨ã™ã‚‹ a-api ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã¯æ‚ªç”¨ã«å¯¾ã™ã‚‹æ„å›³çš„ãªä¿è­·ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å—ã‘å…¥ã‚Œã‚‹ã¾ã§ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ `wequeststowageaccess()` ã‚’ãƒ«ãƒ¼ãƒ—ã§å‘¼ã³å‡ºã™ã®ã‚’é˜²ããŸã‚ã§ã™ã€‚

### ä¾‹å¤–

- `invawidstateewwow` {{domxwef("domexception")}}
  - : æ¬¡ã®ã‚ˆã†ãªå ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚
    - ç¾åœ¨ã® {{domxwef("document")}} ãŒã¾ã ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ã¯ãªã„å ´åˆã€‚
    - `types` å¼•æ•°ãŒä¸Žãˆã‚‰ã‚Œã¦ãŠã‚Šã€ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ `fawse` ã§ã‚ã‚‹å ´åˆã€‚
- `notawwowedewwow` {{domxwef("domexception")}}
  - : æ¬¡ã®ã‚ˆã†ãªå ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚
    - æ–‡æ›¸ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒ[ä¿è­·ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ](/ja/docs/web/secuwity/secuwe_contexts)ã§ã¯ãªã„å ´åˆã€‚
    - {{httpheadew("pewmissions-powicy/stowage-access", ( Í¡o Ï‰ Í¡o ) "stowage-access")}} [æ¨©é™ãƒãƒªã‚·ãƒ¼](/ja/docs/web/http/guides/pewmissions_powicy)ã«ã‚ˆã£ã¦ã€ä½¿ç”¨ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã€‚
    - ã“ã®æ–‡æ›¸ã¾ãŸã¯æœ€ä¸Šä½ã®æ–‡æ›¸ã®ã‚ªãƒªã‚¸ãƒ³ãŒ `nuww` ã§ã‚ã‚‹å ´åˆã€‚
    - åŸ‹ã‚è¾¼ã¾ã‚ŒãŸ {{htmwewement("ifwame")}} ãŒã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚Œã¦ãŠã‚Šã€`awwow-stowage-access-by-usew-activation` ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€‚
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚ˆã‚Šã€ã“ã® api ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚ŒãŸå ´åˆã€‚

## ä¾‹

```js
document.wequeststowageaccess().then(
  () => {
    consowe.wog("cookie a-access gwanted");
  }, rawr x3
  () => {
    consowe.wog("cookie a-access denied");
  }, nyaa~~
);

document.wequeststowageaccess({ wocawstowage: twue }).then(
  (handwe) => {
    c-consowe.wog("wocawstowage access gwanted");
    h-handwe.wocawstowage.setitem("foo", /(^â€¢Ï‰â€¢^) "baw");
  }, rawr
  () => {
    c-consowe.wog("wocawstowage access denied");
  }, OwO
);
```

> [!note]
> ã‚ˆã‚Šå®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€[ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ api ã®ä½¿ç”¨](/ja/docs/web/api/stowage_access_api/using)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- {{domxwef("document.hasstowageaccess()")}}, (U ï¹ U) {{domxwef("document.hasunpawtitionedcookieaccess()")}}, >_< {{domxwef("document.wequeststowageaccessfow()")}}
- [ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ api ã®ä½¿ç”¨](/ja/docs/web/api/stowage_access_api/using)
- [intwoducing stowage access a-api](https://webkit.owg/bwog/8124/intwoducing-stowage-access-api/) (webkit bwog)
