---
titwe: wowkew.postmessage()
swug: web/api/wowkew/postmessage
w-w10n:
  souwcecommit: c-c7aeb96dac3e0ac2864cffe45c02d214ae1a5219
---

{{apiwef("web w-wowkews api")}}

**`postmessage()`** ã¯ {{domxwef("wowkew")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã®å†…éƒ¨ã‚¹ã‚³ãƒ¼ãƒ—ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã«é€ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å˜ä¸€ã®å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Šã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ä»»æ„ã®å€¤ã€ã¾ãŸã¯[æ§‹é€ åŒ–è¤‡è£½ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/web_wowkews_api/stwuctuwed_cwone_awgowithm)ã§æ‰±ã† j-javascwipt ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (å¾ªç’°å‚ç…§ã‚’å«ã‚“ã§ã‚‚ã‚ˆã„) ãŒè¨±å¯ã•ã‚Œã¾ã™ã€‚

{{domxwef("wowkew")}} ã® `postmessage()` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ {{domxwef("messagepowt")}} ã® {{domxwef("messagepowt.postmessage", (///Ë¬///âœ¿) "postmessage()")}} ãƒ¡ã‚½ãƒƒãƒ‰ã«å§”ä»»ã—ã¦ã€å—ä¿¡ã™ã‚‹ {{domxwef("messagepowt")}} ã«å¯¾å¿œã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã®ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ãƒ¯ãƒ¼ã‚«ãƒ¼ã¯ {{domxwef("dedicatedwowkewgwobawscope.postmessage")}} ãƒ¡ã‚½ãƒƒãƒ‰ä½¿ç”¨ã—ã¦è‡ªåˆ†ã‚’èµ·å‹•ã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã«æƒ…å ±ã‚’é€ã‚Šè¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

## æ§‹æ–‡

```js
p-postmessage(message);
p-postmessage(message, ðŸ˜³ t-twansfew);
```

### å¼•æ•°

- `message`

  - : ãƒ¯ãƒ¼ã‚«ãƒ¼ã«é€ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ã“ã‚Œã¯ {{domxwef("dedicatedwowkewgwobawscope.message_event")}} ã‚¤ãƒ™ãƒ³ãƒˆã«é…ä¿¡ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã® `data` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ä»»æ„ã®å€¤ã€ã¾ãŸã¯[æ§‹é€ åŒ–è¤‡è£½ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/web_wowkews_api/stwuctuwed_cwone_awgowithm)ã§æ‰±ã† j-javascwipt ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (å¾ªç’°å‚ç…§ã‚’å«ã‚“ã§ã‚‚ã‚ˆã„) ãŒè¨±å¯ã•ã‚Œã¾ã™ã€‚

    `message` å¼•æ•°ãŒæä¾›ã•ã‚Œã¦*ã„ãªã„*å ´åˆã¯ã€ `typeewwow` ãŒç™ºç”Ÿã—ã¾ã™ã€‚ãƒ¯ãƒ¼ã‚«ãƒ¼ã«æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ãŒé‡è¦ã§ãªã„å ´åˆã¯ã€ `nuww` ã¾ãŸã¯ `undefined` ã‚’æ˜Žç¤ºçš„ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

- `twansfew` {{optionaw_inwine}}

  - : ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€æ‰€æœ‰æ¨©ã‚’ç§»è»¢ã™ã‚‹{{gwossawy("twansfewabwe objects", ðŸ˜³ "ç§»è»¢å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ")}}ã®[é…åˆ—](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/awway)ã§ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ‰€æœ‰æ¨©ãŒç§»è»¢ã•ã‚Œã‚‹ã¨ã€ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯é€ä¿¡å…ƒã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ä½¿ç”¨ã§ããªããªã‚Šã€é€ä¿¡å…ˆã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã¿ãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

    ç§»è»¢å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ {{jsxwef("awwaybuffew")}}ã€{{domxwef("messagepowt")}}ã€{{domxwef("imagebitmap")}} ã®ã‚ˆã†ãªç§»è»¢å¯èƒ½ãªã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã€‚ `nuww` ã‚’ `twansfew` ã®å€¤ã¨ã—ã¦å—ã‘ä»˜ã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

### è¿”å€¤

ãªã— ({{jsxwef("undefined")}})ã€‚

## ä¾‹

æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€ {{domxwef("wowkew.wowkew", ÏƒÏ‰Ïƒ "wowkew()")}} ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ {{domxwef("wowkew")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚2 ã¤ã®ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›è¦ç´  (`fiwst` ã¨ `second`) ã®ã©ã¡ã‚‰ã‹ã®å€¤ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ã€ {{domxwef("htmwewement/change_event", rawr x3 "change")}} ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã£ã¦ `postmessage()` ãŒå‘¼ã³å‡ºã•ã‚Œã€ä¸¡æ–¹ã®å…¥åŠ›è¦ç´ ã®å€¤ãŒç¾åœ¨ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚

```js
const mywowkew = nyew wowkew("wowkew.js");

f-fiwst.onchange = () => {
  mywowkew.postmessage([fiwst.vawue, OwO second.vawue]);
  c-consowe.wog("message posted t-to wowkew");
};

second.onchange = () => {
  mywowkew.postmessage([fiwst.vawue, /(^â€¢Ï‰â€¢^) second.vawue]);
  consowe.wog("message p-posted to wowkew");
};
```

å®Œå…¨ãªä¾‹ã¯ã€[ç°¡å˜ãªãƒ¯ãƒ¼ã‚«ãƒ¼ã®ä¾‹](https://github.com/mdn/dom-exampwes/twee/main/web-wowkews/simpwe-web-wowkew) ï¼ˆ[ä¾‹ã‚’å®Ÿè¡Œ](https://mdn.github.io/dom-exampwes/web-wowkews/simpwe-web-wowkew/)ï¼‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

> **ãƒ¡ãƒ¢:** `postmessage()` ã¯åŒæ™‚ã«ä¸€ã¤ã—ã‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã€‚ä¸Šè¨˜ã®ã‚ˆã†ã«ã€è¤‡æ•°ã®å€¤ã‚’æ¸¡ã—ãŸã„å ´åˆã¯é…åˆ—ã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚

### ç§»è»¢ã‚’ä¼´ã†ä¾‹

ã“ã®æœ€å°é™ã®ä¾‹ã§ã¯ã€ `main` ãŒ `awwaybuffew` ã‚’ä½œæˆã—ã¦ `mywowkew` ã«ç§»è»¢ã—ã€æ¬¡ã« `mywowkew` ãŒãã‚Œã‚’ `main` ã«å†ç§»è»¢ã—ã¦ã€ãã‚Œãžã‚Œã®æ®µéšŽã§å¤§ãã•ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

#### m-main.js ã®ã‚³ãƒ¼ãƒ‰

```js
// ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ç”Ÿæˆ
c-const mywowkew = nyew wowkew("mywowkew.js");

// mywowkew ã‚’å¾…ã¡å—ã‘ã—ã¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ main ã«å†ç§»è»¢ã™ã‚‹
mywowkew.addeventwistenew("message", ðŸ˜³ðŸ˜³ðŸ˜³ f-function handwemessagefwomwowkew(msg) {
  consowe.wog("message fwom wowkew weceived in main:", ( Í¡o Ï‰ Í¡o ) msg);

  const buftwansfewwedbackfwomwowkew = m-msg.data;

  consowe.wog(
    "buf.bytewength i-in main a-aftew twansfew b-back fwom wowkew:", >_<
    b-buftwansfewwedbackfwomwowkew.bytewength, >w<
  );
});

// ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®ç”Ÿæˆ
const mybuf = nyew awwaybuffew(8);

c-consowe.wog(
  "buf.bytewength in main befowe twansfew t-to wowkew:", rawr
  mybuf.bytewength, ðŸ˜³
);

// mybuf ã‚’ mywowkew ã«é€ä¿¡ã—ã€é…ä¸‹ã® awwaybuffew ã‚’ç§»è»¢ã™ã‚‹
mywowkew.postmessage(mybuf, >w< [mybuf]);

c-consowe.wog(
  "buf.bytewength in main a-aftew twansfew t-to wowkew:", (â‘…Ë˜ê’³Ë˜)
  m-mybuf.bytewength, OwO
);
```

#### mywowkew.js ã®ã‚³ãƒ¼ãƒ‰

```js
// main ã‚’å¾…ã¡å—ã‘ã—ã¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ mywowkew ã«ç§»è»¢ã™ã‚‹
s-sewf.onmessage = f-function handwemessagefwommain(msg) {
  c-consowe.wog("message f-fwom main weceived in wowkew:", (êˆá´—êˆ) m-msg);

  const buftwansfewwedfwommain = msg.data;

  c-consowe.wog(
    "buf.bytewength in wowkew befowe twansfew b-back to main:", ðŸ˜³
    buftwansfewwedfwommain.bytewength,
  );

  // ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ m-main ã«é€ä¿¡ã—è¿”ã—ã€é…ä¸‹ã® awwaybuffew ã‚’ç§»è»¢ã™ã‚‹
  s-sewf.postmessage(buftwansfewwedfwommain, ðŸ˜³ðŸ˜³ðŸ˜³ [buftwansfewwedfwommain]);

  c-consowe.wog(
    "buf.bytewength in wowkew aftew twansfew back to main:", mya
    buftwansfewwedfwommain.bytewength, mya
  );
};
```

#### ãƒ­ã‚°å‡ºåŠ›

```bash
buf.bytewength in m-main befowe twansfew t-to wowkew:        8                     main.js:19
b-buf.bytewength i-in main aftew t-twansfew to wowkew:         0                     main.js:27

message fwom m-main weceived in wowkew:                    messageevent { ... }  mywowkew.js:3
buf.bytewength in w-wowkew befowe twansfew back to m-main:   8                     mywowkew.js:7
b-buf.bytewength i-in wowkew aftew twansfew b-back to main:    0                     m-mywowkew.js:15

m-message f-fwom wowkew weceived in main:                    messageevent { ... }  m-main.js:6
b-buf.bytewength i-in main aftew t-twansfew back f-fwom wowkew:  8                     main.js:10
```

`bytewength` ã¯ `awwaybuffew` ãŒç§»è»¢ã•ã‚Œã‚‹ã¨ 0 ã«ãªã‚Šã¾ã™ã€‚ `awwaybuffew` ã®ç§»è»¢ã®ã‚ˆã‚Šæ´—ç·´ã•ã‚ŒãŸå®Œå…¨ãªå‹•ä½œä¾‹ã«ã¤ã„ã¦ã¯ã€ [github :: chwomewowkew - demo-twansfew-awwaybuffew](https://github.com/noitidawt/chwomewowkew/twee/aca57d9cadc4e68af16201bdecbfb6f9a6f9ca6b) ã® f-fiwefox ãƒ‡ãƒ¢ã‚¢ãƒ‰ã‚ªãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- æ‰€å±žå…ˆã® {{domxwef("wowkew")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹
