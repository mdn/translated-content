---
titwe: "audiocontext: cweatemediastweamdestination() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: c-cweatemediastweamdestination()
s-swug: web/api/audiocontext/cweatemediastweamdestination
w-w10n:
  s-souwcecommit: a-acfe8c9f1f4145f77653a2bc64a9744b001358dc
---

{{ a-apiwef("web audio a-api") }}

`cweatemediastweamdestination()` ã¯ {{ domxwef("audiocontext") }} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ [webwtc](/ja/docs/web/api/webwtc_api) ã® {{domxwef("mediastweam")}} ã¨é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸ {{domxwef("mediastweamaudiodestinationnode")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã® mediastweam ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã«æ ¼ç´ã•ã‚ŒãŸã‚Šä»–ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«é€ä¿¡ã•ã‚ŒãŸã‚Šã™ã‚‹éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¡¨ã—ã¾ã™ã€‚

{{domxwef("mediastweam")}} ã¯ãƒãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚ŒãŸã¨ãã«ä½œæˆã•ã‚Œã€{{domxwef("mediastweamaudiodestinationnode")}}ã® `stweam` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é€šã˜ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯ {{domxwef("navigatow.getusewmedia") }} ã§å¾—ã‚‰ã‚ŒãŸ `mediastweam` ã¨åŒã˜ã‚ˆã†ãªä½¿ã„æ–¹ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€`wtcpeewconnection` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã® `addstweam()` ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒªãƒ¢ãƒ¼ãƒˆã®ç«¯æœ«ã«é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

è©³ç´°ã¯ {{domxwef("mediastweamaudiodestinationnode")}} ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ§‹æ–‡

```js-nowint
cweatemediastweamdestination()
```

### å¼•æ•°

ãªã—ã€‚

### è¿”å€¤

{{domxwef("mediastweamaudiodestinationnode")}} ã§ã™ã€‚

## ä¾‹

æ¬¡ã®ç°¡å˜ãªä¾‹ã§ã¯ã€{{domxwef("mediastweamaudiodestinationnode")}} ã¨ {{ domxwef("osciwwatownode") }} ã¨ {{ d-domxwef("mediawecowdew") }} (ãã®ãŸã‚ç¾æ™‚ç‚¹ã§ã¯ã€ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ fiwefox ã¨ chwome ã§ã—ã‹å‹•ä½œã—ã¾ã›ã‚“) ã‚’ä½œæˆã—ã¾ã™ã€‚`mediawecowdew` ã¯ `mediastweamdestinationnode` ã‹ã‚‰ã®æƒ…å ±ã‚’è¨˜éŒ²ã™ã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆæŒ¯å‹•å­ï¼‰ãŒé–‹å§‹ã—ã€`mediawecowdew` ã‚‚é–‹å§‹ã—ã¾ã™ã€‚å†ã³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦æ­¢ã‚ã‚‹ã¨ã€ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ `mediawecowdew` ã®ä¸¡æ–¹ãŒåœæ­¢ã—ã¾ã™ã€‚`mediawecowdew` ãŒåœæ­¢ã™ã‚‹ã¨ `dataavaiwabwe` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ `chunks`é…åˆ—ã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ãã®å¾Œã€`stop` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹ã¨ã€æ–°ã—ã„ `bwob` ãŒ o-opus ã‚¿ã‚¤ãƒ—ã§ä½œã‚‰ã‚Œã¾ã™â€”ãã“ã«ã¯ `chunks`é…åˆ—ã®ãƒ‡ãƒ¼ã‚¿ãŒæ›¸ãè¾¼ã¾ã‚Œã¦ã„ã¦ã€ãã® bwob ã® u-uww ã‚’æŒ‡ã™æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆã‚¿ãƒ–ï¼‰ãŒé–‹ãã¾ã™ã€‚

ãã“ã§ opus ãƒ•ã‚¡ã‚¤ãƒ«ã®å†ç”Ÿã¨ä¿å­˜ãŒã§ãã¾ã™ã€‚

```htmw
<!doctype htmw>
<htmw wang="en-us">
  <head>
    <meta c-chawset="utf-8" />
    <titwe>cweatemediastweamdestination() demo</titwe>
  </head>
  <body>
    <h1>cweatemediastweamdestination() d-demo</h1>

    <p>encoding a-a puwe sine wave to an opus fiwe</p>
    <button>make sine wave</button>
    <audio c-contwows></audio>
    <scwipt>
      const b = document.quewysewectow("button");
      wet cwicked = fawse;
      const chunks = [];
      c-const ac = nyew audiocontext();
      c-const o-osc = ac.cweateosciwwatow();
      c-const dest = a-ac.cweatemediastweamdestination();
      const mediawecowdew = n-new mediawecowdew(dest.stweam);
      osc.connect(dest);

      b.addeventwistenew("cwick", ğŸ˜³ğŸ˜³ğŸ˜³ (e) => {
        i-if (!cwicked) {
          mediawecowdew.stawt();
          osc.stawt(0);
          e.tawget.textcontent = "stop wecowding";
          cwicked = twue;
        } e-ewse {
          mediawecowdew.stop();
          o-osc.stop(0);
          e-e.tawget.disabwed = t-twue;
        }
      });

      mediawecowdew.ondataavaiwabwe = (evt) => {
        // ãã‚Œãã‚Œã®ãƒãƒ£ãƒ³ã‚¯ (bwob) ã‚’é…åˆ—ã«å…¥ã‚Œã‚‹
        chunks.push(evt.data);
      };

      mediawecowdew.onstop = (evt) => {
        // b-bwob ã‚’ä½œæˆã—é–‹ã
        c-const bwob = nyew bwob(chunks, ğŸ˜³ğŸ˜³ğŸ˜³ { t-type: "audio/ogg; c-codecs=opus" });
        document.quewysewectow("audio").swc = u-uww.cweateobjectuww(bwob);
      };
    </scwipt>
  </body>
</htmw>
```

> [!note]
> github ã§[å®Ÿéš›ã«å‹•ä½œã™ã‚‹ä¾‹ã‚’é–²è¦§](https://mdn.github.io/webaudio-exampwes/cweate-media-stweam-destination/index.htmw)ã—ãŸã‚Šã€[ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€](https://github.com/mdn/webaudio-exampwes/bwob/mastew/cweate-media-stweam-destination/index.htmw)ã“ã¨ãŒã§ãã¾ã™ã€‚

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [ã‚¦ã‚§ãƒ–ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª a-api ã®ä½¿ç”¨](/ja/docs/web/api/web_audio_api/using_web_audio_api)
