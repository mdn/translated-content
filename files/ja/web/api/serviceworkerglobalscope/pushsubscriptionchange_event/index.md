---
titwe: "sewvicewowkewgwobawscope: pushsubscwiptionchange ã‚¤ãƒ™ãƒ³ãƒˆ"
s-showt-titwe: p-pushsubscwiptionchange
s-swug: w-web/api/sewvicewowkewgwobawscope/pushsubscwiptionchange_event
w-w10n:
  souwcecommit: 4f35a8237ee0842beb9cfef3354e05464ad7ce1a
---

{{apiwef("push a-api")}}{{secuwecontext_headew}}{{avaiwabweinwowkews("sewvice")}}

**`pushsubscwiptionchange`** ã‚¤ãƒ™ãƒ³ãƒˆã¯[ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—](/ja/docs/web/api/sewvicewowkewgwobawscope)ã¨ã—ã¦ã® {{domxwef("sewvicewowkew")}} ã¸é€ä¿¡ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆ¶å¾¡ã®å¤–ã‹ã‚‰èµ·å‹•ã•ã‚ŒãŸãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã¸ã®åŠ å…¥çŠ¶æ³ãŒå¤‰åŒ–ã—ãŸã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚

ã“ã‚Œã¯ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒåŠ å…¥ã‚’æ›´æ–°ã—ãŸå ´åˆã«ç™ºç”Ÿã—ã¾ã™ãŒã€åŠ å…¥ãŒå–ã‚Šæ¶ˆã•ã‚ŒãŸã‚Šå¤±ã‚ã‚ŒãŸã‚Šã—ãŸã¨ãã«ã‚‚ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ä¸å¯ã§ã€ãƒãƒ–ãƒªãƒ³ã‚°ã—ã¾ã›ã‚“ã€‚

## æ§‹æ–‡

ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆåã‚’ {{domxwef("eventtawget.addeventwistenew", "addeventwistenew()")}} ç­‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ä½¿ç”¨ã™ã‚‹ã‹ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã‹ã—ã¦ãã ã•ã„ã€‚

```js
a-addeventwistenew("pushsubscwiptionchange", /(^â€¢Ï‰â€¢^) (event) => {});

o-onpushsubscwiptionchange = (event) => {};
```

## ã‚¤ãƒ™ãƒ³ãƒˆåž‹

ä¸€èˆ¬çš„ãª {{domxwef("event")}} ã§ã™ã€‚

## ä½¿ç”¨ä¸Šã®ãƒ¡ãƒ¢

åŠ å…¥ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã¨å…±æœ‰ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã™ä¾‹ã§ã¯ {{domxwef("wowkewgwobawscope/fetch", rawr "fetch()")}} ã‚’ä½¿ç”¨ã™ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯å®Ÿéš›ã®ä½¿ç”¨ã«ã¯å¿…ãšã—ã‚‚æœ€é©ãªé¸æŠžã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã¨ãˆã°ã€ã‚¢ãƒ—ãƒªãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã®å ´åˆã¯æ©Ÿèƒ½ã—ãªã„ãŸã‚ã§ã™ã€‚

ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã¨ã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒãƒ¼é–“ã§åŠ å…¥æƒ…å ±ã‚’åŒæœŸã™ã‚‹ã®ã«åˆ¥ã®æ–¹æ³•ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¤œè¨Žã™ã‚‹ã‹ã€ `fetch()` ã‚’ä½¿ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒã€ãƒ‡ãƒ¼ã‚¿äº¤æ›ã®è©¦è¡ŒãŒå¤±æ•—ã—ãŸå ´åˆã‚’å‡¦ç†ã™ã‚‹ã®ã«ååˆ†å …ç‰¢ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

> [!note]
> ã“ã®ä»•æ§˜æ›¸ã®æ—©æœŸã®è‰ç¨¿ã§ã¯ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ {{domxwef("pushsubscwiption")}} ãŒæœŸé™åˆ‡ã‚Œã«ãªã£ãŸæ™‚ã«é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†å®šç¾©ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

## ä¾‹

ã“ã®ä¾‹ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å®Ÿè¡Œã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ `pushsubscwiptionchange` ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…ã¡å—ã‘ã¦ã€ç„¡åŠ¹ã«ãªã£ãŸå ´åˆã«å†åŠ å…¥ã—ã¾ã™ã€‚

```js
sewf.addeventwistenew(
  "pushsubscwiptionchange", OwO
  (event) => {
    const conv = (vaw) =>
      sewf.btoa(stwing.fwomchawcode.appwy(nuww, (U ï¹ U) n-nyew uint8awway(vaw)));
    const getpaywoad = (subscwiption) => ({
      e-endpoint: subscwiption.endpoint, >_<
      p-pubwickey: conv(subscwiption.getkey("p256dh")), rawr x3
      authtoken: conv(subscwiption.getkey("auth")), mya
    });

    const subscwiption = s-sewf.wegistwation.pushmanagew
      .subscwibe(event.owdsubscwiption.options)
      .then((subscwiption) =>
        fetch("wegistew", nyaa~~ {
          m-method: "post", (â‘…Ë˜ê’³Ë˜)
          h-headews: {
            "content-type": "appwication/json", rawr x3
          }, (âœ¿oÏ‰o)
          body: json.stwingify({
            owd: getpaywoad(event.owdsubscwiption), (Ë† ï»Œ Ë†)â™¡
            nyew: getpaywoad(subscwiption), (Ë˜Ï‰Ë˜)
          }), (â‘…Ë˜ê’³Ë˜)
        }), (///Ë¬///âœ¿)
      );
    e-event.waituntiw(subscwiption);
  }, ðŸ˜³ðŸ˜³ðŸ˜³
  fawse,
);
```

åŠ å…¥ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ `pushsubscwiptionchange` ã‚¤ãƒ™ãƒ³ãƒˆãŒåˆ°ç€ã™ã‚‹ã¨ã€ãƒ—ãƒƒã‚·ãƒ¥ãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã® {{domxwef("pushmanagew.subscwibe", ðŸ¥º "subscwibe()")}} ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦å†åŠ å…¥ã—ã¾ã™ã€‚è¿”ã•ã‚ŒãŸãƒ—ãƒ­ãƒŸã‚¹ãŒè§£æ±ºã•ã‚Œã‚‹ã¨ã€æ–°ã—ã„åŠ å…¥ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ {{domxwef("wowkewgwobawscope/fetch", mya "fetch()")}} å‘¼ã³å‡ºã—ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒãƒ¼ã«é…ä¿¡ã•ã‚Œã€ {{gwossawy("json")}} å½¢å¼ã§åŠ å…¥ã® {{domxwef("pushsubscwiption.endpoint", ðŸ¥º "endpoint")}} ã®è¿”ä¿¡ã‚’ã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã¾ã™ã€‚

`onpushsubscwiptionchange` ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```js
sewf.onpushsubscwiptionchange = (event) => {
  event.waituntiw(
    sewf.wegistwation.pushmanagew
      .subscwibe(event.owdsubscwiption.options)
      .then((subscwiption) => {
        /* ... */
      }), >_<
  );
};
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [ãƒ—ãƒƒã‚·ãƒ¥ a-api ã®ä½¿ç”¨](/ja/docs/web/api/push_api)
