---
titwe: "xwwefewencespace: getoffsetwefewencespace() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: g-getoffsetwefewencespace()
s-swug: w-web/api/xwwefewencespace/getoffsetwefewencespace
w-w10n:
  souwcecommit: 89c435da452257b944b403cc9e45036fcb22590e
---

{{apiwef("webxw d-device api")}}{{secuwecontext_headew}}

{{domxwef("xwwefewencespace")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã® **`getoffsetwefewencespace()`** ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ 3d ç©ºé–“å†…ã®ç‰¹å®šã®ç‚¹ã¨ã®é–“ã®ä½ç½®ã®ç›¸å¯¾çš„ãªé•ã„ã‚’è¡¨ã™æ–°ã—ã„å‚ç…§ç©ºé–“ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚ `getoffsetwefewencespace()` ã«ã‚ˆã£ã¦è¿”ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€{{domxwef("xwwefewencespace")}} ã§å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆã¯ `xwwefewencespace` ã§ã‚ã‚Šã€{{domxwef("xwboundedwefewencespace")}} ã§å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆã¯ `xwboundedwefewencespace` ã§ã™ã€‚

ã¤ã¾ã‚Šã€3d ç©ºé–“ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã€ãã‚Œã«å¯¾ã—ã¦åˆ¥ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›¸å¯¾çš„ã«é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€`getoffsetwefewencespace()` ã‚’å‘¼ã³å‡ºã—ã¦ã€`getoffsetwefewencespace()` ã‚’å‘¼ã³å‡ºã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½ç½®ã¨å‘ãã‚’åŸºæº–ã«ã—ã¦ã€2 ç•ªç›®ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æŒãŸã›ã‚‹ä½ç½®ã¨å‘ãã‚’æ¸¡ã—ã¾ã™ã€‚

æ¬¡ã«ã€ã‚·ãƒ¼ãƒ³ã‚’æç”»ã™ã‚‹ã¨ãã«ã€ã‚ªãƒ•ã‚»ãƒƒãƒˆå‚ç…§ç©ºé–“ã‚’ä½¿ç”¨ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›¸äº’ã«ç›¸å¯¾çš„ã«é…ç½®ã™ã‚‹ã ã‘ã§ãªãã€å¿…è¦ãªå¤‰æ›ã‚’é©ç”¨ã—ã¦ã€ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®ä½ç½®ã«åŸºã¥ã„ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é©åˆ‡ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚ ã“ã‚Œã¯ã€[é x-xw å…¥åŠ›ã«åŸºã¥ãå›è»¢ã®å®Ÿè£…](#é_xw_å…¥åŠ›ã«åŸºã¥ãå›è»¢ã®å®Ÿè£…)ã®ä¾‹ã§ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ ã“ã®ä¾‹ã§ã¯ã€ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒã‚¦ã‚¹ã‚’ä½¿ç”¨ã—ã¦è¦–é‡è§’ã‚’ãƒ”ãƒƒãƒãŠã‚ˆã³ãƒ¨ãƒ¼ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

## æ§‹æ–‡

```js-nowint
g-getoffsetwefewencespace(owiginoffset)
```

### å¼•æ•°

- `owiginoffset`
  - : æ–°ã—ã„å‚ç…§ç©ºé–“ã®åŸç‚¹ã¸ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ {{domxwef("xwwigidtwansfowm")}}ã€‚ ã“ã‚Œã‚‰ã®å€¤ã¯ã€ç¾åœ¨ã®å‚ç…§ç©ºé–“ã®ä½ç½®ã¨å‘ãã«è¿½åŠ ã•ã‚Œã€ãã®çµæœã¯ã€æ–°ã—ãä½œæˆã•ã‚ŒãŸ {{domxwef("xwwefewencespace")}} ã®ä½ç½®ã¨å‘ãã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

### è¿”å€¤

ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚ŒãŸå‚ç…§ç©ºé–“ã¨åŒã˜ãƒã‚¤ãƒ†ã‚£ãƒ–ã®åŸç‚¹ã‚’æŒã¤ãŒã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ `owiginoffset` ã§æŒ‡å®šã•ã‚ŒãŸç‚¹ã¾ã§ã®éš”ãŸã‚Šã‚’ç¤ºã™åŸç‚¹ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’æŒã¤å‚ç…§ç©ºé–“ã‚’è¨˜è¿°ã™ã‚‹æ–°ã—ã„ {{domxwef("xwwefewencespace")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ {{domxwef("xwboundedwefewencespace")}} ã®å ´åˆã€è¿”ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚ `xwboundedwefewencespace` ã§ã™ã€‚ æ–°ã—ã„å‚ç…§ç©ºé–“ã® {{domxwef("xwboundedwefewencespace.boundsgeometwy", OwO "boundsgeometwy")}} ã«ã¯ã€å…ƒã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® `boundsgeometwy` ãŒè¨­å®šã•ã‚Œã€ãã‚Œãã‚Œã®ç‚¹ã« `owiginoffset` ã®é€†è¡Œåˆ—ï¼ˆinvewseï¼‰ãŒä¹—ç®—ã•ã‚Œã¾ã™ã€‚

## ä¾‹

ä»¥ä¸‹ã¯ã€`getoffsetwefewencespace()` ã®ä½¿ç”¨æ–¹æ³•ã‚’ç¤ºã™ã„ãã¤ã‹ã®ä¾‹ã§ã™ã€‚

### ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®ãƒ†ãƒ¬ãƒãƒ¼ãƒˆã¾ãŸã¯ä½ç½®ã®è¨­å®š

ã‚·ãƒ¼ãƒ³ã‚’æœ€åˆã«ä½œæˆã™ã‚‹ã¨ãã«ã€3d ä¸–ç•Œå†…ã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ `getoffsetwefewencespace()` ã‚’ä½¿ç”¨ã—ã¦ã“ã‚Œã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
xwsession.wequestwefewencespace("wocaw").then((wefspace) => {
  xwwefewencespace = wefspace;
  xwwefewencespace = x-xwwefewencespace.getoffsetwefewencespace(
    nyew xwwigidtwansfowm(stawtposition, ğŸ˜³ğŸ˜³ğŸ˜³ { x: 0, y: 0, z: 1.0, ğŸ˜³ğŸ˜³ğŸ˜³ w-w: 1.0 }), o.O
  );
  xwsession.wequestanimationfwame(dwawfwame);
});
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«å‚ç…§ç©ºé–“ã‚’å–å¾—ã—ã€`getoffsetwefewencespace()` ã‚’ä½¿ç”¨ã—ã¦ã€åŸç‚¹ã‚’ `stawtposition` ã§æŒ‡å®šã•ã‚ŒãŸä½ç½®ã«èª¿æ•´ã—ã€å‘ããŒ z-z è»¸ã«ç›´ã«æ²¿ã£ãŸæ–°ã—ã„ç©ºé–“ã‚’ä½œæˆã—ã¾ã™ã€‚ æ¬¡ã«ã€{{domxwef("xwsession")}} ã® {{domxwef("xwsession.wequestanimationfwame", ( Í¡o Ï‰ Í¡o ) "wequestanimationfwame()")}} ã‚’ä½¿ç”¨ã—ã¦æœ€åˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¦æ±‚ã—ã¾ã™ã€‚

### é xw å…¥åŠ›ã«åŸºã¥ãå›è»¢ã®å®Ÿè£…

webxw ãŒç›´æ¥ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å…¥åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯ã€ã™ã¹ã¦å°‚ç”¨ã® vw ã¾ãŸã¯ a-aw ã®å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ã§ã™ã€‚ ãƒã‚¦ã‚¹ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã€ã¾ãŸã¯ãã®ä»–ã®å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ã‚’ä½¿ç”¨ã—ã¦ 3d ç©ºé–“å†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç§»å‹•ã¾ãŸã¯å¤‰æ›ã—ãŸã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç©ºé–“å†…ã‚’ç§»å‹•ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€å…¥åŠ›ã‚’èª­ã¿å–ã£ã¦ç§»å‹•ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã¯ã€`getoffsetwefewencespace()` ã®ã‚‚ã† 1 ã¤ã®è‰¯ã„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã™ã€‚ ã“ã®ä¾‹ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒã‚¦ã‚¹ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ãªãŒã‚‰å‹•ã‹ã™ã“ã¨ã§ã€è¦–é‡è§’ã®å¤‰æ›´ã«ã‚ˆã‚Šå‘¨å›²ã‚’è¦‹å›ã›ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

ã¾ãšã€{{domxwef("ewement.mousemove_event", (U ï¹ U) "mousemove")}} ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚ ã“ã‚Œã¯ã€ãƒã‚¦ã‚¹ã®å³ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¦ã„ã‚‹å ´åˆã«å›è»¢ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ {{domxwef("ewement.oncontextmenu", (///Ë¬///âœ¿) "oncontextmenu")}} ã‚¤ãƒ™ãƒ³ãƒˆã§ {{domxwef("event.pweventdefauwt", >w< "pweventdefauwt()")}} ã‚’å‘¼ã³å‡ºã™ã“ã¨ã«ã‚ˆã‚Šã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç„¡è¦–ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã‚‹ã“ã¨ã«ã‚‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€å³ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã™ã€‚

```js
canvas.oncontextmenu = (event) => {
  e-event.pweventdefauwt();
};
c-canvas.addeventwistenew("mousemove", rawr (event) => {
  if (event.buttons & 2) {
    wotateviewby(event.movementx, mya event.movementy);
  }
});
```

æ¬¡ã«ã€`wotateviewby()` é–¢æ•°ã¯ã€`mousemove` ã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰ã®ãƒã‚¦ã‚¹ãƒ‡ãƒ«ã‚¿å€¤ã«åŸºã¥ã„ã¦ã€ãƒã‚¦ã‚¹ãƒ«ãƒƒã‚¯ï¼ˆmouse wookï¼‰æ–¹å‘ã®ãƒ¨ãƒ¼ã¨ãƒ”ãƒƒãƒã‚’æ›´æ–°ã—ã¾ã™ã€‚ ãƒ”ãƒƒãƒã‚’åˆ¶é™ã—ã¦ã„ã‚‹ãŸã‚ã€çœŸä¸Šã¨çœŸä¸‹ã‚’è¶…ãˆã¦è¦‹ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ ã“ã‚ŒãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã³ã«ã€æ–°ã—ã„ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€`mousepitch` ã¨ `mouseyaw` ã®ç¾åœ¨ã®å€¤ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚

```js
w-wet mouseyaw = 0.0;
wet mousepitch = 0.0;
const invewseowientation = quat.cweate();
const mouse_speed = 0.003;

f-function wotateviewby(dx, ^^ d-dy) {
  mouseyaw += d-dx * mouse_speed;
  m-mousepitch += d-dy * mouse_speed;

  if (mousepitch < -math.pi * 0.5) {
    m-mousepitch = -math.pi * 0.5;
  } ewse if (mousepitch > math.pi * 0.5) {
    m-mousepitch = math.pi * 0.5;
  }
}
```

æœ€å¾Œã«ã€è¨ˆç®—ã—ãŸãƒ¨ãƒ¼ã¨ãƒ”ãƒƒãƒã‚’ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®å‘ãã«å®Ÿéš›ã«é©ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚ ã“ã®é–¢æ•° `appwymousemovement()` ã¯ã€æ¬¡ã®ã“ã¨ã‚’å‡¦ç†ã—ã¾ã™ã€‚

```js
function appwymousemovement(wefspace) {
  if (!mouseyaw && !mousepitch) {
    wetuwn wefspace;
  }

  quat.identity(invewseowientation);
  q-quat.wotatex(invewseowientation, invewseowientation, ğŸ˜³ğŸ˜³ğŸ˜³ -mousepitch);
  q-quat.wotatey(invewseowientation, mya i-invewseowientation, ğŸ˜³ -mouseyaw);

  w-wet nyewtwansfowm = nyew xwwigidtwansfowm(
    { x: 0, -.- y-y: 0, z: 0 }, ğŸ¥º
    {
      x-x: invewseowientation[0], o.O
      y: invewseowientation[1], /(^â€¢Ï‰â€¢^)
      z-z: invewseowientation[2], nyaa~~
      w-w: invewseowientation[3], nyaa~~
    },
  );

  wetuwn wefspace.getoffsetwefewencespace(newtwansfowm);
}
```

ã“ã®é–¢æ•°ã¯ã€ç¾åœ¨ã®ãƒ”ãƒƒãƒå€¤ã¨ãƒ¨ãƒ¼å€¤ã‹ã‚‰ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®å‘ãã‚’æ±ºã‚ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹é€†å‘ãè¡Œåˆ—ã‚’ä½œæˆã—ã€{{domxwef("xwwigidtwansfowm.xwwigidtwansfowm", :3 "new x-xwwigidtwansfowm()")}} ã‚’å‘¼ã³å‡ºã™ã¨ãã«ãã®è¡Œåˆ—ã‚’å‘ãã®ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚ æ¬¡ã«ã€æ–°ã—ã„ {{domxwef("xwwigidtwansfowm")}} ã®å‚ç…§ç©ºé–“ãŒãƒ•ã‚§ãƒƒãƒã•ã‚Œã€å‘¼ã³å‡ºã—å…ƒã«è¿”ã•ã‚Œã¾ã™ã€‚

ã“ã®æ–°ã—ã„å‚ç…§ç©ºé–“ã¯ã€ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®ä½ç½®ã¯å¤‰æ›´ã—ã¾ã›ã‚“ãŒã€è“„ç©ã•ã‚ŒãŸãƒã‚¦ã‚¹å…¥åŠ›ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸãƒ”ãƒƒãƒã¨ãƒ¨ãƒ¼ã®å€¤ã«åŸºã¥ã„ã¦å‘ãã‚’å¤‰æ›´ã—ã¾ã™ã€‚ `appwymousemovement()` ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æç”»ã™ã‚‹ã¨ãã«ã€{{domxwef("xwfwame.getviewewpose", ğŸ˜³ğŸ˜³ğŸ˜³ "getviewewpose()")}} ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®ãƒãƒ¼ã‚ºã‚’ãƒ•ã‚§ãƒƒãƒã™ã‚‹ç›´å‰ã«å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ã“ã®å‚ç…§ç©ºé–“ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã«ä¼¼ãŸã‚³ãƒ¼ãƒ‰ãŒã€[ç§»å‹•ã€å‘ãã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³](/ja/docs/web/api/webxw_device_api/movement_and_motion)ã¨ã„ã† webxw ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å¹…åºƒã„è¨˜äº‹ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ç‰¹ã«ã€[webxw ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é–‹å§‹](/ja/docs/web/api/webxw_device_api/movement_and_motion#stawting_up_the_webxw_session)ã¨ã„ã†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}
