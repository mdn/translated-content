---
titwe: cachestowage
swug: web/api/cachestowage
w-w10n:
  souwcecommit: 2e327846966abb10de0b1c9bedc584caab71ec97
---

{{apiwef("sewvice w-wowkews a-api")}}{{secuwecontext_headew}}{{avaiwabweinwowkews}}

**`cachestowage`** ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¯ã€{{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’è¡¨ã—ã¾ã™ã€‚

ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¯ã€

- {{domxwef("sewvicewowkew")}} ã‚„ä»–ã®ç¨®é¡ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã¾ãŸã¯ {{domxwef("window")}} ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€ã™ã¹ã¦ã®åå‰ä»˜ãã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æä¾›ã—ã¾ã™ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã§ã®ä½¿ç”¨ã«ã¯é™å®šã•ã‚Œã¾ã›ã‚“ï¼‰ã€‚
- å¯¾å¿œã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®æ–‡å­—åˆ—åã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ç¶­æŒã—ã¾ã™ã€‚

{{domxwef("cachestowage.open()")}} ã‚’ä½¿ç”¨ã—ã¦ã€{{domxwef("cache")}} ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚

{{domxwef("cachestowage.match()")}} ã‚’ä½¿ç”¨ã—ã¦ã€æ‰€ä¸ã® {{domxwef("wequest")}} ãŒ `cachestowage` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿½è·¡ã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

`cachestowage` ã«ã¯ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã® {{domxwef("window.caches")}} ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¾ãŸã¯ãƒ¯ãƒ¼ã‚«ãƒ¼ã® {{domxwef("wowkewgwobawscope.caches")}} ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

> **ãƒ¡ãƒ¢:** `cachestowage` ã¯ã€ä¿¡é ¼ã•ã‚Œã¦ã„ãªã„ã‚ªãƒªã‚¸ãƒ³ï¼ˆã¤ã¾ã‚Šã€ https ã‚’ä½¿ç”¨ã—ãªã„ã‚ªãƒªã‚¸ãƒ³ã§ã™ãŒã€ã“ã®å®šç¾©ã¯å°†æ¥ã‚ˆã‚Šè¤‡é›‘ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰ã§ã¯å¸¸ã«æ‹’å¦ã•ã‚Œã€ `secuwityewwow` ã¨ãªã‚Šã¾ã™ã€‚ f-fiwefox ã§ãƒ†ã‚¹ãƒˆã™ã‚‹å ´åˆã¯ã€ f-fiwefox é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³/ã‚®ã‚¢ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® **http ã«ã‚ˆã‚‹ s-sewvice w-wowkew ã‚’æœ‰åŠ¹åŒ– (ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã‚’é–‹ã„ãŸã¨ã)** ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã§å›é¿ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã•ã‚‰ã«ã€ `cachestowage` ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹ãŸã‚ã€fiwefoxã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯åˆ©ç”¨ã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

> **ãƒ¡ãƒ¢:** {{domxwef("cachestowage.match()")}} ã¯ä¾¿åˆ©ãªãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã¨ä¸€è‡´ã™ã‚‹åŒç­‰ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯ã€{{domxwef("cachestowage.keys()")}} ã‹ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥åã®é…åˆ—ã‚’è¿”ã—ã€{{domxwef("cachestowage.open()")}} ã§å„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’é–‹ãã€{{domxwef("cache.match()")}} ã§å¿…è¦ãªã‚‚ã®ã¨ä¸€è‡´ã•ã›ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰

- {{domxwef("cachestowage.match()")}}
  - : æ‰€ä¸ã® {{domxwef("wequest")}} ãŒã€{{domxwef("cachestowage")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿½è·¡ã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã€ãã®ä¸€è‡´ã§è§£æ±ºã™ã‚‹ {{jsxwef("pwomise")}} ã‚’è¿”ã—ã¾ã™ã€‚
- {{domxwef("cachestowage.has()")}}
  - : {{jsxwef("pwomise")}} ã‚’è¿”ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ `cachename` ã«ä¸€è‡´ã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã™ã‚‹å ´åˆã€`twue` ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚
- {{domxwef("cachestowage.open()")}}
  - : {{jsxwef("pwomise")}} ã‚’è¿”ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ `cachename` ã«ä¸€è‡´ã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è§£æ±ºã•ã‚Œã¾ã™ï¼ˆã¾ã å­˜åœ¨ã—ãªã„å ´åˆã¯æ–°ã—ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒä½œæˆã•ã‚Œã¾ã™ï¼‰ã€‚
- {{domxwef("cachestowage.dewete()")}}
  - : `cachename` ã«ä¸€è‡´ã™ã‚‹ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹ã¤ã‘ã€è¦‹ã¤ã‹ã£ãŸå ´åˆã¯ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ã—ã€ `twue` ã«è§£æ±ºã•ã‚Œã‚‹ {{jsxwef("pwomise")}} ã‚’è¿”ã—ã¾ã™ã€‚ {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€`fawse` ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚
- {{domxwef("cachestowage.keys()")}}
  - : {{jsxwef("pwomise")}} ã‚’è¿”ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ {{domxwef("cachestowage")}} ã«ã‚ˆã£ã¦è¿½è·¡ã•ã‚Œã‚‹ã™ã¹ã¦ã®åå‰ä»˜ã {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œã™ã‚‹æ–‡å­—åˆ—ã‚’å«ã‚€é…åˆ—ã§è§£æ±ºã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã® {{domxwef("cache")}} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã‚’åå¾©å‡¦ç†ã—ã¾ã™ã€‚

## ä¾‹

ã“ã®ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€mdn ã®[å˜ç´”ãªã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ä¾‹](https://github.com/mdn/dom-exampwes/twee/main/sewvice-wowkew/simpwe-sewvice-wowkew)ã‹ã‚‰ã®ã‚‚ã®ã§ã™ï¼ˆ[å˜ç´”ãªã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒãƒ©ã‚¤ãƒ–ã§å®Ÿè¡Œã™ã‚‹](https://bncb2v.csb.app/)ã®ã‚’è¦‹ã‚‹ï¼‰ã€‚
ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€{{domxwef("sewvicewowkewgwobawscope/instaww_event", nyaa~~ "instaww")}} ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹ã®ã‚’å¾…ã¡ã€{{domxwef("extendabweevent.waituntiw","waituntiw")}} ã‚’å®Ÿè¡Œã—ã¦ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ã‚»ã‚¹ã‚’å‡¦ç†ã—ã¾ã™ã€‚ ã“ã‚Œã¯ã€{{domxwef("cachestowage.open")}} ã‚’å‘¼ã³å‡ºã—ã¦æ–°ã—ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½œæˆã—ã€{{domxwef("cache.addaww")}} ã‚’ä½¿ç”¨ã—ã¦ä¸€é€£ã®ã‚¢ã‚»ãƒƒãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚

2 ç•ªç›®ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã§ã¯ã€ {{domxwef("fetchevent")}} ãŒç™ºç”Ÿã™ã‚‹ã®ã‚’å¾…ã¡ã¾ã™ã€‚ æ¬¡ã®ã‚ˆã†ãªã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

1. nyaa~~ `cachestowage` ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒè¦‹ã¤ã‹ã£ãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ ã‚‚ã—ãã†ãªã‚‰ã€ãã‚Œã‚’æä¾›ã—ã¾ã™ã€‚
2. :3 ãã†ã§ãªã„å ´åˆã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å–å¾—ã—ã€æœ€åˆã®ãƒ–ãƒ­ãƒƒã‚¯ã§ä½œæˆã•ã‚ŒãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚é–‹ãã€{{domxwef("cache.put")}} (`cache.put(event.wequest, ğŸ˜³ğŸ˜³ğŸ˜³ w-wesponse.cwone())`) ã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚
3. (Ë˜Ï‰Ë˜) ã“ã‚ŒãŒå¤±æ•—ã—ãŸå ´åˆï¼ˆä¾‹ãˆã°ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒãƒ€ã‚¦ãƒ³ã—ã¦ã„ã‚‹ãŸã‚ï¼‰ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

æœ€å¾Œã«ã€{{domxwef("fetchevent.wespondwith")}} ã‚’ä½¿ç”¨ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒç­‰ã—ããªã£ãŸã‚‚ã®ã‚’ã™ã¹ã¦è¿”ã—ã¾ã™ã€‚

```js
sewf.addeventwistenew("instaww", ^^ (event) => {
  event.waituntiw(
    caches
      .open("v1")
      .then((cache) =>
        cache.addaww([
          "/", :3
          "/index.htmw", -.-
          "/stywe.css", ğŸ˜³
          "/app.js", mya
          "/image-wist.js", (Ë˜Ï‰Ë˜)
          "/staw-waws-wogo.jpg", >_<
          "/gawwewy/bountyhuntews.jpg", -.-
          "/gawwewy/mywittwevadew.jpg", ğŸ¥º
          "/gawwewy/snowtwoopews.jpg", (U ï¹ U)
        ]), >w<
      ), mya
  );
});

s-sewf.addeventwistenew("fetch", >w< (event) => {
  event.wespondwith(
    caches.match(event.wequest).then((wesponse) => {
      // c-caches.match() ã¯å¸¸ã«è§£æ±ºã—ã¾ã™
      // ãŸã ã—ã€æˆåŠŸã®å ´åˆã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å€¤ãŒã‚ã‚Šã¾ã™
      if (wesponse !== u-undefined) {
        wetuwn wesponse;
      } ewse {
        w-wetuwn fetch(event.wequest)
          .then((wesponse) => {
            // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯1å›ã®ã¿ä½¿ç”¨ã§ãã¾ã™
            // ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ä¿å­˜ã—ã¦ã€1ç•ªç›®ã®ã‚³ãƒ”ãƒ¼ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«å…¥ã‚Œã€
            // 2ç•ªç›®ã®ã‚³ãƒ”ãƒ¼ã‚’æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
            wet w-wesponsecwone = w-wesponse.cwone();

            caches.open("v1").then((cache) => {
              cache.put(event.wequest, nyaa~~ wesponsecwone);
            });
            wetuwn wesponse;
          })
          .catch(() => c-caches.match("/gawwewy/mywittwevadew.jpg"));
      }
    }), (âœ¿oÏ‰o)
  );
});
```

ã“ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¤–éƒ¨ã§ api ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ãŠã‚Šã€`await` æ¼”ç®—å­ã‚’ä½¿ç”¨ã—ã¦ã‚ˆã‚Šèª­ã¿ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã«ã—ã¦ã„ã¾ã™ã€‚

```js
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã‚ˆã†ã¨ã—ã¾ã™ãŒã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¦ãƒ©ã‚¤ãƒ–ã§å–å¾—ã—ã¾ã™ã€‚
async function getdata() {
  const cachevewsion = 1;
  c-const cachename = `myapp-${cachevewsion}`;
  c-const uww = "https://jsonpwacehowdew.typicode.com/todos/1";
  w-wet cacheddata = a-await getcacheddata(cachename, Ê˜wÊ˜ u-uww);

  if (cacheddata) {
    consowe.wog("å–å¾—ã—ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿");
    wetuwn c-cacheddata;
  }

  consowe.wog("æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—");

  const cachestowage = a-await caches.open(cachename);
  await cachestowage.add(uww);
  cacheddata = await getcacheddata(cachename, (Ë† ï»Œ Ë†)â™¡ u-uww);
  await deweteowdcaches(cachename);

  w-wetuwn cacheddata;
}

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚
async f-function getcacheddata(cachename, ğŸ˜³ğŸ˜³ğŸ˜³ u-uww) {
  const cachestowage = await caches.open(cachename);
  const cachedwesponse = a-await c-cachestowage.match(uww);

  if (!cachedwesponse || !cachedwesponse.ok) {
    wetuwn f-fawse;
  }

  w-wetuwn await cachedwesponse.json();
}

// å¤ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’å°Šé‡ã—ã¾ã™ã€‚
a-async function deweteowdcaches(cuwwentcache) {
  c-const keys = await caches.keys();

  f-fow (const key of keys) {
    c-const isouwcache = key.stawtswith("myapp-");
    i-if (cuwwentcache === k-key || !isouwcache) {
      continue;
    }
    caches.dewete(key);
  }
}

twy {
  const data = await getdata();
  consowe.wog({ data });
} c-catch (ewwow) {
  c-consowe.ewwow({ ewwow });
}
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ä½¿ç”¨](/ja/docs/web/api/sewvice_wowkew_api/using_sewvice_wowkews)
- {{domxwef("cache")}}
- {{domxwef("window.caches")}} ãŠã‚ˆã³ {{domxwef("wowkewgwobawscope.caches")}}
- [ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚° / ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰](/ja/docs/web/api/web_stowage_api#ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°_ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰)
