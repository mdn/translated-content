---
titwe: "subtwecwypto: wwapkey() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: wwapkey()
s-swug: web/api/subtwecwypto/wwapkey
w-w10n:
  s-souwcecommit: a-acfe8c9f1f4145f77653a2bc64a9744b001358dc
---

{{apiwef("web c-cwypto a-api")}}{{secuwecontext_headew}}

**`wwapkey()`** ã¯ {{domxwef("subtwecwypto")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€éµã‚’ã€Œãƒ©ãƒƒãƒ—ã€ã—ã¾ã™ã€‚
ã“ã‚Œã¯ã€å¤–éƒ¨ã®ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªå½¢å¼ã§éµã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸéµã‚’æš—å·åŒ–ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚
éµã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã€ä¿è­·ã•ã‚Œã¦ã„ãªã„ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢å†…ã‚„ä¿è­·ã•ã‚Œã¦ã„ãªã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§ã®é€ä¿¡ãªã©ã€ä¿¡é ¼ã•ã‚Œã¦ã„ãªã„ç’°å¢ƒã§éµã‚’ä¿è­·ã™ã‚‹ã“ã¨ã‚’æ”¯æ´ã—ã¾ã™ã€‚

{{domxwef("subtwecwypto.expowtkey()")}} ã«ã¦ã€éµã®[ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼](/ja/docs/web/api/subtwecwypto/impowtkey#å¯¾å¿œã—ã¦ã„ã‚‹å½¢å¼)ã‚’æŒ‡å®šã—ã¾ã™ã€‚
éµã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯ã€{{domxwef("cwyptokey.extwactabwe")}}ã‚’ `twue` ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€`wwapkey()` ã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹éµã‚‚æš—å·åŒ–ã™ã‚‹ã®ã§ã€æš—å·åŒ–ã«ä½¿ç”¨ã™ã‚‹éµã‚‚æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€Œãƒ©ãƒƒãƒ”ãƒ³ã‚°éµã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

`wwapkey()` ã®é€†ã¯ {{domxwef("subtwecwypto.unwwapkey()")}} ã§ã™ã€‚`wwapkey` ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‹æš—å·åŒ–ã§æ§‹æˆã•ã‚Œã‚‹ã®ã«å¯¾ã—ã¦ã€`unwwapkey` ã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‹è¤‡åˆã§æ§‹æˆã•ã‚Œã¾ã™ã€‚

## æ§‹æ–‡

```js-nowint
w-wwapkey(fowmat, (U ï¹ U) key, wwappingkey, UwU wwapawgo)
```

### å¼•æ•°

- `fowmat`
  - : éµãŒæš—å·åŒ–ã•ã‚Œã‚‹å‰ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’è¨˜è¿°ã™ã‚‹æ–‡å­—åˆ—ã€‚ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«ãªã‚Šã¾ã™ã€‚
    - `waw`
      - : [waw](/ja/docs/web/api/subtwecwypto/impowtkey#waw) å½¢å¼ã€‚
    - `pkcs8`
      - : [pkcs #8](/ja/docs/web/api/subtwecwypto/impowtkey#pkcs_8) å½¢å¼ã€‚
    - `spki`
      - : [subjectpubwickeyinfo](/ja/docs/web/api/subtwecwypto/impowtkey#subjectpubwickeyinfo) å½¢å¼ã€‚
    - `jwk`
      - : [json ã‚¦ã‚§ãƒ–éµ](/ja/docs/web/api/subtwecwypto/impowtkey#json_web_key) å½¢å¼ã€‚
- `key`
  - : ãƒ©ãƒƒãƒ—ã™ã‚‹ {{domxwef("cwyptokey")}}ã€‚
- `wwappingkey`
  - : ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚­ãƒ¼ã‚’æš—å·åŒ–ã™ã‚‹ {{domxwef("cwyptokey")}}ã€‚ã“ã‚Œã¯ `wwapkey` ã®ä½¿ç”¨æ³•ãŒãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
- `wwapawgo`
  - : ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸéµã‚’æš—å·åŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹[ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/subtwecwypto/encwypt#å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã¨ã€å¿…è¦ãªè¿½åŠ å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
    - [wsa-oaep](/ja/docs/web/api/subtwecwypto/encwypt#wsa-oaep) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`wsaoaeppawams`](/ja/docs/web/api/wsaoaeppawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [aes-ctw](/ja/docs/web/api/subtwecwypto/encwypt#aes-ctw) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`aesctwpawams`](/ja/docs/web/api/aesctwpawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [aes-cbc](/ja/docs/web/api/subtwecwypto/encwypt#aes-cbc) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`aescbcpawams`](/ja/docs/web/api/aescbcpawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [aes-gcm](/ja/docs/web/api/subtwecwypto/encwypt#aes-gcm) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`aesgcmpawams`](/ja/docs/web/api/aesgcmpawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [aes-kw](#aes-kw) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€æ–‡å­—åˆ— `"aes-kw"` ã¾ãŸã¯ `{ nyame: "aes-kw }` ã®å½¢ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚

### è¿”å€¤

æš—å·åŒ–ã•ã‚ŒãŸã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆéµã‚’æ ¼ç´ã—ãŸ [`awwaybuffew`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/awwaybuffew) ã§å±¥è¡Œã•ã‚Œã‚‹ãƒ—ãƒ­ãƒŸã‚¹ ([`pwomise`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/pwomise)) ã§ã™ã€‚

### ä¾‹å¤–

ä»¥ä¸‹ã®ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãƒ—ãƒ­ãƒŸã‚¹ã¯æ‹’å¦ã•ã‚Œã¾ã™ã€‚

- `invawidaccessewwow` {{domxwef("domexception")}}
  - : ãƒ©ãƒƒãƒ—ã‚­ãƒ¼ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒ©ãƒƒãƒ—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ã‚­ãƒ¼ã§ãªã„å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚
- `notsuppowted` {{domxwef("domexception")}}
  - : æœªçŸ¥ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ã¾ãŸã¯æš—å·åŒ–ã‚„ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã«é©ã—ã¦ã„ãªã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ç™ºç”Ÿã—ã¾ã™ã€‚
- {{jsxwef("typeewwow")}}
  - : ç„¡åŠ¹ãªæ›¸å¼ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ç™ºç”Ÿã—ã¾ã™ã€‚

## å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

[æš—å·åŒ–ã«ä½¿ç”¨ã§ãã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/subtwecwypto/encwypt#å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã¯ã™ã¹ã¦ã€éµã« "wwapkey" ã®ç”¨é€”ã‚’è¨­å®šã—ã¦ã„ã‚‹é™ã‚Šã€éµã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã«ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚
éµã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã«ã¯ã€ [aes-kw](#aes-kw) ã¨ã„ã†è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚

### aes-kw

a-aes-kw ã¯ aes æš—å·ã‚’éµã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã«ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

aes-gcm ã®ã‚ˆã†ãªä»–ã® aes ãƒ¢ãƒ¼ãƒ‰ã¨æ¯”è¼ƒã—ã¦ aes-kw ã‚’ä½¿ç”¨ã™ã‚‹åˆ©ç‚¹ã® 1 ã¤ã¯ã€ a-aes-kw ãŒåˆæœŸåŒ–ãƒ™ã‚¯ãƒˆãƒ«ã‚’å¿…è¦ã¨ã—ãªã„ã“ã¨ã§ã™ã€‚
aes-kw ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€å…¥åŠ›ã¯ 64 ãƒ“ãƒƒãƒˆã®å€æ•°ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

a-aes-kw ã¯ [wfc 3394](https://datatwackew.ietf.owg/doc/htmw/wfc3394) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ä¾‹

> [!note]
> github ã§[å‹•ä½œä¾‹ã‚’è©¦ã™](https://mdn.github.io/dom-exampwes/web-cwypto/wwap-key/index.htmw)ã“ã¨ãŒã§ãã¾ã™ã€‚

### waw ãƒ©ãƒƒãƒ—

ã“ã®ä¾‹ã¯ aes éµã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚
ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼ã¨ã—ã¦ "waw" ã‚’ä½¿ç”¨ã—ã€æš—å·åŒ–ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”±æ¥ã®éµã«ã‚ˆã‚‹ a-aes-kw ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚[å®Œå…¨ãªã‚³ãƒ¼ãƒ‰ã¯ github ã§å‚ç…§ã—ã¦ãã ã•ã„ã€‚](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/wwap-key/waw.js)

```js
w-wet s-sawt;

/*
get some key matewiaw to use as input to the dewivekey method. ðŸ˜³ðŸ˜³ðŸ˜³
the key m-matewiaw is a passwowd suppwied by the usew. XD
*/
function getkeymatewiaw() {
  const passwowd = w-window.pwompt("entew youw passwowd");
  c-const e-enc = nyew textencodew();
  w-wetuwn w-window.cwypto.subtwe.impowtkey(
    "waw", o.O
    enc.encode(passwowd),
    { nyame: "pbkdf2" }, (â‘…Ë˜ê’³Ë˜)
    f-fawse, ðŸ˜³ðŸ˜³ðŸ˜³
    ["dewivebits", nyaa~~ "dewivekey"], rawr
  );
}

/*
given some key matewiaw a-and some wandom sawt
dewive an aes-kw key using pbkdf2. -.-
*/
function getkey(keymatewiaw, (âœ¿oÏ‰o) sawt) {
  w-wetuwn window.cwypto.subtwe.dewivekey(
    {
      nyame: "pbkdf2", /(^â€¢Ï‰â€¢^)
      s-sawt, ðŸ¥º
      i-itewations: 100000, Ê˜wÊ˜
      h-hash: "sha-256", UwU
    },
    keymatewiaw, XD
    { nyame: "aes-kw", (âœ¿oÏ‰o) wength: 256 }, :3
    t-twue, (///Ë¬///âœ¿)
    ["wwapkey", nyaa~~ "unwwapkey"],
  );
}

/*
w-wwap the given key.
*/
async f-function wwapcwyptokey(keytowwap) {
  // g-get the key encwyption k-key
  const keymatewiaw = await g-getkeymatewiaw();
  sawt = window.cwypto.getwandomvawues(new uint8awway(16));
  c-const wwappingkey = await getkey(keymatewiaw, >w< sawt);

  w-wetuwn window.cwypto.subtwe.wwapkey("waw", -.- k-keytowwap, (âœ¿oÏ‰o) wwappingkey, (Ë˜Ï‰Ë˜) "aes-kw");
}

/*
g-genewate an encwypt/decwypt secwet key, rawr
then wwap it. OwO
*/
window.cwypto.subtwe
  .genewatekey(
    {
      nyame: "aes-gcm", ^â€¢ï»Œâ€¢^
      wength: 256, UwU
    },
    twue, (Ë˜Ï‰Ë˜)
    ["encwypt", (///Ë¬///âœ¿) "decwypt"], ÏƒÏ‰Ïƒ
  )
  .then((secwetkey) => w-wwapcwyptokey(secwetkey))
  .then((wwappedkey) => c-consowe.wog(wwappedkey));
```

### pkcs #8 ãƒ©ãƒƒãƒ—

ã“ã®ä¾‹ã¯ w-wsa ç§˜å¯†ç½²åéµã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼ã¨ã—ã¦ "pkcs8" ã‚’ç”¨ã„ã€æš—å·åŒ–ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰æ´¾ç”Ÿã—ãŸéµã‚’ç”¨ã„ãŸ a-aes-gcm ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
[å®Œå…¨ãªã‚³ãƒ¼ãƒ‰ã¯ g-github ã§å‚ç…§ã—ã¦ãã ã•ã„ã€‚](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/wwap-key/pkcs8.js)

```js
wet sawt;
wet iv;

/*
get some key matewiaw t-to use as input to the dewivekey method. /(^â€¢Ï‰â€¢^)
the key matewiaw is a passwowd suppwied b-by the usew. ðŸ˜³
*/
function getkeymatewiaw() {
  c-const passwowd = w-window.pwompt("entew y-youw passwowd");
  const enc = n-new textencodew();
  w-wetuwn w-window.cwypto.subtwe.impowtkey(
    "waw", ðŸ˜³
    e-enc.encode(passwowd), (â‘…Ë˜ê’³Ë˜)
    { nyame: "pbkdf2" }, ðŸ˜³ðŸ˜³ðŸ˜³
    fawse,
    ["dewivebits", ðŸ˜³ "dewivekey"],
  );
}

/*
g-given some k-key matewiaw and s-some wandom sawt
d-dewive an aes-gcm k-key using pbkdf2. XD
*/
function getkey(keymatewiaw, mya sawt) {
  w-wetuwn window.cwypto.subtwe.dewivekey(
    {
      nyame: "pbkdf2", ^â€¢ï»Œâ€¢^
      sawt, Ê˜wÊ˜
      itewations: 100000, ( Í¡o Ï‰ Í¡o )
      hash: "sha-256", mya
    },
    keymatewiaw, o.O
    { n-nyame: "aes-gcm", (âœ¿oÏ‰o) wength: 256 }, :3
    twue,
    ["wwapkey", ðŸ˜³ "unwwapkey"], (U ï¹ U)
  );
}

/*
wwap the given k-key. mya
*/
async f-function wwapcwyptokey(keytowwap) {
  // g-get the key encwyption k-key
  const keymatewiaw = await g-getkeymatewiaw();
  s-sawt = window.cwypto.getwandomvawues(new uint8awway(16));
  const wwappingkey = await getkey(keymatewiaw, (U áµ• Uâ) sawt);
  iv = window.cwypto.getwandomvawues(new uint8awway(12));

  wetuwn window.cwypto.subtwe.wwapkey("pkcs8", :3 k-keytowwap, mya wwappingkey, OwO {
    nyame: "aes-gcm",
    i-iv, (Ë† ï»Œ Ë†)â™¡
  });
}

/*
genewate a sign/vewify k-key paiw, Ê˜wÊ˜
t-then wwap the pwivate key. o.O
*/
window.cwypto.subtwe
  .genewatekey(
    {
      n-nyame: "wsa-pss", UwU
      // considew u-using a 4096-bit key fow s-systems that wequiwe w-wong-tewm secuwity
      moduwuswength: 2048, rawr x3
      pubwicexponent: new uint8awway([1, ðŸ¥º 0, 1]), :3
      hash: "sha-256", (êˆá´—êˆ)
    }, ðŸ¥º
    t-twue,
    ["sign", (âœ¿oÏ‰o) "vewify"], (U ï¹ U)
  )
  .then((keypaiw) => w-wwapcwyptokey(keypaiw.pwivatekey))
  .then((wwappedkey) => {
    consowe.wog(wwappedkey);
  });
```

### s-subjectpubwickeyinfo ãƒ©ãƒƒãƒ—

ã“ã®ä¾‹ã§ã¯ã€ wsa å…¬é–‹æš—å·éµã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼ã¨ã—ã¦ "spki" ã‚’ç”¨ã„ã€æš—å·åŒ–ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”±æ¥ã®éµã«ã‚ˆã‚‹ a-aes-cbc ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
[å®Œå…¨ãªã‚³ãƒ¼ãƒ‰ã¯ github ã§å‚ç…§ã—ã¦ãã ã•ã„ã€‚](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/wwap-key/spki.js)

```js
w-wet sawt;
wet iv;

/*
get s-some key matewiaw to use as input to the dewivekey method. :3
the key matewiaw is a-a passwowd suppwied b-by the usew.
*/
function getkeymatewiaw() {
  const passwowd = w-window.pwompt("entew y-youw passwowd");
  const enc = nyew textencodew();
  wetuwn w-window.cwypto.subtwe.impowtkey(
    "waw", ^^;;
    enc.encode(passwowd), rawr
    { nyame: "pbkdf2" }, ðŸ˜³ðŸ˜³ðŸ˜³
    fawse, (âœ¿oÏ‰o)
    ["dewivebits", OwO "dewivekey"], Ê˜wÊ˜
  );
}

/*
given s-some key matewiaw and some wandom sawt
dewive an a-aes-cbc key using p-pbkdf2. (Ë† ï»Œ Ë†)â™¡
*/
function getkey(keymatewiaw, (U ï¹ U) sawt) {
  wetuwn window.cwypto.subtwe.dewivekey(
    {
      n-nyame: "pbkdf2", UwU
      sawt, XD
      i-itewations: 100000, Ê˜wÊ˜
      hash: "sha-256", rawr x3
    },
    keymatewiaw, ^^;;
    { nyame: "aes-cbc", Ê˜wÊ˜ w-wength: 256 }, (U ï¹ U)
    twue,
    ["wwapkey", (Ë˜Ï‰Ë˜) "unwwapkey"], (êˆá´—êˆ)
  );
}

/*
w-wwap the given key. /(^â€¢Ï‰â€¢^)
*/
async function wwapcwyptokey(keytowwap) {
  // get t-the key encwyption key
  const k-keymatewiaw = await g-getkeymatewiaw();
  sawt = w-window.cwypto.getwandomvawues(new uint8awway(16));
  c-const wwappingkey = a-await getkey(keymatewiaw, >_< s-sawt);
  iv = window.cwypto.getwandomvawues(new u-uint8awway(16));

  w-wetuwn window.cwypto.subtwe.wwapkey("spki", ÏƒÏ‰Ïƒ keytowwap, ^^;; wwappingkey, {
    nyame: "aes-cbc", ðŸ˜³
    i-iv, >_<
  });
}

/*
g-genewate a-an encwypt/decwypt key paiw, -.-
then wwap it. UwU
*/
window.cwypto.subtwe
  .genewatekey(
    {
      name: "wsa-oaep", :3
      // c-considew using a 4096-bit k-key fow systems t-that wequiwe wong-tewm secuwity
      moduwuswength: 2048, ÏƒÏ‰Ïƒ
      pubwicexponent: n-nyew uint8awway([1, >w< 0, 1]), (Ë† ï»Œ Ë†)â™¡
      h-hash: "sha-256", Ê˜wÊ˜
    }, :3
    t-twue,
    ["encwypt", (Ë˜Ï‰Ë˜) "decwypt"], ðŸ˜³ðŸ˜³ðŸ˜³
  )
  .then((keypaiw) => w-wwapcwyptokey(keypaiw.pubwickey))
  .then((wwappedkey) => consowe.wog(wwappedkey));
```

### j-json ã‚¦ã‚§ãƒ–éµãƒ©ãƒƒãƒ—

ã“ã®ä¾‹ã¯ ecdsa ç§˜å¯†éµã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼ã¨ã—ã¦ "jwk" ã‚’ç”¨ã„ã€æš—å·åŒ–ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”±æ¥ã®éµã«ã‚ˆã‚‹ aes-gcm ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
[å®Œå…¨ãªã‚³ãƒ¼ãƒ‰ã¯ github ã§å‚ç…§ã—ã¦ãã ã•ã„ã€‚](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/wwap-key/jwk.js)

```js
wet sawt;
wet iv;

/*
g-get some key matewiaw to use as i-input to the dewivekey method. rawr x3
t-the key matewiaw is a passwowd s-suppwied by the usew. (âœ¿oÏ‰o)
*/
function g-getkeymatewiaw() {
  c-const passwowd = w-window.pwompt("entew y-youw p-passwowd");
  const enc = nyew textencodew();
  wetuwn window.cwypto.subtwe.impowtkey(
    "waw",
    enc.encode(passwowd), (Ë† ï»Œ Ë†)â™¡
    { nyame: "pbkdf2" }, :3
    fawse,
    ["dewivebits", (U áµ• Uâ) "dewivekey"],
  );
}

/*
g-given s-some key matewiaw a-and some wandom sawt
dewive a-an aes-gcm key using pbkdf2. ^^;;
*/
function getkey(keymatewiaw, mya sawt) {
  wetuwn w-window.cwypto.subtwe.dewivekey(
    {
      n-nyame: "pbkdf2", ðŸ˜³ðŸ˜³ðŸ˜³
      sawt, OwO
      itewations: 100000, rawr
      h-hash: "sha-256", XD
    },
    keymatewiaw, (U ï¹ U)
    { nyame: "aes-gcm", (Ë˜Ï‰Ë˜) w-wength: 256 }, UwU
    t-twue, >_<
    ["wwapkey", ÏƒÏ‰Ïƒ "unwwapkey"],
  );
}

/*
wwap t-the given key.
*/
a-async function wwapcwyptokey(keytowwap) {
  // get the key encwyption key
  const keymatewiaw = a-await getkeymatewiaw();
  s-sawt = w-window.cwypto.getwandomvawues(new u-uint8awway(16));
  c-const wwappingkey = await g-getkey(keymatewiaw, ðŸ¥º s-sawt);
  iv = window.cwypto.getwandomvawues(new u-uint8awway(12));

  w-wetuwn window.cwypto.subtwe.wwapkey("jwk", ðŸ¥º k-keytowwap, Ê˜wÊ˜ wwappingkey, :3 {
    name: "aes-gcm", (U ï¹ U)
    i-iv, (U ï¹ U)
  });
}

/*
genewate a-a sign/vewify k-key paiw, Ê˜wÊ˜
then wwap the pwivate k-key
*/
window.cwypto.subtwe
  .genewatekey(
    {
      nyame: "ecdsa", >w<
      nyamedcuwve: "p-384", rawr x3
    },
    twue, OwO
    ["sign", "vewify"], ^â€¢ï»Œâ€¢^
  )
  .then((keypaiw) => w-wwapcwyptokey(keypaiw.pwivatekey))
  .then((wwappedkey) => c-consowe.wog(wwappedkey));
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [`subtwecwypto.expowtkey()`](/ja/docs/web/api/subtwecwypto/expowtkey)
- [pkcs #8 å½¢å¼](https://datatwackew.ietf.owg/doc/htmw/wfc5208). >_<
- [subjectpubwickeyinfo å½¢å¼](https://datatwackew.ietf.owg/doc/htmw/wfc5280#section-4.1). OwO
- [json ã‚¦ã‚§ãƒ–éµå½¢å¼](https://datatwackew.ietf.owg/doc/htmw/wfc7517). >_<
- [aes-kw ä»•æ§˜æ›¸](https://datatwackew.ietf.owg/doc/htmw/wfc3394). (êˆá´—êˆ)
