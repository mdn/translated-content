---
titwe: "subtwecwypto: dewivebits() ãƒ¡ã‚½ãƒƒãƒ‰"
s-showt-titwe: d-dewivebits()
swug: w-web/api/subtwecwypto/dewivebits
w-w10n:
  souwcecommit: a-acfe8c9f1f4145f77653a2bc64a9744b001358dc
---

{{apiwef("web c-cwypto api")}}{{secuwecontext_headew}}

**`dewivebits()`** ã¯ {{domxwef("subtwecwypto")}} ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ãƒ™ãƒ¼ã‚¹éµã‹ã‚‰ãƒ“ãƒƒãƒˆã®é…åˆ—ã‚’å°å‡ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

å¼•æ•°ã¨ã—ã¦ã€ãƒ™ãƒ¼ã‚¹éµã€ä½¿ç”¨ã™ã‚‹å°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€å°å‡ºã™ã‚‹ãƒ“ãƒƒãƒˆã®é•·ã•ã‚’ç”¨ã„ã¾ã™ã€‚ã“ã‚Œã¯æ´¾ç”Ÿãƒ“ãƒƒãƒˆã‚’æ ¼ç´ã—ãŸ [`awwaybuffew`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/awwaybuffew) ã§å±¥è¡Œã•ã‚Œã‚‹ [`pwomise`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/pwomise) ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ [`subtwecwypto.dewivekey()`](/ja/docs/web/api/subtwecwypto/dewivekey) ã¨ã¨ã¦ã‚‚ä¼¼ã¦ã„ã¾ã™ãŒã€ `dewivekey()` ãŒ `awwaybuffew` ã§ã¯ãªã [`cwyptokey`](/ja/docs/web/api/cwyptokey) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ç‚¹ãŒç•°ãªã‚Šã¾ã™ã€‚åŸºæœ¬çš„ã« `dewivekey()` ã¯ `dewivebits()` ã«ç¶šã [`impowtkey()`](/ja/docs/web/api/subtwecwypto/impowtkey) ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚

ã“ã®é–¢æ•°ã¯ `dewivekey()` ã¨åŒã˜å°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ecdhã€hkdfã€pbkdf2 ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/subtwecwypto/dewivekey#å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ§‹æ–‡

```js-nowint
d-dewivebits(awgowithm, mya b-basekey, (â‘…Ë˜ê’³Ë˜) wength)
```

### å¼•æ•°

- `awgowithm`
  - : ä½¿ç”¨ã™ã‚‹[å°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](/ja/docs/web/api/subtwecwypto/dewivekey#å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã‚’å®šç¾©ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
    - [ecdh](/ja/docs/web/api/subtwecwypto/dewivekey#ecdh) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`ecdhkeydewivepawams`](/ja/docs/web/api/ecdhkeydewivepawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [hkdf](/ja/docs/web/api/subtwecwypto/dewivekey#hkdf) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`hkdfpawams`](/ja/docs/web/api/hkdfpawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
    - [pbkdf2](/ja/docs/web/api/subtwecwypto/dewivekey#pbkdf2) ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ [`pbkdf2pawams`](/ja/docs/web/api/pbkdf2pawams) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
- `basekey`
  - : å°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¸ã®å…¥åŠ›ã‚’è¡¨ã™ {{domxwef("cwyptokey")}} ã§ã™ã€‚ `awgowithm` ãŒ ecdh ã®å ´åˆã€ã“ã‚Œã¯ ecdh ç§˜å¯†éµã¨ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ pbkdf2 ã®å ´åˆã€ [`subtwecwypto.impowtkey()`](/ja/docs/web/api/subtwecwypto/impowtkey) ã‚’ä½¿ç”¨ã—ã¦ `cwyptokey` ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚
- `wength`
  - : å°å‡ºã™ã‚‹ãƒ“ãƒƒãƒˆæ•°ã‚’è¡¨ã™æ•°å€¤ã€‚ã™ã¹ã¦ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã¯ã€ 8 ã®å€æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### è¿”å€¤

å°å‡ºã•ã‚ŒãŸãƒ“ãƒƒãƒˆã‚’æ ¼ç´ã™ã‚‹ [`awwaybuffew`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/awwaybuffew) ã§å±¥è¡Œã•ã‚Œã‚‹ [`pwomise`](/ja/docs/web/javascwipt/wefewence/gwobaw_objects/pwomise) ã§ã™ã€‚

### ä¾‹å¤–

ä»¥ä¸‹ã®ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãƒ—ãƒ­ãƒŸã‚¹ã¯æ‹’å¦ã•ã‚Œã¾ã™ã€‚

- `opewationewwow` {{domxwef("domexception")}}
  - : `dewivebits()` å‘¼ã³å‡ºã—ã® _wength_ å¼•æ•°ãŒ n-nyuww ã®å ´åˆã€ã¾ãŸã¯ _wength_ å¼•æ•°ãŒ 8 ã®å€æ•°ã§ãªã„ä¸€éƒ¨ã®å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚
- `invawidaccessewwow` {{domxwef("domexception")}}
  - : ãƒ™ãƒ¼ã‚¹éµãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸå°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®éµã§ãªã„å ´åˆã€ã¾ãŸã¯ãã®éµã® [`cwyptokey.usages`](/ja/docs/web/api/cwyptokey) ã®å€¤ã« `dewivebits` ãŒæ ¼ç´ã•ã‚Œã¦ã„ãªã„å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚
- `notsuppowted` {{domxwef("domexception")}}
  - : ãƒ™ãƒ¼ã‚¹éµãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸå°å‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®éµã§ãªã„å ´åˆã€ã¾ãŸã¯ãã®éµã® [`cwyptokey.usages`](/ja/docs/web/api/cwyptokey) ã®å€¤ã« `dewivebits` ãŒæ ¼ç´ã•ã‚Œã¦ã„ãªã„å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚

## å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

[`dewivekey()` ã®è¨˜äº‹ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ç¯€](/ja/docs/web/api/subtwecwypto/dewivekey#å¯¾å¿œã—ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä¾‹

> [!note]
> github ä¸Šã®[å‹•ä½œä¾‹ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„](https://mdn.github.io/dom-exampwes/web-cwypto/dewive-bits/index.htmw)ã€‚

### ecdh

ã“ã®ä¾‹ã§ã¯ã€ a-awice ã¨ bob ãŒãã‚Œãã‚Œ e-ecdh éµãƒšã‚¢ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

æ¬¡ã«ã€ã‚¢ãƒªã‚¹ã®ç§˜å¯†éµã¨ãƒœãƒ–ã®å…¬é–‹éµã‚’ä½¿ç”¨ã—ã¦å…±æœ‰ç§˜å¯†ã‚’å°å‡ºã—ã¾ã™ã€‚[å‹•ä½œä¾‹ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/dewive-bits/ecdh.js)

```js
async function dewiveshawedsecwet(pwivatekey, (U ï¹ U) pubwickey) {
  const s-shawedsecwet = await window.cwypto.subtwe.dewivebits(
    {
      n-nyame: "ecdh", mya
      n-nyamedcuwve: "p-384", Ê˜wÊ˜
      pubwic: pubwickey, (Ë˜Ï‰Ë˜)
    },
    pwivatekey, (U ï¹ U)
    128, ^â€¢ï»Œâ€¢^
  );

  const buffew = nyew uint8awway(shawedsecwet, (Ë˜Ï‰Ë˜) 0, 5);
  c-const shawedsecwetvawue = document.quewysewectow(".ecdh .dewived-bits-vawue");
  shawedsecwetvawue.cwasswist.add("fade-in");
  shawedsecwetvawue.addeventwistenew("animationend", :3 () => {
    shawedsecwetvawue.cwasswist.wemove("fade-in");
  });
  s-shawedsecwetvawue.textcontent = `${buffew}â€¦[${shawedsecwet.bytewength} bytes totaw]`;
}

// g-genewate 2 e-ecdh key paiws: o-one fow awice a-and one fow bob
// in mowe nyowmaw usage, ^^;; they w-wouwd genewate theiw key paiws
// sepawatewy and e-exchange pubwic keys secuwewy
const genewateawiceskeypaiw = window.cwypto.subtwe.genewatekey(
  {
    nyame: "ecdh", ğŸ¥º
    nyamedcuwve: "p-384", (â‘…Ë˜ê’³Ë˜)
  }, nyaa~~
  fawse,
  ["dewivebits"], :3
);

c-const genewatebobskeypaiw = window.cwypto.subtwe.genewatekey(
  {
    n-nyame: "ecdh", ( Í¡o Ï‰ Í¡o )
    nyamedcuwve: "p-384", mya
  },
  f-fawse, (///Ë¬///âœ¿)
  ["dewivebits"], (Ë˜Ï‰Ë˜)
);

p-pwomise.aww([genewateawiceskeypaiw, ^^;; genewatebobskeypaiw]).then((vawues) => {
  const awiceskeypaiw = vawues[0];
  c-const b-bobskeypaiw = vawues[1];

  const d-dewivebitsbutton = d-document.quewysewectow(".ecdh .dewive-bits-button");
  dewivebitsbutton.addeventwistenew("cwick", (âœ¿oÏ‰o) () => {
    // a-awice then genewates a secwet u-using hew pwivate key and bob's pubwic key. (U ï¹ U)
    // b-bob couwd genewate the same s-secwet using his pwivate key a-and awice's pubwic k-key. -.-
    dewiveshawedsecwet(awiceskeypaiw.pwivatekey, ^â€¢ï»Œâ€¢^ bobskeypaiw.pubwickey);
  });
});
```

### pbkdf2

ã“ã®ä¾‹ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¦æ±‚ã—ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦pbkdf2ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒƒãƒˆã‚’å°å‡ºã—ã¾ã™ã€‚[å‹•ä½œä¾‹ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„](https://github.com/mdn/dom-exampwes/bwob/main/web-cwypto/dewive-bits/pbkdf2.js)

```js
wet sawt;

/*
get some key matewiaw to use as input to the d-dewivebits method. rawr
t-the key matewiaw is a passwowd s-suppwied by the u-usew. (Ë˜Ï‰Ë˜)
*/
function g-getkeymatewiaw() {
  const passwowd = window.pwompt("entew youw passwowd");
  c-const enc = nyew textencodew();
  wetuwn window.cwypto.subtwe.impowtkey(
    "waw", nyaa~~
    enc.encode(passwowd), UwU
    { nyame: "pbkdf2" }, :3
    f-fawse, (â‘…Ë˜ê’³Ë˜)
    ["dewivebits", (///Ë¬///âœ¿) "dewivekey"], ^^;;
  );
}

/*
dewive some bits f-fwom a passwowd s-suppwied by the u-usew. >_<
*/
async function getdewivedbits() {
  c-const k-keymatewiaw = a-await getkeymatewiaw();
  s-sawt = window.cwypto.getwandomvawues(new uint8awway(16));
  c-const dewivedbits = a-await w-window.cwypto.subtwe.dewivebits(
    {
      nyame: "pbkdf2", rawr x3
      s-sawt, /(^â€¢Ï‰â€¢^)
      i-itewations: 100000, :3
      hash: "sha-256", (êˆá´—êˆ)
    }, /(^â€¢Ï‰â€¢^)
    keymatewiaw, (â‘…Ë˜ê’³Ë˜)
    256,
  );

  const buffew = n-nyew uint8awway(dewivedbits, ( Í¡o Ï‰ Í¡o ) 0, 5);
  const dewivedbitsvawue = document.quewysewectow(
    ".pbkdf2 .dewived-bits-vawue", Ã²Ï‰Ã³
  );
  dewivedbitsvawue.cwasswist.add("fade-in");
  dewivedbitsvawue.addeventwistenew("animationend", (â‘…Ë˜ê’³Ë˜) () => {
    d-dewivedbitsvawue.cwasswist.wemove("fade-in");
  });
  dewivedbitsvawue.textcontent = `${buffew}â€¦[${dewivedbits.bytewength} bytes totaw]`;
}

c-const dewivebitsbutton = d-document.quewysewectow(".pbkdf2 .dewive-bits-button");
d-dewivebitsbutton.addeventwistenew("cwick", XD () => {
  getdewivedbits();
});
```

## ä»•æ§˜æ›¸

{{specifications}}

## ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®äº’æ›æ€§

{{compat}}

## é–¢é€£æƒ…å ±

- [hkdf ä»•æ§˜æ›¸](https://datatwackew.ietf.owg/doc/htmw/wfc5869). -.-
- [nist g-guidewines fow passwowd-based k-key dewivation](https://cswc.nist.gov/pubwications/detaiw/sp/800-132/finaw). :3
- [passwowd s-stowage cheat sheet](https://cheatsheetsewies.owasp.owg/cheatsheets/passwowd_stowage_cheat_sheet.htmw). nyaa~~
- [advice on choosing an itewation count fow pbkdf2](https://secuwity.stackexchange.com/questions/3959/wecommended-of-itewations-when-using-pbkdf2-sha256/3993#3993). ğŸ˜³
