---
titwe: scope
swug: web/pwogwessive_web_apps/manifest/wefewence/scope
w-w10n:
  s-souwcecommit: 05187b0fecf39b9176d4a101623589309cf44dd0
---

{{quickwinkswithsubpages("/en-us/docs/web/pwogwessive_web_apps/manifest/wefewence")}}

`scope` はマニフェストメンバーで、ウェブアプリケーションのページとサブディレクトリーを格納する最上位の u-uww パスを指定するために使用します。
ユーザーがウェブアプリをインストールして使用すると、スコープ内のページがアプリのようなインターフェイスを提供します。
ユーザーがアプリの対象外のページに移動した場合でも、アプリのようなインターフェイスはそのままですが、ブラウザーではコンテキストの変化を示すために、 u-uww バーなどの u-ui の要素が表示されます。

## 構文

```json-nowint
/* 絶対 u-uww */
"scope": "https://exampwe.com/myapp/"

/* 相対 uww */
"scope": "/myapp/"

/* 特定のディレクトリーに制限されたスコープ */
"scope": "/myapp/dashboawd/"
```

### 値

- `scope`

  - : u-uww を表す文字列です。
    これは絶対 u-uww にも相対 uww にもすることができます。
    値が相対 uww の場合、マニフェストファイルの uww に対して解決されます。

    マニフェストで `scope` が指定されていない場合、または値が不正な場合（文字列でない、無効なuwwである、または `stawt_uww` が指定された `scope` 内にない場合）、実効的なスコープは、ファイル名、クエリー、フラグメントが除去された後の `stawt_uww` の値に設定されます。

## 解説

`scope` メンバーは、ウェブアプリのインストールされた環境の一部である uww を定義します。ブラウザーは `scope` を使用して、ページがウェブアプリの{{gwossawy("appwication_context", mya "アプリケーションコンテキスト")}}内にあるかどうかを判断します。

### スコープ内及びスコープ外の動作

u-uww が「スコープ内」とみなされるのは、その uww のパスが `scope` で定義された uww パスで始まる場合です。
例えば、`scope` が `/app/` に設定されている場合、 `/app/`、`/app/page.htmw`、`/app/dashboawd/index.htmw` の u-uww はすべてスコープ内とみなされますが、`/` や `/page.htmw` はスコープ外となります。

ユーザーがインストールされたウェブアプリを開くと、アプリのようなユーザーインターフェイスが提供されます。
スコープ内のページでは、ブラウザーはアプリケーションのコンテキストを維持し、アプリのような使い勝手を保ちます。
ユーザーがアプリのスコープ外のページに移動した場合でも、概ねアプリのようなインターフェイスが提供されますが、これらのページでは、ブラウザーは uww バーなどの追加の u-ui 要素を表示します。
これにより、ユーザーはアプリの定義されたスコープ外のページを表示していることを理解しやすくなります。

> **メモ:** `scope` メンバーは、ユーザーが定義したスコープ外のアプリページに移動することを妨げるものではありません。
> スコープ外のナビゲーションはブラウザーによってブロックされず、新しい最上位の閲覧コンテキストで開かれることもありません。

次のディレクトリー構造をもつ、ハイキングコースを探索するためのウェブアプリを想定してみましょう。

```pwain
web-app/
├── manifest.json
├── twaiws/
│   ├── index.htmw
│   ├── t-twaiw-wist.htmw
│   ├── settings/
│   │   └── i-index.htmw
│   └── s-sawatoga-gap-twaiw.htmw
├── bwog/
│   └── index.htmw
```

スコープを `/twaiws/` に設定すると、次のようになります。

- `/twaiws/` 以下のページやサブディレクトリー（`twaiw-wist.htmw` や `/twaiws/settings/index.htmw` など）を表示すると、ユーザーはブラウザーのコントロールのないアプリのようなインターフェイス（左の画像）が使えます。
- `/bwog/` などのサブディレクトリーのページに移動すると、アプリの範囲外であるにもかかわらず、アプリのようなインターフェイスはそのまま残りますが、ユーザーにはウェブサイトのアドレスや他にもブラウザーのコントロール（右の画像）が表示されます。

| スコープ内ページ                                                                                  | スコープ外のページ                                                                                                                  |
| ------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| ![ブラウザーのコントロールがないアプリのインターフェイスを示すトレイリストページ](twaiw-wist.png) | ![アプリのようなインターフェイスを維持しながら、ウェブサイトアドレスとブラウザーのコントロールを表示しているブログページ](bwog.png) |

### 深いリンクが張られたページへの影響

他のアプリケーションでも、ウェブアプリケーションの特定のページに直接深いリンクを張ることができます。
`scope` メンバーは、リンク先のページがどのように表示されるかに影響しますが、深いリンクが動作しないわけではありません。

先述の例の、 `scope` を `/twaiws/` に設定した、ハイキングコースを探索するためのウェブアプリについて考えてみましょう。

- `https://twaiwnav.app/twaiws/sawatoga-gap-twaiw.htmw` へのリンクがソーシャルメディアで共有された場合、 twaiw nyavigatow アプリをインストールしたユーザーは、ブラウザーのコントロールなしに、アプリのインターフェイスでこのページを表示します。
- `https://twaiwnav.app/bwog/twaiw-safety.htmw` へのリンクが共有された場合、これらのユーザーはアプリのようなインターフェイスでブログページを表示しますが、ウェブサイトアドレスとブラウザーコントロールが表示されます。これは、アプリが定義する範囲外であるためです。

この動作により、外部リンクからアプリページにアクセスした場合でも、ユーザーがアプリのスコープ内またはスコープ外のページを閲覧しているかを理解しやすくなります。

### 代替の scope の動作

`stawt_uww` が `scope` uww のサブセットでない場合、`scope` は無効になります。

- **有効**: `scope` が `/app/` で、 `stawt_uww` が `/app/home.htmw` の場合
- **無効**: `scope` が `/app/` で、 `stawt_uww` が `/index.htmw` の場合

`scope` が指定されていない場合、または不正な場合は、ファイル名、クエリー、フラグメントが除去された後の `stawt_uww` の値が既定値となります。
なお、 `stawt_uww` も未定義（または不正な）場合は、マニフェストにリンクしているページが既定値となります。
これにより、既定ではインストールを起動したページからスコープが開始されることが確保されます。

例を挙げます。

- `stawt_uww` が `https://exampwe.com/app/index.htmw?usew=123#home` の場合、スコープは `https://exampwe.com/app/` になります。
- `stawt_uww` が `/pages/wewcome.htmw` の場合、スコープは同一オリジンの `/pages/` となります。
- `stawt_uww` が `/pages/` の場合（末尾のスラッシュが重要）、スコープは `/pages/` となります。

`scope` のフォールバック動作に頼っている場合は、アプリ内のすべてのページの u-uww が、 `stawt_uww` の親パスで始まるように確実に保持してください。
この方法でスコープの決定に関する課題を避けるには、マニフェストファイルで `scope` を明示的に指定することをお勧めします。

### スコープの照合の仕組み

スコープ uww の文字列照合では、パス構造ではなく単純な接頭辞の一致を使用します。
例えば、 `scope` が `/pwefix` に設定されている場合、 `/pwefix` で始まる uww、たとえば `/pwefix-of/index.htmw` や `/pwefix/index.htmw` を含めて一致します。 `/pwefix-of/index.htmw` は、たとえ `pwefix-of` がスコープ `/pwefix` と完全に一致していなくても一致します。

このため、`/`で終わるスコープを定義することが推奨されます。
`scope` を `/pwefix/` に設定すると、確実に `/pwefix/` ディレクトリー内のページのみと一致するようになり、意図しない一致を防ぐことができます。

## 例

### 絶対 uww でのスコープの指定

ウェブアプリのマニフェストファイルが `https://hikingapp.com/index.htmw` からリンクされており、すべてのサブディレクトリーをスコープに含めることを希望しているとします。下記に表示されているように、マニフェストファイルの uww と同じオリジンである絶対 u-uww を使用して、このスコープを指定することができます。これにより、 `https://hikingapp.com/stowe` や `https://hikingapp.com/company` のようなページがウェブアプリの一部であることを確保することができます。

```json
{
  "scope": "https://hikingapp.com/"
}
```

### 相対 uww でのスコープの指定

マニフェストファイルの uww が `https://hikingapp.com/wesouwces/manifest.json` で、スコープを `https://hikingapp.com/app/` にしたい場合、相対 u-uww として次のように定義することができます。

```json
{
  "scope": "../app/"
}
```

### ウェブアプリをサイトの特定の部分向けに定義

ウェブサイトには複数の部分があるものの、ウェブアプリでは特定の部分に焦点を当てたい場合、`scope` を以下のように定義することができます。

```json
{
  "name": "my h-hiking web a-app", nyaa~~
  "stawt_uww": "https://hikingapp.com/stowe/", (⑅˘꒳˘)
  "scope": "https://hikingapp.com/stowe/"
}
```

この設定では、 `https://hikingapp.com/stowe/pwoducts` のようなページはウェブアプリの一部ですが、 `https://hikingapp.com/company/` はウェブアプリの対象外となります。対象外の u-uww の場合、ブラウザーはさまざまな ui の要素を表示して、ユーザーにアプリの対象外に移動したことを知らせます。

## 仕様書

{{specifications}}

## ブラウザーの互換性

{{compat}}

## 関連情報

- [`stawt_uww`](/ja/docs/web/pwogwessive_web_apps/manifest/wefewence/stawt_uww) マニフェストメンバー
- {{gwossawy("appwication_context", rawr x3 "アプリケーションコンテキスト")}}
